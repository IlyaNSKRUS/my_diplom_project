/*! For license information please see yasp.js.LICENSE.txt */
!function(){function e(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}};return r[t].call(o.exports,o,o.exports,e),o.exports}var t,r={90541:function(e,t,r){"use strict";function n(e){return"number"===typeof e&&e===e}r.d(t,{hj:function(){return n}})},5923:function(e,t,r){"use strict";r.d(t,{H:function(){return n.H}});var n=r(79128)},29694:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{H:function(){return m}});var d=r(40313),p={},y=function(){},v=function(e){function t(e){var n;if(i(this,t),h(l(n=r.call(this)),"aborted",void 0),h(l(n),"reason",void 0),h(l(n),"_onabort",y),e!==p)throw new TypeError("Illegal constructor.");return n.aborted=!1,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e);var r=c(t);return a(t,[{key:"onabort",get:function(){return this._onabort},set:function(e){var t=this._onabort;t&&this.removeEventListener("abort",t),this._onabort=e,this.addEventListener("abort",e)}},{key:"throwIfAborted",value:function(){throw this.reason}}]),t}(d.Z),m=function(){function e(){i(this,e),h(this,"_signal",void 0),this._signal=new v(p)}return a(e,[{key:"signal",get:function(){return this._signal}},{key:"abort",value:function(e){var t=this.signal;t.aborted||(t.aborted=!0,t.reason=e,t.dispatchEvent(new Event("abort")))}}]),e}()},79128:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,{H:function(){return u}});var i=r(21658),o=r(29694),a="object"===("undefined"===typeof self?"undefined":n(self))?self:window,u=Boolean((0,i.Y)((function(){return new a.AbortController})))?a.AbortController:o.H},84119:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{f:function(){return s}});r(25443);var o=r(34204),a=r.n(o),u=r(99628),c=a().ru.yandex.videoplayer.multiplatform,s=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"fetchers",[]),i(this,"activeSources",new Set),i(this,"defaultEstimate",{value:NaN,source:"default"}),i(this,"mpBandwidthEstimator",void 0),i(this,"handleFetcherProgress",(function(e){var t=e.time,n=e.size;r.mpBandwidthEstimator.sample(t,n)})),i(this,"destroy",(function(){r.fetchers.forEach((function(e){e.off("Progress",r.handleFetcherProgress)})),r.fetchers.length=0})),t&&(this.defaultEstimate.value=t),this.mpBandwidthEstimator=new c.estimate.BandwidthEstimator(this.defaultEstimate.value)}var t,r,o;return t=e,o=[{key:"obtain",value:function(t){return e.instance||(e.instance=new e(t)),e.instance}}],(r=[{key:"addActiveSource",value:function(e){this.activeSources.add(e)}},{key:"removeActiveSource",value:function(e){this.activeSources.delete(e)}},{key:"getActiveSourcesCount",value:function(){return this.activeSources.size}},{key:"getBandwidthEstimate",value:function(){if((0,u.RW)("yasp_fair_bandwidth")){var e=this.getActiveSourcesCount();return{value:this.mpBandwidthEstimator.getBandwidthEstimate()/Math.max(e,1),source:this.mpBandwidthEstimator.hasGoodEstimate()?"ewma":this.defaultEstimate.source}}return{value:this.mpBandwidthEstimator.getBandwidthEstimate(),source:this.mpBandwidthEstimator.hasGoodEstimate()?"ewma":this.defaultEstimate.source}}},{key:"appendFetcher",value:function(e){e.on("Progress",this.handleFetcherProgress),this.fetchers.push(e)}},{key:"removeFetcher",value:function(e){e.off("Progress",this.handleFetcherProgress);for(var t=0;t<this.fetchers.length;t++)this.fetchers[t]===e&&(this.fetchers.splice(t,1),t--)}},{key:"setDefaultEstimate",value:function(e){this.defaultEstimate=e,this.mpBandwidthEstimator.setDefaultEstimate(e.value)}},{key:"getDebugInfo",value:function(){var e=this.getBandwidthEstimate();return{fetchersCount:this.fetchers.length,defaultEstimate:this.defaultEstimate,estimate:e.value,source:e.source}}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(s,"instance",void 0);a().ru.yandex.videoplayer.multiplatform},16258:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r.d(t,{M:function(){return l}});var l=function(e){function t(){return i(this,t),s.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var r,n,c,s=u(t);return r=t,(n=[{key:"destroy",value:function(){var e=this;this.emit("Destroy"),this.off("Destroy"),Object.keys(this.handlers).forEach((function(t){e.off(t)})),Object.keys(this.onceHandlers).forEach((function(t){e.off(t)}))}}])&&o(r.prototype,n),c&&o(r,c),Object.defineProperty(r,"prototype",{writable:!1}),t}(r(42630).v)},42630:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{v:function(){return o}});var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"handlers",Object.create(null)),i(this,"onceHandlers",Object.create(null)),i(this,"maxEventListeners",10)}var t,r,o;return t=e,(r=[{key:"setMaxListeners",value:function(e){!isFinite(e)||e<=0||(this.maxEventListeners=e)}},{key:"on",value:function(e,t){this.getHandlers(e).push(t),this.checkSubscriptions(e)}},{key:"once",value:function(e,t){this.getOnceHandlers(e).push(t),this.checkSubscriptions(e)}},{key:"off",value:function(e,t){var r=this.getHandlers(e),n=this.getOnceHandlers(e);if(void 0===t)return r.length=0,void(n.length=0);this.removeHandler(t,r),this.removeHandler(t,n)}},{key:"emit",value:function(e,t){var r=this.getHandlers(e),n=this.getOnceHandlers(e).slice();this.getOnceHandlers(e).length=0,r.slice().concat(n).forEach((function(e){try{e(t)}catch(r){setTimeout((function(){throw r}),0)}}))}},{key:"getHandlers",value:function(e){return void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e]}},{key:"getOnceHandlers",value:function(e){return void 0===this.onceHandlers[e]&&(this.onceHandlers[e]=[]),this.onceHandlers[e]}},{key:"checkSubscriptions",value:function(e){var t=this.getHandlers(e).length+this.getOnceHandlers(e).length;t>this.maxEventListeners&&console.warn("There are ".concat(t," subscriptions on event named ").concat(String(e)))}},{key:"removeHandler",value:function(e,t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}}])&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},99628:function(e,t,r){"use strict";r.d(t,{RW:function(){return n.RW},Vc:function(){return n.Vc},jS:function(){return n.jS},qm:function(){return n.qm},r0:function(){return n.r0},rg:function(){return n.rg}});var n=r(65875)},509:function(e,t,r){"use strict";function n(e){if(!l.flagsInited){l.flagsInited=!0,(0,o.H)();var t=(0,s.L)()||{},r=t.flags,n=t.slots,i=t.testids;(0,u.K)(r)&&(0,c.Y)((function(){(0,a.M)(r,(function(e,t){l.flags[t]=String(e)}))})),l.slots=void 0!==n?String(n):void 0,l.testids=Array.isArray(i)?i.join(","):void 0!==i?String(i):void 0,(0,u.K)(e)&&(0,u.K)(e.flags)&&(0,c.Y)((function(){(0,a.M)(e.flags,(function(e,t){l.flags[t]=String(e)}))}))}}r.d(t,{V:function(){return n}});var i=r(56761),o=r(67782),a=r(78490),u=r(34129),c=r(21658),s=r(65153),l=(0,i.r)()},92071:function(e,t,r){"use strict";r.d(t,{s:function(){return n}});var n="__UAAS_CONFIG_INLINE__"},95328:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var n=!1},56761:function(e,t,r){"use strict";function n(){return o}r.d(t,{r:function(){return n}});var i=(0,r(56559).I)();i.Ya||(i.Ya={}),i.Ya.streamPlayer||(i.Ya.streamPlayer={}),i.Ya.streamPlayer.exp||(i.Ya.streamPlayer.exp={});var o=i.Ya.streamPlayer.exp;o.flags||(o.flags={})},65153:function(e,t,r){"use strict";function n(){return(0,o.Y)((function(){var e=JSON.parse(a.s);return{flags:e.flags,testids:e.testids,slots:e.slots,vpuid:e.vpuid}}))||void 0}r.d(t,{L:function(){return u}});var i=r(80445),o=r(21658),a=r(92071),u=r(95328).T?n:(0,i.I)(n)},65875:function(e,t,r){"use strict";function n(){return l(),v.flags||{}}function i(e){var t=a(e);if("undefined"===typeof t){var r=y[e];if(p.T&&"undefined"===typeof r)throw new Error("Unexpected default value for string flag ".concat(e));return r}return t}function o(e){return"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0}function a(e){return l(e),v.flags[e]}function u(e){var t=o(a(e));if("undefined"===typeof t){var r=o(y[e]);if(p.T&&"undefined"===typeof r)throw new Error("Unexpected default value for boolean flag ".concat(e));return r}return t}function c(e){if("undefined"!==typeof e){var t=parseFloat(e);if((0,f.z)(t))return t}}function s(e){var t=c(a(e));if("undefined"===typeof t){var r=c(y[e]);if(p.T&&"undefined"===typeof r)throw new Error("Unexpected default value for numeric flag ".concat(e));return r}return t}function l(e){if(!v.flagsInited){var t=new Error(e?"Unexpected usage of player's flag ".concat(e," before any flag configuration"):"Unexpected usage of player's getFlagsJson before any flag configuration");setTimeout((function(){throw t}))}}r.d(t,{RW:function(){return u},Vc:function(){return h.V},jS:function(){return s},qm:function(){return n},r0:function(){return i},rg:function(){return d.r}});var f=r(8450),h=r(509),d=r(56761),p=r(95328),y="undefined"!==typeof{disable_multiplatform_interval_task:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_destroy_yasp_only_with_no_instances:"true",web_enable_telemetry_monotonic_timer:"false",web_ignore_render_stalled:"true",web_preload_drm:"false",web_skin_new_sub_style:"true",web_skin_slash_in_timedisplay:"false",web_skin_timedisplay_left:"false",web_userquality_ttl:"false",web_yasp_buffer_goal_bytes_size:"0",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"true",web_yasp_remove_abortuseless_source:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_time_to_start:"null",yasp_15_sec_live_offset:"false",yasp_abr_loading_segment:"false",yasp_body_timeout:"1000",yasp_enable_new_timeout:"false",yasp_fair_bandwidth:"false",yasp_headers_timeout:"5000",yasp_no_source_abort_on_fake_seek:"false",yasp_preload_content_5_sec_before_ad_end:"false",yasp_preload_content_5_sec_before_ad_skip:"false",yasp_videosegment_expected_load_time_multiplier:"1"}?{disable_multiplatform_interval_task:"false",web_debug_log_calls:"false",web_debug_log_events:"false",web_debug_log_internals:"false",web_debug_panel:"false",web_destroy_yasp_only_with_no_instances:"true",web_enable_telemetry_monotonic_timer:"false",web_ignore_render_stalled:"true",web_preload_drm:"false",web_skin_new_sub_style:"true",web_skin_slash_in_timedisplay:"false",web_skin_timedisplay_left:"false",web_userquality_ttl:"false",web_yasp_buffer_goal_bytes_size:"0",web_yasp_enable_network_traces:"false",web_yasp_enable_worker:"true",web_yasp_remove_abortuseless_source:"false",web_yasp_static_timeout_for_low_latency:"true",web_yasp_target_latency_debug:"-1",web_yasp_time_to_start:"null",yasp_15_sec_live_offset:"false",yasp_abr_loading_segment:"false",yasp_body_timeout:"1000",yasp_enable_new_timeout:"false",yasp_fair_bandwidth:"false",yasp_headers_timeout:"5000",yasp_no_source_abort_on_fake_seek:"false",yasp_preload_content_5_sec_before_ad_end:"false",yasp_preload_content_5_sec_before_ad_skip:"false",yasp_videosegment_expected_load_time_multiplier:"1"}:{},v=(0,d.r)()},67782:function(e,t,r){"use strict";function n(){var e,t=null===(e=(0,a.L)())||void 0===e?void 0:e.vpuid;if(t){var r=function(){try{var e;return null===(e=u.localStorage)||void 0===e?void 0:e.getItem(o.v)}catch(t){return null}}();if(!r||r!==t)try{var n;null===(n=u.localStorage)||void 0===n||n.setItem(o.v,String(t))}catch(i){}}}r.d(t,{H:function(){return n}});var i=r(56559),o=r(53605),a=r(65153),u=(0,i.I)()},56559:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){return"object"===("undefined"===typeof self?"undefined":n(self))?self:"object"===("undefined"===typeof window?"undefined":n(window))?window:globalThis}r.d(t,{I:function(){return i}})},49257:function(e,t,r){"use strict";function n(e){return e&&"function"===typeof e.catch&&e.catch((function(e){})),e}r.d(t,{v:function(){return n}})},78486:function(e,t,r){"use strict";r.d(t,{M:function(){return n.M}});var n=r(36102)},83434:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});var n=!(0,r(27794).t)(Math.random)||Math.random()===Math.random()},36102:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n=r(83434),i=r(28751),o=n.i?i.U:function(){return Math.random()}},28751:function(e,t,r){"use strict";function n(){return((o=16807*o%2147483647)-1)/2147483646}r.d(t,{U:function(){return n}});var i=r(44540),o=(0,i.m6)()*(0,i.no)()%2147483647},57740:function(e,t,r){"use strict";r.d(t,{t:function(){return n.t}});var n=r(83243)},83243:function(e,t,r){"use strict";r.d(t,{t:function(){return i}});var n=r(80604),i={getItem:function(e){try{return n.ZP.getItem(e)}catch(t){return null}},setItem:function(e,t){try{n.ZP.setItem(e,t)}catch(r){}},removeItem:function(e){try{n.ZP.removeItem(e)}catch(t){}},clear:function(){try{n.ZP.clear()}catch(e){}}}},44540:function(e,t,r){"use strict";r.d(t,{m6:function(){return n.m6},no:function(){return n.no}});var n=r(19726)},83100:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n={}.toString,i=/\[object (\w+)\]/,o=function(e){var t=n.call(e);if(!t)return null;var r=t.match(i);if(!r)return null;var o=r[1];return o||null}},19726:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m6:function(){return o},no:function(){return f}});r(25443);var i=r(83100),o=Date&&n(Date.now)?function(){return Date.now()}:function(){return(new Date).getTime()},a="undefined"===typeof window?void 0:window.performance,u=a&&n(a.now),c=a&&a.timing&&a.timing.navigationStart,s=a&&a.timeOrigin?a.timeOrigin:c?a.timing.navigationStart:o(),l=0,f=function(){return u?a.now():(e=o()-s,l=Math.max(e,l));var e}},21658:function(e,t,r){"use strict";function n(e,t){try{return e()}catch(r){"function"===typeof t&&t(r)}}r.d(t,{Y:function(){return n}})},92627:function(e,t,r){"use strict";r.d(t,{h:function(){return n}});var n=function(e,t,r){for(var n=[],i=0;i<e.length;i++){var o=e[i];t.call(r,o,i,e)&&n.push(o)}return n}},69864:function(e,t,r){"use strict";r.d(t,{s:function(){return o}});var n=r(27794),i=[].find,o=(0,n.t)(i)?function(e,t){return i.call(e,t)}:function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t(n,r,e))return n}}},61112:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return n((0,a.h)(e,(function(e){return void 0!==e})),1)[0]}r.d(t,{d:function(){return o}});var a=r(92627)},64059:function(e,t,r){"use strict";r.d(t,{k:function(){return o}});var n=r(19526),i=(0,r(36974).C)(Array,"isArray"),o=i?function(e){return i.call(Array,e)}:function(e){return"Array"===(0,n.M)(e)}},80445:function(e,t,r){"use strict";function n(e){var t=function(){var r;return t=function(){return r},r=e.apply(this,arguments)};return function(){return t.apply(this,arguments)}}r.d(t,{I:function(){return n}})},8450:function(e,t,r){"use strict";function n(e){return"number"===typeof e&&isFinite(e)}r.d(t,{z:function(){return n}})},78490:function(e,t,r){"use strict";function n(e,t,r){for(var n in e)(0,i.n)(e,n)&&t.call(r,e[n],n,e)}r.d(t,{M:function(){return n}});var i=r(71920)},89273:function(e,t,r){"use strict";function n(e){return"function"===typeof Object.entries?Object.entries(e):(0,i.Z)(e).map((function(t){return[t,e[t]]}))}r.d(t,{J:function(){return n}});var i=r(48448)},48448:function(e,t,r){"use strict";function n(e){if("function"===typeof Object.keys)return Object.keys(e);var t=[];for(var r in e)(0,i.n)(e,r)&&t.push(r);return t}r.d(t,{Z:function(){return n}});var i=r(71920)},86589:function(e,t,r){"use strict";function n(e){var t=Object.values;if("function"===typeof t)return t(e);var r=[];for(var n in e)(0,i.n)(e,n)&&r.push(e[n]);return r}r.d(t,{z:function(){return n}});var i=r(71920)},71920:function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.d(t,{n:function(){return n}})},34129:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){var t=n(e);return Boolean(e)&&("object"===t||"function"===t)}r.d(t,{K:function(){return i}})},66696:function(e,t,r){"use strict";function n(e){return"string"===typeof e}r.d(t,{H:function(){return n}})},19526:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});var n={}.toString,i=/\[object (\w+)\]/,o=function(e){var t=n.call(e);if(!t)return null;var r=t.match(i);if(!r)return null;var o=r[1];return o||null}},36974:function(e,t,r){"use strict";function n(e,t){var r=e[t];if(!(0,i.t)(r)){var n=r;try{delete e[t];var o=e[t];"function"===typeof o&&(r=o),e[t]=n}catch(a){}}return r}r.d(t,{C:function(){return n}});var i=r(27794)},24611:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.no,t=e();return function(){return Math.max(0,e()-t)}}r.d(t,{u:function(){return n}});var i=r(44540);r(25443)},27794:function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;var r=t?Function.prototype.toString.call(e):e.toString?e.toString():"";return/\[native code\]/.test(r)||/\/\* source code not available \*\//.test(r)}r.d(t,{t:function(){return n}})},53605:function(e,t,r){"use strict";r.d(t,{v:function(){return n.v}});var n=r(37309)},54685:function(e,t,r){"use strict";r.d(t,{v:function(){return n}});var n="vpuid"},70849:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=10},72392:function(e,t,r){"use strict";r.d(t,{x:function(){return n}});var n="__VPUID_INLINE__"},20029:function(e,t,r){"use strict";function n(){for(var e=[],t=0;t<o.j;t++)e.push(a[Math.floor((0,i.M)()*a.length)]);return e.join("")}r.d(t,{L:function(){return n}});var i=r(78486),o=r(70849),a="qwertyuiopasdfghjklzxcvbnm0123456789"},12396:function(e,t,r){"use strict";function n(){return o.t.getItem(i.v)}r.d(t,{j:function(){return n}});var i=r(54685),o=r(57740)},37309:function(e,t,r){"use strict";r.d(t,{v:function(){return s.v}});var n,i=r(39862),o=r(72392),a=r(12396),u=r(20029),c=r(42348),s=r(54685),l=(0,i.M)()?o.x:null!==(n=(0,a.j)())&&void 0!==n?n:(0,u.L)();(0,c.i)(l)},39862:function(e,t,r){"use strict";function n(){return-1===i.x.indexOf("__VPUID")}r.d(t,{M:function(){return n}});var i=r(72392)},42348:function(e,t,r){"use strict";function n(e){o.t.setItem(i.v,e)}r.d(t,{i:function(){return n}});var i=r(54685),o=r(57740)},2428:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{var t=e.navigator||{};return t.userAgent||""}catch(r){return""}}r.d(t,{i:function(){return n}})},20809:function(e,t,r){"use strict";r.d(t,{N:function(){return o}});var n=r(7507),i=r.n(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=i()(e);return"boolean"===typeof t?-1:t}},36570:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.navigator.userAgent.toLowerCase();return/ipad|iphone|ipod/.test(t)&&!e.MSStream&&!i(e)}r.d(t,{P:function(){return n}});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return e.navigator.userAgent.indexOf("UCBrowser")>-1}},6437:function(e,t,r){"use strict";r.d(t,{B:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e).toLowerCase();if(t.indexOf("android")>-1)return!1;var r=t.replace(/\(.+?\)/gi,"").split(" ").map((function(e){return e.trim().split("/")[0]})).filter((function(e){return e&&"mobile"!==e}));return 4===r.length&&"mozilla"===r[0]&&"applewebkit"===r[1]&&"version"===r[2]&&"safari"===r[3]}},15699:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return/Apple/.test(e.navigator.vendor)&&(0,o.b)(e)}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return(0,u.B)(e)||(0,a.P)(e)||n(e)}r.d(t,{z:function(){return i}});var o=r(20724),a=r(36570),u=r(6437)},44885:function(e,t,r){"use strict";r.d(t,{y:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("Tizen")}},20724:function(e,t,r){"use strict";function n(e){var t=e.DocumentTouch;return Boolean(t)&&e.document instanceof t}function i(e){return"ontouchstart"in e}function o(e){return function(e){return Boolean(e.PointerEvent)}(e)&&function(e){var t=e.navigator||{},r=t.msMaxTouchPoints,n=t.maxTouchPoints;return r||n||0}(e)>0&&!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return(0,l.N)(e)>11}(e)}function a(e,t){if(!(0,h.m)(e.matchMedia))return!1;var r=e.matchMedia(t);return(0,d.K)(r)&&Boolean(r.matches)}function u(e){return a(e,p)}function c(e){return a(e,y)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return o(e)||u(e)||c(e)||n(e)||i(e)}r.d(t,{b:function(){return s}});var l=r(20809),f=["","-webkit-","-ms-","-moz-","-o-"],h=r(69780),d=r(34129),p=f.map((function(e){return"(".concat(e,"any-pointer:coarse)")})).join(","),y=f.map((function(e){return"(".concat(e,"touch-enabled)")})).join(",")},85348:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("VIDAA")||t.includes("Hisense")}},12917:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});var n=r(2428),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,n.i)(e);return t.includes("Web0S")}},31969:function(e,t,r){"use strict";var n;r.d(t,{D:function(){return n}}),function(e){e.LIVE="LIVE",e.EVENT="EVENT",e.VOD="VOD"}(n||(n={}))},62058:function(e,t,r){"use strict";r.d(t,{j:function(){return n}});var n=new RegExp("^https?:\\/\\/([^\\/]+\\.)?"+"(".concat(["(an|strm)\\.yandex\\.(ru|net)","yastatic\\.net","strm-ott\\.akamaized\\.net","cdn\\.ngenix\\.net","strm\\.yandex\\.cdnga\\.net","strm-yandex\\.gcdn\\.co","(widevine|playready|fairplay)-proxy\\.ott\\.yandex\\.ru","drm\\.yandex-team\\.ru"].join("|"),")")+"\\/(?!log|perf|jstracer)")},7312:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t,r,n,i;return null!==(t=null===(r=e.performance)||void 0===r?void 0:r.timeOrigin)&&void 0!==t?t:null===(n=e.performance)||void 0===n||null===(i=n.timing)||void 0===i?void 0:i.navigationStart}r.d(t,{$:function(){return h}});r(25443);var c=r(26174),s=r(41682),l=r(62058),f=r(44540),h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,a(this,"intervalId",void 0),a(this,"contexts",[])}var t,r,i;return t=e,(r=[{key:"attach",value:function(e){var t=this;(0,s.B)(e)&&-1===this.contexts.indexOf(e)&&(0===this.contexts.length&&(this.intervalId=setInterval((function(){return t.flush()}),3e4)),this.contexts.push(e))}},{key:"detach",value:function(e){var t=this.contexts.indexOf(e);-1!==t&&this.contexts.splice(t,1),0===this.contexts.length&&clearInterval(this.intervalId)}},{key:"destroy",value:function(){this.flush(),this.contexts.length=0,clearInterval(this.intervalId)}},{key:"flush",value:function(){var e=[],t=this.contexts.map(u),r=Math.min.apply(Math,n(t));this.contexts.forEach((function(n,i){(function(e){try{var t,r,n=null!==(t=e.performance.getEntriesByType)&&void 0!==t?t:e.performance.webkitGetEntriesByType,i=null!==(r=e.performance.clearResourceTimings)&&void 0!==r?r:e.performance.webkitClearResourceTimings,o=n.call(e.performance,"resource");return i.call(e.performance),o}catch(a){return[]}})(n).forEach((function(n){l.j.test(n.name)&&e.push((0,c.I)(n,t[i],r))}))})),0!==e.length&&this.config.sendLog(e,{perfnow:String((0,f.m6)()),navstart:String(r)})}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},41682:function(e,t,r){"use strict";function n(e){return e.performance&&((0,i.m)(e.performance.getEntriesByType)||(0,i.m)(e.performance.webkitGetEntriesByType))&&((0,i.m)(e.performance.clearResourceTimings)||(0,i.m)(e.performance.webkitClearResourceTimings))}r.d(t,{B:function(){return n}});var i=r(93671)},26174:function(e,t,r){"use strict";function n(e,t,r){return e&&"number"===typeof e?e+t-r:e}function i(e,t,r){var i=e.duration,o=e.entryType,a=e.name,u=e.startTime,c=e.connectEnd,s=e.connectStart,l=e.decodedBodySize,f=e.domainLookupEnd,h=e.domainLookupStart,d=e.encodedBodySize,p=e.fetchStart,y=e.initiatorType,v=e.nextHopProtocol,m=e.redirectEnd,g=e.redirectStart,b=e.requestStart,w=e.responseEnd,_=e.responseStart,E=e.secureConnectionStart,O=e.transferSize,S=e.workerStart,k=e.serverTiming,T=e.responseStatus,R=e.deliveryType,x=e.renderBlockingStatus,P=e.firstInterimResponseStart;return{duration:i,entryType:o,name:a,encodedBodySize:d,decodedBodySize:l,initiatorType:y,transferSize:O,nextHopProtocol:v,serverTiming:k,responseStatus:T,deliveryType:R,renderBlockingStatus:x,startTime:n(u,t,r),connectEnd:n(c,t,r),connectStart:n(s,t,r),domainLookupEnd:n(f,t,r),domainLookupStart:n(h,t,r),fetchStart:n(p,t,r),redirectEnd:n(m,t,r),redirectStart:n(g,t,r),requestStart:n(b,t,r),responseEnd:n(w,t,r),responseStart:n(_,t,r),secureConnectionStart:n(E,t,r),workerStart:n(S,t,r),firstInterimResponseStart:n(P,t,r)}}r.d(t,{I:function(){return i}})},63440:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{p:function(){return u}});r(25443);var o=r(173),a=r(24611),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"lastUpdate",void 0),i(this,"watchedTime",0)}var t,r,u;return t=e,(r=[{key:"calc",value:function(e,t,r){if(void 0!==this.lastUpdate){var n=(e-this.lastUpdate.videoTime)/t,i=(0,o.G)(n,this.lastUpdate.getElapsedTime()/1e3);this.watchedTime=this.watchedTime+i}this.lastUpdate=r?{getElapsedTime:(0,a.u)(),videoTime:e}:void 0}},{key:"get",value:function(){return this.watchedTime}},{key:"restoreLastUpdate",value:function(){this.lastUpdate=void 0}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},173:function(e,t,r){"use strict";function n(e,t){var r=e>=0&&e<=t+.5?e:t;return Math.max(0,r)}r.d(t,{G:function(){return n}});r(25443)},20348:function(e,t,r){"use strict";function n(e){for(var t="",r=0;r<e;r++)t+=(16*(0,i.M)()|0).toString(16);return t}r.d(t,{a:function(){return n}});var i=r(78486)},93671:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:function(){return n}});var i=r(19526)},20290:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},84780:function(e,t,r){"use strict";function n(e){setTimeout((function(){throw e}),0)}r.d(t,{L:function(){return n}})},41925:function(e,t,r){"use strict";r.d(t,{R:function(){return n}});r(25443);var n=function(e){return null===e?1/0:void 0===e?1280:e}},32890:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var n="source_index"},14538:function(e,t,r){"use strict";function n(e){function t(){if(0!==o.length){var e=o.slice();o.length=0,e.forEach((function(e){var t=e.task,i=e.onPromiseReject;if(u)i(n);else try{t(r)}catch(o){}})),o.length>0&&t()}}var r,n,o=[],a=!1,u=!1;return e.then((function(e){r=e,a=!0,t()})),e.catch((function(e){n=e,u=!0,t()})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Z;if(u)t(n);else if(!a||o.length>0)o.push({task:e,onPromiseReject:t});else try{e(r)}catch(c){}}}r.d(t,{P:function(){return n}});var i=r(69497)},15168:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"===typeof Map?new Map:void 0;return(c=function(e){function r(){return s(e,arguments,h(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,e)})(e)}function s(e,t,r){return(s=l()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&f(i,r.prototype),i}).apply(null,arguments)}function l(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){var t=e.url,r=e.line,n=e.col,i=e.fileName,o=e.columnNumber,a=e.lineNumber;return"".concat(t||i||"?",":").concat(r||a||"?",":").concat(n||o||"?")}r.d(t,{s:function(){return b}});var y=r(14381),v=r(61112),m=r(49607),g=r(93559),b=function(e){function t(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t);var a="object"===n(e)?e:{message:String(e||m.J.message)};d(u(r=_.call(this)),"message",void 0),d(u(r),"code",void 0),d(u(r),"category",void 0),d(u(r),"isFatal",void 0),d(u(r),"details",void 0),d(u(r),"stack",void 0),d(u(r),"toString",void 0),d(u(r),"toJSON",void 0),g(u(r),t.prototype),r.message=i.message||a.message||m.J.message,r.code=i.code||a.code||a.id||m.J.code,r.category=i.category||a.category||m.J.category,r.isFatal=Boolean((0,v.d)([i.isFatal,a.isFatal,m.J.isFatal])),r.details=i.details||a.details||m.J.details,Object.defineProperty(u(r),"stack",{enumerable:!0});var c=i.stack||a.stack||p(a),s=c===m.J.stack?r.stack:c;if(s&&s!==m.J.stack)r.stack=s;else if(!r.stack)try{throw new Error(r.message)}catch(l){r.stack=s=l.stack||m.J.stack}return r.toString=function(){return(0,y.Y)(r.toJSON())||"{}"},r.toJSON=function(){return{message:r.message,code:r.code,isFatal:r.isFatal,details:r.details,category:r.category,stack:s}},r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var r,c,s,b,w,_=(r=t,c=l(),function(){var e,t=h(r);if(c){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});return s=t,b&&i(s.prototype,b),w&&i(s,w),Object.defineProperty(s,"prototype",{writable:!1}),s}(c(Error))},49607:function(e,t,r){"use strict";r.d(t,{J:function(){return n}});var n={message:"DEFAULT_ERROR_MESSAGE",code:0,details:"",stack:"?:?:?",isFatal:!0,category:"DEFAULT"}},95594:function(e,t,r){"use strict";function n(e){var t=e.map((function(e){return{start:e.start,end:e.end}})).sort((function(e,t){return e.start-t.start}));if(t.length<=1)return t;var r=[t[0]];return t.slice(1).forEach((function(e,t){var n=r[r.length-1];n.end<e.start?r.push(e):n.end<e.end&&(n.end=e.end)})),r}r.d(t,{l:function(){return n}})},17986:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.SourceBuffer||e.WebKitSourceBuffer;if(!t)return!1;var r=t.prototype&&(0,o.m)(t.prototype.appendBuffer)&&(0,o.m)(t.prototype.remove);return!r}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.ManagedMediaSource||e.MediaSource||e.WebKitMediaSource;return t&&(0,o.m)(t.isTypeSupported)&&!n(e)?t:void 0}r.d(t,{Q:function(){return i}});var o=r(69780)},36714:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var n=Number.EPSILON||Math.pow(2,-52)},6005:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,i){var u=function(e){var t=!1,r=!1,i=!1;return!0===e?t=!0:"object"===n(e)&&(t=Boolean(e.capture),r=Boolean(e.passive),i=Boolean(e.once)),{capture:t,passive:r,once:i}}(i),c=a.FF?u:u.capture,s=u.once&&!a.vE?function(e){l(),r.call(this,e)}:r,l=function(){(0,o.f)(e,t,s,c)};return(0,o.h)(e,t,s,c),l}r.d(t,{O:function(){return i}});var o=r(50066),a=r(85089)},50066:function(e,t,r){"use strict";r.d(t,{f:function(){return a},h:function(){return o}});var n=r(36974),i=r(69780),o=function(e,t,r){(0,i.m)(e.attachEvent)&&e.attachEvent("on"+t,r)},a=function(e,t,r){(0,i.m)(e.detachEvent)&&e.detachEvent("on"+t,r)};(0,n.C)(EventTarget.prototype,"addEventListener")&&(0,n.C)(EventTarget.prototype,"removeEventListener")&&(o=function(e,t,r,i){var o=e&&(0,n.C)(e,"addEventListener");o&&o.call(e,t,r,i)},a=function(e,t,r,i){var o=e&&(0,n.C)(e,"removeEventListener");o&&o.call(e,t,r,i)})},85089:function(e,t,r){"use strict";r.d(t,{FF:function(){return a},vE:function(){return o}});var n=r(10525),i=r(50066),o=!1,a=!1;try{if(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.Object;try{var r={};return t.defineProperty(r,"sentinel",{}),"sentinel"in r}catch(n){return!1}}()){var u=document.createElement("div"),c={};Object.defineProperty(c,"once",{get:function(){return o=!0}}),Object.defineProperty(c,"passive",{get:function(){return!0}}),Object.defineProperty(c,"capture",{get:function(){return a=!0}}),(0,i.h)(u,"click",n.Z,c)}}catch(s){}},83237:function(e,t,r){"use strict";function n(e){return e instanceof Error||"Error"===(0,i.M)(e)}r.d(t,{V:function(){return n}});var i=r(19526)},69780:function(e,t,r){"use strict";function n(e){return"function"===typeof e||"Function"===(0,i.M)(e)}r.d(t,{m:function(){return n}});var i=r(19526)},29015:function(e,t,r){"use strict";function n(e){if(!e)return[];for(var t=[],r=0;r<e.length;r++)t.push(e[r]);return t}r.d(t,{w:function(){return n}})},58828:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=e.method,r=e.url,n=e.async,o=void 0===n||n,l=e.data,f=e.responseType,h=void 0===f?"text":f,d=e.onBeforeSend,p=void 0===d?c.Z:d,y=e.onRetry,v=void 0===y?c.Z:y,m=e.checkStatus,g=void 0===m?function(e){return 200===e}:m,b=e.headers,w=void 0===b?{}:b,_=e.xhrConstructor,E=void 0===_?XMLHttpRequest:_,O=e.retries,S=void 0===O?0:O,k=e.timeout,T=void 0===k?0:k,R=e.withCredentials,x=e.onAbort,P=e.onSetup;if(E){var j,A=e.onSuccess?(0,u.I)(e.onSuccess):c.Z,L=e.onError?(0,u.I)(e.onError):c.Z,I=!1,D=0,N=function(e){I=!0,N=c.Z,j=e,M(new Error("Abort request")),"function"===typeof x&&x(e)},M=function(t){if(C.onerror=null,C.onreadystatechange=null,D&&clearTimeout(D),D&&4!==C.readyState||I)try{C.abort()}catch(n){}if(!I)if(S>0){var r=v(t,C);if("boolean"!==typeof r||r||N(),I)return;a(i(i({},e),{},{onSetup:function(e){var t=e.abort;N=function(e){return t(e)},I&&t(j)},retries:S-1}))}else N=c.Z,L(t,C)},C=new E;try{C.open(t,r,o)}catch(F){return void M(F)}if(C.responseType=h,C.withCredentials=Boolean(R),(0,s.M)(w,(function(e,t){try{C.setRequestHeader(t,e)}catch(F){}})),T>0&&isFinite(T)&&(D=window.setTimeout((function(){M(new Error("Request timeout, ".concat(r)))}),T)),C.onerror=M,C.onreadystatechange=function(){if(4===C.readyState){var e=C.status;g(e)?(N=c.Z,clearTimeout(D),A(C)):M(new Error("Invalid request status ".concat(e,", ").concat(r)))}},("function"!==typeof P||(P({abort:function(e){return N(e)}}),!I))&&(p(C,e),!I))try{C.send(l)}catch(F){M(F)}}}r.d(t,{W:function(){return a}});var u=r(80445),c=r(10525),s=r(78490)},41224:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return new c((function(t,r){(0,u.W)(i(i({},e),{},{onSuccess:t,onError:r}))}))}r.d(t,{W:function(){return a}});var u=r(58828),c=r(83361)},10525:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},71377:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new p(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=f(u,n);if(c){if(c===S)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===S)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function u(){}function c(){}function s(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function l(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&b.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function f(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,f(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,S;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,S):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function y(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:v}}function v(){return{value:void 0,done:!0}}i=function(){return m};var m={},g=Object.prototype,b=g.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",E=w.asyncIterator||"@@asyncIterator",O=w.toStringTag||"@@toStringTag";try{e({},"")}catch(P){e=function(e,t,r){return e[t]=r}}m.wrap=t;var S={},k={};e(k,_,(function(){return this}));var T=Object.getPrototypeOf,R=T&&T(T(y([])));R&&R!==g&&b.call(R,_)&&(k=R);var x=c.prototype=o.prototype=Object.create(k);return u.prototype=c,e(x,"constructor",c),e(c,"constructor",u),u.displayName=e(c,O,"GeneratorFunction"),m.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===u||"GeneratorFunction"===(t.displayName||t.name))},m.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,e(t,O,"GeneratorFunction")),t.prototype=Object.create(x),t},m.awrap=function(e){return{__await:e}},s(l.prototype),e(l.prototype,E,(function(){return this})),m.AsyncIterator=l,m.async=function(e,r,n,i,o){void 0===o&&(o=a);var u=new l(t(e,r,n,i),o);return m.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},s(x),e(x,O,"Generator"),e(x,_,(function(){return this})),e(x,"toString",(function(){return"[object Generator]"})),m.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},m.values=y,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),u=b.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:y(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),S}},m}function o(e,t,r,n,i,o,u){try{var c=e[o](u),s=c.value}catch(l){return void r(l)}c.done?t(s):a.resolve(s).then(n,i)}r.d(t,{_:function(){return u}});var a=r(83361),u=function(){var e,t=(e=i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new a((function(e,i){r&&r.then(e,i),n=window.setTimeout(e,t)}));case 3:return e.prev=3,window.clearTimeout(n),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})),function(){var t=this,r=arguments;return new a((function(n,i){function a(e){o(c,n,i,a,u,"next",e)}function u(e){o(c,n,i,a,u,"throw",e)}var c=e.apply(t,r);a(void 0)}))});return function(e,r){return t.apply(this,arguments)}}()},89225:function(e,t,r){"use strict";var n;r.d(t,{q:function(){return n}}),function(e){e.DEFAULT="DEFAULT",e.MEDIA="MEDIA",e.NETWORK_MEDIA="NETWORK_MEDIA",e.NETWORK_PLAYER="NETWORK_PLAYER",e.NETWORK_TIMEOUT="NETWORK_TIMEOUT",e.NO_CODECS="NO_CODECS",e.CANNOT_PLAY="CANNOT_PLAY",e.UNSUPPORTED_ENV="UNSUPPORTED_ENV",e.EXCEPTION="EXCEPTION",e.ADS="ADS",e.CONFIG="CONFIG",e.REGIONAL="REGIONAL",e.DRM="DRM",e.ACCESS="ACCESS",e.BANNED="BANNED"}(n||(n={}))},20989:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{B:function(){return c}});var a=r(69497),u=r(83361),c=i((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"resolve",void 0),o(this,"reject",void 0),o(this,"promise",void 0);var t=a.Z,r=a.Z;this.promise=new u((function(e,n){t=e,r=n})),this.resolve=t,this.reject=r}))},76741:function(e,t,r){"use strict";var n;r.d(t,{v:function(){return n}}),function(e){e[e.UNKNOWN_ERROR=0]="UNKNOWN_ERROR",e[e.PARSE_ERROR=-32700]="PARSE_ERROR",e[e.INVALID_REQUEST=-32600]="INVALID_REQUEST",e[e.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",e[e.INVALID_PARAMS=-32602]="INVALID_PARAMS",e[e.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"}(n||(n={}))},71416:function(e,t,r){"use strict";function n(e){return(0,i.H)(e.tagName)}r.d(t,{m:function(){return n}});var i=r(66696)},70619:function(e,t,r){"use strict";function n(e){return Object.prototype.toString.call(e)===i}r.d(t,{F:function(){return n},u:function(){return i}});var i="[object Window]"},14381:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return e+"/"+t}function o(e){if("string"===typeof e&&(e={message:e}),"object"===n(e)&&null!==e||(e={}),"function"===typeof e.toJSON)try{return{__stringifyError:e.toJSON()}}catch(r){}var t=e;return{__stringifyError:{name:t.name,message:t.message,stack:t.stack}}}function a(e,t,r,n){var o=c(e[t],i(r,t),n);return void 0===o?"null":o}function u(e){return JSON.stringify(e)}function c(e,t,r){switch(n(e)){case"boolean":return e?"true":"false";case"string":return u(e);case"undefined":return;case"bigint":return u(e.toString());case"function":var s="string"===typeof e.name&&e.name.length>0?" "+e.name:"";return u("[Function".concat(s,"]"));case"symbol":return u("[Symbol]");case"number":return isNaN(e)||!isFinite(e)?"null":String(e);case"object":if(null===e)return"null";if((0,h.F)(e))return u(h.u);if((0,f.m)(e))return u("[DOMNode ".concat(e.tagName,"]"));if((0,d.f)(e)){var l=e.constructor.name;return u("[".concat(l||"TypedArray","(").concat(e.byteLength||0,")]"))}var y=r.get(e);return void 0!==y?u("[Circular ".concat(y,"]")):(r.set(e,t),(0,p.k)(e)?function(e,t,r){if(0===e.length)return"[]";for(var n="["+a(e,0,t,r),i=1;i<e.length;i++)n+=","+a(e,i,t,r);return n+"]"}(e,t,r):function(e,t,r){if("function"===typeof e.toJSON){var n;try{n=e.toJSON()}catch(d){n=o(d)}return c(n,i(t,"toJSON"),r)}var a="{",s=!0;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var f=void 0;try{f=e[l]}catch(d){f=o(d)}var h=c(f,i(t,l),r);void 0!==h&&(s?s=!1:a+=",",a+=u(l)+":"+h)}return a+"}"}(e,t,r))}}function s(e){try{return c(e,"~",(t="undefined"!==typeof WeakMap?new WeakMap:void 0,r=[],{set:function(e,n){if(void 0!==t)try{t.set(e,n)}catch(i){r.push({path:n,value:e})}else r.push({path:n,value:e})},get:function(e){var n=(0,l.s)(r,(function(t){return t.value===e}));return void 0!==t&&void 0===n?t.get(e):n?n.path:void 0}}))}catch(n){return JSON.stringify(o(n))}var t,r}r.d(t,{Y:function(){return s}});var l=r(69864),f=r(71416),h=r(70619),d=r(39517),p=r(64059)},39517:function(e,t,r){"use strict";function n(e){return"undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}r.d(t,{f:function(){return n}})},69497:function(e,t,r){"use strict";function n(){}r.d(t,{Z:function(){return n}})},38378:function(e,t,r){"use strict";function n(e){var t=new a(e,location.origin),r=t.pathname||"";"/"!==r.charAt(0)&&(r="/".concat(r));var n=e.indexOf("?"),i=e.indexOf("#");return{originalPath:-1===n&&-1===i?e:-1===n?e.slice(0,i):-1===i?e.slice(0,n):e.slice(0,Math.min(n,i)),href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,pathname:r,search:t.search,hash:t.hash}}function i(e){return n(e).pathname.split("/").pop()||""}function o(e){var t=i(e).split(".");return t.length>1?t.pop():""}r.d(t,{UO:function(){return i},en:function(){return n},lm:function(){return o}});r(64059);var a=r(81917)},16566:function(e,t,r){"use strict";r.d(t,{UO:function(){return n.UO},en:function(){return n.en},lm:function(){return n.lm}});var n=r(38378);r(97578)},97578:function(e,t,r){"use strict";r(38378),r(81917)},69071:function(e,t,r){"use strict";function n(){function e(){return a.length<o}function t(){if(e()){var t=u.shift();t&&t()}}function r(e){function r(){a.splice(a.indexOf(n),1),t()}var n=e.then(r,r);return a.push(n),e}function n(t){return e()?r(t()):new i((function(e){u.push((function(){e(r(t()))}))}))}var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=[],u=[];return{waitAndLock:n,addLock:r,isFree:e}}r.d(t,{l:function(){return n}});var i=r(83361)},53396:function(e,t,r){"use strict";function n(e){for(var t=[],r=0;r<e.buffered.length;r++)try{t.push({start:e.buffered.start(r),end:e.buffered.end(r)})}catch(n){}return(0,i.l)(t)}r.d(t,{w:function(){return n}});var i=r(95594);r(25443)},82640:function(e,t,r){"use strict";r.d(t,{S:function(){return n}});r(25443);var n=1e6},89426:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});r(25443);var n=360},9140:function(e,t,r){"use strict";function n(e){var t=new i(e);return t.searchParams.set(o,String(Date.now())),t.href}r.d(t,{c:function(){return n},j:function(){return o}});var i=r(81917),o="t"},2445:function(e,t,r){"use strict";function n(e,t,r){var n=e.videoWidth,i=e.videoHeight,o=r.width,a=r.height;if(!n||!i)return{width:o,height:a};switch(t){case"none":return{width:n,height:i};case"cover":var u=Math.floor(i*o/n);return u>=a?{width:o,height:u}:{height:a,width:Math.floor(n*a/i)};case"contain":case"scale-down":var c=Math.floor(i*o/n);return c<=a?{width:o,height:c}:{height:a,width:Math.floor(n*a/i)};case"fill":default:return{width:o,height:a}}}r.d(t,{k:function(){return n}});r(25443)},35318:function(e,t,r){"use strict";r.d(t,{k:function(){return n}});r(57740),r(99628);var n={width:null,height:null,timestamp:null}},55502:function(e,t,r){"use strict";r.d(t,{d4:function(){return n}});r(25443);var n=8e3},47286:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var n=["strm.yandex.net","strm.yandex.ru","strm-ott.akamaized.net","media.strm.yandex.net","cdn.ngenix.net","streaming.tst.strm.yandex.net"]},88554:function(e,t,r){"use strict";r.d(t,{A:function(){return n}});var n="auto"},91595:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.navigator,r=t,n=r.connection,i=void 0===n?{}:n;return Boolean(i.saveData)}r.d(t,{R:function(){return n}})},3309:function(e,t,r){"use strict";r.d(t,{dn:function(){return o},ly:function(){return n},xE:function(){return i}});var n="com.widevine.alpha",i="com.microsoft.playready",o="org.w3.clearkey"},18535:function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.some((function(e){return e.keySystem===o.dn}));return a&&t}r.d(t,{b:function(){return n}});var i=r(15699),o=r(3309),a=(0,i.z)(self)},88218:function(e,t,r){"use strict";function n(e){try{return JSON.parse((new TextDecoder).decode(e)).keys.reduce((function(e,t){var r=t.key_id,n=t.key;return r&&n?(e[r]=n,e):e}),{})}catch(t){return null}}r.d(t,{N:function(){return n}})},33157:function(e,t,r){"use strict";function n(e){return void 0===e||"string"!==typeof e?"":function(e){try{var t=new a(e);return t.searchParams.delete(o.g),t.href}catch(r){return e}}(e).replace(/#.+$/,"")}function i(e){try{return new a(e).searchParams.get(o.g)}catch(t){return null}}r.d(t,{Hi:function(){return n},IN:function(){return i}});var o=r(32890),a=r(81917)},3498:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{I:function(){return o},K:function(){return u}});var o,a=r(48932);!function(e){e[e.BIG_ENDIAN=0]="BIG_ENDIAN",e[e.LITTLE_ENDIAN=1]="LITTLE_ENDIAN"}(o||(o={}));var u=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataView=t,i(this,"littleEndian",void 0),i(this,"position",0),this.littleEndian=r===o.LITTLE_ENDIAN}var t,r,u;return t=e,(r=[{key:"getDataView",value:function(){return this.dataView}},{key:"hasMoreData",value:function(){return this.position<this.dataView.byteLength}},{key:"getPosition",value:function(){return this.position}},{key:"getLength",value:function(){return this.dataView.byteLength}},{key:"readUint8",value:function(){try{var e=this.dataView.getUint8(this.position);return this.position+=1,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint16",value:function(){try{var e=this.dataView.getUint16(this.position,this.littleEndian);return this.position+=2,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint32",value:function(){try{var e=this.dataView.getUint32(this.position,this.littleEndian);return this.position+=4,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readInt32",value:function(){try{var e=this.dataView.getInt32(this.position,this.littleEndian);return this.position+=4,e}catch(t){throw this.throwOutOfBounds()}}},{key:"readUint64",value:function(){var e,t;try{this.littleEndian?(e=this.dataView.getUint32(this.position,!0),t=this.dataView.getUint32(this.position+4,!0)):(t=this.dataView.getUint32(this.position,!1),e=this.dataView.getUint32(this.position+4,!1))}catch(r){throw this.throwOutOfBounds()}if(t>2097151)throw new Error("JS_INTEGER_OVERFLOW");return this.position+=8,t*Math.pow(2,32)+e}},{key:"readBytes",value:function(e){this.position+e>this.dataView.byteLength&&this.throwOutOfBounds();var t=new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+this.position,e);return this.position+=e,t}},{key:"skip",value:function(e){if(this.position+e>this.dataView.byteLength)throw this.throwOutOfBounds();this.position+=e}},{key:"rewind",value:function(e){if(this.position<e)throw this.throwOutOfBounds();this.position-=e}},{key:"seek",value:function(e){if(e<0||e>this.dataView.byteLength)throw this.throwOutOfBounds();this.position=e}},{key:"readTerminatedString",value:function(){for(var e=this.position;this.hasMoreData()&&0!==this.dataView.getUint8(this.position);)this.position+=1;var t=new Uint8Array(this.dataView.buffer,this.dataView.byteOffset+e,this.position-e);return this.position+=1,a.x.fromUTF8(t)}},{key:"throwOutOfBounds",value:function(){return new Error("BUFFER_READ_OUT_OF_BOUNDS")}},{key:"readUUID",value:function(){var t=this.readBytes(16);return(e.byteToHex[t[0]]+e.byteToHex[t[1]]+e.byteToHex[t[2]]+e.byteToHex[t[3]]+"-"+e.byteToHex[t[4]]+e.byteToHex[t[5]]+"-"+e.byteToHex[t[6]]+e.byteToHex[t[7]]+"-"+e.byteToHex[t[8]]+e.byteToHex[t[9]]+"-"+e.byteToHex[t[10]]+e.byteToHex[t[11]]+e.byteToHex[t[12]]+e.byteToHex[t[13]]+e.byteToHex[t[14]]+e.byteToHex[t[15]]).toLowerCase()}},{key:"readString",value:function(e){if(this.position+e>this.getLength())throw new Error("Not enough bytes in buffer");for(var t="",r=0;r<e;r++)t+=String.fromCharCode(this.readUint8());return t}},{key:"readHex16",value:function(){for(var e="",t=0;t<16;t++){var r=this.readUint8().toString(16);e+=1===r.length?"0"+r:r}return e}},{key:"readUint8Array",value:function(e){for(var t=new Uint8Array(e),r=0;r<e;r++)t[r]=this.readUint8();return t}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}();i(u,"byteToHex",Array.from({length:256},(function(e,t){return(t+256).toString(16).substr(1)})))},40097:function(e,t,r){"use strict";r.d(t,{K:function(){return n}});var n=100},90973:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{p:function(){return u}});var o,a=r(3498);!function(e){e[e.BASIC_BOX=0]="BASIC_BOX",e[e.FULL_BOX=1]="FULL_BOX"}(o||(o={}));var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"headers",[]),i(this,"boxDefinitions",[]),i(this,"done",!1)}var t,r,u;return t=e,u=[{key:"children",value:function(e){for(var t=null!==e.flags?12:8;e.reader.hasMoreData()&&!e.parser.done;)e.parser.parseNext(e.start+t,e.reader,e.partialOkay)}},{key:"sampleDescription",value:function(e){for(var t=null!==e.flags?12:8,r=e.reader.readUint32();r>0&&!e.parser.done;r-=1)e.parser.parseNext(e.start+t,e.reader,e.partialOkay)}},{key:"allData",value:function(e){return function(t){var r=t.reader.getLength()-t.reader.getPosition();e(t.reader.readBytes(r))}}},{key:"typeFromString",value:function(e){for(var t=0,r=0;r<e.length;r++)t=t<<8|e.charCodeAt(r);return t}},{key:"typeToString",value:function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}},{key:"headerSize",value:function(e){return 8+(e.has64BitSize?8:0)+(null!==e.flags?4:0)}}],(r=[{key:"box",value:function(t,r){var n=e.typeFromString(t);return this.headers[n]=o.BASIC_BOX,this.boxDefinitions[n]=r,this}},{key:"fullBox",value:function(t,r){var n=e.typeFromString(t);return this.headers[n]=o.FULL_BOX,this.boxDefinitions[n]=r,this}},{key:"stop",value:function(){this.done=!0}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Uint8Array(e),i=new a.K(new DataView(n.buffer,n.byteOffset,n.byteLength),a.I.BIG_ENDIAN);for(this.done=!1;i.hasMoreData()&&!this.done;)this.parseNext(0,i,t,r)}},{key:"parseNext",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=r.getPosition(),c=!1;if(i&&u+8>r.getLength())this.done=!0;else{var s=r.readUint32(),l=r.readUint32();switch(s){case 0:s=r.getLength()-u;break;case 1:if(i&&r.getPosition()+8>r.getLength())return void(this.done=!0);s=r.readUint64(),c=!0}var f=this.boxDefinitions[l];if(f){var h=null,d=null;if(this.headers[l]===o.FULL_BOX){var p=r.readUint32();h=p>>>24,d=16777215&p}var y=u+s,v=!0;if(n&&y>r.getLength()&&(y=r.getLength(),v=!1),i&&y>r.getLength())return void(this.done=!0);var m=y-r.getPosition(),g=m>0?r.readBytes(m):new Uint8Array(0),b=new a.K(new DataView(g.buffer,g.byteOffset,g.byteLength),a.I.BIG_ENDIAN),w={parser:this,partialOkay:n||!1,version:h,flags:d,reader:b,size:s,loadedSize:r.getPosition()-u,start:u+t,isComplete:v,has64BitSize:c,type:e.typeToString(l)};f(w)}else{var _=Math.min(u+s-r.getPosition(),r.getLength()-r.getPosition());r.skip(_)}}}}])&&n(t.prototype,r),u&&n(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},33263:function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{d:function(){return u}});var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"buffer",[]),a(this,"head",0),a(this,"capacity",void 0),this.capacity=t}var t,r,i;return t=e,(r=[{key:"push",value:function(e){this.buffer.length<this.capacity?this.buffer.push(e):this.buffer[this.head]=e,this.head=(this.head+1)%this.capacity}},{key:"toArray",value:function(){return this.buffer.length<this.capacity?n(this.buffer):[].concat(n(this.buffer.slice(this.head)),n(this.buffer.slice(0,this.head)))}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},48932:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{x:function(){return u}});var i,o,a,u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i;return t=e,i=[{key:"fromUTF8",value:function(t){if(!t)return"";var r=new Uint8Array(t);239===r[0]&&187===r[1]&&191===r[2]&&(r=r.subarray(3));var n=e.fromCharCode(r),i=escape(n);try{return decodeURIComponent(i)}catch(o){throw new Error("BAD_ENCODING")}}},{key:"fromUTF16",value:function(t,r){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return"";if(!i&&t.byteLength%2!==0)throw new Error("BAD_ENCODING: Data has an incorrect length, must be even");if(t instanceof ArrayBuffer)n=t;else{var o=new Uint8Array(t.byteLength);o.set(new Uint8Array(t)),n=o.buffer}for(var a=Math.floor(t.byteLength/2),u=new Uint16Array(a),c=new DataView(n),s=0;s<a;s++)u[s]=c.getUint16(2*s,r);return e.fromCharCode(u)}},{key:"fromBytesAutoDetect",value:function(t){var r=new Uint8Array(t);if(239===r[0]&&187===r[1]&&191===r[2])return e.fromUTF8(r);if(254===r[0]&&255===r[1])return e.fromUTF16(r.subarray(2),!1);if(255===r[0]&&254===r[1])return e.fromUTF16(r.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||e[t]>=32&&e[t]<=126};if(0===r[0]&&0===r[2])return e.fromUTF16(t,!1);if(0===r[1]&&0===r[3])return e.fromUTF16(t,!0);if(n(r,0)&&n(r,1)&&n(r,2)&&n(r,3))return e.fromUTF8(t);throw new Error("UNABLE_TO_DETECT_ENCODING")}},{key:"toUTF8",value:function(e){for(var t=encodeURIComponent(e),r=unescape(t),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n.buffer}},{key:"toUTF16",value:function(e,t){for(var r=new Uint8Array(2*e.length),n=new DataView(r.buffer),i=0;i<e.length;++i){var o=e.charCodeAt(i);n.setUint16(2*i,o,t)}return r.buffer}},{key:"fromCharCode",value:function(t){if(!e.fromCharCodeImpl)for(var r=function(t){if(function(e){try{var t=new Uint8Array(e);return String.fromCharCode.apply(null,t).length>0}catch(r){return!1}}(t))return e.fromCharCodeImpl=function(e){for(var r="",n=0;n<e.length;n+=t){var i=e.subarray(n,n+t);r+=String.fromCharCode.apply(null,i)}return r},"break"},n=65536;n>0&&"break"!==r(n);n/=2);if(!e.fromCharCodeImpl)throw new Error("Unable to create a fromCharCode method");return e.fromCharCodeImpl(t)}},{key:"resetFromCharCode",value:function(){e.fromCharCodeImpl=null}}],(r=null)&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();a=null,(o="fromCharCodeImpl")in(i=u)?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a},19071:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}r.d(t,{P:function(){return o}});var i=r(48932),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,o;return t=e,o=[{key:"concat",value:function(){for(var e=0,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=0;i<r.length;++i)e+=r[i].length;for(var o=new Uint8Array(e),a=0,u=0;u<r.length;++u)o.set(r[u],a),a+=r[u].length;return o}},{key:"toHex",value:function(e){for(var t="",r=0;r<e.length;++r){var n=e[r].toString(16);1===n.length&&(n="0"+n),t+=n}return t}},{key:"fromHex",value:function(e){for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substr(r,2),16);return t}},{key:"toBase64",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=i.x.fromCharCode(e),n=btoa(r).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/=*$/,"")}},{key:"fromBase64",value:function(e){for(var t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}},{key:"equal",value:function(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}}],(r=null)&&n(t.prototype,r),o&&n(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},11312:function(e,t,r){"use strict";function n(e,t){return(0,i.V)(e,t,(function(e,t){return e-t}))}r.d(t,{U:function(){return n}});var i=r(28513)},28513:function(e,t,r){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r){if(!(e.length<1)){for(var i=n(e,1)[0],o=t(i),a=1;a<e.length;a++){var u=e[a],c=t(u);r(c,o)<0&&(i=u,o=c)}return i}}r.d(t,{V:function(){return o}})},82619:function(e,t,r){"use strict";function n(e){var t=(0,i.jS)("web_yasp_target_latency_debug");return-1===t?e:(0,o.z)(t)?t:e}r.d(t,{c:function(){return n}});r(25443);var i=r(99628),o=r(8450)},95542:function(e,t,r){"use strict";function n(){var e=(0,i.r0)("web_yasp_time_to_start");if(e&&"null"!==e){var t=parseFloat(e);return(0,o.z)(t)?t:void 0}}r.d(t,{p:function(){return n}});r(25443);var i=r(99628),o=r(8450)},47751:function(e,t,r){"use strict";function n(e){return new i((function(t){return setTimeout(t,e)}))}r.d(t,{_:function(){return n}});var i=r(83361)},41838:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var i=l(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{w:function(){return h}});var h=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=l.call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isFatal:!1},e),r),f(s(n),"category",void 0),f(s(n),"toJSON",void 0),n.category=(null===r||void 0===r?void 0:r.category)||e.category,n.toJSON=function(){return{message:n.message,code:n.code,isFatal:n.isFatal,details:n.details,stack:n.stack,category:n.category}},n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e);var r,n,c,l=u(t);return r=t,n&&o(r.prototype,n),c&&o(r,c),Object.defineProperty(r,"prototype",{writable:!1}),r}(r(15168).s)},67709:function(e,t,r){"use strict";r.d(t,{C:function(){return n}});r(25443);var n=1},77521:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=function(r){c.some((function(t){var n;return null!==(n=(0,u.Y)((function(){return e[r]instanceof t})))&&void 0!==n&&n}))?t.push(e[r]):null!==e[r]&&"object"===i(e[r])&&o(e[r],t)};for(var n in e)r(n);return t}r.d(t,{_:function(){return o}});var a,u=r(21658),c=function(e){if(Array.isArray(e))return n(e)}(a="undefined"!==typeof MediaSourceHandle?[MediaSourceHandle]:[])||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},89501:function(e,t,r){"use strict";function n(e){var t=e.id,r=e.method,n=e.params;return t?{jsonrpc:"2.0",id:t,method:r,params:n}:{jsonrpc:"2.0",method:r,params:n}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){if(!("params"in e))return[];if(Array.isArray(e.params))return e.params;if((0,U.K)(e.params))return e.params;throw new Error("Expect #params to be an array or an object if present in ".concat(JSON.stringify(e)))}function a(e){return u(e)}function u(e){if((0,B.z)(e.id)){if(Math.floor(e.id)!==e.id)throw new Error("Expect #id to be an integer if it's a number in ".concat(JSON.stringify(e)));return e.id}if((0,G.H)(e.id)||null===e.id)return e.id;throw new Error("Expect #id to be an integer, string or null (not recommended) in ".concat(JSON.stringify(e)))}function c(e){if(!("id"in e))throw new Error("Expect #id to present in rpc response ".concat(JSON.stringify(e)));return u(e)}function s(e){if("object"!==i(e.error)||null===e.error)throw new Error("Expect #error to be an object in ".concat(JSON.stringify(e)));var t=e.error;if(!(0,B.z)(t.code))throw new Error("Expect #error#code to be an number in ".concat(JSON.stringify(e)));if(!(0,G.H)(t.message))throw new Error("Expect #error#message to be an string in ".concat(JSON.stringify(e)));return"data"in t?{code:t.code,message:t.message,data:t.data}:{code:t.code,message:t.message}}function l(e){var t=function(e){if(!(0,U.K)(e))throw new Error("Can't parse \"".concat(e,'" as object'));return e}(e);if(!function(e){return"2.0"===e.jsonrpc}(t))throw new Error("Expect ".concat((0,H.Y)((function(){return JSON.stringify(e)}))||e," to be a json-rpc v2 message"));if((0,G.H)(t.method))return function(e){return"id"in e?{jsonrpc:e.jsonrpc,method:e.method,params:o(e),id:a(e)}:{jsonrpc:e.jsonrpc,method:e.method,params:o(e)}}(t);if("result"in t)return function(e){return{jsonrpc:e.jsonrpc,result:e.result,id:c(e)}}(t);if("error"in t)return function(e){return{jsonrpc:e.jsonrpc,error:s(e),id:c(e)}}(t);throw new Error("Expect ".concat((0,H.Y)((function(){return JSON.stringify(e)}))||e," to be a json-rpc v2 message"))}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var t="function"===typeof Map?new Map:void 0;return(v=function(e){function r(){return m(e,arguments,w(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),b(r,e)})(e)}function m(e,t,r){return(m=g()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&b(i,r.prototype),i}).apply(null,arguments)}function g(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e,t){return(b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(){return(S="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=k(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&("object"===E(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==L(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}I=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=X);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function D(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):X.resolve(c).then(n,i)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:function(){return J}});var B=r(8450),U=r(34129),G=r(66696),H=r(21658),V=r(76741),q=r(93559),Y=r.n(q),W=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V.v.UNKNOWN_ERROR,i=arguments.length>2?arguments[2]:void 0;return h(this,t),_(y(r=u.call(this,e)),"message",void 0),_(y(r),"stack",void 0),_(y(r),"toJSON",void 0),_(y(r),"code",void 0),Y()(y(r),t.prototype),r.message=e,r.code=n,r.stack=null!==i&&void 0!==i?i:r.stack,r.toJSON=function(){return{code:r.code,message:r.message,data:r.stack}},r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e);var r,n,i,o,a,u=(r=t,n=g(),function(){var e,t=w(r);if(n){var i=w(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return p(this,e)});return i=t,(o=[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}])&&d(i.prototype,o),a&&d(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}(v(Error)),z=(r(25443),r(16258)),K=r(69497),$=r(83361),Z=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(P(r=a.call(this)),"lastRpcRequestId",1),A(P(r),"waiters",Object.create(null)),A(P(r),"send",void 0),A(P(r),"onRun",void 0),A(P(r),"serialize",void 0),A(P(r),"deserialize",void 0),r.send=e.send,r.onRun=e.onRun,r.serialize=e.serialize,r.deserialize=e.deserialize,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e);var r,i,o,a=R(t);return r=t,(i=[{key:"destroy",value:function(){for(var e in S(j(t.prototype),"destroy",this).call(this),this.onRun=K.Z,this.waiters)this.waiters[e](new Error("Stop on destroy"))}},{key:"request",value:function(e){var t=e.method,r=e.params,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,o=this.getUniqueRpcRequestId();return this.sendMessage(n({id:o,method:t,params:r})),this.waitForResponse(o,i,t)}},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.sendMessage(n({method:t,params:r})),$.resolve()}},{key:"getUniqueRpcRequestId",value:function(){return String(this.lastRpcRequestId++)}},{key:"waitForResponse",value:function(e,t,r){var n=this,i=setTimeout((function(){var i=n.waiters[e];void 0!==i&&i(new Error("Timeout fired (".concat(t,"ms) on method ").concat(r," for id=").concat(e,".")))}),t);return new $((function(t,r){n.waiters[e]=function(o,a){return clearTimeout(i),delete n.waiters[e],null!==o?r(o):t(a)}}))}},{key:"sendMessage",value:function(e){this.send(this.serialize(e))}},{key:"handleRpcRequest",value:function(e){var t=this,r=e.id,n=e.method,i=e.params;this.onRun({method:n,params:i},(function(e,n){r&&t.sendMessage(function(e){var t=e.id,r=e.error,n=e.result;return r?{jsonrpc:"2.0",id:t,error:r.toJSON()}:{jsonrpc:"2.0",id:t,result:void 0===n?null:n}}({id:r,error:e,result:n}))}))}},{key:"handleRpcResponse",value:function(e){var t=this.waiters[e.id];void 0!==t?"error"in e?t(new W(e.error.message,e.error.code,"string"===typeof e.error.data?e.error.data:void 0)):t(null,e.result):this.emit("Warn",new Error("Response for missed waiter for id=".concat(JSON.stringify(e.id))))}},{key:"handleMessage",value:function(e){try{var t=l(this.deserialize(e));"result"in t||"error"in t?this.handleRpcResponse(t):"method"in t&&this.handleRpcRequest(t)}catch(r){this.emit("Error",r)}}}])&&O(r.prototype,i),o&&O(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(z.M),X=r(83361),J=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),F(this,"jsonRpcMessenger",void 0),F(this,"handlers",{}),F(this,"staticHandlers",{});var n=function(){var e,t=(e=I().mark((function e(t,n){var i,o,a,u,c,s,l,f,h,d,p,y,v,m,g;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.method in r.handlers||t.method in r.staticHandlers){e.next=2;break}return e.abrupt("return",n(new W("Unknown method: ".concat(t.method),V.v.METHOD_NOT_FOUND)));case 2:if(!r.handlers[t.method]){e.next=32;break}i=D(r.handlers[t.method]),e.prev=4,i.s();case 6:if((o=i.n()).done){e.next=24;break}return a=o.value,e.prev=8,e.next=11,a(t.params);case 11:if(u=e.sent,c=u.done,s=u.value,!c){e.next=16;break}return e.abrupt("return",n(null,s));case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(8),l=new W((0,U.K)(e.t0)?e.t0.message:"",V.v.INTERNAL_ERROR,(0,U.K)(e.t0)?e.t0.stack:""),e.abrupt("return",n(l));case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),i.e(e.t1);case 29:return e.prev=29,i.f(),e.finish(29);case 32:if(!r.staticHandlers[t.method]){e.next=66;break}f=!1,h=D(r.staticHandlers[t.method]),e.prev=35,h.s();case 37:if((d=h.n()).done){e.next=54;break}return p=d.value,e.prev=39,e.next=42,p(t.params);case 42:y=e.sent,v=y.done,m=y.value,v&&(f||(f=!0,n(null,m))),e.next=52;break;case 48:return e.prev=48,e.t2=e.catch(39),g=new W((0,U.K)(e.t2)?e.t2.message:"",V.v.INTERNAL_ERROR,(0,U.K)(e.t2)?e.t2.stack:""),e.abrupt("return",n(g));case 52:e.next=37;break;case 54:e.next=59;break;case 56:e.prev=56,e.t3=e.catch(35),h.e(e.t3);case 59:return e.prev=59,h.f(),e.finish(59);case 62:if(!f){e.next=64;break}return e.abrupt("return");case 64:e.next=66;break;case 66:return e.abrupt("return",n(new W("No handler for existed method: ".concat(t.method),V.v.INVALID_REQUEST)));case 67:case"end":return e.stop()}}),e,null,[[4,26,29,32],[8,18],[35,56,59,62],[39,48]])})),function(){var t=this,r=arguments;return new X((function(n,i){function o(e){M(u,n,i,o,a,"next",e)}function a(e){M(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))});return function(e,r){return t.apply(this,arguments)}}();this.jsonRpcMessenger=new Z({send:t,onRun:n,serialize:function(e){return e},deserialize:function(e){return e}}),this.jsonRpcMessenger.on("Warn",console.warn),this.jsonRpcMessenger.on("Error",console.error)}var t,r,n;return t=e,(r=[{key:"registerHandler",value:function(e,t){var r;this.handlers[e]=null!==(r=this.handlers[e])&&void 0!==r?r:[],this.handlers[e].push(t)}},{key:"registerStaticHandler",value:function(e,t){var r;this.staticHandlers[e]=null!==(r=this.staticHandlers[e])&&void 0!==r?r:[],this.staticHandlers[e].push(t)}},{key:"removeHandler",value:function(e,t){var r,n=D(["handlers","staticHandlers"]);try{for(n.s();!(r=n.n()).done;){var i=r.value;this[i][e]&&(this[i][e]=void 0===t?[]:this[i][e].filter((function(e){return e!==t})),0===this[i][e].length&&delete this[i][e])}}catch(o){n.e(o)}finally{n.f()}}},{key:"request",value:function(e){var t=e.method,r=e.params;return this.jsonRpcMessenger.request({method:String(t),params:r})}},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.jsonRpcMessenger.sendEvent({method:String(t),params:r})}},{key:"destroy",value:function(){this.jsonRpcMessenger.destroy()}},{key:"handleMessage",value:function(e){this.jsonRpcMessenger.handleMessage(e.data)}}])&&C(t.prototype,r),n&&C(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},17360:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(){return(s="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=l(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function f(e,t){return(f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===a(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e){var t,r=[],n=w(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push(i)}}catch(o){n.e(o)}finally{n.f()}return r}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var i=P(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return R(this,r)}}function R(e,t){if(t&&("object"===O(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){H(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(){return(N="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=M(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function M(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){if(t&&("object"===A(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(){return(z="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=K(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function K(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Q(e)););return e}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Q(e);if(t){var i=Q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return X(this,r)}}function X(e,t){if(t&&("object"===V(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t,r){return t&&ne(e.prototype,t),r&&ne(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t,r){return t&&ue(e.prototype,t),r&&ue(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(){return(le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fe(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=de(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||de(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){if(e){if("string"===typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ve(e){return e.replace(/&(amp|quot|apos|lt|gt);/g,(function(e,t){var r;return null!==(r=pl[t])&&void 0!==r?r:e}))}function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t,r){return t&&Oe(e.prototype,t),r&&Oe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ke(e,t){return(ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xe(e);if(t){var i=xe(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Re(this,r)}}function Re(e,t){if(t&&("object"===me(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e){var t=e.children.every((function(e){return"string"===typeof e})),r=t?e.children.join("\n"):"";return be(be({},e),{},{nodeType:t?3:1,textContent:r})}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return De(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return De(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e,t){return(Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Be(e);if(t){var i=Be(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Fe(this,r)}}function Fe(e,t){if(t&&("object"===Le(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(e,t){return(He=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=We(e);if(t){var i=We(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qe(this,r)}}function qe(e,t){if(t&&("object"===Ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ye(e)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e,t){return(Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=rt(e);if(t){var i=rt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return et(this,r)}}function et(e,t){if(t&&("object"===Ze(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return tt(e)}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==it(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ot=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Il);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function at(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Il.resolve(c).then(n,i)}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function st(){return(st="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=lt(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function lt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yt(e)););return e}function ft(e,t){return(ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yt(e);if(t){var i=yt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dt(this,r)}}function dt(e,t){if(t&&("object"===it(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e){return function(e){if(Array.isArray(e))return bt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _t(e,t){return(_t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kt(e);if(t){var i=kt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ot(this,r)}}function Ot(e,t){if(t&&("object"===mt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return St(e)}function St(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e,t){return(0,Fl.V)(e,t,(function(e,t){return t-e}))}function xt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(r),!0).forEach((function(t){Lt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function It(e,t){return At(At({},t),{},{start:e.start,end:t.end})}function Dt(e){return function(e){if(Array.isArray(e))return Nt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mt(e){var t=[];return e.forEach((function(e){t.push.apply(t,Dt(e))})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:It,r=xt(e);r.sort((function(e,t){return e.start-t.start||e.end-t.end}));for(var n=1;n<r.length;n++){var i=r[n],o=r[n-1];o.end>=i.start&&(r.splice(n,1),r[n-1]=t(o,i),n--)}return r}(t)}function Ct(e,t){var r=[],n=0;return e.forEach((function(e){for(var i=e.start,o=e.end,a=n;a<t.length;a++){if(t[a].start>o)return;n=a,t[a].end<i||r.push({start:Math.max(t[a].start,i),end:Math.min(t[a].end,o)})}})),r}function Ft(e){return function(e){if(Array.isArray(e))return Ut(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){if(e){if("string"===typeof e)return Ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ut(e,t):void 0}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gt(e){if(0===e.length)return[];var t,r=Math.min.apply(Math,Ft(e.map((function(e){return e.height})))),n={},i=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Bt(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n[o.height]||(n[o.height]=[]),n[o.height].push(o)}}catch(u){i.e(u)}finally{i.f()}var a=[];return(0,Gl.Z)(n).forEach((function(e){var t=parseInt(e,10),i=n[e];if(t===r)a.push.apply(a,Ft(i));else{var o=i.reduce((function(e,t){return e.bitrate>t.bitrate?e:t}));a.push(o)}})),a.sort((function(e,t){return t.bitrate-e.bitrate}))}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qt(){return(qt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Yt(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Yt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zt(e)););return e}function Wt(e,t){return(Wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function zt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Zt(e);if(t){var i=Zt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Kt(this,r)}}function Kt(e,t){if(t&&("object"===Ht(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $t(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e,t){if(!e||!t)return!1;var r=e.mimeType===t.mimeType,n=e.codecs,i=t.codecs,o=n===i,a=function(e,t){var r=e.split(".")[0];if(0===t.indexOf(r))return!0;var n=Vl[r];return!!n&&n.some((function(e){return 0===t.indexOf(e)}))}(n,i);return o||a&&r}function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||rr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,t){if(e){if("string"===typeof e)return nr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nr(e,t):void 0}}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ur(){return(ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=cr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function cr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dr(e)););return e}function sr(e,t){return(sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dr(e);if(t){var i=dr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fr(this,r)}}function fr(e,t){if(t&&("object"===Qt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hr(e)}function hr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yr(e,t){var r=parseInt(e.attributes.timescale||"1",10);if(isNaN(r))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[timescale]",details:{node:e},category:$s.q.MEDIA});var n=e.attributes.media;if(!n)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed SegmentTemplate[media]",details:{node:e},category:$s.q.MEDIA});var i=Math.floor(Math.max(0,parseInt(e.attributes.startNumber||"1",10)));if(!Number.isFinite(i)||!Number.isInteger(i))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[startNumber]",details:{node:e},category:$s.q.MEDIA});var o=parseInt(e.attributes.presentationTimeOffset||"0",10),a=o;if(isNaN(a))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected SegmentTemplate[presentationTimeOffset]",details:{node:e},category:$s.q.MEDIA});var u=e.attributes.availabilityTimeOffset?parseFloat(e.attributes.availabilityTimeOffset):0;t.availabilityTimeOffset=Math.min(t.availabilityTimeOffset,1e3*u);var c=e.children.find((function(e){return"SegmentTimeline"===e.tagName})),s=[],l=Math.max(Math.floor(0)),f=0,h=Math.max(Math.floor(0));if(c){for(var d=c.children.filter((function(e){return"S"===e.tagName})),p=0;p<d.length;p++){var y,v=d[p],m=s[s.length-1],g=parseInt(v.attributes.t,10),b=parseInt(v.attributes.d||e.attributes.duration,10);if("string"===typeof v.attributes.t&&isNaN(g))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[t]",details:{node:e},category:$s.q.MEDIA});var w=g||(m?m.originalValues.time+m.originalValues.duration*m.count:0),_=1e3*g/r||(m?m.time+m.duration*m.count:0),E=1e3*b/r;t.maxSegmentDuration=t.maxSegmentDuration?Math.max(t.maxSegmentDuration,E):E;var O=Math.max(Math.floor(parseInt(v.attributes.r||"0",10)));if(isNaN(E))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[d]",details:{node:e},category:$s.q.MEDIA});if(isNaN(O))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[r]",details:{node:e},category:$s.q.MEDIA});var S=O+Math.max(Math.floor(1));l+=S;var k=i+Math.max(Math.floor(l-1)),T=_+E*S;t.maxSegmentEndTime=t.maxSegmentEndTime?Math.max(t.maxSegmentEndTime,T):T,t.minSegmentStartTime=Math.min(null!==(y=t.minSegmentStartTime)&&void 0!==y?y:1/0,_),t.minSegmentStartTime=t.minSegmentStartTime?Math.min(t.minSegmentStartTime,_):_,s.push({endNumber:k,time:_,duration:E,count:S,originalValues:{time:w,duration:b,trackPresentationTimeOffset:o}})}h=i+Math.max(Math.floor(l-1))}else{var R,x;if(null===t.duration&&!t.isDynamic)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Can't compute presentation duration",details:{node:e},category:$s.q.MEDIA});var P=0,j=1e3*parseInt(e.attributes.duration,10)/r;if(isNaN(j))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected S[d]",details:{node:e},category:$s.q.MEDIA});var A=Math.abs(null!==(R=t.duration)&&void 0!==R?R:t.nowWithOffset);if(isFinite(t.segmentAvailabilityDuration)){var L,I=t.nowWithOffset-(null!==(L=t.presentationStartTime)&&void 0!==L?L:0),D=Math.max(I-t.segmentAvailabilityDuration,0),N=Math.ceil(D/j);i+=N,P=N*j,A=Math.max(I-P,0)}l=Math.floor(A/j),f=(h=i+Math.max(Math.floor(l-1),0))*j,t.maxSegmentEndTime=Math.max(t.maxSegmentEndTime||0,f),t.minSegmentStartTime=Math.min(null!==(x=t.minSegmentStartTime)&&void 0!==x?x:1/0,P),t.maxSegmentDuration=Math.max(t.maxSegmentDuration||0,j),s.push({endNumber:h,time:P,duration:j,count:l,originalValues:{time:P,duration:parseInt(e.attributes.duration,10),trackPresentationTimeOffset:o}});var M=t.duration?t.duration-f:0,C=Math.abs(Math.floor(1));M&&s.push({endNumber:h+C,time:f,duration:M,count:C,originalValues:{time:f,duration:M,trackPresentationTimeOffset:o}})}var F=s[s.length-1];return t.maxPresentationTimeOffset=void 0!==t.maxPresentationTimeOffset?Math.max(t.maxPresentationTimeOffset,a):t.maxPresentationTimeOffset,{timescale:r,initialization:e.attributes.initialization?ve(e.attributes.initialization):null,media:ve(n),startNumber:i,startTime:s[0].time,endNumber:F.endNumber,endTime:F.time+F.duration*F.count,presentationTimeOffset:a,segmentSequences:s}}function vr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mr(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function br(e,t){var r,n,i=e.attributes.mimeType,o=e.attributes.contentType||(null===i||void 0===i?void 0:i.split("/")[0]);if(!o)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected empty AdaptationSet[contentType] and AdaptationSet[mimeType]",details:{node:e},category:$s.q.MEDIA});t.maxHeight||(t.maxHeight=(r=e.children,(n=r.find((function(e){var t;return"SupplementalProperty"===e.tagName&&"urn:mpeg:yandex:capping:maxheight"===(null===(t=e.attributes)||void 0===t?void 0:t.schemeIdUri)})))?parseInt(n.attributes.value,10):null));var a=e.children.filter((function(e){return"ContentProtection"===e.tagName})),u=new Jl(t.parser).parse(a),c="true"===e.attributes.segmentAlignment,s=e.children.find((function(e){return"SegmentTemplate"===e.tagName}));return{type:o,segmentAlignment:c,segmentTemplate:s?yr(s,t):void 0,mimeType:i,contentProtection:u}}function wr(e,t,r){var n,i=e.attributes.id;if(!i)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed id on Representation",details:{node:e},category:$s.q.MEDIA});var o=null!==(n=e.attributes.codecs)&&void 0!==n?n:null,a=parseInt(e.attributes.bandwidth,10);if(isNaN(a)||a<0){if("text"!==r)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation[bandwidth]",details:{node:e},category:$s.q.MEDIA});a=10}var u=e.attributes.mimeType,c=e.children.find((function(e){return"SegmentTemplate"===e.tagName})),s=c?yr(c,t):void 0,l=e.children.filter((function(e){return"InbandEventStream"===e.tagName}));return"text"!==r&&l.forEach((function(e){return t.emsgSchemeIdUris[r].add(e.attributes.schemeIdUri)})),{id:i,codecs:o,bandwidth:a,segmentTemplate:s,mimeType:u}}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Er(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){Or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sr(e,t){var r=parseInt(e.attributes.width,10),n=parseInt(e.attributes.height,10),i=Math.max(parseFloat(e.attributes.frameRate),0);if(isNaN(r))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected Representation[width]",isFatal:!0,category:$s.q.MEDIA});if(isNaN(n))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected Representation[height]",isFatal:!0,category:$s.q.MEDIA});var o=wr(e,t,"video"),a=o.codecs;if(!a)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",details:{node:e},message:"Unexpected missed codecs on Representation",isFatal:!0,category:$s.q.MEDIA});return Er(Er(Er({},o),i?{frameRate:i}:{}),{},{codecs:a,width:r,height:n})}function kr(e,t){return t.bandwidth-e.bandwidth}function Tr(e,t,r){for(var n=e.children.filter((function(e){return"Representation"===e.tagName})),i=[],o=0;o<n.length;o++){var a=n[o];i.push(t(a,r))}return i.sort(kr)}function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){Pr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jr(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ar(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(r),!0).forEach((function(t){Ir(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ir(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dr(e,t){var r=Math.max(parseFloat(e.attributes.audioSamplingRate),0);if(isNaN(r))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected Representation[audioSamplingRate]",details:{node:e},category:$s.q.MEDIA});var n=wr(e,t,"audio"),i=n.codecs;if(!i)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed codecs on Representation",details:{node:e},category:$s.q.MEDIA});return Lr(Lr({},n),{},{codecs:i,audioSamplingRate:r})}function Nr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Mr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mr(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(r),!0).forEach((function(t){Br(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ur(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Gr(e,t,r){var n,i,o=t.segmentTemplate,a=t.mimeType,u=Ur(t,ef),c=null!==(n=e.attributes.lang)&&void 0!==n?n:"und",s=null!==(i=e.attributes.label)&&void 0!==i?i:null;if(""===c)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[lang]",details:{node:e},category:$s.q.MEDIA});var l=Tr(e,Dr,r).map((function(t){var r,n,i=null!==(r=t.segmentTemplate)&&void 0!==r?r:o,u=null!==(n=t.mimeType)&&void 0!==n?n:a;if(!i)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>SegmentTemplate",details:{node:e},category:$s.q.MEDIA});if(!u)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>mimeType",details:{node:e},category:$s.q.MEDIA});return Fr(Fr({},t),{},{segmentTemplate:i,mimeType:u})})),f=function(e,t){var r,n=Nr(t.findChildren(e,"AudioChannelConfiguration"));try{for(n.s();!(r=n.n()).done;){var i=r.value,o=i.attributes.schemeIdUri;if(o){var a=i.attributes.value;if(a)switch(o){case"urn:mpeg:dash:outputChannelPositionList:2012":return a.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var u=parseInt(a,10);if(!u)continue;return u;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":var c=parseInt(a,16);if(!c)continue;for(var s=0;c;)1&c&&++s,c>>=1;return s;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":var l=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],f=parseInt(a,10);if(!f)continue;if(f>0&&f<l.length)return l[f];continue;default:continue}}}}catch(h){n.e(h)}finally{n.f()}}(e,r.parser);return Fr(Fr({},u),{},{lang:c,label:s,representations:l,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0,channels:f})}function Hr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(r),!0).forEach((function(t){qr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yr(e,t){var r=wr(e,t,"text"),n=[];return e.children.forEach((function(e){var t=e.tagName,r=e.children;if("BaseURL"===t){var i=r[0];if(!i)return;n.push(ve(i))}})),Vr(Vr({},r),{},{baseUrl:n[0]})}function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(r),!0).forEach((function(t){Kr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $r(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Zr(e,t){var r=br(e,t);switch(r.type){case"video":return function(e,t,r){var n=t.segmentTemplate,i=t.mimeType,o=jr(t,Ql),a=parseInt(e.attributes.maxWidth,10),u=parseInt(e.attributes.maxHeight,10),c=Math.max(parseFloat(e.attributes.maxFrameRate),0),s=Tr(e,Sr,r).map((function(t){var r,o,a=null!==(r=t.segmentTemplate)&&void 0!==r?r:n,u=null!==(o=t.mimeType)&&void 0!==o?o:i;if(!a)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>SegmentTemplate",details:{node:e},category:$s.q.MEDIA});if(!u)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Representation>mimeType",details:{node:e},category:$s.q.MEDIA});return xr(xr({},t),{},{segmentTemplate:a,mimeType:u})}));if(isNaN(a))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[maxWidth]",details:{node:e},category:$s.q.MEDIA});if(isNaN(u))throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[maxHeight]",details:{node:e},category:$s.q.MEDIA});return xr(xr(xr({},o),c?{maxFrameRate:c}:{}),{},{maxWidth:a,maxHeight:u,representations:s,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0})}(e,r,t);case"audio":return Gr(e,r,t);case"text":return function(e,t,r){var n,i,o,a,u=t.segmentTemplate,c=t.mimeType,s=$r(t,tf),l=e.children.filter((function(e){return"Role"===e.tagName})),f=null;l.forEach((function(e){["caption","subtitle"].includes(e.attributes.value)&&(f=e)}));var h=null!==(n=e.attributes.lang)&&void 0!==n?n:"und",d=null!==(i=e.attributes.label)&&void 0!==i?i:null,p=Tr(e,Yr,r).map((function(e){return zr(zr({},e),{},{segmentTemplate:e.segmentTemplate||u,mimeType:e.mimeType||c})}));return zr(zr({},s),{},{role:f?{schemeIdUri:null!==(o=f.attributes.schemeIdUri)&&void 0!==o?o:null,value:null!==(a=f.attributes.value)&&void 0!==a?a:null}:null,lang:h,label:d,representations:p,keyId:void 0,encrypted:t.contentProtection.drmInfos.length>0,segmentAlignment:!1})}(e,r,t);default:throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected AdaptationSet[contentType=".concat(r.type,"]"),details:{node:e},category:$s.q.MEDIA})}}function Xr(e,t){var r,n,i,o,a,u,c=t.type.charCodeAt(0)-e.type.charCodeAt(0);if(0!==c)return c;switch(t.type){case"video":return t.maxHeight-e.maxHeight||(null!==(r=t.maxFrameRate)&&void 0!==r?r:0)-(null!==(n=e.maxFrameRate)&&void 0!==n?n:0)||(null!==(i=t.mimeType)&&void 0!==i?i:"").localeCompare(null!==(o=e.mimeType)&&void 0!==o?o:"");case"audio":case"text":return(null!==(a=t.mimeType)&&void 0!==a?a:"").localeCompare(null!==(u=e.mimeType)&&void 0!==u?u:"")}return 0}function Jr(e,t){for(var r=e.children.filter((function(e){return"AdaptationSet"===e.tagName})),n=[],i=0;i<r.length;i++){var o=Zr(r[i],t);o&&n.push(o)}return n.sort(Xr)}function Qr(e){if(!e)return null;var t=new RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e);if(!t)return null;var r=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null);return isFinite(r)?1e3*r:null}function en(e){if(!e)return null;/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z");var t=Date.parse(e);return isNaN(t)?null:Math.floor(t)}function tn(e,t,r){var n,i,o,a=e.find((function(e){return"MPD"===e.tagName}));if(void 0===a)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed MPD",details:{node:{tagName:"root",attributes:{},children:e}},category:$s.q.MEDIA});for(var u={periods:[],baseUrls:[],maxHeight:null,isDynamic:"dynamic"===(null===(n=a.attributes)||void 0===n?void 0:n.type),mediaType:af.D.LIVE,updatePeriod:5e3,minBufferTime:0,presentationStartTime:null,segmentAvailabilityDuration:1/0,maxSegmentDuration:4e3,presentationDelay:0,availabilityTimeOffset:0,clockOffset:0,minSegmentStartTime:null,maxSegmentEndTime:null,presentationTimeOffset:0,publishTime:0,minPeriodStartTime:0,locationUrl:null},c=a.children.filter((function(e){return"BaseURL"===e.tagName})),s=0;s<c.length;s++){var l=c[s].children;1===l.length&&u.baseUrls.push(l[0])}u.baseUrls.length||u.baseUrls.push(function(e){try{var t=new rf(e);t.search="";var r=t.pathname.split("/");return r[r.length-1]="",t.pathname=r.join("/"),t.href}catch(n){return""}}(t)||t);var f=a.children.filter((function(e){return"Period"===e.tagName}));if(void 0===f||0===f.length)throw new Zs.w({code:"YASP_PARSE_MANIFEST_ERROR",isFatal:!0,message:"Unexpected missed Period",details:{node:a},category:$s.q.MEDIA});if(u.isDynamic){var h,d,p,y,v;u.minBufferTime=Qr(null===(h=a.attributes)||void 0===h?void 0:h.minBufferTime)||u.minBufferTime,u.updatePeriod=Qr(null===(d=a.attributes)||void 0===d?void 0:d.minimumUpdatePeriod)||u.updatePeriod,u.presentationStartTime=en(null===(p=a.attributes)||void 0===p?void 0:p.availabilityStartTime),u.segmentAvailabilityDuration=Qr(null===(y=a.attributes)||void 0===y?void 0:y.timeShiftBufferDepth)||u.segmentAvailabilityDuration,u.maxSegmentDuration=Qr(null===(v=a.attributes)||void 0===v?void 0:v.maxSegmentDuration)||u.maxSegmentDuration;var m=Qr(a.attributes.suggestedPresentationDelay),g=Math.max(1e4,1.5*u.minBufferTime);u.presentationDelay=null!==m&&void 0!==m?m:g;var b=a.children.filter((function(e){return"UTCTiming"===e.tagName}));u.clockOffset=function(e){var t=e.find((function(e){return of.includes(e.attributes.schemeIdUri)}));if(!t)return 0;var r=t.attributes.schemeIdUri,n=t.attributes.value;if(nf.includes(r)){var i=Date.parse(n);return isNaN(i)?0:i-Date.now()}return 0}(b)}var w,_,E,O,S={maxHeight:null,duration:Qr(null===a||void 0===a?void 0:a.attributes.mediaPresentationDuration),maxPresentationTimeOffset:0,minPeriodStartTime:1/0,segmentAvailabilityDuration:u.segmentAvailabilityDuration,nowWithOffset:Date.now()+u.clockOffset,parser:r,availabilityTimeOffset:1/0,isDynamic:u.isDynamic,emsgSchemeIdUris:{audio:new Set,video:new Set},presentationStartTime:u.presentationStartTime};(u.periods.push((w=f[0],(_=S).minPeriodStartTime=Math.min(Qr(w.attributes.start)||0,_.minPeriodStartTime),{adaptationSets:Jr(w,_)})),S.maxPresentationTimeOffset&&(u.segmentAvailabilityDuration=1/0,u.presentationTimeOffset=S.maxPresentationTimeOffset,u.mediaType=af.D.EVENT),S.maxSegmentDuration&&S.maxSegmentEndTime)&&(u.maxSegmentDuration=Math.max(S.maxSegmentDuration,u.maxSegmentDuration),u.minSegmentStartTime=null!==(E=S.minSegmentStartTime)&&void 0!==E?E:null,u.maxSegmentEndTime=null!==(O=S.maxSegmentEndTime)&&void 0!==O?O:null);S.maxHeight&&(u.maxHeight=S.maxHeight),isFinite(S.availabilityTimeOffset)&&(u.availabilityTimeOffset=S.availabilityTimeOffset),u.publishTime=en(null===(i=a.attributes)||void 0===i?void 0:i.publishTime)||u.publishTime,u.emsgSchemeIdUris=S.emsgSchemeIdUris;var k=a.children.find((function(e){return"Location"===e.tagName}));return k&&k.children.length&&(u.locationUrl=ve(k.children[0])),u.minPeriodStartTime=isFinite(S.minPeriodStartTime)?S.minPeriodStartTime:null!==(o=S.minSegmentStartTime)&&void 0!==o?o:u.minPeriodStartTime,u}function rn(e,t){return cn(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||an(e,t)||on()}function nn(e){return cn(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||an(e)||on()}function on(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function an(e,t){if(e){if("string"===typeof e)return un(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?un(e,t):void 0}}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cn(e){if(Array.isArray(e))return e}function sn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dn(e){try{var t=new XMLHttpRequest;return t.open("GET","https://yandex.ru"),t.responseType=e,t.responseType===e?e:""}catch(r){return""}}function pn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||gn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e){return function(e){if(Array.isArray(e))return bn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){if(e){if("string"===typeof e)return bn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bn(e,t):void 0}}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==wn(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}_n=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=kf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function En(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function On(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?En(Object(r),!0).forEach((function(t){Sn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):En(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):kf.resolve(c).then(n,i)}function Tn(e){return function(){var t=this,r=arguments;return new kf((function(n,i){function o(e){kn(u,n,i,o,a,"next",e)}function a(e){kn(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return xn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pn(e,t){var r={type:"content-type",size:"content-length"},n=[];for(var i in t)n.push([r[i],t[i].toString()]);return{headers:{forEach:function(e){n.forEach((function(t){var r=Rn(t,2),n=r[0],i=r[1];e(i,n)}))}},body:{getReader:function(){return e.getReader()}},text:function(){return e.text()},status:200}}function jn(e,t){return An.apply(this,arguments)}function An(){return(An=Tn(_n().mark((function e(t,r){var n,i,o,a,u,c,s,l;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xf();case 2:return n=e.sent,i=t.split("/"),o=Rn(i,2),a=o[0],u=o[1],e.next=6,n.getDirectoryHandle("streams",{create:r});case 6:return c=e.sent,e.next=9,c.getDirectoryHandle(a,{create:r});case 9:return s=e.sent,e.next=12,s.getFileHandle(u.replace(/\//g,"_"),{create:r});case 12:return l=e.sent,e.abrupt("return",{fileHandle:l,contentId:a});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(e){return In.apply(this,arguments)}function In(){return(In=Tn(_n().mark((function e(t){var r,n,i,o;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn(t,!1);case 2:return r=e.sent,n=r.fileHandle,e.next=6,n.getFile();case 6:return i=e.sent,o=i.size,e.abrupt("return",{body:i,size:o});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dn(e){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(r),!0).forEach((function(t){Yn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cn(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Fn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Un(e,t){return(Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=qn(e);if(t){var i=qn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Hn(this,r)}}function Hn(e,t){if(t&&("object"===Dn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,r=e<10?100*Math.pow(2,e):6e4,n=2*Math.random()-1,i=n*t;return r*(1+i)}function zn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(r),!0).forEach((function(t){$n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zn(e,t){var r=[];e.adaptationSets.forEach((function(e){e.representations.forEach((function(n){switch(e.type){case"audio":t.obtainTimelineTrack(Kn(Kn(Kn({},n),n.segmentTemplate),{},{bitrate:n.bandwidth,language:e.lang,name:e.label,label:e.label,channels:e.channels,type:"audio"}));break;case"video":r.push(n);break;case"text":t.obtainTimelineTrack(function(e,t,r){var n,i,o,a,u=t.segmentTemplate,c=Kn(Kn({},t),{},{kind:(null===(n=r.role)||void 0===n?void 0:n.value)||"subtitles",label:r.label,language:r.lang,bitrate:t.bandwidth,type:"text"});if(u)return Kn(Kn({},c),u);var s=e.getSeekableRange();return Kn(Kn({},c),{},{media:t.baseUrl,initialization:null,timescale:1,startNumber:Math.ceil(Math.abs(1)),endNumber:Math.ceil(Math.abs(1)),startTime:null!==(i=null===s||void 0===s?void 0:s.start)&&void 0!==i?i:0,endTime:null!==(o=null===s||void 0===s?void 0:s.end)&&void 0!==o?o:0,presentationTimeOffset:0,segmentSequences:[{time:0,duration:null!==(a=e.getDuration())&&void 0!==a?a:0,count:Math.ceil(Math.abs(1)),endNumber:Math.ceil(Math.abs(1)),originalValues:{time:0,duration:e.getDuration(),trackPresentationTimeOffset:0}}]})}(t,n,e))}}))})),t.updateVideoTracks(r),t.sortTracksInTimeline()}function Xn(e){if(!e.length)return 1/0;var t=0;return e.forEach((function(e){t+=e.bandwidth})),t/e.length}function Jn(e,t){return"".concat(e,"; codecs=").concat(JSON.stringify(t))}function Qn(e){return(0,Nf.Q)(self).isTypeSupported(Jn(e.mimeType,e.codecs))}function ei(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ti(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ti(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ri(e){var t,r=[],n=[],i=ei(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;Qn(o)?r.push(o):n.push(o)}}catch(a){i.e(a)}finally{i.f()}return{supported:r,unsupported:n}}function ni(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ii(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ii(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oi(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return ai(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ai(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ui(e){var t,r=new Map,n=oi(e.representations);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=i.height,a=i.bandwidth;r.set(o,a)}}catch(u){n.e(u)}finally{n.f()}return r}function ci(e,t){var r,n=0,i=0,o=0,a=oi(e.keys());try{for(a.s();!(r=a.n()).done;){var u=r.value,c=e.get(u),s=t.get(u);c&&s&&(o++,n+=c,i+=s)}}catch(l){a.e(l)}finally{a.f()}return i/o<n/o?t:e}function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return li(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return li(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(r),!0).forEach((function(t){di(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function di(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pi(e,t){var r={audio:[],video:[],text:[]},n={video:!1,audio:!1},i={video:new Set,audio:new Set};e.forEach((function(e){if("video"===e.type){n.video=!0;var t=function(e){var t={},r=0,n=ri(e),i=n.supported,o=n.unsupported;i.forEach((function(e){r=Math.max(r,e.height);var n=e.codecs.split(".")[0];t[n]?t[n].push(e):t[n]=[e]})),(0,ql.J)(t).forEach((function(e){var n=ni(e,2),i=n[0];n[1].some((function(e){return e.height===r}))||delete t[i]}));var a=(0,Gl.Z)(t);return a.length?(a.length>1&&a.sort((function(e,r){return Xn(t[e])-Xn(t[r])})),{selected:t[a[0]],unsupported:o}):{selected:void 0,unsupported:o}}(e.representations),o=t.selected,a=t.unsupported;if(!o)return void a.forEach((function(e){return i.video.add(Jn(e.mimeType,e.codecs))}));r[e.type].push(hi(hi({},e),{},{representations:o,maxHeight:o[0].height,maxWidth:o[0].width}))}else if("audio"===e.type){n.audio=!0;var u=function(e){var t={},r=ri(e),n=r.supported,i=r.unsupported;n.forEach((function(e){var r=e.codecs.split(".")[0];t[r]?t[r].push(e):t[r]=[e]}));var o=(0,Gl.Z)(t);return o.length?(o.length>1&&o.sort((function(e,r){return Xn(t[e])-Xn(t[r])})),{selected:t[o[0]],unsupported:i}):{selected:void 0,unsupported:i}}(e.representations),c=u.selected,s=u.unsupported;if(!c)return void s.forEach((function(e){return i.audio.add(Jn(e.mimeType,e.codecs))}));r[e.type].push(hi(hi({},e),{},{representations:c}))}else r[e.type].push(e)}));var o=(0,Gl.Z)(n).filter((function(e){return n[e]&&!r[e].length}));if(o.length){var a=o.reduce((function(e,t){return e[t]=Array.from(i[t]),e}),{});throw new Zs.w({message:"For some types of adaptation sets, no supported codec was found.",code:"YASP_NO_CODECS",details:a,isFatal:!0,category:$s.q.NO_CODECS})}return(0,ql.J)(r).reduce((function(e,t){var r=si(t,2),n=r[0],i=r[1];if("video"===n){var o=function(e){if(!e.length)return null;if(1===e.length)return e[0];for(var t=0,r=ui(e[t]),n=1;n<e.length;n++){var i=ui(e[n]);t=(r=ci(r,i))===i?n:t}return e[t]}(i);o&&e.push(o)}else i.forEach((function(t){return e.push(t)}));return e}),[])}function yi(e){var t=new Ff(e);return t.searchParams.delete(Cf.j),t.href}function vi(e){if(!(0,Ys.K)(e))return!1;var t=e;return(0,fl.H)(t.code)&&(0,fl.H)(t.category)&&"boolean"===typeof t.isFatal}function mi(e){return(mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==mi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}gi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Gf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function bi(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Gf.resolve(c).then(n,i)}function wi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _i(){return(_i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Ei(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Ei(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ri(e)););return e}function Oi(e,t){return(Oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Si(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ri(e);if(t){var i=Ri(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ki(this,r)}}function ki(e,t){if(t&&("object"===mi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ti(e)}function Ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pi(e){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Pi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ji=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Yf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Ai(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Yf.resolve(c).then(n,i)}function Li(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ii(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Di(e,t){for(var r,n=0,i=0;i<e.length;i++){var o=e[i],a=o.start,u=o.end;if(!(u<t)){if(void 0!==r&&a-r>=.1)break;n+=u-Math.max(a,t),r=u}}return n}function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ni(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Mi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Zf);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Ci(e){return function(e){if(Array.isArray(e))return Fi(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Fi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bi(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Zf.resolve(c).then(n,i)}function Ui(e){return function(){var t=this,r=arguments;return new Zf((function(n,i){function o(e){Bi(u,n,i,o,a,"next",e)}function a(e){Bi(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(r),!0).forEach((function(t){$i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qi(e,t){return(qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Yi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ki(e);if(t){var i=Ki(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Wi(this,r)}}function Wi(e,t){if(t&&("object"===Ni(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return zi(e)}function zi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ki(e){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zi(e){var t,r,n=new rh(e).host,i=(t={},(r=e.split("?")[0])?(r.split("/").forEach((function(e){e.startsWith("ysign")&&e.split(",").forEach((function(e){var r=e.indexOf("=");-1!==r&&(t[e.slice(0,r)]=e.slice(r+1))}))})),t):t).lid,o=i?"&lid=".concat(i):"";return"https://".concat(n,"/ping?r=").concat((0,th.a)(12)).concat(o)}function Xi(e){return(Xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ji(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Xi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Ji=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=ih);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Qi(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):ih.resolve(c).then(n,i)}function eo(e){return function(){var t=this,r=arguments;return new ih((function(n,i){function o(e){Qi(u,n,i,o,a,"next",e)}function a(e){Qi(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function to(e){return ro.apply(this,arguments)}function ro(){return(ro=eo(Ji().mark((function e(t){return Ji().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,nh.W)({method:"GET",url:t,withCredentials:!1,timeout:2e3});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==no(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}io=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=oh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function oo(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):oh.resolve(c).then(n,i)}function ao(e){return function(){var t=this,r=arguments;return new oh((function(n,i){function o(e){oo(u,n,i,o,a,"next",e)}function a(e){oo(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function co(){return(co="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=so(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function so(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yo(e)););return e}function lo(e,t){return(lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yo(e);if(t){var i=yo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ho(this,r)}}function ho(e,t){if(t&&("object"===no(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return po(e)}function po(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mo(e,t,r){var n;return e.replace(/\$RepresentationID\$/g,t.id).replace(/\$Bandwidth\$/g,String(t.bitrate)).replace(/\$Number\$/g,String(null!==(n=null===r||void 0===r?void 0:r.number)&&void 0!==n?n:"")).replace(/\$Time\$/g,String((0,ch.z)(null===r||void 0===r?void 0:r.originalStart)?r.originalStart:"")).replace(/\$\$/g,"$")}function go(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;return t?{start:Math.floor(e.start/r)*r,end:Math.floor(e.end/r+1)*r-1}:e}function bo(e){return(bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(r),!0).forEach((function(t){Lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Eo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Oo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function So(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ko(){return(ko="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=To(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function To(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ao(e)););return e}function Ro(e,t){return(Ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ao(e);if(t){var i=Ao(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Po(this,r)}}function Po(e,t){if(t&&("object"===bo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jo(e)}function jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Io(e,t,r){for(var n=1e3*r,i=t,o=!0,a=!1;o;)o=!1,e.forEach((function(e){e.forEach((function(e){e.start<=i&&i<e.end&&(i=e.end,a=!0,o=!0)}))}));return i>=n&&a?-1:i}function Do(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function No(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Mo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Co(e){var t=e.split("=").pop();if(!t)return{start:null,end:null};var r=No(t.split("-"),2),n=r[0],i=r[1],o={start:null,end:null};return""===n||isNaN(Number(n))||(o.start=Number(n)),""===i||isNaN(Number(i))||(o.end=Number(i)),o}function Fo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r="string"===typeof e?Co(e).start:e.start;return r?r/t!==Math.trunc(r/t)?Math.ceil(r/t):r/t:0}function Bo(e,t,r){if(!r)return e;var n="string"===typeof r?Co(r):r;if(!(0,Oh.hj)(n.start)||!(0,Oh.hj)(n.end))return e;var i=t.start-n.start,o=n.end-t.end;return e.subarray(i,e.length-o)}function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Go(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Uo(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Go=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Sh);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Ho(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Vo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qo(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Sh.resolve(c).then(n,i)}function Yo(e){return function(){var t=this,r=arguments;return new Sh((function(n,i){function o(e){qo(u,n,i,o,a,"next",e)}function a(e){qo(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zo(e,t){return(zo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ko(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Xo(e);if(t){var i=Xo(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return $o(this,r)}}function $o(e,t){if(t&&("object"===Uo(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zo(e)}function Zo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xo(e){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qo(e){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ea(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Qo(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ea=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Th);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function ta(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Th.resolve(c).then(n,i)}function ra(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return ia(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ia(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oa(e){return-1===e.indexOf("#")?null:(e.split("#").pop().split("&").some((function(e){var r=na(e.split("=",2).map(decodeURIComponent),2),n=r[0],i=r[1];return"t"===n&&(t=i,!0)})),function(e){if("string"!==typeof e)return null;try{if(e.match(/^-?\d+(\.\d+)?$/))return aa(parseFloat(e));if(e.includes("npt:")){var t=e.split("npt:")[1];return aa(parseFloat(t))}if(e.includes(":")){var r=e.split(":"),n=parseInt(r[0],10)||0,i=parseInt(r[1],10)||0,o=parseFloat(r[2])||0;return aa(3600*n+60*i+o)}var a=e.match(/^npt:(\d+(\.\d+)?)$/);if(a)return aa(parseFloat(a[1]))}catch(u){}return null}(t));var t}function aa(e){return isNaN(e)?null:e}function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ca(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ca(Object(r),!0).forEach((function(t){ga(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ca(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function la(e,t){return(la=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function fa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=pa(e);if(t){var i=pa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ha(this,r)}}function ha(e,t){if(t&&("object"===ua(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return da(e)}function da(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function va(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ma(e,t,r){return t&&va(e.prototype,t),r&&va(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ga(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ba(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wa(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return _a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _a(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function _a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ea(e,t){var r,n={},i=wa(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;n[o.trackId]||(n[o.trackId]={type:"audio",bitrate:o.bitrate})}}catch(s){i.e(s)}finally{i.f()}var a,u=wa(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;n[c.trackId]||(n[c.trackId]={type:"video",bitrate:c.bitrate,height:c.height,width:c.width})}}catch(s){u.e(s)}finally{u.f()}return n}function Oa(e,t){return e.trace.map((function(e){var r=null;return e.result.map((function(e){return e[t]===r?null:(r=e[t],e[t])})).filter(Boolean).join("-")})).filter(Boolean).join("_")}function Sa(e,t,r){var n=(null===e||void 0===e?void 0:e.length)>0?e:[void 0],i=(null===t||void 0===t?void 0:t.length)>0?t:[void 0],o=(null===r||void 0===r?void 0:r.length)>0?r[0].bitrate:0,a=[];return n.forEach((function(e){i.forEach((function(t,r){(function(e){var t=e.width,r=e.height,n=Math.max(t,r),i=Math.min(t,r);if(n<=0)return 0;for(var o=Uh[0],a=0;a<Uh.length;a++){var u=Uh[a],c=Gh[u];if(n>=1.3*Math.floor(16*c/9)||i>=1.3*c)return o;o=u}return Uh[Uh.length-1]})({width:(null===e||void 0===e?void 0:e.width)||0,height:(null===e||void 0===e?void 0:e.height)||0})>360&&r>0||a.push({video:e,audio:t,bandwidth:((null===e||void 0===e?void 0:e.bitrate)||0)+(((null===t||void 0===t?void 0:t.bitrate)||0)+o)})}))})),a}function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ta(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ra(e,t){return(Ra=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Aa(e);if(t){var i=Aa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Pa(this,r)}}function Pa(e,t){if(t&&("object"===ka(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ja(e)}function ja(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Aa(e){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function La(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Na(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ma(e,t,r){return t&&Na(e.prototype,t),r&&Na(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ca(e){return["audio","video"].some((function(t){var r=e[t];return r&&null!==r.getWaitingDuration()}))}function Fa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ba(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ua(e){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ha(e,t){return(Ha=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Va(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Wa(e);if(t){var i=Wa(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return qa(this,r)}}function qa(e,t){if(t&&("object"===Ua(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ya(e)}function Ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function za(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Za(e,t){return(Za=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=eu(e);if(t){var i=eu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ja(this,r)}}function Ja(e,t){if(t&&("object"===Ka(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qa(e)}function Qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eu(e){return(eu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ru(e){return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ou(e,t){return(ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function au(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=cu(e);if(t){var i=cu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return uu(this,r)}}function uu(e,t){if(t&&("object"===ru(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function cu(e){return(cu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function su(){return(su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lu(e,t){return su(e,{currentTime:t.currentTime,duration:t.duration}),e}function fu(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return hu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hu(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function hu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function du(e,t,r){var n=function(e){return e.filter(pu)}(e);if(n.length<=1)return e;var i,o=[],a=function(e,t,r){var n=function(e,t,r){var n=function(e,t,r){var n=yu(e[0].video.width,e[0].video.height),i=function(e,t){var r=t||{},n=r.defaultLongSideResolution,i=r.userCappingResolution,o=0,a=0;i&&i.width&&i.height&&(o=i.width,a=i.height);var u=Math.max(o,a),c=(0,td.R)(n),s=function(e){var t=e.width,r=void 0===t?1/0:t,n=e.height,i=void 0===n?1/0:n,o=e.dpi,a=void 0===o?1:o;return{cappedWidthResolution:r*a,cappedHeightResolution:i*a}}(e),l=s.cappedWidthResolution,f=s.cappedHeightResolution,h=u||Math.min(c,l),d=u||Math.min(c,f);return{videoMaxWidthResolution:h,videoMaxHeightResolution:d}}(t,r),o=i.videoMaxWidthResolution,a=i.videoMaxHeightResolution,u=yu(o,a);return n>u?{videoMaxWidthResolutionWithTrueRatio:o,videoMaxHeightResolutionWithTrueRatio:e[0].video.height*(o/e[0].video.width)}:{videoMaxWidthResolutionWithTrueRatio:e[0].video.width*(a/e[0].video.height),videoMaxHeightResolutionWithTrueRatio:a}}(e,t,r),i=n.videoMaxWidthResolutionWithTrueRatio,o=n.videoMaxHeightResolutionWithTrueRatio;return i*o}(e,t,r);return(0,ed.U)(e.slice().reverse(),(function(e){var t=e.video,r=t.width,i=t.height;return Math.abs(n-r*i)}))}(n,t,r),u=fu(n);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(o.push(c),a===c)break}}catch(s){u.e(s)}finally{u.f()}return o}function pu(e){return(0,Ys.K)(e.video)&&(0,ch.z)(e.video.width)&&(0,ch.z)(e.video.height)}function yu(e,t){return e/t}function vu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ou(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Su(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ku(e){return(ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ru(e,t){return(Ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Au(e);if(t){var i=Au(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Pu(this,r)}}function Pu(e,t){if(t&&("object"===ku(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ju(e)}function ju(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Au(e){return(Au=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Iu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Du(e){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mu(){return(Mu="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Cu(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Cu(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gu(e)););return e}function Fu(e,t){return(Fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bu(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gu(e);if(t){var i=Gu(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Uu(this,r)}}function Uu(e,t){if(t&&("object"===Du(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Gu(e){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hu(Object(r),!0).forEach((function(t){qu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zu(e){return(zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ku(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $u(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==zu(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}$u=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Od);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Zu(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Od.resolve(c).then(n,i)}function Xu(e){return function(){var t=this,r=arguments;return new Od((function(n,i){function o(e){Zu(u,n,i,o,a,"next",e)}function a(e){Zu(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Ju(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ec(e){return(ec="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tc(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return rc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rc(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nc(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==ec(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}nc=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=xd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function ic(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):xd.resolve(c).then(n,i)}function oc(e){return function(){var t=this,r=arguments;return new xd((function(n,i){function o(e){ic(u,n,i,o,a,"next",e)}function a(e){ic(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function ac(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uc(){return(uc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=cc(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function cc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dc(e)););return e}function sc(e,t){return(sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function lc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=dc(e);if(t){var i=dc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fc(this,r)}}function fc(e,t){if(t&&("object"===ec(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return hc(e)}function hc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dc(e){return(dc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yc(e){return(0,Af.lm)(e.toLocaleLowerCase())||new Ad(e,"https://domain.com").searchParams.get("container")||""}function vc(e){e.reader.skip(4);var t,r,n=e.reader.readUint32(),i=[];if(0===n)throw new Error("[parseSidx] Invalid timescale.");0===e.version?(t=e.reader.readUint32(),r=e.reader.readUint32()):(t=e.reader.readUint64(),r=e.reader.readUint64()),e.reader.skip(2);var o=e.reader.readUint16();if(0===o)throw new Error("[parseSidx] Invalid reference count.");for(var a=t,u=e.start+e.size+r,c=0;c<o;c++){var s=e.reader.readUint32(),l=(2147483648&s)>>>31,f=2147483647&s,h=e.reader.readUint32();if(e.reader.skip(4),1===l)throw new Error("[parseSidx] Hierarchical SIDXs are not supported.");i.push({type:l,size:f,duration:h,startByte:u,endByte:u+f-1,startTime:a,endTime:a+h}),a+=h,u+=f}return e.parser.stop(),{segmentsInfo:i,timescale:n}}function mc(e){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gc(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==mc(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}gc=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Id);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function bc(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Id.resolve(c).then(n,i)}function wc(e){return function(){var t=this,r=arguments;return new Id((function(n,i){function o(e){bc(u,n,i,o,a,"next",e)}function a(e){bc(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function _c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ec(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oc(e){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||kc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kc(e,t){if(e){if("string"===typeof e)return Tc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tc(e,t):void 0}}function Tc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Rc(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Oc(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Rc=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Nd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function xc(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Nd.resolve(c).then(n,i)}function Pc(e){return function(){var t=this,r=arguments;return new Nd((function(n,i){function o(e){xc(u,n,i,o,a,"next",e)}function a(e){xc(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function jc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ac(){return(Ac="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Lc(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Lc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cc(e)););return e}function Ic(e,t){return(Ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Dc(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Cc(e);if(t){var i=Cc(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Nc(this,r)}}function Nc(e,t){if(t&&("object"===Oc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Mc(e)}function Mc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cc(e){return(Cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bc(e,t){if(0===t)return Cd.resolve();var r=new $f.B,n=function n(o){o.total.reduce((function(e,t){var r=t.start;return e+(t.end-r)}),0)>=t&&(r.resolve(),e.off("BufferedInfoChanged",n),e.off("Destroy",i))},i=function(){r.reject(new Error("Preloading aborted: timeline destroyed"))};return e.on("BufferedInfoChanged",n),e.on("Destroy",i),n(e.getBufferedInfo()),r.promise}function Uc(e){return(Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gc(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Uc(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Gc=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Fd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Hc(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Fd.resolve(c).then(n,i)}function Vc(e){return function(){var t=this,r=arguments;return new Fd((function(n,i){function o(e){Hc(u,n,i,o,a,"next",e)}function a(e){Hc(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function qc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zc(e){return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kc(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==zc(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Kc=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Hd);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function $c(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Hd.resolve(c).then(n,i)}function Zc(e){return function(){var t=this,r=arguments;return new Hd((function(n,i){function o(e){$c(u,n,i,o,a,"next",e)}function a(e){$c(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Xc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(r),!0).forEach((function(t){us(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function es(){return(es="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=ts(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function ts(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=as(e)););return e}function rs(e,t){return(rs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ns(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=as(e);if(t){var i=as(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return is(this,r)}}function is(e,t){if(t&&("object"===zc(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return os(e)}function os(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function as(e){return(as=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function us(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ss(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ls(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(r),!0).forEach((function(t){ds(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ls(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ds(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ps(e){return(ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ys(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ms(e,t){return(ms=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gs(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ws(e);if(t){var i=ws(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return bs(this,r)}}function bs(e,t){if(t&&("object"===ps(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ws(e){return(ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Es(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Os(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Os(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Os(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ss(e){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ks(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Ss(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ks=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=np);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Ts(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ts(Object(r),!0).forEach((function(t){As(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ts(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xs(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):np.resolve(c).then(n,i)}function Ps(e){return function(){var t=this,r=arguments;return new np((function(n,i){function o(e){xs(u,n,i,o,a,"next",e)}function a(e){xs(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function js(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function As(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ls(e){return(Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self;new ap(e).init()}r.d(t,{Z:function(){return up}});var Ds,Ns,Ms,Cs,Fs,Bs,Us,Gs,Hs,Vs,qs=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],(r="timeRanges")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,i;return t=e,(r=[{key:"length",get:function(){return this.timeRanges.length}},{key:"start",value:function(e){if(this.timeRanges.length<=e)throw new Error("Failed to execute 'start' on 'TimeRanges': The index provided (".concat(e,") is greater than the maximum bound (").concat(this.timeRanges.length,")."));return this.timeRanges[e][0]}},{key:"end",value:function(e){if(this.timeRanges.length<=e)throw new Error("Failed to execute 'end' on 'TimeRanges': The index provided (".concat(e,") is greater than the maximum bound (").concat(this.timeRanges.length,")."));return this.timeRanges[e][1]}},{key:"update",value:function(e){this.timeRanges=e}}])&&n(t.prototype,r),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ys=r(34129),Ws=function(){function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"sourceKey",void 0),o(this,"mediaState",void 0),o(this,"worker",void 0),o(this,"buffered",void 0),o(this,"validateAndHandleEvent",(function(e){var t=e.data;(0,Ys.K)(t)&&"string"===typeof t.method&&t.sourceKey===i.sourceKey&&i.handleEvent(t.method,t.params)})),this.sourceKey=t,this.mediaState=n,this.buffered=new qs,this.mediaState.buffered=this.buffered,this.worker=r,this.worker.addEventListener("message",this.validateAndHandleEvent)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){this.worker.removeEventListener("message",this.validateAndHandleEvent)}},{key:"handleEvent",value:function(e,t){switch(e){case"updateBuffering":return this.mediaState.buffering=t,void this.mediaState.emit("BufferingChange",t);case"updateCurrentTime":return void(this.mediaState.currentTime=t);case"updateDuration":return void(this.mediaState.duration=t);case"updateLoop":return void(this.mediaState.loop=t);case"updatePaused":return void(this.mediaState.paused=t);case"updatePlaybackRate":return void(this.mediaState.playbackRate=t);case"updateBuffered":return void this.buffered.update(t)}}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),zs=function(e){function t(){return u(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(t,e);var r,n,i,o=h(t);return r=t,(n=[{key:"handleEvent",value:function(e,r){switch(e){case"updateFrames":return void(this.mediaState.frames=r);case"updateDevicePixelRatio":return void(this.mediaState.devicePixelRatio=r);case"updateVideoSize":return void(this.mediaState.videoSize=r);case"updateContainerSize":return void(this.mediaState.containerSize=r);case"updateObjectFit":return void(this.mediaState.objectFit=r);default:s(p(t.prototype),"handleEvent",this).call(this,e,r)}}}])&&c(r.prototype,n),i&&c(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ws),Ks=r(10525),$s=r(89225),Zs=r(41838),Xs=r(33157),Js=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ks.Z,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ks.Z;m(this,e),this.limit=t,this.onEvent=r,this.onError=n,b(this,"sources",new Map)}var t,r,n;return t=e,n=[{key:"destroySource",value:function(e){null===e||void 0===e||e.destroy()}}],(r=[{key:"getSourceCount",value:function(){return this.sources.size}},{key:"getSourceLimit",value:function(){return this.limit}},{key:"takeSource",value:function(e){return this.sources.get((0,Xs.Hi)(e))}},{key:"putSource",value:function(t,r){var n=(0,Xs.Hi)(t);this.sources.delete(n),this.sources.set(n,r);for(var i=[],o=this.sources.entries(),a=0;this.sources.size>this.limit;){var u=o.next();if(u.done)break;var c=y(u.value,2),s=c[0],l=c[1];l.isAttached()?a++:(e.destroySource(l),i.push(s),this.sources.delete(s))}if(this.sources.size>this.limit){var f=new Zs.w({code:"YASP_SOURCE_LIMIT_EXCEEDED",details:{limit:this.limit,attachedSources:a,size:this.sources.size},category:$s.q.MEDIA,isFatal:!1});this.onError(f)}i.length&&this.onEvent(i,this.limit)}},{key:"removeSource",value:function(t){var r=(0,Xs.Hi)(t),n=this.sources.get(r);return!!n&&(e.destroySource(n),this.sources.delete(r))}},{key:"getAllSources",value:function(){return Array.from(this.sources.values())}}])&&g(t.prototype,r),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Qs=(r(25443),function(e){function t(e){var r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(x(n=o.call(this)),"id",void 0),j(x(n),"bitrate",void 0),j(x(n),"language",void 0),j(x(n),"type",void 0),j(x(n),"initialization",void 0),j(x(n),"timescale",void 0),j(x(n),"media",void 0),j(x(n),"mimeType",void 0),j(x(n),"startNumber",void 0),j(x(n),"startTime",void 0),j(x(n),"endNumber",void 0),j(x(n),"endTime",void 0),j(x(n),"presentationTimeOffset",void 0),j(x(n),"segmentSequences",void 0),j(x(n),"isMP4",void 0),j(x(n),"init",null),j(x(n),"segmentRanges",[]),j(x(n),"segments",new Map),n.id=e.id,n.bitrate=e.bitrate,n.language=e.language,n.type=e.type,n.initialization=e.initialization,n.timescale=e.timescale,n.media=e.media,n.mimeType=e.mimeType,n.startNumber=e.startNumber,n.startTime=e.startTime,n.endNumber=e.endNumber,n.endTime=e.endTime,n.presentationTimeOffset=e.presentationTimeOffset,n.segmentSequences=e.segmentSequences,n.isMP4=null!==(r=e.isMP4)&&void 0!==r&&r,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e);var r,n,i,o=T(t);return r=t,(n=[{key:"updateTrack",value:function(e){this.startNumber=e.startNumber,this.startTime=e.startTime,this.endNumber=e.endNumber,this.endTime=e.endTime,this.presentationTimeOffset=e.presentationTimeOffset,this.segmentSequences=e.segmentSequences,this.bitrate=e.bitrate,this.initialization=e.initialization,this.media=e.media}},{key:"getFullMimeType",value:function(){return this.mimeType}},{key:"appendSegment",value:function(e){var t=this;e.isInitSegment?this.init=e:this.segments.set(e.number,e),this.updateSegmentRanges(),e.finished?this.parseSegment(e):(e.once("Failed",(function(){e.isInitSegment?t.init=null:(t.segments.delete(e.number),t.updateSegmentRanges())})),e.once("Finish",(function(){t.parseSegment(e),t.updateSegmentRanges()})))}},{key:"parseSegment",value:function(e){}},{key:"hasSegment",value:function(e){return this.segments.has(e)}},{key:"getInitSegment",value:function(){return this.init}},{key:"getSegment",value:function(e){var t=this;return E(this.segments.values()).find((function(r){return void 0!==r&&(r.number===t.endNumber&&e===t.endTime-t.presentationTimeOffset||r.start<=e&&e<r.end)}))||null}},{key:"getBufferedRanges",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null===this.initialization||null!==(e=this.init)&&void 0!==e&&e.finished?t?this.segmentRanges.map((function(e){return{start:e.start,end:e.end}})):this.segmentRanges.filter((function(e){return e.finished})).map((function(e){return{start:e.start,end:e.end}})):[]}},{key:"getSeekableRanges",value:function(){return[{start:this.startTime-this.presentationTimeOffset,end:this.endTime-this.presentationTimeOffset}]}},{key:"getSegmentsDebugInfo",value:function(e){var t=this,r=0,n=0,i=0,o=0;return this.segments.forEach((function(a){e>a.end-t.presentationTimeOffset?(r+=a.loadedRawSize,n+=1):(i+=a.loadedRawSize,o+=1)})),{playedRawSize:r,playedSegmentCount:n,activeRawSize:i,activeSegmentCount:o}}},{key:"getDebugInfo",value:function(){var e;return{id:this.id,bitrate:this.bitrate,language:this.language,type:this.type,initialization:this.initialization,timescale:this.timescale,media:this.media,mimeType:this.mimeType,startNumber:this.startNumber,startTime:this.startTime,endNumber:this.endNumber,endTime:this.endTime,presentationTimeOffset:this.presentationTimeOffset,initSegment:null===(e=this.init)||void 0===e?void 0:e.getDebugInfo(),segmentSequences:this.segmentSequences,seekableRanges:this.getSeekableRanges(),segmentRanges:this.segmentRanges,segments:Array.from(this.segments.entries()).reduce((function(e,t){return e[t[0]]=t[1].getDebugInfo(),e}),{})}}},{key:"updateSegmentRanges",value:function(){var e=this.segmentRanges;this.segmentRanges=[];var t=E(this.segments.values()).sort((function(e,t){return e.start-t.start}));if(0!==t.length){for(var r={start:t[0].start,startNumber:t[0].number,end:t[0].end,endNumber:t[0].number,finished:t[0].finished},n=1;n<t.length;n++){var i=t[n];i.finished===r.finished&&i.start===r.end?(r.end=i.end,r.endNumber=i.number):(this.segmentRanges.push(r),r={start:i.start,startNumber:i.number,end:i.end,endNumber:i.number,finished:i.finished})}this.segmentRanges.push(r),this.emit("BufferedInfoChanged")}else 0!==e.length&&this.emit("BufferedInfoChanged")}},{key:"clear",value:function(e,t){return this.clearForParallel(e,t)}},{key:"destroy",value:function(){this.clear(0,Number.MAX_SAFE_INTEGER)}},{key:"clearForParallel",value:function(e,t){var r=this,n=!1;E(this.segments.values()).forEach((function(i){i.start>=e&&i.end<=t&&(n=!0,i.destroy(),r.segments.delete(i.number))})),n&&this.updateSegmentRanges()}}])&&S(r.prototype,n),i&&S(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(r(42630).v)),el=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(U(r=o.call(this,e)),"type","audio"),H(U(r),"codecs",void 0),H(U(r),"label",void 0),H(U(r),"channels",void 0),r.codecs=e.codecs,r.label=e.name,r.channels=e.channels,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e);var r,n,i,o=F(t);return r=t,(n=[{key:"getFullMimeType",value:function(){return"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs))}},{key:"getDebugInfo",value:function(){return I(I({},N(G(t.prototype),"getDebugInfo",this).call(this)),{},{codecs:this.codecs,label:this.label})}}])&&D(r.prototype,n),i&&D(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Qs),tl=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ee(J(r=o.call(this,e)),"height",void 0),ee(J(r),"width",void 0),ee(J(r),"type","video"),ee(J(r),"codecs",void 0),ee(J(r),"frameRate",void 0),ee(J(r),"label",void 0),r.height=e.height,r.width=e.width,r.codecs=e.codecs,r.frameRate=e.frameRate;var n=r.parseMediaAttribute(e.media||"");return r.label=n.label||"".concat(r.height,"p"),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e);var r,n,i,o=Z(t);return r=t,(n=[{key:"getDebugInfo",value:function(){return Y(Y({},z(Q(t.prototype),"getDebugInfo",this).call(this)),{},{height:this.height,width:this.width,codecs:this.codecs})}},{key:"getFullMimeType",value:function(){return"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs))}},{key:"parseMediaAttribute",value:function(e){var t={};return e.split(",").map((function(e){var r=e.split("=");r.length>0&&(t[r[0]]=r[1])})),t}}])&&W(r.prototype,n),i&&W(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Qs),rl=r(90973),nl=function(){function e(){re(this,e)}return ie(e,[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,t){return[]}}]),e}(),il=function(){function e(t){re(this,e),te(this,"data_",void 0),te(this,"position_",void 0),this.data_=t,this.position_=0}return ie(e,[{key:"atEnd",value:function(){var e;return this.position_===(null===(e=this.data_)||void 0===e?void 0:e.length)}},{key:"readLine",value:function(){return this.readRegexReturnCapture_(/(.*?)(\n|$)/gm,1)}},{key:"readWord",value:function(){return this.readRegexReturnCapture_(/[^ \t\n]*/gm,0)}},{key:"skipWhitespace",value:function(){this.readRegex(/[ \t]+/gm)}},{key:"readRegex",value:function(e){var t=this.indexOf_(e);return this.atEnd()||null===t||t.position!==this.position_?null:(this.position_+=t.length,t.results)}},{key:"readRegexReturnCapture_",value:function(e,t){if(this.atEnd())return null;var r=this.readRegex(e);return r?r[t]:null}},{key:"indexOf_",value:function(e){e.lastIndex=this.position_;var t=e.exec(this.data_);return null===t?null:{position:t.index,length:t[0].length,results:t}}}]),e}(),ol=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"defaultEquals",value:function(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}},{key:"equal",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultEquals;if(t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(!n(t[i],r[i]))return!1;return!0}},{key:"remove",value:function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}],(r=null)&&oe(t.prototype,r),n&&oe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),al=function(){function e(t,r,n){ae(this,e),se(this,"startTime",void 0),se(this,"endTime",void 0),se(this,"payload",void 0),se(this,"direction",Cs.HORIZONTAL_LEFT_TO_RIGHT),se(this,"region",new sl),se(this,"position",null),se(this,"positionAlign",Ds.AUTO),se(this,"size",0),se(this,"textAlign",Ns.CENTER),se(this,"writingMode",Fs.HORIZONTAL_TOP_TO_BOTTOM),se(this,"lineInterpretation",Bs.LINE_NUMBER),se(this,"line",null),se(this,"lineHeight",""),se(this,"lineAlign",Us.START),se(this,"displayAlign",Ms.AFTER),se(this,"color",""),se(this,"backgroundColor",""),se(this,"backgroundImage",""),se(this,"fontSize",""),se(this,"fontWeight",Gs.NORMAL),se(this,"fontStyle",Hs.NORMAL),se(this,"fontFamily",""),se(this,"textDecoration",[]),se(this,"wrapLine",!0),se(this,"id",""),se(this,"nestedCues",[]),se(this,"lineBreak",!1),se(this,"spacer",!1),se(this,"cellResolution",{columns:32,rows:15}),se(this,"border",""),se(this,"letterSpacing",""),se(this,"linePadding",""),se(this,"opacity",1),this.startTime=t,this.endTime=r,this.payload=n}return ce(e,[{key:"clone",value:function(){var t=new e(0,0,"");for(var r in this)t[r]=this[r],t[r]&&t[r].constructor===Array&&(t[r]=t[r].slice());return t}}],[{key:"equal",value:function(t,r){for(var n in t)if("nestedCues"===n){if(!ol.equal(t.nestedCues,r.nestedCues,e.equal))return!1}else if("region"===n||"cellResolution"===n){for(var i in t[n])if(t[n][i]!==r[n][i])return!1}else if(Array.isArray(t[n])){if(!ol.equal(t[n],r[n]))return!1}else if(t[n]!==r[n])return!1;return!0}}]),e}();!function(e){e.LEFT="line-left",e.RIGHT="line-right",e.CENTER="center",e.AUTO="auto"}(Ds||(Ds={})),function(e){e.LEFT="left",e.RIGHT="right",e.CENTER="center",e.START="start",e.END="end"}(Ns||(Ns={})),function(e){e.BEFORE="before",e.CENTER="center",e.AFTER="after"}(Ms||(Ms={})),function(e){e.HORIZONTAL_LEFT_TO_RIGHT="ltr",e.HORIZONTAL_RIGHT_TO_LEFT="rtl"}(Cs||(Cs={})),function(e){e.HORIZONTAL_TOP_TO_BOTTOM="horizontal-tb",e.VERTICAL_LEFT_TO_RIGHT="vertical-lr",e.VERTICAL_RIGHT_TO_LEFT="vertical-rl"}(Fs||(Fs={})),function(e){e[e.LINE_NUMBER=0]="LINE_NUMBER",e[e.PERCENTAGE=1]="PERCENTAGE"}(Bs||(Bs={})),function(e){e.CENTER="center",e.START="start",e.END="end"}(Us||(Us={})),function(e){e[e.NORMAL=400]="NORMAL",e[e.BOLD=700]="BOLD"}(Gs||(Gs={})),function(e){e.NORMAL="normal",e.ITALIC="italic",e.OBLIQUE="oblique"}(Hs||(Hs={})),function(e){e.UNDERLINE="underline",e.LINE_THROUGH="lineThrough",e.OVERLINE="overline"}(Vs||(Vs={}));var ul,cl,sl=ce((function e(){ae(this,e),se(this,"id",""),se(this,"viewportAnchorX",0),se(this,"viewportAnchorY",0),se(this,"regionAnchorX",0),se(this,"regionAnchorY",0),se(this,"width",100),se(this,"height",100),se(this,"heightUnits",ul.PERCENTAGE),se(this,"widthUnits",ul.PERCENTAGE),se(this,"viewportAnchorUnits",ul.PERCENTAGE),se(this,"scroll",cl.NONE)}));!function(e){e[e.PX=0]="PX",e[e.PERCENTAGE=1]="PERCENTAGE",e[e.LINES=2]="LINES"}(ul||(ul={})),function(e){e.NONE="",e.UP="up"}(cl||(cl={}));var ll=r(48932),fl=r(66696),hl=r(14675).parse,dl=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n={},(r="namespaces")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,n=[{key:"getChildren",value:function(e){return Array.from(e.children).filter((function(e){return!(0,fl.H)(e)}))}},{key:"getElementsByTagName",value:function(e,t){var r=[];return function e(n){n.tagName===t&&r.push(n);var i,o=fe(n.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;"string"!==typeof a&&e(a)}}catch(u){o.e(u)}finally{o.f()}}(e),r}},{key:"getElementByTagName",value:function(e,t){var r=null;return function e(n){if(null===r)if(n.tagName!==t){var i,o=fe(n.children);try{for(o.s();!(i=o.n()).done;){var a=i.value;"string"!==typeof a&&e(a)}}catch(u){o.e(u)}finally{o.f()}}else r=n}(e),r}},{key:"setParent",value:function(e){var t=le(e,{parent:null});return function e(t){var r,n=fe(t.children);try{for(n.s();!(r=n.n()).done;){var i=r.value;"string"!==typeof i&&(i.parent=t,e(i))}}catch(o){n.e(o)}finally{n.f()}}(t),t}},{key:"getTextContent",value:function(e){var t="";return function e(r){var n,i=fe(r.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;"string"===typeof o?t+=o:e(o)}}catch(a){i.e(a)}finally{i.f()}}(e),t}}],(r=[{key:"parse",value:function(e){var t=this,r=hl(e),n=Array.isArray(r)?r:[];return n.forEach((function(e){e.attributes&&Object.keys(e.attributes).forEach((function(r){if(r.startsWith("xmlns")){var n=he(r.split(":"),2)[1];t.namespaces[e.attributes[r]]=n||"__global"}}))})),n}},{key:"getAttributeNS",value:function(e,t,r){var n="".concat(this.namespaces[t],":").concat(r);return n in e.attributes?e.attributes[n]:null}},{key:"getAttributeNSList",value:function(e,t,r){var n,i=fe(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this.getAttributeNS(e,o,r);if(a)return a}}catch(u){i.e(u)}finally{i.f()}return null}},{key:"findChildrenNS",value:function(e,t,r){var n=this;return e.children.filter((function(e){var i="".concat(n.namespaces[t],":").concat(r);return"string"!==typeof e&&e.tagName===i}))}},{key:"findChildren",value:function(e,t){return e.children?e.children.filter((function(e){return"string"!==typeof e&&e.tagName===t})):[]}},{key:"getContents",value:function(e){var t;return(0,fl.H)(e)?e:e.children.every(fl.H)&&null!==(t=e.children[0].trim())&&void 0!==t?t:null}},{key:"findChildNS",value:function(e,t,r){var n=this.findChildrenNS(e,t,r);return 1!==n.length?null:n[0]}}])&&ye(t.prototype,r),n&&ye(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),pl={amp:"&",quot:'"',apos:"'",lt:"<",gt:">"},yl=function(e){function t(){return Ee(this,t),r.call(this)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(t,e);var r=Te(t);return Se(t,[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,r){var n=new dl,i=t.parameterNs,o=t.styleNs,a=ll.x.fromUTF8(e),u=[],c=null;if(!a)return u;try{c=n.parse(function(e){return e.replace(/<br\s*><\/br\s*>/gi,"<br />")}(a))}catch(F){throw new Zs.w({isFatal:!1,category:$s.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Failed to parse TTML. "+F,details:{}})}if(!c||!c.length)throw new Zs.w({isFatal:!1,category:$s.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Failed to parse TTML.",details:{}});var s=c.filter((function(e){return"tt"===e.tagName})),l=dl.setParent(s[0]);if(!l)throw new Zs.w({isFatal:!1,category:$s.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"TTML does not contain <tt> tag.",details:{}});var f=dl.getElementByTagName(l,"body");if(!f)return[];var h=n.getAttributeNS(l,i,"frameRate"),d=n.getAttributeNS(l,i,"subFrameRate"),p=n.getAttributeNS(l,i,"frameRateMultiplier"),y=n.getAttributeNS(l,i,"tickRate"),v=n.getAttributeNS(l,i,"cellResolution"),m=l.attributes["xml:space"]||"default",g=n.getAttributeNS(l,o,"extent");if("default"!==m&&"preserve"!==m)throw new Zs.w({isFatal:!1,category:$s.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"Invalid xml:space value: "+m,details:{}});var b,w="default"===m,_=new vl(h,d,p,y),E=t.getCellResolution(null!==v&&void 0!==v?v:""),O=dl.getElementByTagName(l,"metadata"),S=O?dl.getChildren(O).filter((function(e){return!(0,fl.H)(e)})):[],k=dl.getElementsByTagName(l,"style"),T=dl.getElementsByTagName(l,"region"),R=[],x=we(T);try{for(x.s();!(b=x.n()).done;){var P=b.value,j=t.parseCueRegion(P,k,g,n);j&&R.push(j)}}catch(B){x.e(B)}finally{x.f()}if(n.findChildren(f,"p").length)throw new Zs.w({category:$s.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",isFatal:!1,message:"<p> can only be inside <div> in TTML",details:{}});var A,L=we(n.findChildren(f,"div"));try{for(L.s();!(A=L.n()).done;){var I=A.value;if(n.findChildren(I,"span").length)throw new Zs.w({isFatal:!1,category:$s.q.MEDIA,code:"YASP_INVALID_SUBTITLES_XML",message:"<span> can only be inside <p> in TTML",details:{}});var D,N=we(n.findChildren(I,"p"));try{for(N.s();!(D=N.n()).done;){var M=D.value,C=t.parseCue({cueNode:M,offset:r.periodStart,rateInfo:_,metadataElements:S,styles:k,regionElements:T,cueRegions:R,whitespaceTrim:w,isNested:!1,cellResolution:E,xmlUtils:n,parentNode:I});C&&u.push(C)}}catch(B){N.e(B)}finally{N.f()}}}catch(B){L.e(B)}finally{L.f()}return u}}],[{key:"parseCue",value:function(e){var r,n,i=e.cueNode,o=e.offset,a=e.rateInfo,u=e.metadataElements,c=e.styles,s=e.regionElements,l=e.cueRegions,f=e.whitespaceTrim,h=e.isNested,d=e.cellResolution,p=e.xmlUtils,y=e.parentNode;if(!(n=(r=(0,fl.H)(i)?je(function(e,t){return{tagName:"span",attributes:{},children:[e],parent:t}}(i,y)):je(i)).parent))return null;var v=je(n),m=/\S/.test(r.textContent),g=r.textContent&&!m,b=Boolean(r.children.length),w="br"===r.tagName,_=r.attributes.begin||r.attributes.end||r.attributes.dur;if(!_&&g&&!w){if(!h)return null;if(f)return null}if(!m&&!b&&!_&&!w)return null;for(var E=t.parseTime(r,a),O=E.start,S=E.end;1===(null===(k=v)||void 0===k?void 0:k.nodeType)&&"tt"!==(null===(T=v)||void 0===T?void 0:T.tagName);){var k,T,R=t.resolveTime(v,a,O,S);O=R.start,S=R.end;var x=v.parent;if(!x)break;v=je(x)}if(null===O&&(O=0),O+=o,null===S?S=1/0:S+=o,"br"===r.tagName){var P=new al(O,S,"");return P.lineBreak=!0,P}var j="",A=[];if(3===r.nodeType)j=ve(r.textContent),f&&(j=(j=j.trim()).replace(/\s+/g," "));else{var L,I=we(r.children);try{for(I.s();!(L=I.n()).done;){var D=L.value,N=t.parseCue({cueNode:D,offset:o,rateInfo:a,metadataElements:u,styles:c,regionElements:s,cueRegions:l,whitespaceTrim:f,isNested:!0,cellResolution:d,xmlUtils:p,parentNode:r});N&&A.push(N)}}catch(G){I.e(G)}finally{I.f()}}var M=new al(O,S,j);M.nestedCues=A,d&&(M.cellResolution=d);var C=t.getElementsFromCollection(r,"region",s,"",p)[0];if(C&&C.attributes["xml:id"]){var F=C.attributes["xml:id"];M.region=l.filter((function(e){return e.id===F}))[0]}var B=t.getElementsFromCollection(r,"backgroundImage",u,"#",p,t.smpteNs)[0],U=0===A.length;return t.addStyle(M,r,C,B,c,h,U,p),M}},{key:"parseCueRegion",value:function(e,r,n,i){var o=new sl,a=e.attributes["xml:id"];if(!a)return null;o.id=a;var u=null;n&&(u=t.percentValues.exec(n)||t.pixelValues.exec(n));var c=u?Number(u[1]):null,s=u?Number(u[2]):null,l=null,f=null,h=t.getStyleAttributeFromRegion(e,r,"extent",i);h&&null!==(l=(f=t.percentValues.exec(h))||t.pixelValues.exec(h))&&(o.width=null!==c?100*Number(l[1])/c:Number(l[1]),o.height=null!==s?100*Number(l[2])/s:Number(l[2]),o.widthUnits=f||null!==c?ul.PERCENTAGE:ul.PX,o.heightUnits=f||null!==s?ul.PERCENTAGE:ul.PX);var d=t.getStyleAttributeFromRegion(e,r,"origin",i);return d&&null!==(l=(f=t.percentValues.exec(d))||t.pixelValues.exec(d))&&(o.viewportAnchorX=null!==s?100*Number(l[1])/s:Number(l[1]),o.viewportAnchorY=null!==c?100*Number(l[2])/c:Number(l[2]),o.viewportAnchorUnits=f||null!==c?ul.PERCENTAGE:ul.PX),o}},{key:"addStyle",value:function(e,r,n,i,o,a,u,c){var s=i?je(i):i,l=a||u;"rtl"===t.getStyleAttribute(r,n,o,"direction",l,c)&&(e.direction=Cs.HORIZONTAL_RIGHT_TO_LEFT);var f=t.getStyleAttribute(r,n,o,"writingMode",l,c);"tb"===f||"tblr"===f?e.writingMode=Fs.VERTICAL_LEFT_TO_RIGHT:"tbrl"===f?e.writingMode=Fs.VERTICAL_RIGHT_TO_LEFT:"rltb"===f||"rl"===f?e.direction=Cs.HORIZONTAL_RIGHT_TO_LEFT:f&&(e.direction=Cs.HORIZONTAL_LEFT_TO_RIGHT);var h=t.getStyleAttribute(r,n,o,"textAlign",l,c);h?(e.positionAlign=t.textAlignToPositionAlign[h],e.lineAlign=t.textAlignToLineAlign[h],e.textAlign=Ns[h.toUpperCase()]):e.textAlign=Ns.START;var d=t.getStyleAttribute(r,n,o,"displayAlign",l,c);d&&(e.displayAlign=Ms[d.toUpperCase()]);var p=t.getStyleAttribute(r,n,o,"color",l,c);p&&(e.color=p);var y=t.getStyleAttribute(r,n,o,"backgroundColor",l,c);y&&(e.backgroundColor=y);var v=t.getStyleAttribute(r,n,o,"border",l,c);v&&(e.border=v);var m=t.getStyleAttribute(r,n,o,"fontFamily",l,c);m&&(e.fontFamily=m);var g=t.getStyleAttribute(r,n,o,"fontWeight",l,c);g&&"bold"===g&&(e.fontWeight=Gs.BOLD);var b=t.getStyleAttribute(r,n,o,"wrapOption",l,c);e.wrapLine=!b||"noWrap"!==b;var w=t.getStyleAttribute(r,n,o,"lineHeight",l,c);w&&w.match(t.unitValues)&&(e.lineHeight=w);var _=t.getStyleAttribute(r,n,o,"fontSize",l,c);_&&((_.match(t.unitValues)||_.match(t.percentValue))&&(e.fontSize=_));var E=t.getStyleAttribute(r,n,o,"fontStyle",l,c);if(E&&(e.fontStyle=Hs[E.toUpperCase()]),s){var O=s.attributes.imagetype,S=s.attributes.encoding,k=s.textContent.trim();"PNG"===O&&"Base64"===S&&k&&(e.backgroundImage="data:image/png;base64,"+k)}var T=t.getStyleAttribute(r,n,o,"letterSpacing",l,c);T&&T.match(t.unitValues)&&(e.letterSpacing=T);var R=t.getStyleAttribute(r,n,o,"linePadding",l,c);R&&R.match(t.unitValues)&&(e.linePadding=R);var x=t.getStyleAttribute(r,n,o,"opacity",l,c);x&&(e.opacity=parseFloat(x));var P=t.getStyleAttributeFromRegion(n,o,"textDecoration",c);P&&t.addTextDecoration(e,P);var j=t.getStyleAttributeFromElement(r,o,"textDecoration",c);j&&t.addTextDecoration(e,j)}},{key:"addTextDecoration",value:function(e,t){var r,n=we(t.split(" "));try{for(n.s();!(r=n.n()).done;){switch(r.value){case"underline":e.textDecoration.includes(Vs.UNDERLINE)||e.textDecoration.push(Vs.UNDERLINE);break;case"noUnderline":e.textDecoration.includes(Vs.UNDERLINE)&&ol.remove(e.textDecoration,Vs.UNDERLINE);break;case"lineThrough":e.textDecoration.includes(Vs.LINE_THROUGH)||e.textDecoration.push(Vs.LINE_THROUGH);break;case"noLineThrough":e.textDecoration.includes(Vs.LINE_THROUGH)&&ol.remove(e.textDecoration,Vs.LINE_THROUGH);break;case"overline":e.textDecoration.includes(Vs.OVERLINE)||e.textDecoration.push(Vs.OVERLINE);break;case"noOverline":e.textDecoration.includes(Vs.OVERLINE)&&ol.remove(e.textDecoration,Vs.OVERLINE);break;default:continue}}}catch(i){n.e(i)}finally{n.f()}}},{key:"getStyleAttribute",value:function(e,r,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5?arguments[5]:void 0,u=t.getStyleAttributeFromElement(e,n,i,a);return u||(o?t.getStyleAttributeFromRegion(r,n,i,a):null)}},{key:"getStyleAttributeFromRegion",value:function(e,r,n,i){var o=t.styleNs;if(!e)return null;var a=i.getAttributeNS(e,o,n);return a||t.getInheritedStyleAttribute(e,r,n,i)}},{key:"getStyleAttributeFromElement",value:function(e,r,n,i){var o=t.styleNs,a=i.getAttributeNS(e,o,n);return a||t.getInheritedStyleAttribute(e,r,n,i)}},{key:"getInheritedStyleAttribute",value:function(e,r,n,i){for(var o=t.styleNs,a=t.styleEbuttsNs,u=t.getElementsFromCollection(e,"style",r,"",i),c=null,s=0;s<u.length;s++){var l=i.getAttributeNS(u[s],a,n);l||(l=i.getAttributeNS(u[s],o,n)),l||(l=t.getStyleAttributeFromElement(u[s],r,n,i)),l&&(c=l)}return c}},{key:"getElementsFromCollection",value:function(e,r,n,i,o,a){var u=[];if(!e||n.length<1)return u;var c=t.getInheritedAttribute(e,r,o,a);if(c){var s,l=we(c.split(" "));try{for(l.s();!(s=l.n()).done;){var f,h=s.value,d=we(n);try{for(d.s();!(f=d.n()).done;){var p=f.value;if(i+p.attributes["xml:id"]===h){u.push(p);break}}}catch(y){d.e(y)}finally{d.f()}}}catch(y){l.e(y)}finally{l.f()}}return u}},{key:"getInheritedAttribute",value:function(e,t,r,n){for(var i=null;e&&!(i=n?r.getAttributeNS(e,n,t):e.attributes[t]);){var o=e.parent;if(null===o)break;e=o}return i}},{key:"resolveTime",value:function(e,r,n,i){var o=t.parseTime(e,r);return null===n?n=o.start:null!==o.start&&(n+=o.start),null===i?i=o.end:null!==o.start&&(i+=o.start),{start:n,end:i}}},{key:"parseTime",value:function(e,r){var n=t.parseTimeAttribute(e.attributes.begin,r),i=t.parseTimeAttribute(e.attributes.end,r),o=t.parseTimeAttribute(e.attributes.dur,r);return null===i&&null!==o&&(i=n+o),{start:n,end:i}}},{key:"parseTimeAttribute",value:function(e,r){var n=null;if(t.timeColonFormatFrames.test(e))n=t.parseColonTimeWithFrames(r,e);else if(t.timeColonFormat.test(e))n=t.parseTimeFromRegex(t.timeColonFormat,e);else if(t.timeColonFormatMilliseconds.test(e))n=t.parseTimeFromRegex(t.timeColonFormatMilliseconds,e);else if(t.timeFramesFormat.test(e))n=t.parseFramesTime(r,e);else if(t.timeTickFormat.test(e))n=t.parseTickTime(r,e);else if(t.timeHMSFormat.test(e))n=t.parseTimeFromRegex(t.timeHMSFormat,e);else if(e)throw new Zs.w({isFatal:!1,category:$s.q.MEDIA,code:"YASP_INVALID_TEXT_CUE",details:{},message:"Could not parse cue time range in TTML"});return n}},{key:"parseFramesTime",value:function(e,r){var n=t.timeFramesFormat.exec(r);return n?Number(n[1])/e.frameRate:null}},{key:"parseTickTime",value:function(e,r){var n=t.timeTickFormat.exec(r);return n?Number(n[1])/e.tickRate:null}},{key:"parseColonTimeWithFrames",value:function(e,r){var n=t.timeColonFormatFrames.exec(r);if(!n)return null;var i=Number(n[1]),o=Number(n[2]),a=Number(n[3]),u=Number(n[4]);return(a+=(u+=(Number(n[5])||0)/e.subFrameRate)/e.frameRate)+60*o+3600*i}},{key:"parseTimeFromRegex",value:function(e,t){var r=e.exec(t);if(null===r||""===r[0])return null;var n=Number(r[1])||0,i=Number(r[2])||0,o=Number(r[3])||0;return(Number(r[4])||0)/1e3+o+60*i+3600*n}},{key:"getCellResolution",value:function(e){if(!e)return null;var t=/^(\d+) (\d+)$/.exec(e);return t?{columns:parseInt(t[1],10),rows:parseInt(t[2],10)}:null}}]),t}(nl);Pe(yl,"styleNs","http://www.w3.org/ns/ttml#styling"),Pe(yl,"parameterNs","http://www.w3.org/ns/ttml#parameter"),Pe(yl,"percentValues",/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/),Pe(yl,"percentValue",/^(\d{1,2}(?:\.\d+)?|100)%$/),Pe(yl,"unitValues",/^(\d+px|\d+em|\d*\.?\d+c)$/),Pe(yl,"pixelValues",/^(\d+)px (\d+)px$/),Pe(yl,"timeColonFormatFrames",/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/),Pe(yl,"timeColonFormat",/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/),Pe(yl,"timeColonFormatMilliseconds",/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/),Pe(yl,"timeFramesFormat",/^(\d*(?:\.\d*)?)f$/),Pe(yl,"timeTickFormat",/^(\d*(?:\.\d*)?)t$/),Pe(yl,"timeHMSFormat",new RegExp(["^(?:(\\d*(?:\\.\\d*)?)h)?","(?:(\\d*(?:\\.\\d*)?)m(?!s))?","(?:(\\d*(?:\\.\\d*)?)s)?","(?:(\\d*(?:\\.\\d*)?)ms)?$"].join(""))),Pe(yl,"smpteNs","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"),Pe(yl,"styleEbuttsNs","urn:ebu:tt:style"),Pe(yl,"textAlignToLineAlign",{left:Us.START,center:Us.CENTER,right:Us.END,start:Us.START,end:Us.END}),Pe(yl,"textAlignToPositionAlign",{left:Ds.LEFT,center:Ds.CENTER,right:Ds.RIGHT});var vl=Se((function e(t,r,n,i){if(Ee(this,e),Pe(this,"frameRate",void 0),Pe(this,"subFrameRate",void 0),Pe(this,"tickRate",void 0),this.frameRate=Number(t)||30,this.subFrameRate=Number(r)||1,this.tickRate=Number(i),0===this.tickRate&&(this.tickRate=t?this.frameRate*this.subFrameRate:1),n){var o=/^(\d+) (\d+)$/g.exec(n);if(o){var a=Number(o[1])/Number(o[2]);this.frameRate*=a}}})),ml=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r="parser",n=new yl,r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"parseInit",value:function(e){var t=!1;if((new rl.p).box("moov",rl.p.children).box("trak",rl.p.children).box("mdia",rl.p.children).box("minf",rl.p.children).box("stbl",rl.p.children).fullBox("stsd",rl.p.sampleDescription).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Error("Can not parseInt while subtitles processing")}},{key:"parseMedia",value:function(e,t){var r=this,n=!1,i=[];if((new rl.p).box("mdat",rl.p.allData((function(e){n=!0,i=i.concat(r.parser.parseMedia(e,t))}))).parse(e,!1),!n)throw new Error("Can not parseInt while subtitles processing.");return i}}])&&Ae(t.prototype,r),n&&Ae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),gl=r(3498),bl=r(19071),wl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(t,e);var r,n,i,o=Ce(t);return r=t,i=[{key:"parseRegion_",value:function(e){var r=new il(e),n=new sl;r.readWord(),r.skipWhitespace();for(var i=r.readWord();i;)t.parseRegionSetting_(n,i),r.skipWhitespace(),i=r.readWord();return n}},{key:"parseCue_",value:function(e,r,n){if(1===e.length&&!e[0])return null;if(/^NOTE($|[ \t])/.test(e[0]))return null;if("STYLE"===e[0])return null;var i=null;e[0].includes("--\x3e")||(i=e[0],e.splice(0,1));var o=new il(e[0]),a=t.parseTime_(o),u=o.readRegex(/[ \t]+-->[ \t]+/g),c=t.parseTime_(o);if(null===a||null===u||null===c)return null;r&&(a+=r,c+=r);var s=e.slice(1).join("\n").trim(),l=new al(a,c,s);o.skipWhitespace();for(var f=o.readWord();f;)t.parseCueSetting(l,f,n),o.skipWhitespace(),f=o.readWord();return null!==i&&(l.id=i),l}},{key:"parseCueStyles",value:function(e,r){var n="<span>"+e+"</span>",i=(new dl).parse(n);if(i){var o=[],a=i;if(1===a.length&&3===je(a[0]).nodeType)return void(r.payload=e);var u,c=Ie(a);try{for(c.s();!(u=c.n()).done;){var s=u.value;t.generateCueFromElement(s,r,o)}}catch(l){c.e(l)}finally{c.f()}r.nestedCues=o}else r.payload=e}},{key:"generateCueFromElement",value:function(e,r,n){var i=je(e),o=r.clone();if(1===i.nodeType&&i.tagName){var a,u=Gs.BOLD,c=Hs.ITALIC,s=Vs.UNDERLINE,l=Ie(e.tagName.split(/[ .]+/));try{for(l.s();!(a=l.n()).done;)switch(a.value){case"b":o.fontWeight=u;break;case"i":o.fontStyle=c;break;case"u":o.textDecoration.push(s);break;default:continue}}catch(p){l.e(p)}finally{l.f()}}if(3===i.nodeType)o.payload=i.textContent,n.push(o);else{var f,h=Ie(i.children);try{for(h.s();!(f=h.n()).done;){var d=f.value;(0,fl.H)(d)||t.generateCueFromElement(d,o,n)}}catch(p){h.e(p)}finally{h.f()}}}},{key:"parseCueSetting",value:function(e,r,n){var i=null;if(i=/^align:(start|middle|center|end|left|right)$/.exec(r))t.setTextAlign_(e,i[1]);else if(i=/^vertical:(lr|rl)$/.exec(r))t.setVerticalWritingMode_(e,i[1]);else if(i=/^size:([\d.]+)%$/.exec(r))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(r))e.position=Number(i[1]),i[2]&&t.setPositionAlign_(e,i[2]);else{if(!(i=/^region:(.*)$/.exec(r)))return t.parsedLineValueAndInterpretation_(e,r);var o=t.getRegionById_(n,i[1]);o&&(e.region=o)}return!0}},{key:"getRegionById_",value:function(e,t){var r=e.filter((function(e){return e.id===t}));return r.length?r[0]:null}},{key:"parseRegionSetting_",value:function(e,t){var r=null;if(r=/^id=(.*)$/.exec(t))e.id=r[1];else if(r=/^width=(\d{1,2}|100)%$/.exec(t))e.width=Number(r[1]);else if(r=/^lines=(\d+)$/.exec(t))e.height=Number(r[1]),e.heightUnits=ul.LINES;else if(r=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.regionAnchorX=Number(r[1]),e.regionAnchorY=Number(r[2]);else if(r=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t))e.viewportAnchorX=Number(r[1]),e.viewportAnchorY=Number(r[2]);else{if(!(r=/^scroll=up$/.exec(t)))return!1;e.scroll=cl.UP}return!0}},{key:"setTextAlign_",value:function(e,t){e.textAlign="middle"===t?Ns.CENTER:Ns[t.toUpperCase()]}},{key:"setPositionAlign_",value:function(e,t){e.positionAlign="line-left"===t||"start"===t?Ds.LEFT:"line-right"===t||"end"===t?Ds.RIGHT:Ds.CENTER}},{key:"setVerticalWritingMode_",value:function(e,t){e.writingMode="lr"===t?Fs.VERTICAL_LEFT_TO_RIGHT:Fs.VERTICAL_RIGHT_TO_LEFT}},{key:"parsedLineValueAndInterpretation_",value:function(e,t){var r=null;if(r=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=Bs.PERCENTAGE,e.line=Number(r[1]),r[2]&&(e.lineAlign=Us[r[2].toUpperCase()]);else{if(!(r=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t)))return!1;e.lineInterpretation=Bs.LINE_NUMBER,e.line=Number(r[1]),r[2]&&(e.lineAlign=Us[r[2].toUpperCase()])}return!0}},{key:"parseTime_",value:function(e){var t=e.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g);if(null===t)return null;var r=Number(t[1])||0,n=Number(t[2]),i=Number(t[3]),o=Number(t[4]);return n>59||i>59?null:o/1e3+i+60*n+3600*r}}],(n=[{key:"parseInit",value:function(e){}},{key:"parseMedia",value:function(e,r){var n=ll.x.fromUTF8(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new Error("INVALID_TEXT_HEADER");var o=r.segmentStart;null===o&&(o=0);for(var a=[],u=i[0].split("\n"),c=1;c<u.length;c++)if(/^Region:/.test(u[c])){var s=t.parseRegion_(u[c]);a.push(s)}for(var l=[],f=1;f<i.length;f++){u=i[f].split("\n");var h=t.parseCue_(u,o,a);h&&l.push(h)}return l}}])&&Ne(r.prototype,n),i&&Ne(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(nl),_l=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ze(Ye(e=o.call(this)),"timescale",null),ze(Ye(e),"parseInit",(function(t){var r=!1;if((new rl.p).box("moov",rl.p.children).box("trak",rl.p.children).box("mdia",rl.p.children).fullBox("mdhd",(function(t){0===t.version?(t.reader.skip(4),t.reader.skip(4),e.timescale=t.reader.readUint32(),t.reader.skip(4)):(t.reader.skip(8),t.reader.skip(8),e.timescale=t.reader.readUint32(),t.reader.skip(8)),t.reader.skip(4)})).box("minf",rl.p.children).box("stbl",rl.p.children).fullBox("stsd",rl.p.sampleDescription).box("wvtt",(function(){r=!0})).parse(t),!e.timescale)throw new Error("Can not get vtt timescale");if(!r)throw new Error("No WVTT box was found")})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&He(e,t)}(t,e);var r,n,i,o=Ve(t);return r=t,i=[{key:"parseTFHD",value:function(e,t){return t.skip(4),1&e&&t.skip(8),2&e&&t.skip(4),8&e?t.readUint32():null}},{key:"parseTRUN",value:function(e,t,r){var n=r.readUint32();1&t&&r.skip(4),4&t&&r.skip(4);for(var i=[],o=0;o<n;o++){var a={duration:null,sampleSize:null,timeOffset:null};256&t&&(a.duration=r.readUint32()),512&t&&(a.sampleSize=r.readUint32()),1024&t&&r.skip(4),2048&t&&(a.timeOffset=0===e?r.readUint32():r.readInt32()),i.push(a)}return i}},{key:"parseVTTC",value:function(e,r,n){var i,o,a="";return(new rl.p).box("payl",rl.p.allData((function(e){i=ll.x.fromUTF8(e)}))).box("iden",rl.p.allData((function(e){o=ll.x.fromUTF8(e)}))).box("sttg",rl.p.allData((function(e){a=ll.x.fromUTF8(e)}))).parse(e),i?t.assembleCue(i,o,a,r,n):null}},{key:"assembleCue",value:function(e,t,r,n,i){var o=new al(n,i,e);if(wl.parseCueStyles(e,o),t&&(o.id=t),r)for(var a=new il(r),u=a.readWord();u;)wl.parseCueSetting(o,u,[]),a.skipWhitespace(),u=a.readWord();return o}}],(n=[{key:"parseMedia",value:function(e,r){var n=this;if(!this.timescale)throw new Error("No init segment for MP4+VTT!");var i=0,o=[],a=new Uint8Array,u=[],c=!1,s=!1,l=!1,f=null;if((new rl.p).box("moof",rl.p.children).box("traf",rl.p.children).fullBox("tfdt",(function(e){c=!0,0!==e.version&&1!==e.version||(i=0===e.version?e.reader.readUint32():e.reader.readUint64())})).fullBox("tfhd",(function(e){null!==e.flags&&(f=t.parseTFHD(e.flags,e.reader))})).fullBox("trun",(function(e){s=!0,null!==e.version&&null!==e.flags&&(o=o.concat(t.parseTRUN(e.version,e.flags,e.reader)))})).box("mdat",rl.p.allData((function(e){l=!0,a=bl.P.concat(a,e)}))).parse(e),!l&&!c&&!s||!a.length)throw new Error("Can not parse mp4 vtt because required box is missing.");var h=i,d=new DataView(a.buffer,a.byteOffset,a.byteLength),p=new gl.K(d,gl.I.BIG_ENDIAN);return o.forEach((function(e){var o=e.duration||f,a=e.timeOffset?i+e.timeOffset:h;h=a+(o||0);var c=0;do{var s=p.readUint32();c+=s;var l=p.readUint32(),d=rl.p.typeToString(l),y=null;if("vttc"===d?s>8&&(y=p.readBytes(s-8)):p.skip(s-8),o&&y){if(null===n.timescale)throw new Error("No initial vtt segment");var v=t.parseVTTC(y,r.periodStart+a/n.timescale,r.periodStart+h/n.timescale);u.push(v)}}while(e.sampleSize&&c<e.sampleSize)})),u.filter(Boolean)}}])&&Ge(r.prototype,n),i&&Ge(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(nl),El=r(83361),Ol=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),$e(this,"parser",null),$e(this,"timestampOffset",0),$e(this,"appendWindowStart",0),$e(this,"appendWindowEnd",1/0),$e(this,"bufferStart",null)}var t,r,n;return t=e,n=[{key:"registerParser",value:function(t,r){e.parserMap[t]=r}}],(r=[{key:"initParser",value:function(t){if("application/cea-608"!==t){var r=e.parserMap[t];this.parser=new r}}},{key:"appendBuffer",value:function(e,t,r){var n=this;return El.resolve().then((function(){if(n.parser){if(null!==t&&null!==r){var i={periodStart:n.timestampOffset,segmentStart:t,segmentEnd:r},o=n.parser.parseMedia(e,i).filter((function(e){return e.startTime>=n.appendWindowStart&&e.startTime<n.appendWindowEnd}));return null===n.bufferStart&&(n.bufferStart=Math.max(t,n.appendWindowStart)),o}n.parser.parseInit(e)}}))}}])&&Ke(t.prototype,r),n&&Ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();$e(Ol,"parserMap",{}),Ol.registerParser("text/vtt",wl),Ol.registerParser('text/vtt; codecs="vtt"',wl),Ol.registerParser('text/vtt; codecs="wvtt"',wl),Ol.registerParser("application/ttml+xml",yl),Ol.registerParser('application/mp4; codecs="stpp"',ml),Ol.registerParser('application/mp4; codecs="stpp.ttml.im1t"',ml),Ol.registerParser('application/mp4; codecs="stpp.TTML.im1t"',ml),Ol.registerParser('application/mp4; codecs="wvtt"',_l);var Sl=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),nt(tt(r=o.call(this,e)),"kind",void 0),nt(tt(r),"label",void 0),nt(tt(r),"type","text"),nt(tt(r),"codecs",void 0),r.kind=t.parseKind(e.kind),r.codecs=e.codecs,r.label=e.label||e.language||"Yasp Text Track",r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}(t,e);var r,n,i,o=Qe(t);return r=t,i=[{key:"parseKind",value:function(e){switch(e){case"subtitle":return"subtitles";default:return e}}}],(n=[{key:"getFullMimeType",value:function(){return this.codecs?"".concat(this.mimeType,"; codecs=").concat(JSON.stringify(this.codecs)):this.mimeType}},{key:"appendInitSegment",value:function(e){this.init=e,this.parseSegment(e)}},{key:"parseSegment",value:function(e){var r=this;t.textEngine.initParser(this.getFullMimeType());var n=e.isInitSegment,i=n?null:e.start,o=n?null:e.end,a=e.getChunks(),u=0;a.forEach((function(e){u+=e.length}));var c=new Uint8Array(u),s=0;a.forEach((function(e){c.set(e,s),s+=e.length})),t.textEngine.appendBuffer(c,i,o).then((function(e){if(e){var t=r.presentationTimeOffset/1e3,n=e.map((function e(r){return r.startTime-=t,r.endTime-=t,r.nestedCues&&(r.nestedCues=r.nestedCues.map(e)),r}));r.emit("CuesAdded",n)}}))}}])&&Xe(r.prototype,n),i&&Xe(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Qs);nt(Sl,"textEngine",new Ol);var kl,Tl,Rl,xl,Pl,jl,Al=r(16258),Ll=r(10060),Il=r(83361),Dl=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ll.y;return ut(this,t),vt(pt(e=u.call(this)),"destroyed",!1),vt(pt(e),"closing",!1),vt(pt(e),"closed",!1),vt(pt(e),"paused",!0),vt(pt(e),"flushing",!1),vt(pt(e),"concatBuffer",void 0),vt(pt(e),"buffer",[]),vt(pt(e),"flushBuffer",(function(){if(!e.flushing){e.flushing=!0;for(var t=0;!e.paused&&t<e.buffer.length;)e.emit("Data",e.buffer[t]),t++;e.buffer.splice(0,t),e.flushing=!1,t>0&&0===e.buffer.length&&e.emit("Drain")}})),e.on("Resume",e.flushBuffer),e.once("Destroy",(function(){e.destroyed=!0})),e.concatBuffer=r,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(t,e);var r,n,i,o,a,u=ht(t);return r=t,(n=[{key:"isClosing",value:function(){return this.closing&&!this.destroyed}},{key:"isClosed",value:function(){return this.closed&&!this.destroyed}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"asWritable",value:function(){return this}},{key:"asReadable",value:function(){return this}},{key:"write",value:function(e){if(this.destroyed)throw new Error("Unexpected write after destroy");if(this.closing)throw new Error("Unexpected write after close");return this.buffer.push(e),this.buffer=this.concatBuffer(this.buffer),this.flushBuffer(),!this.paused&&0===this.buffer.length}},{key:"read",value:(o=ot().mark((function e(){var t=this;return ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Unexpected read after destroy");case 2:if(!this.closed){e.next=4;break}return e.abrupt("return",Il.resolve({value:void 0,done:!0}));case 4:return e.abrupt("return",new Il((function(e,r){var n=function(){r(new Error("Unexpected destroy while read"))},i=function(){e({value:void 0,done:!0})};t.once("Data",(function(r){t.pause(),e({value:r,done:!1}),t.off("Destroy",n),t.off("Close",i)})),t.once("Destroy",n),t.once("Close",i),t.resume()})));case 5:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Il((function(r,n){function i(e){at(u,r,n,i,a,"next",e)}function a(e){at(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"pipe",value:function(e){this.on("Data",(function(t){t&&e.write(t)})),this.once("Close",(function(){e.close()})),this.resume()}},{key:"pause",value:function(){this.paused=!0,this.emit("Pause")}},{key:"resume",value:function(){this.paused=!1,this.emit("Resume")}},{key:"destroy",value:function(){this.buffer=[],st(yt(t.prototype),"destroy",this).call(this)}},{key:"close",value:function(){var e=this;this.closing||(this.closing=!0,this.buffer.length>0?this.once("Drain",(function(){e.closed=!0,e.emit("Close")})):(this.closed=!0,this.emit("Close")))}}])&&ct(r.prototype,n),i&&ct(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Nl=r(84780),Ml=r(24611),Cl=function(e){function t(e){var r,n=e.start,i=e.end,a=e.number,u=e.isInitSegment,c=e.trackId,s=e.bitrate,l=e.width,f=e.height,h=e.originalStart,d=e.isMP4,p=void 0!==d&&d,y=e.isEncrypted,v=void 0!==y&&y,m=e.startByteWithOffset,g=void 0===m?0:m,b=e.endByteWithOffset,w=void 0===b?0:b;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tt(St(r=o.call(this)),"trackId",void 0),Tt(St(r),"isInitSegment",void 0),Tt(St(r),"number",void 0),Tt(St(r),"start",0),Tt(St(r),"end",0),Tt(St(r),"duration",0),Tt(St(r),"bitrate",void 0),Tt(St(r),"originalStart",void 0),Tt(St(r),"width",0),Tt(St(r),"height",0),Tt(St(r),"expectedSize",void 0),Tt(St(r),"loadedRawSize",0),Tt(St(r),"getLoadingDuration",(function(){return null})),Tt(St(r),"getWaitingDuration",(function(){return null})),Tt(St(r),"isMP4",!1),Tt(St(r),"isEncrypted",!1),Tt(St(r),"startByteWithOffset",0),Tt(St(r),"endByteWithOffset",0),Tt(St(r),"chunks",[]),Tt(St(r),"finishedSegment",!1),Tt(St(r),"failedSegment",!1),Tt(St(r),"chunkStream",null),r.start=n,r.end=i,r.duration=Math.max(i-n,0),r.number=a,r.bitrate=s,r.expectedSize=s*(r.duration/1e3)/8,r.width=l,r.height=f,r.isInitSegment=u,r.trackId=c,r.originalStart=h,r.loadedRawSize=0,r.isMP4=p,r.isEncrypted=v,r.startByteWithOffset=g,r.endByteWithOffset=w,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_t(e,t)}(t,e);var r,n,i,o=Et(t);return r=t,i=[{key:"concatChunks",value:function(e){return e.length<2?e:"string"===typeof e[0]?[e.join("")]:[bl.P.concat.apply(bl.P,gt(e))]}}],(n=[{key:"waitingStarted",value:function(){this.getWaitingDuration=(0,Ml.u)()}},{key:"loadingStarted",value:function(){this.getLoadingDuration=(0,Ml.u)()}},{key:"finished",get:function(){return this.finishedSegment}},{key:"failed",get:function(){return this.failedSegment}},{key:"setExpectedSize",value:function(e){isNaN(e)||(this.expectedSize=e)}},{key:"append",value:function(e){var t;this.chunks.push(e),null===(t=this.chunkStream)||void 0===t||t.write(e)}},{key:"finish",value:function(){var e;this.finishedSegment=!0,null===(e=this.chunkStream)||void 0===e||e.close(),this.chunkStream=null,this.emit("Finish")}},{key:"fail",value:function(){this.failedSegment=!0,this.emit("Failed"),this.chunkStream&&this.chunkStream.destroy()}},{key:"getExpectedTimeToLoad",value:function(){if(null===this.getLoadingDuration)return this.duration;var e=this.getLoadingDuration();return null===e||0===this.loadedRawSize?this.duration:e*(Math.max(this.expectedSize,this.loadedRawSize)/this.loadedRawSize)-e}},{key:"getChunkStream",value:function(){this.chunkStream||(this.chunkStream=new Dl(t.concatChunks));var e=this.chunkStream;return this.chunks.forEach((function(t){return null===e||void 0===e?void 0:e.write(t)})),this.finished&&(0===this.chunks.length&&(0,Nl.L)(new Error("Finished empty segment")),e.close(),this.chunkStream=null),e.asReadable()}},{key:"getChunks",value:function(){return this.chunks}},{key:"getDebugInfo",value:function(){return{chunksCount:this.chunks.length,chunksSize:this.chunks.reduce((function(e,t){return e+t.length}),0),start:this.start,end:this.end,duration:this.duration,finishedSegment:this.finishedSegment,number:this.number,expectedSize:this.expectedSize,loadingDuration:this.getLoadingDuration?this.getLoadingDuration():null,hasChunkStream:null!==this.chunkStream}}}])&&wt(r.prototype,n),i&&wt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Fl=r(28513),Bl=r(88554),Ul=r(86589),Gl=r(48448),Hl=function(e){function t(e){var r,n=e.timeline,i=e.mediaState;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xt($t(r=o.call(this)),"timeline",void 0),Xt($t(r),"mediaState",void 0),Xt($t(r),"history",[]),Xt($t(r),"currentBuffering",null),Xt($t(r),"currentTargetLatency",7e3),r.timeline=n,r.mediaState=i,i.on("BufferingChange",(function(e){r.setBuffering(e)})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wt(e,t)}(t,e);var r,n,i,o=zt(t);return r=t,(n=[{key:"destroy",value:function(){qt(Zt(t.prototype),"destroy",this).call(this),this.mediaState.off("BufferingChange")}},{key:"notifyTargetLatency",value:function(){this.emit("TargetLatencyUpdate",this.currentTargetLatency)}},{key:"checkIsLiveEdge",value:function(){var e=this.mediaState.currentTime;if(!e)return!1;var t=1e3*e,r=this.checkForType("audio",t);return this.checkForType("video",t)||r}},{key:"checkForType",value:function(e,t){var r=this.timeline.getSegment(e,t).segment;if(!r)return!1;var n=this.timeline.getLastSegmentNumber(e);if(!n)return!1;var i=this.timeline.getMaxSegmentDuration(),o=Math.ceil(7e3/i);return r.number>=n-o}},{key:"setBuffering",value:function(e){if(e){if(this.currentBuffering||!this.checkIsLiveEdge())return;this.currentBuffering={start:Date.now(),getTime:(0,Ml.u)()}}else{var t;if(!this.currentBuffering)return;var r=null===(t=this.currentBuffering)||void 0===t?void 0:t.getTime();this.history.push({start:this.currentBuffering.start,end:this.currentBuffering.start+r,duration:r}),this.currentBuffering=null,this.checkHistory()}}},{key:"getAverageStalledDuration",value:function(){return this.history.reduce((function(e,t){return e+t.duration}),0)/this.history.length}},{key:"checkHistory",value:function(){var e=Date.now();this.history=this.history.filter((function(t){return e-t.end<=2e4})),this.history.length>=2&&(this.currentTargetLatency=this.currentTargetLatency+this.getAverageStalledDuration(),this.notifyTargetLatency(),this.timeline.setTargetLatency(this.currentTargetLatency),this.history=[])}}])&&Vt(r.prototype,n),i&&Vt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Vl={avc1:["avc3"],avc3:["avc1"]},ql=r(89273),Yl=r(82619),Wl=r(99628),zl=r(83361),Kl=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pr(hr(e=o.call(this)),"audio",[]),pr(hr(e),"text",[]),pr(hr(e),"video",[]),pr(hr(e),"bufferedInfoChangedPromise",null),pr(hr(e),"selectedVideoTrackHeight",void 0),pr(hr(e),"selectedVideoTracks",[]),pr(hr(e),"selectedAudioLanguage",void 0),pr(hr(e),"selectedTextTrack",void 0),pr(hr(e),"targetLatency",void 0),pr(hr(e),"isFirstUpdateVideoTracks",!0),pr(hr(e),"mpd",void 0),pr(hr(e),"externalPresentationDelay",void 0);var r=(0,Yl.c)(7);return e.targetLatency=1e3*r,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(t,e);var r,n,i,o=lr(t);return r=t,(n=[{key:"checkTrackAvailableToLoad",value:function(e,t){var r;switch(t){case"text":return(null===(r=this.selectedTextTrack)||void 0===r?void 0:r.id)===e;case"video":return 0===this.selectedVideoTracks.length||this.selectedVideoTracks.some((function(t){return e===t.id}));case"audio":if(!this.selectedAudioLanguage)return!0;var n=this.findTrackById(e,t);return(null===n||void 0===n?void 0:n.language)===this.selectedAudioLanguage;default:return!1}}},{key:"setVideoTrack",value:function(e){var t=this.findTrackById(e,"video"),r=t?t.height:void 0;r!==this.selectedVideoTrackHeight&&(this.selectedVideoTrackHeight=r,this.updateSelectedVideoTracks(),this.emit("VideoTrackChange",t?e:"auto"))}},{key:"removeVideoTrack",value:function(e){var t=this.findTrackById(e,"video");if(t){var r=this.video.indexOf(t);this.video.splice(r,1),t.clear(0,1/0);var n,i=this.selectedVideoTrackHeight;void 0!==i&&t.height===i&&(this.updateSelectedVideoTracks(),0===this.selectedVideoTracks.length&&this.setVideoTrack(null===(n=Gt(this.video).find((function(e){return e.height<=i})))||void 0===n?void 0:n.id))}}},{key:"updateVideoTracks",value:function(e){var t=this,r=this.getVideoTracksInfo().filter((function(e){return e.id!==Bl.A})).map((function(e){return e.height}));e.forEach((function(e){t.obtainTimelineTrack(or(or(or({},e),e.segmentTemplate),{},{bitrate:e.bandwidth,language:"unknown",type:"video"}))}));var n=[];this.video.map((function(e){return e.id})).forEach((function(r){!e.some((function(e){return e.id===r}))&&(t.removeVideoTrack(r),n.push(r))})),this.updateSelectedVideoTracks();var i=[];this.isFirstUpdateVideoTracks&&(this.isFirstUpdateVideoTracks=!1,i.push(this.getAutoVideoTrackInfo())),this.getVideoTracksInfo().filter((function(e){return e.id!==Bl.A})).forEach((function(e){r.includes(e.height)||i.push({selected:e.height===t.selectedVideoTrackHeight,width:e.width,height:e.height,bitrate:e.bitrate,label:e.label,language:e.language,frameRate:e.frameRate,id:e.id,kind:"main"})})),(i.length||n.length)&&this.emit("VideoTracksChange",{added:i,removed:n})}},{key:"updateSelectedVideoTracks",value:function(){var e=this;this.selectedVideoTracks=this.selectedVideoTrackHeight?this.video.filter((function(t){return t.height===e.selectedVideoTrackHeight})):Gt(this.video)}},{key:"setAudioLanguage",value:function(e){var t=this,r=this.audio.find((function(e){return e.language===t.selectedAudioLanguage})),n=this.audio.find((function(t){return t.language===e}));if(n&&e!==this.selectedAudioLanguage){var i=Jt(r,n);this.selectedAudioLanguage=e,i||this.emit("CodecsChange",n),this.emit("AudioLanguageChange",e)}}},{key:"setTextTrack",value:function(e){var t;if(this.selectedTextTrack&&this.selectedTextTrack.clear(0,1/0),null!==e){var r=this.text.find((function(t){return t.language===e.language}));r&&(null===r||void 0===r?void 0:r.language)!==(null===(t=this.selectedTextTrack)||void 0===t?void 0:t.language)&&(this.selectedTextTrack=r||this.selectedTextTrack,this.emit("TextTrackChange",this.selectedTextTrack))}else this.selectedTextTrack=void 0}},{key:"getVideoTracksInfo",value:function(){var e,t=this;return[this.getAutoVideoTrackInfo()].concat(tr((e=this.video,(0,Ul.z)(e.reduce((function(e,t){return e[t.height]?t.bitrate>e[t.height].bitrate&&(e[t.height]=t):e[t.height]=t,e}),{})).sort((function(e,t){return t.bitrate-e.bitrate}))).map((function(e){return{selected:e.height===t.selectedVideoTrackHeight,width:e.width,height:e.height,bitrate:e.bitrate,label:e.label,language:e.language,frameRate:e.frameRate,id:e.id,kind:"main"}}))))}},{key:"getAutoVideoTrackInfo",value:function(){return{id:Bl.A,selected:void 0===this.selectedVideoTrackHeight,kind:"main",language:"unknown",label:""}}},{key:"getAudioTracksInfo",value:function(){var e=this,t={};return this.audio.forEach((function(r){var n=r.language;n&&(t[n]?r.bitrate>t[n].bitrate&&(t[n].bitrate=r.bitrate):t[n]={selected:n===e.selectedAudioLanguage,id:r.id,label:r.label||"",language:n,kind:"main",bitrate:r.bitrate,channels:r.channels})})),(0,Ul.z)(t)}},{key:"getTextTracksInfo",value:function(){return this.text.map((function(e){return{id:e.id,language:e.language,label:e.label,kind:e.kind}}))}},{key:"getSegmentsForTracks",value:function(e,t){var r=this;if(null===e)return[];switch(t){case"video":return this.selectedVideoTracks.map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);case"audio":return this.audio.filter((function(e){var t;return e.language===(null!==(t=r.selectedAudioLanguage)&&void 0!==t?t:e.language)})).map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);case"text":return this.text.filter((function(e){var t,n;return e.label===(null===(t=r.selectedTextTrack)||void 0===t?void 0:t.label)||e.language===(null===(n=r.selectedTextTrack)||void 0===n?void 0:n.language)})).map((function(t){return r.getSegmentForTrack(e,t)})).filter(Boolean);default:return[]}}},{key:"getSegmentForTrack",value:function(e,t){var r=t.getSegment(e);if((0,Wl.RW)("yasp_abr_loading_segment")&&r)return r;if(t.endTime===e+t.presentationTimeOffset)return this.getLastSegment(t);var n=Math.max(Math.floor(0)),i=0,o=t.segmentSequences.find((function(r,o){i=o;var a=r.time-t.presentationTimeOffset,u=a+r.duration*r.count,c=a<=e&&e<u;return c||(n+=r.count),c}));if(!o)return null;var a=o.time-t.presentationTimeOffset,u=e-a,c=Math.max(0,Math.floor(u/o.duration+1e-4)),s=t.startNumber+(n+c),l=Math.max(a+o.duration*c,0),f=s===o.endNumber,h=t.segmentSequences[i+1],d=Math.max(f&&h?h.time-t.presentationTimeOffset:a+o.duration*(c+1),0),p=t.bitrate,y=o.originalValues.time-o.originalValues.trackPresentationTimeOffset+o.originalValues.duration*c;return new Cl({start:l,end:d,bitrate:p,trackId:t.id,number:s,originalStart:y,isInitSegment:!1,width:"width"in t?t.width:0,height:"height"in t?t.height:0,isMP4:o.isMP4,isEncrypted:o.isEncrypted,startByteWithOffset:"startByteWithOffset"in o?o.startByteWithOffset:0,endByteWithOffset:"endByteWithOffset"in o?o.endByteWithOffset:0})}},{key:"clear",value:function(e,t){this.audio.forEach((function(r){return r.clear(e,t)})),this.video.forEach((function(r){return r.clear(e,t)})),this.text.forEach((function(r){return r.clear(e,t)}))}},{key:"getDuration",value:function(){var e,t,r=null!==(e=this.video[0])&&void 0!==e?e:this.audio[0];if(void 0!==r)return null!==(t=this.mpd)&&void 0!==t&&t.isDynamic?1/0:r.endTime-r.startTime}},{key:"getMimeTypes",value:function(){return{audio:Array.from(new Set(this.audio.map((function(e){return e.getFullMimeType()})))),video:Array.from(new Set(this.video.map((function(e){return e.getFullMimeType()}))))}}},{key:"getBufferedRanges",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.audio,n=this.selectedVideoTracks,i=this.text;return this.selectedAudioLanguage&&(r=r.filter((function(t){return t.language===e.selectedAudioLanguage}))),{audio:r.map((function(e){return e.getBufferedRanges(t)})),video:n.map((function(e){return e.getBufferedRanges(t)})),text:i.map((function(e){return e.getBufferedRanges(t)}))}}},{key:"getSeekableRanges",value:function(){return[this.getSeekableRange()]}},{key:"getSegment",value:function(e,t){var r=this,n=[];return("video"===e?this.selectedVideoTracks:this.audio.filter((function(e){var t;return e.language===(null!==(t=r.selectedAudioLanguage)&&void 0!==t?t:e.language)}))).forEach((function(e){var r=e.getSegment(t);r&&n.push({track:e,segment:r})})),Rt(n,(function(e){return e.track.bitrate}))||{track:void 0,segment:void 0}}},{key:"getInitialSegment",value:function(e,t){var r=("video"===e?this.video:this.audio).find((function(e){return e.id===t}));return(null===r||void 0===r?void 0:r.getInitSegment())||void 0}},{key:"obtainTimelineTrack",value:function(e){var t=this,r=this[e.type];"audio"===e.type&&(this.selectedAudioLanguage=this.selectedAudioLanguage||e.language||void 0);var n=r.find((function(t){return t.id===e.id}));if(n)return n.updateTrack(e),n;var i=function(e){switch(e.type){case"audio":return new el(e);case"video":return new tl(e);case"text":return new Sl(e);default:throw new Error("Unexpected TimelineTrack#type=".concat(e.type))}}(e);return r.push(i),i.on("BufferedInfoChanged",(function(){return t.emitBufferedInfoChanged()})),"text"===i.type&&i.on("CuesAdded",(function(e){t.emit("CuesAdded",{cues:e,label:i.label})})),i}},{key:"sortTracksInTimeline",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["video","audio","text"];t.forEach((function(t){e.sortTracksInTimelineByType(t)}))}},{key:"sortTracksInTimelineByType",value:function(e){var t=this.getFirstLangsAppearanceInTimeline(e);this[e].sort((function(e,r){return e.language===r.language?r.bitrate-e.bitrate:t.get(e.language)-t.get(r.language)}))}},{key:"getFirstLangsAppearanceInTimeline",value:function(e){var t=new Map;return this[e].forEach((function(e,r){t.has(e.language)||t.set(e.language,r)})),t}},{key:"findTrackById",value:function(e,t){return this[t].find((function(t){return t.id===e}))}},{key:"emitBufferedInfoChanged",value:function(){var e,t=this;this.bufferedInfoChangedPromise=null!==(e=this.bufferedInfoChangedPromise)&&void 0!==e?e:zl.resolve().then((function(){return t.emit("BufferedInfoChanged",t.getBufferedInfo())})).then((function(){t.bufferedInfoChangedPromise=null}))}},{key:"getBufferedInfo",value:function(){var e=this.getBufferedRanges(),t=Mt(e.video),r=Mt(e.audio);return{video:t.map((function(e){return{start:e.start/1e3,end:e.end/1e3}})),audio:r.map((function(e){return{start:e.start/1e3,end:e.end/1e3}})),total:Ct(t,r).map((function(e){return{start:e.start/1e3,end:e.end/1e3}}))}}},{key:"getLastSegment",value:function(e){var t=e.segmentSequences[e.segmentSequences.length-1];if(!t)return null;var r=Math.max(0,t.time-e.presentationTimeOffset+t.duration*(t.count-1)),n=Math.max(r+t.duration,0),i=e.bitrate,o=t.originalValues.time-t.originalValues.trackPresentationTimeOffset+t.originalValues.duration*(t.count-1);return new Cl({start:r,end:n,bitrate:i,trackId:e.id,number:e.endNumber,originalStart:o,isInitSegment:!1,width:"width"in e?e.width:0,height:"height"in e?e.height:0})}},{key:"getDebugInfo",value:function(e){var t,r,n;return{audio:this.audio.map((function(e){return e.getDebugInfo()})),video:this.video.map((function(e){return e.getDebugInfo()})),text:this.text.map((function(e){return e.getDebugInfo()})),selectedVideoTracks:this.selectedVideoTracks.map((function(e){return e.getDebugInfo()})),selectedVideoTrackHeight:null!==(t=this.selectedVideoTrackHeight)&&void 0!==t?t:null,selectedAudioLanguage:null!==(r=this.selectedAudioLanguage)&&void 0!==r?r:null,selectedTextTrack:null!==(n=this.selectedTextTrack)&&void 0!==n?n:null,mpd:this.mpd,externalPresentationDelay:this.externalPresentationDelay,isLive:this.getIsDynamic(),isLowLatency:this.isLowLatencyLive(),segmentDebugInfo:void 0!==e?this.getSegmentsDebugInfo(e):void 0}}},{key:"updateStreamEndTime",value:function(){var e,t=null!==(e=this.video[0])&&void 0!==e?e:this.audio[0];t.endTime&&this.emit("StreamEndTimeUpdate",t.endTime-t.presentationTimeOffset)}},{key:"applyMpd",value:function(e){var t;this.mpd=or(or({},e),{},{presentationDelay:null!==(t=this.externalPresentationDelay)&&void 0!==t?t:e.presentationDelay}),this.updateStreamEndTime()}},{key:"getIsDynamic",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.isDynamic)||!1}},{key:"isLowLatencyLive",value:function(){var e;return this.getIsDynamic()&&0!==(null===(e=this.mpd)||void 0===e?void 0:e.availabilityTimeOffset)}},{key:"getLiveEdge",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return this.getDuration()||0;if(null===this.mpd.presentationStartTime)throw new Error("Cannot compute live edge without presentationStartTime");return Date.now()+this.mpd.clockOffset-this.mpd.maxSegmentDuration-this.mpd.presentationStartTime}},{key:"getMaxSegmentDuration",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.maxSegmentDuration)||5e3}},{key:"getSeekableRange",value:function(){return{start:this.getSeekRangeStart(),end:this.getSeekRangeEnd()}}},{key:"getSeekRangeStart",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return 0;var t=!isFinite(this.mpd.segmentAvailabilityDuration),r=t?this.mpd.minSegmentStartTime-this.mpd.publishTime:this.mpd.minSegmentStartTime;if(t)return Math.max(0,r);var n=this.getLiveEdge()+this.mpd.availabilityTimeOffset-this.mpd.segmentAvailabilityDuration,i=Math.min(n,this.getSeekRangeEnd());return Math.max(r,i)}},{key:"getSeekRangeEnd",value:function(){var e;if(null===(e=this.mpd)||void 0===e||!e.isDynamic)return this.getDuration()||0;var t=this.isLowLatencyLive()?0:this.mpd.presentationDelay,r=this.getLiveEdge()+this.mpd.availabilityTimeOffset-t;if(!this.isLowLatencyLive())return Math.max(0,r);var n=r+this.mpd.presentationStartTime,i=Date.now()+this.mpd.clockOffset,o=Math.min(n,i-this.targetLatency);return Math.max(o-this.mpd.presentationStartTime,0)}},{key:"getUtcStartTime",value:function(){var e,t,r;return null!==(e=this.mpd)&&void 0!==e&&e.isDynamic?this.mpd.isDynamic&&!isFinite(this.mpd.segmentAvailabilityDuration)?this.mpd.publishTime:0:null!==(t=null===(r=this.mpd)||void 0===r?void 0:r.publishTime)&&void 0!==t?t:0}},{key:"setPresentationDelay",value:function(e){var t;this.externalPresentationDelay=null!==(t=this.externalPresentationDelay)&&void 0!==t?t:e}},{key:"getEmsgSchemeIdUris",value:function(){var e;return null===(e=this.mpd)||void 0===e?void 0:e.emsgSchemeIdUris}},{key:"getLastSegmentNumber",value:function(e){var t=this[e][0];return t?t.endNumber:null}},{key:"setTargetLatency",value:function(e){this.targetLatency=e}},{key:"getSegmentsDebugInfo",value:function(e){return{audio:this.getSegmentsDebugInfoByType("audio",e),video:this.getSegmentsDebugInfoByType("video",e)}}},{key:"getSegmentsDebugInfoByType",value:function(e,t){return this[e].reduce((function(e,r){return(0,ql.J)(r.getSegmentsDebugInfo(t)).forEach((function(t){var r=er(t,2),n=r[0],i=r[1];e[n]+=i})),e}),{playedRawSize:0,playedSegmentCount:0,activeRawSize:0,activeSegmentCount:0})}},{key:"getTotalRawSizeByType",value:function(e){return this[e].reduce((function(e,t){var r=t.getSegmentsDebugInfo(0);return e+r.playedRawSize+r.activeRawSize}),0)}},{key:"getTotalRawSize",value:function(){return this.getTotalRawSizeByType("audio")+this.getTotalRawSizeByType("video")}},{key:"destroy",value:function(){var e=this;ur(dr(t.prototype),"destroy",this).call(this),["audio","video","text"].forEach((function(t){e[t].forEach((function(e){return e.destroy()}))})),this.audio=[],this.video=[],this.text=[]}}])&&ar(r.prototype,n),i&&ar(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),$l=r(3309),Zl=(new Map).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",$l.ly).set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",$l.xE).set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95",$l.xE).set("urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",$l.dn).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",$l.dn),Xl=function(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:null!==t&&void 0!==t?t:[]}},Jl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parser=t}var t,r,n;return t=e,(r=[{key:"parse",value:function(e){var t,r=this.parseElements(e),n=null,i=[],o=new Set(r.map((function(e){return e.keyId})).filter((function(e){return null!==e})));if(o.size>1)throw new Zs.w({code:"YASP_DASH_CONFLICTING_KEY_IDS",isFatal:!0,message:"Dash manifest has conflicting ids: ".concat(Array.from(o).join(",")),details:{},category:$s.q.DRM});t=r.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!==e.schemeUri||(n=e.init||n,!1)}));var a=Array.from(o)[0]||null;return t.length&&(i=this.convertElements(n,t,a)),{defaultKeyId:a,defaultInit:n,drmInfos:i}}},{key:"convertElements",value:function(e,t,r){var n,i=[],o=vr(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=Zl.get(a.schemeUri);if(u){var c=this.getInitDataFromPro(a),s=null;"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"!==a.schemeUri&&"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"!==a.schemeUri||(s=this.getClearKeyInitData(a,r));var l=c||s||a.init||e,f=Xl(u,l);i.push(f)}}}catch(h){o.e(h)}finally{o.f()}return i}},{key:"parseElements",value:function(e){var t,r=[],n=vr(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=this.parseElement(i);o&&r.push(o)}}catch(a){n.e(a)}finally{n.f()}return r}},{key:"getInitDataFromPro",value:function(e){var t=this.parser.findChildNS(e.node,"urn:microsoft:playready","pro");if(!t)return null;var r=this.parser.getContents(t);if(!r)return null;var n=bl.P.fromBase64(r),i=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=e.keyId,a=this.createPssh(n,i,o?[o]:[],0);return a?[{initData:a,initDataType:"cenc",keyId:o}]:null}},{key:"createPssh",value:function(e,t,r,n){var i=new Set(r),o=e.length,a=12+t.length+4+o;n>0&&(a+=20);var u=new ArrayBuffer(a),c=new Uint8Array(u),s=new DataView(u),l=0;if(s.setUint32(l,a),l+=4,s.setUint32(l,1886614376),l+=4,n<1?s.setUint32(l,0):s.setUint32(l,16777216),l+=4,c.set(t,l),l+=t.length,n>0){s.setUint32(l,i.size),l+=4;var f,h=vr(i);try{for(h.s();!(f=h.n()).done;){var d=f.value,p=bl.P.fromHex(d);c.set(p,l),l+=p.length}}catch(y){h.e(y)}finally{h.f()}}return s.setUint32(l,o),l+=4,c.set(e,l),(l+=o)===a?bl.P.toBase64(c):null}},{key:"parseElement",value:function(e){var t=this,r=e.attributes.schemeIdUri,n=this.parser.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=this.parser.findChildrenNS(e,"urn:mpeg:cenc:2013","pssh").map((function(e){return t.parser.getContents(e)}));if(!r)return null;if(r=r.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Zs.w({code:"YASP_DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED",isFatal:!0,message:"Representation with multiple keyIds is not supported: (".concat(n,")"),details:{},category:$s.q.DRM});var o=i.map((function(e){return{initDataType:"cenc",initData:e,keyId:null}}));return{node:e,schemeUri:r,keyId:n,init:o.length>0?o:null}}},{key:"getKeyIdsForClearKey",value:function(e){if(!e)return[];var t=bl.P.fromBase64(e),r=new DataView(t.buffer),n=r.byteOffset,i=r.byteLength,o=0,a=r.getUint32(o);o+=4;var u=r.getUint32(o);if(o+=4,i<a)return[];if(1886614376!==u)return[];var c=r.getUint32(o)>>>24;if(o+=4,0!==c&&1!==c)return[];var s=r.buffer;o+=16;var l=r.getUint32(o);if(o+=4,!l||i<n+o+32*l)return[];for(var f=[],h=0;h<l;h++){var d=new Uint8Array(s,n+o+32*h,32);f.push(ll.x.fromBytesAutoDetect(d))}return f}},{key:"getClearKeyInitData",value:function(e,t){var r,n=null===(r=e.init)||void 0===r?void 0:r[0].initData,i=t||this.getKeyIdsForClearKey(n)[0]||e.keyId;if(!i)return null;var o=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),a=new Uint8Array([]);return[{initData:this.createPssh(a,o,[i],1),initDataType:"cenc",keyId:i}]}}])&&gr(t.prototype,r),n&&gr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ql=["segmentTemplate","mimeType"],ef=["segmentTemplate","mimeType"],tf=["segmentTemplate","mimeType"],rf=r(81917),nf=["urn:mpeg:dash:utc:direct:2014","urn:mpeg:dash:utc:direct:2012"],of=[].concat(nf),af=r(31969),uf=r(49257),cf=r(83361),sf=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ln(this,"body",void 0),ln(this,"status",void 0),ln(this,"headers",void 0),ln(this,"textPromise",void 0),this.body=r,this.status=t.status,this.headers=function(e){var t=[];return e.getAllResponseHeaders().trim().split("\r\n").forEach((function(e){var r=nn(e.split(":")),n=r[0],i=r.slice(1);t.push([i.join(":"),n])})),{forEach:function(e){t.forEach((function(t){var r=rn(t,2),n=r[0],i=r[1];e(n,i)}))}}}(t),this.textPromise=new cf((function(e,r){t.addEventListener("load",(function(){e(t.response)})),t.addEventListener("abort",(function(){var e=new Error("Stretch request aborted");e.name="AbortError",r(e)}))})),(0,uf.v)(this.textPromise)}var t,r,n;return t=e,(r=[{key:"text",value:function(){return this.textPromise}}])&&sn(t.prototype,r),n&&sn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),lf=r(83361),ff={done:!0,value:void 0},hf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),hn(this,"dataStream",void 0),hn(this,"readRequest",void 0),hn(this,"storedError",void 0),hn(this,"onCancel",void 0),this.dataStream=new Dl,this.readRequest=null,this.storedError=null,this.onCancel=t}var t,r,n;return t=e,(r=[{key:"read",value:function(){var e=this;return new lf((function(t,r){return e.readRequest={resolve:t,reject:r},e.dataStream.isDestroyed()?r(e.storedError||new Error("Unexpected read after stream destroy")):e.dataStream.isClosed()?t(ff):(e.dataStream.once("Data",(function(r){e.dataStream.pause(),t({done:!1,value:r})})),void e.dataStream.resume())}))}},{key:"cancel",value:function(){this.dataStream.destroy(),this.onCancel()}},{key:"throw",value:function(e){this.dataStream.isDestroyed()||this.dataStream.isClosing()||(this.storedError=e,this.dataStream.destroy(),this.readRequest&&(this.readRequest.reject(e),this.readRequest=null))}},{key:"write",value:function(e){this.dataStream.isDestroyed()||this.dataStream.write(e)}},{key:"close",value:function(){this.dataStream.close()}}])&&fn(t.prototype,r),n&&fn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),df=r(21658),pf="undefined"!==typeof fetch&&"undefined"!==typeof ReadableStream&&"undefined"!==typeof(0,df.Y)((function(){return new AbortController})),yf=pf?"arraybuffer":dn("moz-chunked-arraybuffer")||dn("ms-stream")||"arraybuffer",vf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yn(this,"readerInited",!1),yn(this,"reader",void 0),yn(this,"xhr",void 0),this.xhr=t,this.reader=new hf((function(){return t.abort()}))}var t,r,n;return t=e,(r=[{key:"throwReaderError",value:function(e){return this.reader.throw(e)}},{key:"getReader",value:function(){return this.initReader(this.xhr,yf),this.reader}},{key:"initReader",value:function(e,t){var r=this;if(this.readerInited)throw new Error("Unexpected second call StretchBody#initReader()");switch(this.readerInited=!0,e.responseType=t,t){case"arraybuffer":e.addEventListener("load",(function(){e.response&&r.reader.write(new Uint8Array(e.response)),r.reader.close()}));break;case"moz-chunked-arraybuffer":e.addEventListener("progress",(function(){r.reader.write(new Uint8Array(e.response))})),e.addEventListener("load",(function(){r.reader.close()}));break;case"ms-stream":e.addEventListener("readystatechange",(function(){if(e.readyState===XMLHttpRequest.LOADING){var t=0,n=new(0,self.MSStreamReader);n.onprogress=function(){n.result.byteLength>t&&(r.reader.write(new Uint8Array(n.result,t)),t=n.result.byteLength)},n.onload=r.reader.close.bind(r.reader),n.readAsArrayBuffer(e.response)}}))}}}])&&pn(t.prototype,r),n&&pn(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),mf=r(83361),gf=pf?fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new mf((function(r,n){var i=t.method,o=void 0===i?"GET":i,a=t.body,u=void 0===a?null:a,c=new XMLHttpRequest;for(var s in c.open(o,e),t.headers)t.headers.hasOwnProperty(s)&&c.setRequestHeader(s,t.headers[s]);"include"===t.credentials&&(c.withCredentials=!0);var l=new vf(c);c.addEventListener("readystatechange",(function e(){c.readyState===XMLHttpRequest.HEADERS_RECEIVED&&(c.removeEventListener("readystatechange",e),r(new sf(c,l)))}));var f=function(){c.abort();var e=new Error("request aborted");e.name="AbortError",l.throwReaderError(e),n(e)};if(t.signal){if(t.signal.aborted)return void f();t.signal.addEventListener("abort",f)}c.addEventListener("error",(function(){var e=new Error("network error");l.throwReaderError(e),n(e)})),c.send(u)}))},bf=r(5923),wf=r(20290),_f=r(80445),Ef=["SupplementalProperty","S","AudioChannelConfiguration","Role"],Of=r(81917),Sf=function(e){if(e){var t=(new Of(e).pathname.split("/").pop()||"").split(".");return t.length>1?t.pop():void 0}},kf=r(83361),Tf=r(81917),Rf=function(e,t){var r=new Tf(t,"http://y.com").pathname.split("/").pop()||"";return"".concat(e,"/").concat(r)},xf=function(){return navigator.storage.getDirectory()},Pf={downloadedFragments:{},createFileWritableStream:(xl=Tn(_n().mark((function e(t){var r,n,i,o;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jn(t,!0);case 2:return r=e.sent,n=r.fileHandle,i=r.contentId,e.next=7,n.createWritable();case 7:return o=e.sent,-1===t.indexOf("manifest.mpd")&&(Pf.downloadedFragments[i]=On(On({},Pf.downloadedFragments[i]),{},Sn({},t,!0))),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),function(e){return xl.apply(this,arguments)}),fetchFromFs:(Rl=Tn(_n().mark((function e(t,r){var n,i,o,a;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Content id is not defined");case 2:return n=Sf(r),e.next=5,Ln(Rf(t,r));case 5:return i=e.sent,o=i.body,a=i.size,e.abrupt("return",Pn("mpd"===n?o:o.stream(),{size:a}));case 9:case"end":return e.stop()}}),e)}))),function(e,t){return Rl.apply(this,arguments)}),getParsedJSON:(Tl=Tn(_n().mark((function e(t){var r,n,i;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ln(t);case 2:return r=e.sent,n=r.body,e.next=6,n.text();case 6:return i=e.sent,e.abrupt("return",JSON.parse(i));case 8:case"end":return e.stop()}}),e)}))),function(e){return Tl.apply(this,arguments)}),removeDirectory:(kl=Tn(_n().mark((function e(t){var r,n,i;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xf();case 2:return r=e.sent,e.next=5,r.getDirectoryHandle("streams");case 5:return n=e.sent,i=n.removeEntry(t,{recursive:!0}),delete Pf.downloadedFragments[t],e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)}))),function(e){return kl.apply(this,arguments)})},jf={handleStart:function(e,t,r,n){r&&(Pf.createFileWritableStream(Rf(t,"manifest.mpd")).then((function(e){e.write(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ef,r=['<?xml version="1.0" encoding="UTF-8"?>'],n=function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null!==n&&void 0!==n&&n.tagName){var o="".padStart(4*i,"    "),a=-1!==t.indexOf(n.tagName);o+="<".concat(n.tagName);var u=n.attributes&&Object.entries(n.attributes).map((function(e){var t=vn(e,2),r=t[0],n=t[1];return" ".concat(r,'="').concat(n,'"')})).join("");if(u&&(o+="".concat(u)),a)return o+="/>",void r.push(o);o+=">",r.push(o),Array.isArray(n.children)&&1===n.children.length&&"string"===typeof n.children[0]?r.push("".padStart(4*(i+1),"    ")+n.children[0]):n.children.forEach((function(t){e(t,i+1)})),o="".padStart(4*i,"    "),o+="</".concat(n.tagName,">"),r.push(o)}};return n(e),r.push(""),r.join("\n")}(n?function(e,t){e.children=[{tagName:"BaseURL",attributes:{},children:["".concat("fs:","//").concat("streams","/")]}].concat(mn(e.children.filter((function(e){return"BaseURL"!==e.tagName}))));var r=e.children.find((function(e){return"Period"===e.tagName}));if(t.videoTrackId){var n=null===r||void 0===r?void 0:r.children.find((function(e){return"video/mp4"===e.attributes.mimeType}));n&&(n.children=n.children.filter((function(e){return"SupplementalProperty"===e.tagName||"ContentProtection"===e.tagName||e.attributes.id===t.videoTrackId})))}return t.audioLang&&r&&(r.children=r.children.filter((function(e){return"audio/mp4"!==e.attributes.mimeType||e.attributes.lang===t.audioLang}))),t.textTrack&&r&&(r.children=r.children.filter((function(e){var r;return"text/vtt"!==e.attributes.mimeType||e.attributes.lang===(null===t||void 0===t||null===(r=t.textTrack)||void 0===r?void 0:r.language)}))),e}(r,n):r)).then((function(){return e.close()}))})),n&&Pf.createFileWritableStream(Rf(t,"config.json")).then((function(t){null===t||void 0===t||t.write(JSON.stringify({src:e,tracks:n})).then((function(){return t.close()}))})))},handlePause:(Pl=Tn(_n().mark((function e(t){var r,n,i;return _n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Rf(t,"config.json"),e.next=3,Pf.getParsedJSON(r);case 3:n=e.sent,i=On(On({},n),{},{downloadedFragments:Pf.downloadedFragments[t]}),Pf.createFileWritableStream(r).then((function(e){null===e||void 0===e||e.write(JSON.stringify(i)).then((function(){return e.close()}))}));case 6:case"end":return e.stop()}}),e)}))),function(e){return Pl.apply(this,arguments)})},Af=r(16566),Lf=["headers"],If=["headers"],Df=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fn(this,t),Yn(Vn(e=o.call(this)),"baseParams",void 0),Yn(Vn(e),"contentId",void 0),Yn(Vn(e),"lowLatency",!1),e.baseParams=r,r.contentId&&(e.contentId=r.contentId),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Un(e,t)}(t,e);var r,n,i,o=Gn(t);return r=t,(n=[{key:"setIsLL",value:function(e){this.lowLatency=e}},{key:"isLL",value:function(){return this.lowLatency}},{key:"setBaseParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.baseParams=e}},{key:"getRequestOptions",value:function(e){e.headers;var t=Cn(e,Lf),r=this.baseParams;return r.headers,Mn(Mn({},Cn(r,If)),t)}},{key:"getRequestHeaders",value:function(e){return Mn(Mn({},this.baseParams.headers),e.headers)}},{key:"performRequest",value:function(e,t){var r,n,i=this,o=new bf.H,a=this.getRequestOptions(t),u=this.getRequestHeaders(t),c=Mn(Mn({},a),{},{headers:u,signal:o.signal}),s={canceled:!1,timeout:!1,downloadedBytes:0},l=(0,Ml.u)(),f="fs:"===(0,Af.en)(e).protocol;if(!f&&this.contentId&&null!==(r=Pf.downloadedFragments)&&void 0!==r&&null!==(n=r[this.contentId])&&void 0!==n&&n[Rf(this.contentId,e)])return function(e,t,r,n){var i=new kf((function(e){setTimeout((function(){e({value:void 0,done:!0})}),0)})),o={getReader:function(){return{read:function(){return i}}}};return{abort:e,responsePromise:kf.resolve(Pn(o)),timeoutId:void 0,requestState:t,signal:r,getRtt:n,isSkipFragment:!0,requestOptions:{},requestHeaders:{}}}(o.abort,s,c.signal,l);var h=(f?Pf.fetchFromFs(this.contentId,e):gf(e,c)).catch((function(e){if(s.canceled)throw new Error("Request canceled");if(s.timeout)throw new Error("Request timed out");throw e})),d="number"===typeof c.timeout?setTimeout((function(){s.timeout=!0,o.abort()}),c.timeout):void 0;return h.then((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),i.emit("RequestTtfb",l())})).catch(wf.Z),{abort:function(){s.canceled=!0,d&&clearTimeout(d),o.abort()},responsePromise:h,timeoutId:d,requestState:s,signal:c.signal,getRtt:l,isSkipFragment:!1,requestOptions:a,requestHeaders:u}}},{key:"parseServerTime",value:function(e,t){if(e.date||e["x-server-time-ms"]){var r=NaN;e["x-server-time-ms"]?r=new Date(parseInt(e["x-server-time-ms"],10)).getTime():e.date&&(r=new Date(e.date).getTime()),isFinite(r)&&this.emit("ServerTimeChange",r+t/2)}}},{key:"fetch",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.performRequest(e,r),i=n.abort,o=n.responsePromise,a=n.timeoutId,u=n.getRtt,c=n.requestOptions,s=n.requestHeaders;return{abort:i,response:o.then((function(e){a&&clearTimeout(a);var r={};return e.headers.forEach((function(e,t){r[t]=e})),t.parseServerTime(r,u()),{status:e.status,headers:r,body:e.text()}})),requestOptions:c,requestHeaders:s}}},{key:"progress",value:function(e,t,r){this.emit("Progress",{time:e,size:t,isLowLatency:r})}},{key:"fetchDataStream",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.performRequest(e,r),i=n.abort,o=n.responsePromise,a=n.timeoutId,u=n.requestState,c=n.signal,s=n.isSkipFragment,l=n.requestOptions,f=n.requestHeaders,h=new Dl,d=s||"fs:"===(0,Af.en)(e).protocol?void 0:this.contentId,p=d?Pf.createFileWritableStream(Rf(d,e)):void 0;h.once("Close",(function(){var e;null===(e=p)||void 0===e||e.then((function(e){return e.close()})),p=void 0})),h.once("Destroy",(function(){var e;null===(e=p)||void 0===e||e.then((function(e){return e.close()})),p=void 0})),c.addEventListener("abort",(function(){h.destroy()}));var y,v=!1,m=function(){v=!0,i(),h.destroy()};return(0,Wl.RW)("yasp_enable_new_timeout")&&(y=setTimeout((function(){u.timeout=!0,i()}),Math.max((0,Wl.jS)("yasp_headers_timeout"),r.timeout||0))),{requestOptions:l,requestHeaders:f,requestState:u,abort:m,response:o.then((function(r){var n;clearTimeout(y);var o=function(){(0,Wl.RW)("yasp_enable_new_timeout")&&(clearTimeout(n),h.isClosed()||h.isClosing()||h.isDestroyed()||(n=setTimeout((function(){u.timeout=!0,i()}),(0,Wl.jS)("yasp_body_timeout"))))};o();var c={};t.on("Destroy",m),r.headers.forEach((function(e,t){c[t]=e}));var s=r.body.getReader(),l=(0,_f.I)((function(){t.off("Destroy",m),t.emit("ResponseEnd")}));return h.once("Destroy",l),h.once("Close",l),t.emit("ResponseStart"),function t(){v||s.read().then((function(r){var n,i=r.done,c=r.value;(o(),v)||(void 0!==c&&(u.downloadedBytes+=c.length,d&&"fs:"!==(0,Af.en)(e).protocol?null===(n=p)||void 0===n||n.then((function(e){return e.write(c)})):h.write(c)),i?(h.close(),a&&clearTimeout(a)):t())})).catch((function(e){if("AbortError"!==(null===e||void 0===e?void 0:e.name)&&h.destroy(),"AbortError"!==(null===e||void 0===e?void 0:e.name)&&"network error"!==(null===e||void 0===e?void 0:e.message))throw e}))}(),{status:r.status,headers:c,body:h}}))}}},{key:"getDebugInfo",value:function(){return{baseParams:this.baseParams}}}])&&Bn(r.prototype,n),i&&Bn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Nf=r(17986),Mf=r(55502),Cf=r(9140),Ff=r(81917),Bf=r(83237),Uf=r(47751),Gf=r(83361),Hf=r(81917),Vf=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xi(Ti(r=u.call(this)),"url",void 0),xi(Ti(r),"fetcher",void 0),xi(Ti(r),"timeline",void 0),xi(Ti(r),"parser",void 0),xi(Ti(r),"mpd",null),xi(Ti(r),"xml",""),xi(Ti(r),"session",""),xi(Ti(r),"attempt",0),xi(Ti(r),"baseUrls",[]),xi(Ti(r),"drmInfos",[]),xi(Ti(r),"playlistCapHeight",null),xi(Ti(r),"lastUpdateDuration",0),xi(Ti(r),"aborted",!1),xi(Ti(r),"abortFn",null),r.url=e.url,r.timeline=e.timeline,r.parser=new dl,r.fetcher=new Df(e.fetcherParams),r.fetcher.on("ServerTimeChange",(function(e){r.emit("ServerTimeChange",e)})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oi(e,t)}(t,e);var r,n,i,o,a,u=Si(t);return r=t,(n=[{key:"parse",value:function(e){return this.parser.parse(e)}},{key:"isInitiallyLoaded",value:function(){return null!==this.mpd}},{key:"setSourceIndex",value:function(e){if(null!==e){var t=new Hf(this.url);t.searchParams.set("source_index",e),this.url=t.href}}},{key:"getMpdXml",value:function(){return this.parse(this.xml)[1]}},{key:"getPlaylistCapHeight",value:function(){return this.playlistCapHeight}},{key:"isDynamicPlaylist",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.isDynamic)||!1}},{key:"getMediaType",value:function(){if(this.mpd)return this.mpd.isDynamic?this.mpd.mediaType:af.D.VOD}},{key:"getUpdatePeriod",value:function(){var e;return(null===(e=this.mpd)||void 0===e?void 0:e.updatePeriod)||null}},{key:"getLastUpdateDuration",value:function(){return this.lastUpdateDuration}},{key:"setFetcherBaseParams",value:function(e){this.fetcher.setBaseParams(e)}},{key:"apply",value:function(e){this.xml=e;var t,r=this.parse(e);try{t=tn(r,this.url,this.parser)}catch(i){throw vi(i)&&"YASP_PARSE_MANIFEST_ERROR"===i.code&&(i.details.manifest=e),i}this.playlistCapHeight=t.maxHeight,this.baseUrls=t.baseUrls;var n=t.periods[0];return n.adaptationSets=pi(n.adaptationSets),this.checkTracksLengthDifference(n.adaptationSets),this.checkDrm(n.adaptationSets),Zn(n,this.timeline),this.timeline.applyMpd(t),t}},{key:"checkDrm",value:function(e){var t=e.find((function(e){return e.encrypted}));t&&(this.drmInfos=t.contentProtection.drmInfos,this.mpd||this.emit("DrmInfoReceived",t.contentProtection.drmInfos))}},{key:"getBaseUrls",value:function(){return this.baseUrls}},{key:"getDrmInfos",value:function(){return this.drmInfos}},{key:"getEmsgSchemeIdUris",value:function(){var e;return null===(e=this.mpd)||void 0===e?void 0:e.emsgSchemeIdUris}},{key:"update",value:(o=gi().mark((function e(){var t,r,n,i,o,a,u,c,s,l,f,h,d,p,y,v,m,g,b,w,_=this;return gi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.aborted=!1,t=this.session?yi(this.url):(0,Cf.c)(this.url),r=(0,Ml.u)(),n={url:t},e.prev=4,i={},this.session&&(i["x-strm-session"]=this.session,i["x-client-timestamp"]=String(Date.now())),o=this.fetcher.fetch(t,{timeout:Mf.d4,headers:i}),a=o.response,u=o.abort,c=o.requestHeaders,s=o.requestOptions,this.abortFn=u,e.next=11,a;case 11:if(l=e.sent,f=l.body,h=l.status,d=l.headers,this.session=d["x-strm-session"],p=h>=200&&h<300||304===h,n.requestHeaders=c,n.responseHeaders=d,n.status=h,n.requestOptions=s,p){e.next=25;break}throw y=this.attempt>=10,0===h?new Zs.w({code:"YASP_FETCH_MANIFEST_HTTP_ERROR",message:"Network Error",details:n,category:$s.q.NETWORK_MEDIA,isFatal:y}):new Zs.w({code:"YASP_FETCH_MANIFEST_BAD_HTTP_STATUS",message:"Error: ".concat(h),details:n,isFatal:y,category:$s.q.NETWORK_MEDIA});case 25:return this.attempt=0,e.next=28,f;case 28:v=e.sent,this.abortFn=null,this.mpd=this.apply(v),this.updateManifestUrl(),this.lastUpdateDuration=r(),this.emit("ManifestUpdate"),e.next=55;break;case 36:if(e.prev=36,e.t0=e.catch(4),g=this.attempt>=10,this.abortFn=null,!(0,Bf.V)(e.t0)){e.next=47;break}if("Request canceled"!==e.t0.message&&"Abort error"!==e.t0.message){e.next=43;break}return e.abrupt("return");case 43:b="Request timed out"===e.t0.message,m=vi(e.t0)?e.t0:new Zs.w({code:b?"YASP_FETCH_MANIFEST_TIMEOUT":"YASP_FETCH_MANIFEST_HTTP_ERROR",details:b?{url:t}:n,message:e.t0.message,isFatal:g,category:b?$s.q.NETWORK_TIMEOUT:$s.q.NETWORK_MEDIA}),e.next=48;break;case 47:m=new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{url:t,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:g,category:$s.q.NETWORK_MEDIA});case 48:if(this.emit("Error",m),!g&&!m.isFatal){e.next=51;break}return e.abrupt("return");case 51:if(w=(0,Uf._)(Wn(this.attempt++)),!this.aborted){e.next=54;break}return e.abrupt("return");case 54:return e.abrupt("return",w.then((function(){if(!_.aborted)return _.update()})));case 55:case"end":return e.stop()}}),e,this,[[4,36]])})),a=function(){var e=this,t=arguments;return new Gf((function(r,n){function i(e){bi(u,r,n,i,a,"next",e)}function a(e){bi(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})},{key:"abort",value:function(){this.abortFn&&this.abortFn(),this.aborted=!0}},{key:"destroy",value:function(){this.abort(),_i(Ri(t.prototype),"destroy",this).call(this)}},{key:"getDebugInfo",value:function(){return{url:this.url,xml:this.xml,attempt:this.attempt,baseUrls:this.baseUrls,mpd:this.mpd,playlistCapHeight:this.playlistCapHeight,lastUpdateDuration:this.lastUpdateDuration}}},{key:"checkTracksLengthDifference",value:function(e){if(e.length){var t=new Set,r={};if(e.forEach((function(e){"text"!==e.type&&e.representations.forEach((function(e){r[e.id]=e.segmentTemplate.endTime,t.add(e.segmentTemplate.endTime)}))})),1!==t.size){var n=new Zs.w({code:"YASP_DIFFERENT_TRACKS_LENGTH",details:r,message:"Different track lengths detected",isFatal:!1,category:$s.q.MEDIA});this.emit("Error",n)}}}},{key:"updateManifestUrl",value:function(){var e,t;this.url=null!==(e=null===(t=this.mpd)||void 0===t?void 0:t.locationUrl)&&void 0!==e?e:this.url}}])&&wi(r.prototype,n),i&&wi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),qf=r(69497),Yf=r(83361),Wf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifesto=t,Ii(this,"processing",!1),Ii(this,"promise",null),Ii(this,"timer",0)}var t,r,n,i,o;return t=e,(r=[{key:"update",value:(i=ji().mark((function e(){var t,r=this;return ji().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.processing){e.next=2;break}return e.abrupt("return",this.promise);case 2:if(this.shouldUpdate()){e.next=4;break}return e.abrupt("return");case 4:return this.processing=!0,t=function(){if(r.processing){r.processing=!1;var e=r.getUpdatePeriod();e&&(r.timer=self.setTimeout((function(){r.timer=0,r.update()}),e))}},this.promise=this.manifesto.update().then(t).catch(qf.Z).then((function(){r.promise=null})),e.abrupt("return",this.promise);case 8:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Yf((function(r,n){function o(e){Ai(u,r,n,o,a,"next",e)}function a(e){Ai(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"forceUpdate",value:function(){this.disableTimer(),this.update()}},{key:"disable",value:function(){this.processing=!1,this.disableTimer(),this.manifesto.abort()}},{key:"getDebugInfo",value:function(){return{processing:this.processing}}},{key:"disableTimer",value:function(){self.clearTimeout(this.timer),this.timer=0}},{key:"shouldUpdate",value:function(){return!this.timer&&(!this.manifesto.isInitiallyLoaded()||this.manifesto.isDynamicPlaylist())}},{key:"getUpdatePeriod",value:function(){if(this.manifesto.isDynamicPlaylist()){var e=this.manifesto.getUpdatePeriod(),t=this.manifesto.getLastUpdateDuration();if(e)return Math.max(3e3,e-t)}}}])&&Li(t.prototype,r),n&&Li(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),zf=(0,_f.I)((function(){return 55})),Kf=(0,_f.I)((function(){return zf()+10})),$f=r(20989),Zf=r(83361),Xf={type:"video",state:"idle",fat:!1,currentTrack:void 0,time:null,previousBufferingTime:null,nextTimeToSet:null,streamIsFinished:!1,lastTrackTimeOffset:null},Jf=["Unexpected read after destroy","Unexpected destroy while read"],Qf=function(e){function t(e,r,n,i){var o,a,u,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=c.call(this)).timeline=e,s.mediaState=r,s.mse=n,$i(zi(s),"destroyed",!1),$i(zi(s),"bufferGoal",void 0),$i(zi(s),"totalBufferSoftCap",void 0),$i(zi(s),"totalBufferHardCap",void 0),$i(zi(s),"streams",{}),$i(zi(s),"abortCallbacks",{video:null,audio:null}),s.bufferGoal=null!==(o=null===i||void 0===i?void 0:i.bufferGoal)&&void 0!==o?o:30,s.totalBufferSoftCap=null!==(a=null===i||void 0===i?void 0:i.totalBufferSoftCap)&&void 0!==a?a:zf(),s.totalBufferHardCap=null!==(u=null===i||void 0===i?void 0:i.totalBufferHardCap)&&void 0!==u?u:Kf();var l=e.getMimeTypes(),f=l.video,h=l.audio;return f.length>0&&(s.streams.video=Hi(Hi({},Xf),{},{type:"video"})),h.length>0&&(s.streams.audio=Hi(Hi({},Xf),{},{type:"audio"})),s.mse.on("Open",(function(){return s.run()})),s}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qi(e,t)}(t,e);var r,n,i,o,a,u,c=Yi(t);return r=t,(n=[{key:"abort",value:function(){var e=this;["video","audio"].forEach((function(t){e.abortForType(t)}))}},{key:"abortForType",value:function(e){var t,r;this.destroyed||(null===(t=(r=this.abortCallbacks)[e])||void 0===t||t.call(r),this.resetTime(e))}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"run",value:function(){var e=this;this.destroyed||["audio","video"].some((function(t){var r;return"appending"===(null===(r=e.streams[t])||void 0===r?void 0:r.state)}))||(this.streams.video&&this.runForStream(this.streams.video),this.streams.audio&&this.runForStream(this.streams.audio))}},{key:"abortUseless",value:function(){var e=this;if(!this.destroyed){var t=this.mediaState.currentTime;"open"!==this.mse.getReadyState()||this.mse.isReloading()||null!==t&&["video","audio"].forEach((function(r){var n=e.streams[r];if(void 0!==n){var i=e.mse.getSourceBufferBufferedRange(r);void 0!==i&&!i.some((function(e){return e.start<=t&&t<=e.end}))&&e.abortForType(n.type)}}))}}},{key:"createAbortPromise",value:function(e){var t=this,r=new $f.B;return this.abortCallbacks[e]=function(){r.reject(t.createAbortError())},r.promise}},{key:"createAbortError",value:function(){return new Zs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:$s.q.EXCEPTION,message:"AppendStream operation aborted"})}},{key:"resetTime",value:function(e){var t=this.streams[e];if(t){var r=this.mediaState.currentTime;"appending"===t.state?t.nextTimeToSet=null===r?null:1e3*r:t.time=null===r?null:1e3*r}}},{key:"reset",value:function(){var e=this;(0,Ul.z)(this.streams).forEach((function(t){t&&(e.resetTime(t.type),t.currentTrack=void 0,t.lastTrackTimeOffset=null)}))}},{key:"runForStream",value:function(e){var t=this;if("open"===this.mse.getReadyState()&&!this.mse.isReloading()&&"appending"!==e.state){var r=this.mediaState,n=r.currentTime,i=r.buffering,o=r.duration;if(null!==n){var a=this.mse.getSourceBufferBufferedRange(e.type);if(void 0!==a){if(i)e.previousBufferingTime!==1e3*n&&(e.time=1e3*n,e.nextTimeToSet=null,e.previousBufferingTime=e.time);else{if(e.previousBufferingTime=null,Math.min(this.bufferGoal,o-n)<=Di(a,n))return;if(this.checkGorgedBuffer(e,a))return}var u=this.timeline.getSegment(e.type,e.time),c=u.track,s=u.segment;if(void 0!==c){var l=c.id;this.handleTrackPresentationTimeOffset(e,c),l===e.currentTrack?void 0!==s&&(e.nextTimeToSet=s.end,this.appendStream(e,s.getChunkStream()).then((function(){e.time=e.nextTimeToSet,e.streamIsFinished=c.endNumber===s.number&&!t.timeline.getIsDynamic(),(0,Ul.z)(t.streams).every((function(e){return Boolean(null===e||void 0===e?void 0:e.streamIsFinished)}))&&t.mse.endOfStream()})).catch((function(r){if("YASP_OPERATION_ABORTED"!==r.code)"YASP_QUOTA_EXCEEDED_ERROR"===r.code?t.emit("QuotaExceededError"):t.emit("Error",r);else{var n=t.mediaState.currentTime;e.time=null===n?null:1e3*n}}))):this.appendInitialSegment(e,l).catch((function(r){var n=vi(r)?r:new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{error:r},isFatal:!1,category:$s.q.MEDIA,message:"Can not append initial Segment"});if("YASP_OPERATION_ABORTED"!==n.code)t.emit("Error",n);else{var i=t.mediaState.currentTime;e.time=null===i?null:1e3*i}})).then((function(){}))}}}}}},{key:"handleTrackPresentationTimeOffset",value:function(e,t){var r=this,n=t.presentationTimeOffset,i=e.lastTrackTimeOffset,o=e.type;i!==n&&this.mse.setTimestampOffset(o,n/1e3).then((function(){e.lastTrackTimeOffset=n})).catch((function(e){r.destroyed||(0,Nl.L)(e)}))}},{key:"setBufferGoal",value:function(e){this.bufferGoal=e}},{key:"checkGorgedBuffer",value:function(e,t){var r=function(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i=n.start;t+=n.end-i}return t}(t),n=e.fat;return e.fat=r>=this.totalBufferSoftCap,!!e.fat&&(n||this.emit("FatBuffer",e.type),r>=this.totalBufferHardCap&&(this.emit("GorgedBuffer",e.type),!0))}},{key:"appendInitialSegment",value:(u=Ui(Mi().mark((function e(t,r){var n,i;return Mi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=this.timeline.getInitialSegment(t.type,r))){e.next=3;break}return e.abrupt("return");case 3:if(!n.isMP4){e.next=8;break}return e.next=6,this.appendChunk(t,bl.P.concat.apply(bl.P,Ci(n.getChunks())));case 6:e.next=11;break;case 8:return i=n.getChunkStream(),e.next=11,this.appendStream(t,i);case 11:t.currentTrack=r,this.run();case 13:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"appendChunk",value:(a=Ui(Mi().mark((function e(t,r){return Mi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mse.appendBuffer(t.type,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),vi(e.t0)?e.t0:new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e.t0},isFatal:!1,category:$s.q.MEDIA,message:(0,Ys.K)(e.t0)?e.t0.message:"Can not append buffer"});case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e,t){return a.apply(this,arguments)})},{key:"appendStream",value:(o=Ui(Mi().mark((function e(t,r){var n,i,o,a,u;return Mi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.state="appending",t.streamIsFinished=!1,n=this.createAbortPromise(t.type),e.prev=3,e.next=6,Zf.race([r.read(),n]);case 6:i=e.sent,o=i.value,a=i.done;case 9:if(a){e.next=24;break}if(!this.destroyed){e.next=12;break}return e.abrupt("return");case 12:if(!o){e.next=15;break}return e.next=15,Zf.race([this.appendChunk(t,o),n]);case 15:if(!this.destroyed){e.next=17;break}return e.abrupt("return");case 17:return e.next=19,Zf.race([r.read(),n]);case 19:u=e.sent,o=u.value,a=u.done,e.next=9;break;case 24:e.next=33;break;case 26:if(e.prev=26,e.t0=e.catch(3),!(0,Ys.K)(e.t0)||!Jf.includes(e.t0.message)&&!this.mse.isReloading()){e.next=32;break}throw this.createAbortError();case 32:throw vi(e.t0)?e.t0:new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e.t0},isFatal:!1,category:$s.q.MEDIA,message:"Can not append buffer"});case 33:return e.prev=33,this.abortCallbacks[t.type]=null,t.state="idle",e.finish(33);case 37:case"end":return e.stop()}}),e,this,[[3,26,33,37]])}))),function(e,t){return o.apply(this,arguments)})},{key:"getDebugInfo",value:function(){return{bufferGoal:this.bufferGoal,totalBufferSoftCap:this.totalBufferSoftCap,totalBufferHardCap:this.totalBufferHardCap,streams:this.streams}}}])&&Vi(r.prototype,n),i&&Vi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),eh=r(47286),th=r(20348),rh=r(81917),nh=r(41224),ih=r(83361),oh=r(83361),ah=r(81917),uh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vo(po(e=a.call(this)),"blacklist",new Set),vo(po(e),"destroyed",!1),vo(po(e),"checkLoopTimeoutId",void 0),e.startLoop(),e.once("Destroy",(function(){e.destroyed=!0})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lo(e,t)}(t,e);var r,n,i,o,a=fo(t);return r=t,(n=[{key:"destroy",value:function(){this.stopLoop(),co(yo(t.prototype),"destroy",this).call(this)}},{key:"getBlacklist",value:function(){return Array.from(this.blacklist)}},{key:"addHostname",value:function(e){var t=new ah(e).host;eh.T.indexOf(t)>-1||this.blacklist.has(e)||this.blacklist.add(e)}},{key:"isBlacklisted",value:function(e){return this.blacklist.has(e)}},{key:"checkBlacklistedHosts",value:(o=ao(io().mark((function e(){var t=this;return io().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oh.all(Array.from(this.blacklist).map(function(){var e=ao(io().mark((function e(r){return io().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,to(Zi(r));case 3:t.blacklist.delete(r),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"startLoop",value:function(){var e=this;this.destroyed||(this.checkLoopTimeoutId=setTimeout(ao(io().mark((function t(){return io().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.stopLoop(),t.next=3,e.checkBlacklistedHosts();case 3:e.startLoop();case 4:case"end":return t.stop()}}),t)}))),3e4))}},{key:"stopLoop",value:function(){clearTimeout(this.checkLoopTimeoutId)}}])&&uo(r.prototype,n),i&&uo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),ch=r(8450),sh=r(36714),lh=r(71377),fh=r(32890),hh=r(12917),dh=r(44885),ph=(0,dh.y)(self)||(0,hh.V)(self),yh=ph?1e4:5e3,vh=r(81917),mh=r(83361),gh=(0,dh.y)(self)||(0,hh.V)(self),bh=[429,500,502,503,504],wh={start:Math.abs(0),end:Math.abs(0),number:Math.max(Math.floor(0)),isInitSegment:!1,bitrate:0,trackId:"unknown",width:0,height:0,originalStart:0},_h=function(e){function t(e){var r,n=e.timeline,i=e.mediaState,a=e.playlist,u=e.abr,c=e.segmentFetcher,s=e.bufferGoal,l=e.bandwidthEstimator,f=e.ttfbEstimator,h=e.sourceIndex;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lo(jo(r=o.call(this)),"segmentFetcher",void 0),Lo(jo(r),"abr",void 0),Lo(jo(r),"timeline",void 0),Lo(jo(r),"mediaState",void 0),Lo(jo(r),"playlist",void 0),Lo(jo(r),"bandwidthEstimator",void 0),Lo(jo(r),"ttfbEstimator",void 0),Lo(jo(r),"bufferGoal",void 0),Lo(jo(r),"hostnameBlackList",new uh),Lo(jo(r),"trackToFetchFailuresCount",new Map),Lo(jo(r),"lastNonBlockedBaseUrls",[]),Lo(jo(r),"isDestroyed",!1),Lo(jo(r),"inProgress",!1),Lo(jo(r),"segmentsInProgress",{video:[],audio:[],text:[]}),Lo(jo(r),"sourceIndex",null),Lo(jo(r),"bufferGoalBytes",(0,Wl.jS)("web_yasp_buffer_goal_bytes_size")),r.timeline=n,r.mediaState=i,r.playlist=a,r.abr=u,r.segmentFetcher=c,r.bandwidthEstimator=l,r.ttfbEstimator=f,r.bufferGoal=1e3*s,r.sourceIndex=h,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ro(e,t)}(t,e);var r,n,i,o=xo(t);return r=t,i=[{key:"syncSelectedSegments",value:function(e,t){var r=["audio","video","text"],n=_o({},e);return r.forEach((function(i){var o=e[i];if(o){var a=1/0;r.forEach((function(r){var n,o;if(r!==i){var u=null!==(n=null===(o=e[r])||void 0===o?void 0:o.end)&&void 0!==n?n:0,c=t[r],s=null===c||void 0===c?void 0:c.reduce((function(e,t){var r=t.segment;return Math.max(e,r.end)}),0),l=Math.max(s,u);l&&(a=Math.min(a,l))}})),isFinite(a)&&o.start>=a&&(n[i]=void 0)}})),n}}],(n=[{key:"abort",value:function(){var e=this;["video","audio","text"].forEach((function(t){e.segmentsInProgress[t].forEach((function(e){return e.abort()}))}))}},{key:"setSourceIndex",value:function(e){this.sourceIndex=e}},{key:"addSourceIndexInUrl",value:function(e){if(!this.sourceIndex)return e;var t=new vh(e);return t.searchParams.set(fh.g,this.sourceIndex),t.href}},{key:"abortUseless",value:function(){var e=this;["video","audio","text"].forEach((function(t){return e.abortUselessForType(t)}))}},{key:"abortUselessForType",value:function(e){var t=this,r=this.mediaState.currentTime,n=1e3*(null!==r&&void 0!==r?r:-1);this.segmentsInProgress[e]=this.segmentsInProgress[e].filter((function(r){var i=r.abort,o=r.segment,a=r.trackId;if(o.isInitSegment)return!0;var u=o.start<=n&&n<o.end;return!(!t.timeline.checkTrackAvailableToLoad(a,e)||!u)||(i(),!1)}))}},{key:"run",value:function(){var e=this,t=[],r=function(){return!(e.segmentsInProgress.video.length>0||e.segmentsInProgress.audio.length>0||e.segmentsInProgress.text.length>0)};try{r(),this.runInternal(t),r()&&(this.inProgress=!1,this.emit("NoSegmentsInProgress"))}finally{mh.all(t.map((function(e){return e.catch(qf.Z)}))).then((function(){t.length>0&&e.emit("BandwidthEstimateUpdate",e.bandwidthEstimator.getBandwidthEstimate())}))}}},{key:"setVideoState",value:function(e){this.mediaState=e}},{key:"setBufferGoal",value:function(e){this.bufferGoal=1e3*e}},{key:"canStartDownload",value:function(e){if(!this.segmentsInProgress[e].length)return!0;var t=this.segmentsInProgress,r=t.audio,n=t.video,i=t.text,o=this.ttfbEstimator.getMinTtfbEstimate({value:0,source:"default"}),a=r.concat(n,i);return gh?0===a.length:a.every((function(e){return e.segment.getExpectedTimeToLoad()<=o.value}))}},{key:"actualizeProgress",value:function(){if((0,Wl.RW)("yasp_abr_loading_segment")){var e=Math.max(this.segmentsInProgress.audio.length,this.segmentsInProgress.video.length,this.segmentsInProgress.text.length);if(0!==e){for(var t={video:e,audio:e,text:e},r=0;r<e;r++){var n,i,o,a,u,c,s,l=null===(n=this.segmentsInProgress.audio[r])||void 0===n?void 0:n.segment,f=null===(i=this.segmentsInProgress.video[r])||void 0===i?void 0:i.segment,h=null===(o=this.segmentsInProgress.text[r])||void 0===o?void 0:o.segment,d=this.abr.filterSegments(this.timeline.getSegmentsForTracks(null!==(a=null===l||void 0===l?void 0:l.start)&&void 0!==a?a:null,"audio"),this.timeline.getSegmentsForTracks(null!==(u=null===f||void 0===f?void 0:f.start)&&void 0!==u?u:null,"video"),this.timeline.getSegmentsForTracks(null!==(c=null===h||void 0===h?void 0:h.start)&&void 0!==c?c:null,"text"),this.mediaState);d.audio&&l&&d.audio!==l&&l.getExpectedTimeToLoad()>d.audio.getExpectedTimeToLoad()&&(t.audio=Math.min(t.audio,r)),d.video&&f&&d.video!==f&&f.getExpectedTimeToLoad()>d.video.getExpectedTimeToLoad()*(0,Wl.jS)("yasp_videosegment_expected_load_time_multiplier")&&(t.video=Math.min(t.video,r)),(null===h||void 0===h?void 0:h.getExpectedTimeToLoad())>(null===(s=d.text)||void 0===s?void 0:s.getExpectedTimeToLoad())&&(t.text=Math.min(t.text,r))}for(var p=e-1;p>=0;p--)this.segmentsInProgress.audio[p]&&t.audio<=p&&this.segmentsInProgress.audio[p].abort(),this.segmentsInProgress.video[p]&&t.video<=p&&this.segmentsInProgress.video[p].abort(),this.segmentsInProgress.text[p]&&t.text<=p&&this.segmentsInProgress.text[p].abort()}}}},{key:"runInternal",value:function(e){var r,n,i=this,o=this.mediaState,a=o.currentTime,u=o.duration,c=o.buffering;if(null!==a&&(this.actualizeProgress(),c||!(u<a+.1))){var s=1e3*a,l=this.timeline.getBufferedRanges(!0),f=l.video,h=l.audio,d=l.text,p=this.defineTracksMeta(f,s,"video"),y=this.defineTracksMeta(h,s,"audio"),v=this.defineTracksMeta(d,s,"text");if(p.length||y.length||v.length){var m=t.syncSelectedSegments(this.abr.filterSegments(y,p,v,this.mediaState),this.segmentsInProgress),g=void 0!==m.video&&(null===(r=m.video)||void 0===r?void 0:r.height)===(null===(n=p[p.length-1])||void 0===n?void 0:n.height),b=this.getBaseUrl();b?(0,ql.J)(m).forEach((function(t){var r=Eo(t,2),n=r[0],o=r[1];if(o){var a=o.trackId,u=i.timeline.findTrackById(a,n);if(u){var c,f,h,d=0;if(Number.isFinite(i.mediaState.currentTime)){var p=Io(l[n],s,i.mediaState.duration);-1!==p&&(c=(p-s)/1e3,f=3,h=Math.pow(10,f),d=Math.round((c+sh.I)*h)/h)}if(!u.getInitSegment()&&u.initialization){var y=u.initialization,v={baseUrl:b,pathname:mo(y,u)},m=i.fetchSegment(v,a,n,_o(_o({},wh),{},{isInitSegment:!0}),d,g),w=m.segment,_=m.promise;u.appendSegment(w),e.push(_.catch((function(e){w.fail();var t=vi(e)?e:new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e,blacklist:i.hostnameBlackList.getBlacklist()},isFatal:!0,category:$s.q.NETWORK_MEDIA});i.emitError(t)})))}var E=u.media;if(E&&!u.hasSegment(o.number)){var O={baseUrl:b,pathname:mo(E,u,o)},S={start:o.start,end:o.end,number:o.number,isInitSegment:!1,bitrate:u.bitrate,trackId:u.id,width:"width"in u?u.width:0,height:"height"in u?u.height:0,originalStart:o.originalStart,duration:o.duration,isMP4:!1,isEncrypted:!1,startByteWithOffset:0,endByteWithOffset:0},k={};if(o.isMP4){O.pathname="",S.isMP4=!0,S.isEncrypted=o.isEncrypted,S.startByteWithOffset=o.startByteWithOffset,S.endByteWithOffset=o.endByteWithOffset;var T=go({start:o.startByteWithOffset,end:o.endByteWithOffset},o.isEncrypted);k.Range="bytes=".concat(T.start,"-").concat(T.end)}var R=i.fetchSegment(O,a,n,S,d,g,k),x=R.segment,P=R.promise;u.appendSegment(x),e.push(P.catch((function(e){x.fail();var t=vi(e)?e:new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{error:e,blacklist:i.hostnameBlackList.getBlacklist()},isFatal:!0,category:$s.q.NETWORK_MEDIA});i.emitError(t)})))}}}})):this.emitError(new Zs.w({code:"YASP_NO_BASEURLS",details:{},isFatal:!0,category:$s.q.MEDIA}))}}}},{key:"emitError",value:function(e){"YASP_OPERATION_ABORTED"!==e.code&&this.emit("Error",e)}},{key:"fetchSegment",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wh,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=new Cl(i),s=!1;this.handleInProgressSegment(r,c,t,(function(){s=!c.isInitSegment,n.inProgress||(n.inProgress=!0,n.emit("SegmentInProgress"))}));var l=new mh((function(l,f){var h="".concat(t,"/").concat(i.number),d=n.trackToFetchFailuresCount.get(h)||0,p=new vh(e.pathname,e.baseUrl);o>=0&&p.searchParams.append("bufSize",String(o)),(0,lh._)(Wn(d)).then((function(){if(!n.isDestroyed){var i=0;i=(0,Wl.RW)("web_yasp_static_timeout_for_low_latency")&&n.timeline.isLowLatencyLive()?1e4:(a?1e4:yh)+n.ttfbEstimator.getTtfbEstimate({value:1e3,source:"default"}).value;var o=(0,Cf.c)(n.addSourceIndexInUrl(p.toString())),y=n.hostnameBlackList.getBlacklist(),v=n.timeline.findTrackById(t,r),m=n.segmentFetcher.fetchChunkStream(o,i,c,r,v,u),g=m.chunkStream,b=m.promise,w=m.requestState,_=m.abort,E=m.requestHeaders,O=m.requestOptions;s?_():n.handleInProgressSegment(r,c,t,_);var S={url:o,requestHeaders:E,requestOptions:O};b.then((function(t){var r=t.status,i=t.headers;if(S.responseHeaders=i,S.status=r,r>=200&&r<300||304===r){g.on("Data",(function(e){c.append(e)})),g.on("Close",(function(){c.finish(),l()}));var o=function(){if(null!==w&&void 0!==w&&w.canceled)return c.fail(),l();if(!c.finished){var t=null!==w&&void 0!==w&&w.timeout?"YASP_FETCH_SEGMENT_TIMEOUT":"YASP_FETCH_SEGMENT_HTTP_ERROR",r=null!==w&&void 0!==w&&w.timeout?"Request timed out":"Network Error",i=null!==w&&void 0!==w&&w.timeout?$s.q.NETWORK_TIMEOUT:$s.q.NETWORK_MEDIA;n.hostnameBlackList.addHostname(e.baseUrl),f(new Zs.w({code:t,details:_o(_o({},S),{},{blacklist:{before:y,after:n.hostnameBlackList.getBlacklist()},downloadedBytes:null!==w&&void 0!==w&&w.timeout?w.downloadedBytes:void 0}),message:r,category:i,isFatal:!1}))}};return g.on("Destroy",o),g.resume(),n.trackToFetchFailuresCount.has(h)&&n.trackToFetchFailuresCount.delete(h),void(g.isDestroyed()&&o())}if(n.trackToFetchFailuresCount.set(h,d+1),bh.includes(r))f(new Zs.w({code:"YASP_FETCH_SEGMENT_BAD_HTTP_STATUS",message:"Error: ".concat(r),details:_o(_o({},S),{},{blacklist:{before:y,after:n.hostnameBlackList.getBlacklist()}}),category:$s.q.NETWORK_MEDIA,isFatal:!1}));else{n.hostnameBlackList.addHostname(e.baseUrl);var a=d>=10;f(0===r?new Zs.w({code:"YASP_FETCH_SEGMENT_HTTP_ERROR",message:"Network Error",details:_o(_o({},S),{},{blacklist:{before:y,after:n.hostnameBlackList.getBlacklist()}}),category:$s.q.NETWORK_MEDIA,isFatal:a}):new Zs.w({code:"YASP_FETCH_SEGMENT_BAD_HTTP_STATUS",message:"Error: ".concat(r),details:_o(_o({},S),{},{blacklist:{before:y,after:n.hostnameBlackList.getBlacklist()}}),category:$s.q.NETWORK_MEDIA,isFatal:a}))}})).catch((function(t){if(null!==w&&void 0!==w&&w.canceled)f(new Zs.w({code:"YASP_OPERATION_ABORTED",details:_o(_o({},S),{},{blacklist:{before:y,after:n.hostnameBlackList.getBlacklist()}}),message:t.message,category:$s.q.NETWORK_MEDIA,isFatal:!1}));else{n.hostnameBlackList.addHostname(e.baseUrl),n.trackToFetchFailuresCount.set(h,d+1);var r="Request timed out"===t.message,i=!r&&d>=10;f(new Zs.w({code:r?"YASP_FETCH_SEGMENT_TIMEOUT":"YASP_FETCH_SEGMENT_HTTP_ERROR",details:_o(_o({},S),{},{blacklist:{before:y,after:n.hostnameBlackList.getBlacklist()},downloadedBytes:r?(null===w||void 0===w?void 0:w.downloadedBytes)||0:void 0}),message:t.message,category:r?$s.q.NETWORK_TIMEOUT:$s.q.NETWORK_MEDIA,isFatal:i}))}}))}}))}));return{segment:c,promise:l}}},{key:"handleInProgressSegment",value:function(e,t,r,n){var i=this;if(!t.finished&&!t.failed&&(!(0,Wl.RW)("yasp_abr_loading_segment")||!t.isInitSegment)){var o=this.segmentsInProgress[e].find((function(e){return e.segment.number===t.number&&e.trackId===r}))||function(){var o={abort:n,segment:t,trackId:r};i.segmentsInProgress[e].push(o);var a=function r(){i.segmentsInProgress[e]=i.segmentsInProgress[e].filter((function(e){return e!==o})),t.off("Failed",r),t.off("Finish",r)};return t.once("Failed",a),t.once("Finish",a),t.once("Destroy",a),o}(),a=o.abort;o.abort=function(){a(),n()}}}},{key:"defineTracksMeta",value:function(e,t,r){if(!this.canStartDownload(r))return[];var n=Io(e,t,this.mediaState.duration);if(-1===n)return[];var i=n-t;return this.checkIsFullBuffer(i)?[]:this.timeline.getSegmentsForTracks(n,r)}},{key:"checkIsFullBuffer",value:function(e){return this.bufferGoalBytes>0&&this.timeline.getTotalRawSize()>=this.bufferGoalBytes?(this.emit("OutOfBytesLimit"),!0):e>=this.bufferGoal||0===this.bufferGoal}},{key:"getDebugInfo",value:function(){return{bufferGoal:this.bufferGoal,hostnameBlackList:this.hostnameBlackList.getBlacklist(),trackToFetchFailuresCount:Array.from(this.trackToFetchFailuresCount.entries()).reduce((function(e,t){return e[t[0]]=e[t[1]],e}),{}),segmentsInProgress:Object.entries(this.segmentsInProgress).reduce((function(e,t){var r=Eo(t,2),n=r[0],i=r[1];return e[n]=i.map((function(e){return e.segment.getDebugInfo()})),e}),{}),sourceIndex:this.sourceIndex,inProgress:this.inProgress}}},{key:"getBaseUrl",value:function(){var e,t=this,r=this.playlist.getBaseUrls().filter((function(e){return!t.hostnameBlackList.isBlacklisted(e)}));return function(e,t){var r=new Map;e.forEach((function(e,t){return r.set(e,t)})),e.sort((function(e,n){var i=t(e,n);return 0!==i?i:Number(r.get(e))-Number(r.get(n))}))}(r,(function(e,r){var n=t.lastNonBlockedBaseUrls.indexOf(e),i=t.lastNonBlockedBaseUrls.indexOf(r);return-1!==n&&-1!==i?n-i:-1!==n&&-1===i?-1:-1===n&&-1!==i?1:0})),this.lastNonBlockedBaseUrls=r,null!==(e=r[0])&&void 0!==e?e:this.playlist.getBaseUrls()[0]}},{key:"destroy",value:function(){this.isDestroyed=!0,this.abort(),ko(Ao(t.prototype),"destroy",this).call(this)}}])&&So(r.prototype,n),i&&So(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Eh=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeline=t,this.videoState=r,this.backWatch=n,this.getBufferGoal=i}var t,r,n;return t=e,(r=[{key:"getTotalExpectedBufferSize",value:function(){return this.backWatch+this.getBufferGoal()}},{key:"setBackWatch",value:function(e){this.backWatch=e}},{key:"setVideoState",value:function(e){this.videoState=e}},{key:"run",value:function(){if(null!==this.videoState.currentTime){var e=this.videoState.currentTime;this.timeline.clear(0,Math.max(1e3*(e-this.backWatch),0)),this.timeline.clear(1e3*(e+this.getBufferGoal()),Number.MAX_SAFE_INTEGER)}}},{key:"onOutOfBytesLimit",value:function(){if(null!==this.videoState.currentTime){var e=this.videoState.currentTime;this.timeline.clear(0,Math.max(1e3*(e-5),0))}}},{key:"getDebugInfo",value:function(){return{backWatch:this.backWatch,bufferGoal:this.getBufferGoal()}}}])&&Do(t.prototype,r),n&&Do(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Oh=r(90541),Sh=r(83361),kh=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jo(Zo(n=o.call(this)),"fetcher",void 0),Jo(Zo(n),"emsgSchemeIdUris",{audio:new Set,video:new Set}),Jo(Zo(n),"decoder",void 0),n.fetcher=e,n.decoder=r,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zo(e,t)}(t,e);var r,n,i,o=Ko(t);return r=t,(n=[{key:"setKeys",value:function(e){this.decoder.setKeys(e)}},{key:"fetchChunkStream",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};n.waitingStarted();var u=this.fetcher.fetchDataStream(e,{timeout:Math.max(yh,r),headers:a}),c=u.response,s=u.requestState,l=u.abort,f=u.requestHeaders,h=u.requestOptions,d=new Dl,p=new Sh(function(){var r=Yo(Go().mark((function r(u,s){var f,h,p,y,v,m,g;return Go().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return f=(0,Ml.u)(),r.prev=1,r.next=4,c;case 4:h=r.sent,p=(h.headers["content-type"]||"").split(";"),y=Ho(p,1),v=y[0],m=parseInt(h.headers["content-length"]||"",10),n.setExpectedSize(m),n.loadingStarted(),r.t0=v.trim(),r.next="application/mp4"===r.t0||"text/vtt"===r.t0?12:"audio/mp4"===r.t0||"video/mp4"===r.t0?14:16;break;case 12:return t.processVtt(h.body,d),r.abrupt("break",24);case 14:return t.processMp4({readableStream:h.body,writableStream:d,getStartTime:f,segment:n,type:i,abort:l,track:o,url:e,headers:a}),r.abrupt("break",24);case 16:g=Sf(e.toLocaleLowerCase()),r.t1=g,r.next="vtt"===r.t1?20:("m4s"===r.t1||r.t1,22);break;case 20:return t.processVtt(h.body,d),r.abrupt("break",24);case 22:return t.processMp4({readableStream:h.body,writableStream:d,getStartTime:f,segment:n,type:i,abort:l,track:o,url:e,headers:a}),r.abrupt("break",24);case 24:u({status:h.status,headers:h.headers}),r.next=31;break;case 27:r.prev=27,r.t2=r.catch(1),d.destroy(),s(r.t2);case 31:case"end":return r.stop()}}),r,null,[[1,27]])})));return function(e,t){return r.apply(this,arguments)}}());return{promise:p,chunkStream:d.asReadable(),requestState:s,abort:l,requestHeaders:f,requestOptions:h}}},{key:"processMp4",value:function(e){var t,r,n,i,o=this,a=e.readableStream,u=e.writableStream,c=e.getStartTime,s=e.segment,l=e.type,f=e.abort,h=e.track,d=e.url,p=e.headers,y=[],v=0,m=new Uint8Array(0),g=0,b=0,w=!0,_=!0,E=0,O=function(){w||0===g||(_&&(y.length?(o.filterSpikes(y).forEach((function(e){var t=e.time,r=e.size;o.fetcher.progress(t,r,!0)})),y=[]):o.fetcher.progress(g,b,!0)),g=0,b=0)},S=c,k=0,T=0,R=!1,x=function(e,a){m=bl.P.concat(m,e);var u=!1,c=0,f=function(e){c=e.size+e.start,u=!0,T++};if((new rl.p).box("uuid",(function(e){if(e.isComplete){c=e.size+e.start,u=!0;var o=e.reader.readUUID(),a=e.reader.readUint64();"c4eac1fc-0ad8-4676-9656-69552eb3252f"===o&&w?(t=a,r=Date.now(),n=r,w=!1):"bcfca253-398b-4a5b-9a92-ec8f7d89e61d"===o&&(i=a-t,t=a)}})).box("moov",(function(e){e.isComplete&&(c=e.size+e.start,u=!0,rl.p.children(e))})).box("mvex",(function(){R=!0})).box("moof",(function(e){e.isComplete&&(b+=e.size)})).box("mdat",(function(e){if(w){if(!e.isComplete)return;f(e)}else{if(_){_=!1,E=e.loadedSize;var t=Date.now(),o=t-n;n=t,o>=i?(g+=o-i,b+=e.loadedSize):i<50&&(g+=o,b+=e.loadedSize)}else{var a=Date.now()-r;g+=a;var u=e.loadedSize-E;E=e.loadedSize;var c=u;if(b+=c,!s.isInitSegment)if(0===a)if(y.length){var l=y[y.length-1];l.size=l.size+c}else v=c;else y.push({time:a,size:c+v}),v=0}r=Date.now(),e.isComplete&&(_=!0,s.isInitSegment||O(),f(e))}})).fullBox("emsg",(function(e){e.isComplete&&(o.parseEMSG(e,s,l),c=e.size+e.start,u=!0)})).parse(m,!0,!0),function(e){if(w)if(k+=e.length,o.fetcher.isLL()){var t=S();(t>=100||k>=16e3)&&(o.fetcher.progress(t,k),S=(0,Ml.u)(),k=0)}else if(k>0){var r=S();o.fetcher.progress(r,k),S=(0,Ml.u)(),k=0}}(e),O(),u){o.validateInitSegment(s,l,d,Boolean(T),R);var h=m.subarray(0,c);m=m.subarray(c),a(h)}},P=[];if(s.isEncrypted){var j=new Uint8Array;a.on("Data",(function(e){j=bl.P.concat(j,e)})),a.on("Close",Yo(Go().mark((function e(){var t,r;return Go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.decoder.decode(j,"audio",s,h,Fo(p.Range));case 2:t=e.sent,r=Bo(t,{start:s.startByteWithOffset,end:s.endByteWithOffset},p.Range),x(r,(function(e){try{u.write(e)}catch(t){if(t instanceof RangeError)return f(),void o.emit("BufferAllocationError",{error:t,type:"audio"});throw t}})),u.close();case 6:case"end":return e.stop()}}),e)}))))}else a.on("Data",(function(e){s.loadedRawSize+=e.byteLength,x(e,(function(e){if("text"!==l){var t=o.decoder.decode(e,l,s,h).then((function(e){u.write(e)})).catch((function(e){if(e instanceof RangeError)return f(),void o.emit("BufferAllocationError",{error:e,type:l});throw e}));P.push(t)}else u.write(e)}))})),a.on("Close",Yo(Go().mark((function e(){return Go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.emitSegmentLoaded(l,s,T),e.prev=1,e.next=4,Sh.all(P);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),u.destroy();case 9:u.close();case 10:case"end":return e.stop()}}),e,null,[[1,6]])}))));a.on("Destroy",Yo(Go().mark((function e(){return Go().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sh.all(P).catch(Ks.Z);case 2:u.destroy();case 3:case"end":return e.stop()}}),e)})))),a.resume()}},{key:"validateInitSegment",value:function(e,t,r,n,i){if(e.isInitSegment&&"text"!==t)return n?this.emit("Error",new Zs.w({code:"YASP_INVALID_INIT_SEGMENT",message:"Unexpected mdat-box in initialization segment",details:{type:t,url:r},isFatal:!0,category:$s.q.MEDIA})):i?void 0:this.emit("Error",new Zs.w({code:"YASP_INVALID_INIT_SEGMENT",message:"Expect mvex-box in initialization segment, but not found",details:{type:t,url:r},isFatal:!0,category:$s.q.MEDIA}))}},{key:"emitSegmentLoaded",value:function(e,t,r){"text"===e||t.isInitSegment||this.emit("SegmentLoaded",{type:e,cmaf:r>1,number:t.number})}},{key:"processVtt",value:function(e,t){var r=new Uint8Array(0);e.on("Data",(function(e){r=bl.P.concat(r,e)})),e.on("Close",(function(){t.write(r),t.close()})),e.on("Destroy",(function(){t.destroy()})),e.resume()}},{key:"setEmsgSchemeIdUris",value:function(e){this.emsgSchemeIdUris=null!==e&&void 0!==e?e:this.emsgSchemeIdUris}},{key:"parseEMSG",value:function(e,t,r){if("text"!==r){var n=t.start/1e3,i=e.reader.readTerminatedString(),o=e.reader.readTerminatedString(),a=e.reader.readUint32(),u=e.reader.readUint32(),c=e.reader.readUint32(),s=e.reader.readUint32(),l=e.reader.readBytes(e.reader.getLength()-e.reader.getPosition()),f=n+u/a,h=f+c/a,d=t.duration/1e3;if(this.emsgSchemeIdUris[r].has(i))if("urn:mpeg:dash:event:2012"===i)this.emit("ManifestUpdateRequired");else{var p={startTime:f,endTime:h,schemeIdUri:i,value:o,timescale:a,presentationTimeDelta:u,eventDuration:c,id:s,segmentDuration:d,messageData:l};this.emit("EmsgDetected",p)}}}},{key:"filterSpikes",value:function(e){if(e.length<2)return e;e.sort((function(e,t){return e.time-t.time}));var t=e[Math.floor(e.length/4)].time,r=e[Math.floor(e.length*(3/4))].time,n=r+3*(r-t);return e.filter((function(e){return e.time<n}))}}])&&Wo(r.prototype,n),i&&Wo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Th=r(83361),Rh=function(){function e(t,r,n,i){var o,a,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mse=t,this.videoState=r,this.backWatch=n,this.bufferGoal=i,u=!1,(a="locked")in(o=this)?Object.defineProperty(o,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[a]=u}var t,r,n,i,o;return t=e,(r=[{key:"setBufferGoal",value:function(e){this.bufferGoal=e}},{key:"run",value:function(){var e=this;this.locked||(this.locked=!0,this.runInternal().catch(qf.Z).then((function(){e.locked=!1})))}},{key:"runInternal",value:(i=ea().mark((function e(){var t,r;return ea().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("open"===this.mse.getReadyState()){e.next=2;break}return e.abrupt("return");case 2:if(null!==(t=this.videoState.currentTime)){e.next=5;break}return e.abrupt("return");case 5:return r=[this.clear(t+this.bufferGoal,this.videoState.duration)],t>this.backWatch&&r.push(this.clear(0,t-this.backWatch)),e.abrupt("return",Th.all(r));case 8:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Th((function(r,n){function o(e){ta(u,r,n,o,a,"next",e)}function a(e){ta(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"forceRun",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=[];return(0,Wl.RW)("yasp_no_source_abort_on_fake_seek")&&null!==t&&["video","audio"].forEach((function(n){e.mse.getBufferedRangesByType(n).some((function(e){return e.start<=t&&e.end>=t}))?r.push(Th.resolve()):r.push(e.clear(t,e.videoState.duration))})),0===r.length&&r.push(this.clear(0,this.videoState.duration)),Th.all(r)}},{key:"clear",value:function(e,t){return e>=t?Th.all([Th.resolve()]):Th.all([this.mse.clearBuffer("video",e,t),this.mse.clearBuffer("audio",e,t)])}},{key:"getDebugInfo",value:function(){return{locked:this.locked}}}])&&ra(t.prototype,r),n&&ra(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),xh=r(14538),Ph=r(44540),jh=r(34204),Ah=r.n(jh),Lh=Ah().ru.yandex.videoplayer.multiplatform,Ih=function(){function e(){ya(this,e),ga(this,"getTime",(0,Ml.u)())}return ma(e,[{key:"getDurationMs",value:function(){return this.getTime()}}]),e}(),Dh=function(){function e(){ya(this,e)}return ma(e,[{key:"create",value:function(){return new Ih}}]),e}(),Nh=function(){function e(t,r){ya(this,e),this.task=t,this.time=r,ga(this,"intervalId",null)}return ma(e,[{key:"start",value:function(){this.intervalId=setInterval(this.task,this.time)}},{key:"stop",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}}]),e}(),Mh=function(){function e(){ya(this,e)}return ma(e,[{key:"create",value:function(e,t){return new Nh(e,t)}}]),e}(),Ch=function(){function e(t){ya(this,e),this.fetcher=t,ga(this,"progressListeners",new Map)}return ma(e,[{key:"addResponseStartListener",value:function(e){this.fetcher.on("ResponseStart",e)}},{key:"removeResponseStartListener",value:function(e){this.fetcher.off("ResponseStart",e)}},{key:"addResponseEndListener",value:function(e){this.fetcher.on("ResponseEnd",e)}},{key:"removeResponseEndListener",value:function(e){this.fetcher.off("ResponseEnd",e)}},{key:"addProgressListener",value:function(e){var t=function(t){var r=t.time,n=t.size;e(new Lh.fetcher.BandwidthInfo(r,n))};this.progressListeners.set(e,t),this.fetcher.on("Progress",t)}},{key:"removeProgressListener",value:function(e){var t=this.progressListeners.get(e);void 0===t&&(this.progressListeners.delete(e),this.fetcher.off("Progress",t))}}]),e}(),Fh=function(e){function t(){var e;if(ya(this,t),ga(da(e=r.call(this)),"fetcherProgressAccumulator",new Lh.fetcher.FetcherProgressAccumulator(new Dh,new Lh.fetcher.FetcherProgressAccumulatorParams((0,Wl.RW)("disable_multiplatform_interval_task")?null:new Mh))),ga(da(e),"fetchers",new Map),ga(da(e),"bandwidthInfoBatch",[]),(0,Wl.RW)("web_yasp_enable_network_traces")&&e.on("Progress",(function(t){e.bandwidthInfoBatch.push(sa(sa({},t),{},{clientTimestamp:(0,Ph.no)()})),e.bandwidthInfoBatch.length>=30&&(e.emit("NetworkTrace",e.bandwidthInfoBatch),e.bandwidthInfoBatch=[])})),e.fetcherProgressAccumulator.addProgressListener((function(t){var r=t.durationMs,n=t.sizeBytes;e.emit("Progress",{time:r,size:n})})),(0,Wl.RW)("disable_multiplatform_interval_task")){var n=setInterval((function(){e.fetcherProgressAccumulator.process()}),100);e.once("Destroy",(function(){clearInterval(n)}))}return e.once("Destroy",(function(){e.fetcherProgressAccumulator.destroy()})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&la(e,t)}(t,e);var r=fa(t);return ma(t,[{key:"appendFetcher",value:function(e){var t=new Ch(e);this.fetchers.set(e,t),this.fetcherProgressAccumulator.appendFetcher(t)}},{key:"removeFetcher",value:function(e){var t=this.fetchers.get(e);void 0!==t&&(this.fetchers.delete(t),this.fetcherProgressAccumulator.removeFetcher(t))}},{key:"isLL",value:function(){return!1}}]),t}(Al.M),Bh=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(r="trace")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.trace=[]}var t,r,n;return t=e,(r=[{key:"getTrace",value:function(){return this.trace}},{key:"addDecision",value:function(e,t,r){var n,i=[],o=wa(t);try{for(o.s();!(n=o.n()).done;){var a,u,c=n.value,s=null===(a=c.audio)||void 0===a?void 0:a.trackId,l=null===(u=c.video)||void 0===u?void 0:u.trackId;i.push({audio:s,video:l})}}catch(f){o.e(f)}finally{o.f()}return r?this.trace.push({name:e,result:i,input:r}):this.trace.push({name:e,result:i}),this.trace}}])&&ba(t.prototype,r),n&&ba(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Uh=[4320,2880,2160,1440,1080,720,480,360,240,144,0],Gh=Uh.reduce((function(e,t){return e[t]=t,e}),Object.create(null)),Hh=function(e){function t(e){var r,n=e.rules,i=void 0===n?[]:n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),La(ja(r=o.call(this)),"rules",void 0),La(ja(r),"videoSizes",void 0),La(ja(r),"abrDecisionsHashCode",{video:"",audio:""}),La(ja(r),"lastAbrDecisionsLog",null),r.rules=i,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ra(e,t)}(t,e);var r,n,i,o=xa(t);return r=t,(n=[{key:"setVideoElementSizes",value:function(e){this.videoSizes=e}},{key:"filterSegments",value:function(e,t,r,n){var i,o=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=Sa(t,e,r),c=Ea(e,t),s=new Bh,l=this.rules.reduce((function(e,t){var r,a=t.filter(e,n,o.videoSizes);if(t.isCappingRule()){var c,l,f,h,d=t.filter(u,n,o.videoSizes),p=d[d.length-1];i?null!==(c=i.video)&&void 0!==c&&c.height&&null!==(l=p.video)&&void 0!==l&&l.height&&(null===(f=i.video)||void 0===f?void 0:f.height)>(null===(h=p.video)||void 0===h?void 0:h.height)&&(i=p):i=p}return"function"===typeof t.getInputData&&(r=t.getInputData()),s.addDecision(t.name,a,r),a}),u.reverse())[0]||u[u.length-1];if(a){var f={tracks:c,trace:s.getTrace()},h=Oa(f,"audio"),d=Oa(f,"video"),p={video:d||this.abrDecisionsHashCode.video,audio:h||this.abrDecisionsHashCode.audio};this.abrDecisionsHashCode.audio===p.audio&&this.abrDecisionsHashCode.video===p.video||(this.emit("AbrDecisionChange",f),this.abrDecisionsHashCode=p,this.lastAbrDecisionsLog=f)}return i&&this.emit("MaxCapAllowedVideoTrackUpdate",i),{audio:l.audio,video:l.video,text:null===r||void 0===r?void 0:r[0]}}},{key:"getDebugInfo",value:function(){return{rules:this.rules.map((function(e){return e.getDebugInfo()})),abrDecisionsLog:this.lastAbrDecisionsLog}}}])&&Ta(r.prototype,n),i&&Ta(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Vh=r(84119),qh=Ah().ru.yandex.videoplayer.multiplatform,Yh=function(){function e(t){Da(this,e),this.fetcher=t}return Ma(e,[{key:"addRequestTtfbListener",value:function(e){this.fetcher.on("RequestTtfb",e)}},{key:"removeRequestTtfbListener",value:function(e){this.fetcher.off("RequestTtfb",e)}}]),e}(),Wh=function(){function e(){Da(this,e),Ia(this,"ttfbEstimator",new qh.estimate.TtfbEstimator),Ia(this,"fetchers",new Map)}return Ma(e,[{key:"appendFetcher",value:function(e){var t=new Yh(e);this.fetchers.set(e,t),this.ttfbEstimator.appendFetcher(t)}},{key:"removeFetcher",value:function(e){var t=this.fetchers.get(e);void 0!==t&&(this.fetchers.delete(t),this.ttfbEstimator.removeFetcher(t))}},{key:"getMinTtfbEstimate",value:function(e){var t=this.ttfbEstimator.getMinTtfbEstimate(e);return{value:t.value,source:t.source}}},{key:"getTtfbEstimate",value:function(e){var t=this.ttfbEstimator.getTtfbEstimate(e);return{value:t.value,source:t.source}}},{key:"hasGoodEstimate",value:function(){return this.ttfbEstimator.hasGoodEstimate()}},{key:"getDebugInfo",value:function(){return this.ttfbEstimator.getDebugInfo()}}]),e}(),zh=r(53396),Kh=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bandwidthEstimator=t,this.ttfbEstimator=r,this.getRemainingTimeToStart=n,Ba(this,"name","NetworkParamsRule"),Ba(this,"inputData",{bandwidth:0,ttfb:0,playbackRate:0,bufferSize:0,remainingTimeToStart:null})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){var r;if(e.length<=1)return e;if((0,Wl.RW)("yasp_abr_loading_segment")&&e.some(Ca))return e;var n,i,o=this.bandwidthEstimator.getBandwidthEstimate().value,a=null===(r=this.ttfbEstimator)||void 0===r?void 0:r.getTtfbEstimate({value:1e3,source:"default"}).value,u=null===t.currentTime?0:(n=t,i=t.currentTime,Di((0,zh.w)(n),i)),c=this.getRemainingTimeToStart();if(this.inputData.remainingTimeToStart=c,this.inputData.bandwidth=o,this.inputData.ttfb=a,this.inputData.playbackRate=t.playbackRate,this.inputData.bufferSize=u,!(7.5>=u))return e;var s=Math.max(t.playbackRate,1),l=e.filter((function(e){var t,r,n,i,u=Math.max(null!==(t=null===(r=e.video)||void 0===r?void 0:r.duration)&&void 0!==t?t:0,null!==(n=null===(i=e.audio)||void 0===i?void 0:i.duration)&&void 0!==n?n:0)/1e3,l=e.bandwidth*u,f=.75*u/s,h=Math.min(null!==c?c-a/1e3:1/0,f);return o*h>l}));return 0===l.length?[e[0]]:l}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&Fa(t.prototype,r),n&&Fa(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$h=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),za(Ya(e=o.call(this)),"currentTime",void 0),za(Ya(e),"duration",void 0),za(Ya(e),"buffering",void 0),za(Ya(e),"buffered",void 0),za(Ya(e),"paused",void 0),za(Ya(e),"loop",void 0),za(Ya(e),"playbackRate",void 0),e.currentTime=null,e.duration=Math.max(0,0),e.buffering=!0,e.buffered=new qs,e.paused=!0,e.loop=!1,e.playbackRate=1,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ha(e,t)}(t,e);var r,n,i,o=Va(t);return r=t,n&&Ga(r.prototype,n),i&&Ga(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(Al.M),Zh=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tu(Qa(e=o.call(this)),"videoSize",void 0),tu(Qa(e),"containerSize",void 0),tu(Qa(e),"devicePixelRatio",void 0),tu(Qa(e),"frames",void 0),tu(Qa(e),"objectFit",void 0),e.videoSize=null,e.containerSize=null,e.devicePixelRatio=1,e.frames={total:Math.max(Math.floor(0)),dropped:Math.max(Math.floor(0))},e.objectFit=null,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Za(e,t)}(t,e);var r,n,i,o=Xa(t);return r=t,n&&$a(r.prototype,n),i&&$a(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}($h),Xh=function(e){function t(){return iu(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ou(e,t)}(t,e);var r,n,i,o=au(t);return r=t,n&&nu(r.prototype,n),i&&nu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}($h),Jh=r(35318),Qh=Number.MAX_SAFE_INTEGER,ed=r(11312),td=r(41925),rd=r(2445),nd=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mu(this,"name","ResolutionRule"),mu(this,"inputData",{width:0,height:0,dpi:1,defaultQuality:Qh,userQuality:Jh.k}),mu(this,"getUserQuality",void 0),mu(this,"getDefaultQuality",void 0),this.getDefaultQuality=t,this.getUserQuality=r}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t,r){var n,i,o,a;if(!function(e){return e instanceof Zh}(t))return e;var u=null!==(n=null===t||void 0===t?void 0:t.videoSize)&&void 0!==n?n:{width:0,height:0},c=u.width,s=u.height;if(t.containerSize){var l,f={width:t.containerSize.width,height:t.containerSize.height},h=null!==(l=t.objectFit)&&void 0!==l?l:"contain";a=null!==r&&void 0!==r?r:(0,rd.k)({videoWidth:c,videoHeight:s},h,f)}else a=null!==r&&void 0!==r?r:{};return a.dpi=t.devicePixelRatio?t.devicePixelRatio:1,this.inputData.width=null!==(i=a.width)&&void 0!==i?i:null,this.inputData.height=null!==(o=a.height)&&void 0!==o?o:null,this.inputData.dpi=a.dpi,this.inputData.userQuality=this.getUserQuality(),this.inputData.defaultQuality=this.getDefaultQuality(),du(e,a,{defaultLongSideResolution:this.inputData.defaultQuality,userCappingResolution:this.inputData.userQuality})}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&vu(t.prototype,r),n&&vu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),id=function(){function e(){var t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n="MaxBandwidthRule",(r="name")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){var r=Rt(e.slice(0).reverse(),(function(e){var t;return(null===e||void 0===e||null===(t=e.audio)||void 0===t?void 0:t.bitrate)||0}));return r?[r]:e}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&gu(t.prototype,r),n&&gu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),od=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getServerCapHeight=t,wu(this,"name","ServerRestrictionsRule"),wu(this,"inputData",{maxHeight:null})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e){if(e.length<=1)return e;var t=this.getServerCapHeight();return this.inputData.maxHeight=t,null===t?e:function(e,t){var r=e.filter(pu);if(r.length<=1)return e;for(var n=[],i=0;i<r.length;i++)r[i].video.height<=t&&n.push(r[i]);return 0===n.length?[r[0]]:n}(e,t)}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&bu(t.prototype,r),n&&bu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ad=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bandwidthEstimator=t,Eu(this,"name","SimpleBandwidthRule"),Eu(this,"inputData",{bandwidth:0,playbackRate:0,paused:!1})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e,t){if(e.length<=1)return e;var r=this.bandwidthEstimator.getBandwidthEstimate().value;this.inputData.bandwidth=r,this.inputData.playbackRate=t.playbackRate,this.inputData.paused=t.paused;var n=e.filter((function(e){return!(!(0,Wl.RW)("yasp_abr_loading_segment")||!function(e){return!(!e.video&&!e.audio)&&["audio","video"].every((function(t){var r=e[t];return!r||null!==r.getWaitingDuration()}))}(e))||e.bandwidth*Math.max(t.playbackRate,1)<=r}));return 0===n.length?[e[0]]:n}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!1}}])&&_u(t.prototype,r),n&&_u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ud=r(91595),cd=r(89426),sd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Su(this,"name","SaveDataRule"),Su(this,"inputData",{saveData:(0,ud.R)()})}var t,r,n;return t=e,(r=[{key:"filter",value:function(e){return this.inputData.saveData=(0,ud.R)(),function(e){return(0,ud.R)()?e.filter((function(e){return!(e.video&&e.video.height&&e.video.width)||Math.min(e.video.height,e.video.width)<=cd.T})):e}(e)}},{key:"getInputData",value:function(){return this.inputData}},{key:"getDebugInfo",value:function(){return{name:this.name}}},{key:"isCappingRule",value:function(){return!0}}])&&Ou(t.prototype,r),n&&Ou(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ld=r(63440),fd=function(e){function t(e){var r,n,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o.call(this)).videoState=e,n=ju(r),a=void 0,(i="watchedTimeCounter")in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,r.watchedTimeCounter=new ld.p,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ru(e,t)}(t,e);var r,n,i,o=xu(t);return r=t,(n=[{key:"run",value:function(){this.videoState.currentTime&&(this.watchedTimeCounter.calc(this.videoState.currentTime,this.videoState.playbackRate,!0),this.emit("WatchedTimeUpdated",{watchedTime:this.watchedTimeCounter.get()}))}}])&&Tu(r.prototype,n),i&&Tu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),hd=Ah().ru.yandex.videoplayer.multiplatform,dd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Iu(this,"bufferGoalManager",void 0),Iu(this,"constantBufferGoal",null),Iu(this,"preloadBufferGoal",2),this.bufferGoalManager=new hd.bgm.BufferGoalManager(new hd.bgm.BufferGoalManagerProps(null,new hd.bgm.BufferGoalManagerFlags(new hd.flags.DisableDynamicBuffer(!1),new hd.flags.LowBufferBeforeStart(!0),new hd.flags.DefaultBuffer(30)),null))}var t,r,n;return t=e,(r=[{key:"setConstantBufferGoal",value:function(e){this.constantBufferGoal=e}},{key:"setPreloadBufferGoal",value:function(e){this.preloadBufferGoal=e}},{key:"getBufferGoal",value:function(e){if(null!==this.constantBufferGoal)return this.constantBufferGoal;if(e.usePreloadBufferGoal)return this.preloadBufferGoal;var t=e.watchedTime,r=void 0===t?0:t,n=e.currentTime,i=void 0===n?0:n;return this.bufferGoalManager.getBufferGoal(new hd.bgm.GetBufferGoalProps(new hd.bgm.WatchedTime(r),new hd.bgm.CurrentTime(i)))}},{key:"setSkippableFragments",value:function(e){this.bufferGoalManager.setSkippableFragments(e?e.map((function(e){var t=e.startTime,r=e.endTime;return new hd.bgm.SkippableFragment(t,r)})):null)}},{key:"getSkippableFragments",value:function(){var e=this.bufferGoalManager.getSkippableFragments()||void 0;return e&&e.map((function(e){return{startTime:e.startTime,endTime:e.endTime}}))}}])&&Lu(t.prototype,r),n&&Lu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),pd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o.call(this)).timeline=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fu(e,t)}(t,e);var r,n,i,o=Bu(t);return r=t,(n=[{key:"run",value:function(){this.timeline.getIsDynamic()&&this.update()}},{key:"update",value:function(){var e=this.timeline.getSeekableRange(),t=e.start/1e3,r=e.end/1e3;this.emit("SeekableUpdate",{start:t,end:r})}},{key:"destroy",value:function(){Mu(Gu(t.prototype),"destroy",this).call(this)}}])&&Nu(r.prototype,n),i&&Nu(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),yd=r(95542),vd=r(67709),md=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onChange=t,Wu(this,"types",{}),Wu(this,"queue",{audio:[],video:[]}),Wu(this,"enabledTypes",void 0),this.enabledTypes=(0,Gl.Z)(r),this.enabledTypes.forEach((function(e){n.types[e]=!1}))}var t,r,n;return t=e,(r=[{key:"update",value:function(e,t){this.enabledTypes.includes(e)&&(this.queue[e].push(t),this.checkAndUpdate())}},{key:"checkAndUpdate",value:function(){var e=this;if(this.enabledTypes.every((function(t){return e.queue[t].length}))){var t=!1;this.enabledTypes.forEach((function(r){var n=e.queue[r].shift();e.types[r]!==n&&(t=!0,e.types[r]=n)})),t&&this.onChange(this.types)}}},{key:"onSeek",value:function(){var e=this;this.enabledTypes.forEach((function(t){return e.queue[t].length=0}))}}])&&Yu(t.prototype,r),n&&Yu(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),gd=r(69071),bd=(0,hh.V)(self),wd=(0,dh.y)(self),_d=r(6005),Ed=r(29015),Od=r(83361);!function(e){e.append="append",e.remove="remove",e.setTimestampOffset="setTimestampOffset",e.changeType="changeType"}(jl||(jl={}));var Sd,kd=[[jl.remove],[jl.setTimestampOffset],[jl.append,jl.changeType]],Td=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qu(this,"destroyed",!1),Qu(this,"mimeType",void 0),Qu(this,"sourceBuffer",void 0),Qu(this,"mediaSource",void 0),Qu(this,"sync",void 0),Qu(this,"abortId",void 0),Qu(this,"removeId",void 0),Qu(this,"queues",void 0),this.mimeType=t,this.mediaSource=r,this.sourceBuffer=this.initSourceBuffer(),this.sync=(0,gd.l)(),this.abortId=0,this.removeId=0,this.queues=kd.map((function(e){return[]}))}var t,r,n,i;return t=e,r=[{key:"checkIfPresent",value:function(){var e=this;return(0,Ed.w)(this.mediaSource.sourceBuffers).some((function(t){return e.sourceBuffer===t}))}},{key:"isFree",value:function(){return this.sync.isFree()&&this.queues.every((function(e){return 0===e.length}))}},{key:"lockForExternalOperation",value:function(e){var t=this;return this.sync.waitAndLock((function(){return e()})).then((function(){setTimeout((function(){return t.performNextOperation()}))})).catch(wf.Z)}},{key:"initSourceBuffer",value:function(){return this.mediaSource.addSourceBuffer(this.mimeType)}},{key:"getNextOperationDescriptor",value:function(){for(var e=0;e<this.queues.length;e++)if(this.queues[e].length>0)return this.queues[e].shift();return null}},{key:"performNextOperation",value:function(){var e=this;if(this.sync.isFree()){var t=this.getNextOperationDescriptor();if(null!==t){var r=t.abortId,n=t.defer,i=t.operation,o=t.type;this.sync.waitAndLock(Xu($u().mark((function t(){return $u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r===e.abortId&&!e.destroyed){t.next=3;break}return n.reject(new Zs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:$s.q.EXCEPTION,message:"SourceBuffer ".concat(o," operation aborted before start")})),t.abrupt("return",n.promise);case 3:return t.prev=3,t.next=6,i();case 6:n.resolve(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),n.reject(t.t0);case 12:return t.abrupt("return",n.promise);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))).catch(wf.Z).then((function(){setTimeout((function(){return e.performNextOperation()}))}))}}}},{key:"planOperation",value:function(e,t){var r=this.abortId;if(this.destroyed)throw new Error("SourceBuffer operation with type=".concat(e," skipped after destroy"));var n=new $f.B,i=kd.findIndex((function(t){return t.includes(e)}));if(-1===i)throw new Error("SourceBuffer unknown operation with type=".concat(e));return this.queues[i].push({defer:n,abortId:r,operation:t,type:e}),this.performNextOperation(),n.promise}},{key:"changeType",value:function(e){var t=this;return this.planOperation(jl.changeType,Xu($u().mark((function r(){return $u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.mimeType!==e){r.next=2;break}return r.abrupt("return");case 2:t.sourceBuffer.changeType(e),t.mimeType=e;case 4:case"end":return r.stop()}}),r)}))))}},{key:"append",value:function(e){var t=this,r=this.removeId;return this.planOperation(jl.append,(function(){return new Od((function(n,i){if(r===t.removeId){var o=new $f.B,a=new $f.B,u=(0,_d.O)(t.sourceBuffer,"updateend",(function(){o.resolve(),a.resolve()})),c=(0,_d.O)(t.sourceBuffer,"error",(function(){a.reject(new Zs.w({code:"YASP_MSE_FAILED_TO_EXECUTE_PROCEDURE",message:"Failed to execute append operation in SourceBuffer",details:{operation:"append"},isFatal:!1,category:$s.q.EXCEPTION}))})),s=(0,_d.O)(t.sourceBuffer,"abort",(function(){a.reject(new Zs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:$s.q.EXCEPTION,message:"SourceBuffer append operation aborted"}))}));try{t.sourceBuffer.appendBuffer(e)}catch(h){var l=(0,Bf.V)(h)?h:new Error("Failed to start append operation in SourceBuffer"),f="InvalidStateError"===l.name?"YASP_INVALID_STATE_ERROR":"YASP_QUOTA_EXCEEDED_ERROR";return void i(new Zs.w({code:f,message:l.message,details:{operation:"append",error:l},isFatal:!1,category:$s.q.EXCEPTION}))}o.promise.then((function(){return a.promise})).catch(i).then(n).then((function(){u(),c(),s()}))}else i(new Zs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:$s.q.EXCEPTION,message:"SourceBuffer append operation aborted before start"}))}))}))}},{key:"remove",value:function(e,t){var r=this;return this.planOperation(jl.remove,(function(){return new Od((function(n,i){r.removeId++;var o=new $f.B,a=new $f.B,u=(0,_d.O)(r.sourceBuffer,"updateend",(function(){o.resolve(),a.resolve()})),c=(0,_d.O)(r.sourceBuffer,"error",(function(){a.reject(new Zs.w({code:"YASP_MSE_FAILED_TO_EXECUTE_PROCEDURE",message:"Failed to execute remove operation in SourceBuffer",details:{operation:"remove"},isFatal:!1,category:$s.q.EXCEPTION}))})),s=(0,_d.O)(r.sourceBuffer,"abort",(function(){a.reject(new Zs.w({code:"YASP_OPERATION_ABORTED",details:{},isFatal:!1,category:$s.q.EXCEPTION,message:"SourceBuffer remove operation aborted"}))}));try{r.sourceBuffer.remove(e,t)}catch(l){return void i(new Zs.w({code:"YASP_MSE_FAILED_TO_START_OPERATION",message:(0,Bf.V)(l)?l.message:"Failed to start remove operation in SourceBuffer",details:{operation:"remove",error:l},isFatal:!1,category:$s.q.EXCEPTION}))}o.promise.then((function(){return a.promise})).catch(i).then(n).then((function(){u(),c(),s()}))}))}))}},{key:"setTimestampOffset",value:function(e){var t=this;return this.planOperation(jl.setTimestampOffset,Xu($u().mark((function r(){return $u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e>0&&(e-=.001),t.sourceBuffer.timestampOffset!==-e){r.next=3;break}return r.abrupt("return");case 3:t.sourceBuffer.timestampOffset=-e;case 4:case"end":return r.stop()}}),r)}))))}},{key:"abort",value:function(){this.abortId++}},{key:"getBufferedRange",value:function(){var e,t=this;return null!==(e=(0,df.Y)((function(){return(0,zh.w)(t.sourceBuffer)})))&&void 0!==e?e:[]}},{key:"getBufferEnd",value:function(){var e=this.getBufferedRange(),t=e.length;return t?e[t-1].end:null}},{key:"destroy",value:(i=Xu($u().mark((function e(){var t=this;return $u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.abort(),e.abrupt("return",this.sync.waitAndLock(Xu($u().mark((function e(){return $u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t.mediaSource.removeSourceBuffer(t.sourceBuffer)}catch(r){}t.destroyed=!0;case 2:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getDebugInfo",value:function(){return{abortId:this.abortId,removeId:this.removeId,mimeType:this.mimeType,locked:!this.sync.isFree(),buffered:this.getBufferedRange(),queues:this.queues.map((function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ku(Object(r),!0).forEach((function(t){Qu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ku(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e)}))}))}}}],n=[{key:"isChangeTypeSupported",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return!bd&&!wd&&Boolean(e.SourceBuffer)&&Boolean(e.SourceBuffer.prototype)&&Boolean(e.SourceBuffer.prototype.changeType)}(self)}}],r&&Ju(t.prototype,r),n&&Ju(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Rd=r(69780),xd=r(83361),Pd=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h.call(this)).mimeTypes=e,pc(hc(r),"destroyed",!1),pc(hc(r),"mediaSource",void 0),pc(hc(r),"mediaSourceOpenDeferred",new $f.B),pc(hc(r),"sourceBufferEngines",{}),pc(hc(r),"objectUrl",void 0),pc(hc(r),"listeners",[]),pc(hc(r),"reloadingMediaSource",!1),pc(hc(r),"nextDurationToSet",null),(0,uf.v)(r.mediaSourceOpenDeferred.promise),r.createMediaSource(),r.objectUrl=r.createObjectUrl(),r.once("Destroy",(function(){r.destroyed=!0,r.removeListeners()})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sc(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f,h=lc(t);return r=t,(n=[{key:"createMediaSource",value:function(){var e=this,t=(0,Nf.Q)(self),r=(0,Ml.u)(),n=this.mediaSource=new t,i=(0,Gl.Z)(this.mimeTypes),o=function(){try{i.forEach((function(t){return e.createSourceBufferEngine(t)}))}catch(t){return e.mediaSourceOpenDeferred.reject(t),void e.destroy()}e.emit("Open",r()),e.mediaSourceOpenDeferred.resolve(),e.revokeObjectUrl()},a=new $f.B,u=i.length,c=0;return n.sourceBuffers.addEventListener("addsourcebuffer",(function(){++c===u&&a.resolve()})),"open"===n.readyState?o():this.addListener(n,"sourceopen",o,{once:!0}),{sourceBufferAddingPromise:a.promise}}},{key:"addListener",value:function(e,t,r,n){e.addEventListener(t,r,n);var i=function(){return e.removeEventListener(t,r)};return this.listeners.push(i),i}},{key:"removeListeners",value:function(){this.listeners.forEach((function(e){return e()})),this.listeners.length=0}},{key:"clearBuffer",value:(f=oc(nc().mark((function e(t,r,n){var i;return nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not clearBuffer because CoreMediaSourceEngine is destroyed");case 2:if(this.checkType(t)){e.next=4;break}return e.abrupt("return");case 4:if("open"===this.mediaSource.readyState){e.next=7;break}return e.next=7,this.mediaSourceOpenDeferred.promise;case 7:if(!this.reloadingMediaSource){e.next=9;break}return e.abrupt("return");case 9:return i=this.sourceBufferEngines[t],e.next=12,null===i||void 0===i?void 0:i.remove(r,n);case 12:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return f.apply(this,arguments)})},{key:"changeCodec",value:(l=oc(nc().mark((function e(t,r){var n;return nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.checkType(t)){e.next=2;break}return e.abrupt("return");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(this.mimeTypes[t]=r,!Td.isChangeTypeSupported()){e.next=9;break}return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.changeType(r));case 9:return e.abrupt("return",this.reset());case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"abort",value:function(){this.destroyed||(0,Ul.z)(this.sourceBufferEngines).forEach((function(e){null===e||void 0===e||e.abort()}))}},{key:"reset",value:(s=oc(nc().mark((function e(){var t,r,n,i;return nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.reloadingMediaSource=!0,this.removeListeners(),e.prev=2,e.next=5,this.removeSourceBuffers();case 5:return r=null!==(t=this.nextDurationToSet)&&void 0!==t?t:this.mediaSource.duration,this.mediaSource=null,this.mediaSourceOpenDeferred=new $f.B,(0,uf.v)(this.mediaSourceOpenDeferred.promise),n=this.createMediaSource(),i=n.sourceBufferAddingPromise,this.objectUrl=this.createObjectUrl(),null!==r&&this.setDuration(r),this.emit("Reset",this.getObjectUrl()),e.next=15,i;case 15:return e.prev=15,this.reloadingMediaSource=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,,15,18]])}))),function(){return s.apply(this,arguments)})},{key:"checkType",value:function(e){return Boolean(this.mimeTypes[e])}},{key:"createObjectUrl",value:function(){return self.URL.createObjectURL(this.mediaSource)||this.mediaSource.handle}},{key:"revokeObjectUrl",value:function(){"string"===typeof this.objectUrl&&self.URL.revokeObjectURL(this.objectUrl)}},{key:"appendBuffer",value:(c=oc(nc().mark((function e(t,r){var n;return nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not appendBuffer because CoreMediaSourceEngine is destroyed");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(!this.reloadingMediaSource){e.next=7;break}throw new Error("Can not appendBuffer because CoreMediaSourceEngine is reloading");case 7:return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.append(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"getObjectUrl",value:function(){return this.objectUrl}},{key:"isReloading",value:function(){return this.reloadingMediaSource}},{key:"getReadyState",value:function(){return this.mediaSource.readyState}},{key:"endOfStream",value:function(){if(!this.reloadingMediaSource&&"open"===this.mediaSource.readyState){var e,t=tc(["audio","video"]);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(void 0!==this.sourceBufferEngines[r]&&!this.sourceBufferEngines[r].isFree())return}}catch(n){t.e(n)}finally{t.f()}this.mediaSource.endOfStream()}}},{key:"getSourceBufferBufferedRange",value:function(e){var t;return null===(t=this.sourceBufferEngines[e])||void 0===t?void 0:t.getBufferedRange()}},{key:"setDuration",value:function(e){var t=this;isNaN(e)||(this.nextDurationToSet=e,"open"!==this.mediaSource.readyState?this.mediaSourceOpenDeferred.promise.then((function(){return t.tryToSetDuration()})).catch((function(e){t.destroyed||(0,Nl.L)(e)})):this.tryToSetDuration())}},{key:"tryToSetDuration",value:function(){var e=this;if(null!==this.nextDurationToSet)for(var t=["audio","video"],r={audio:new $f.B,video:new $f.B},n=function(){var n,a=o[i],u=e.sourceBufferEngines[a],c=function(){var n=oc(nc().mark((function n(){return nc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r[a].resolve(),n.next=3,r[t[t.indexOf(a)%t.length]].promise;case 3:null!==e.nextDurationToSet&&(e.mediaSource.duration=e.nextDurationToSet,e.nextDurationToSet=null);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();if(!u)return c(),"continue";var s=null!==(n=u.getBufferEnd())&&void 0!==n?n:e.nextDurationToSet;s>e.nextDurationToSet&&u.remove(e.nextDurationToSet,s),u.lockForExternalOperation(c)},i=0,o=t;i<o.length;i++)n()}},{key:"getDuration",value:function(){return this.mediaSource.duration}},{key:"setLiveSeekableRange",value:(u=oc(nc().mark((function e(t,r){return nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,Rd.m)(this.mediaSource.setLiveSeekableRange)){e.next=2;break}return e.abrupt("return");case 2:if(!this.reloadingMediaSource){e.next=4;break}throw new Error("Can not setLiveSeekableRange because CoreMediaSourceEngine is reloading");case 4:if(!this.destroyed){e.next=6;break}throw new Error("Can not setLiveSeekableRange because CoreMediaSourceEngine is destroyed");case 6:if(!(t<0)){e.next=8;break}throw new Error("Can not setLiveSeekableRange because start value is negative");case 8:if(!(t>r)){e.next=10;break}throw new Error("Can not setLiveSeekableRange because start value is greater then end value");case 10:if("open"===this.mediaSource.readyState){e.next=13;break}return e.next=13,this.mediaSourceOpenDeferred.promise;case 13:this.mediaSource.setLiveSeekableRange(t,r);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"setTimestampOffset",value:(a=oc(nc().mark((function e(t,r){var n;return nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}throw new Error("Can not setTimestampOffset because CoreMediaSourceEngine is destroyed");case 2:if("open"===this.mediaSource.readyState){e.next=5;break}return e.next=5,this.mediaSourceOpenDeferred.promise;case 5:if(!this.reloadingMediaSource){e.next=7;break}return e.abrupt("return");case 7:return n=this.sourceBufferEngines[t],e.abrupt("return",null===n||void 0===n?void 0:n.setTimestampOffset(r));case 9:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getBufferedRanges",value:function(){return{audio:this.getBufferedRangesByType("audio"),video:this.getBufferedRangesByType("video")}}},{key:"getBufferedRangesByType",value:function(e){var t;return null!==(t=this.getSourceBufferBufferedRange(e))&&void 0!==t?t:[]}},{key:"destroy",value:(o=oc(nc().mark((function e(){return nc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.destroyed){e.next=2;break}return e.abrupt("return");case 2:uc(dc(t.prototype),"destroy",this).call(this),this.mediaSourceOpenDeferred.reject(new Error("Can not open media source because CoreMediaSourceEngine is destroyed"));try{this.mediaSource.endOfStream()}catch(r){}return e.next=7,this.removeSourceBuffers();case 7:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"removeSourceBuffers",value:function(){var e=this;return this.abort(),xd.all((0,Gl.Z)(this.sourceBufferEngines).map(function(){var t=oc(nc().mark((function t(r){return nc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sourceBufferEngines[r].destroy();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),e.destroyed||(0,Nl.L)(t.t0);case 8:delete e.sourceBufferEngines[r];case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()))}},{key:"createSourceBufferEngine",value:function(e){if(!this.sourceBufferEngines[e]){var t=this.mimeTypes[e];if(!t)throw new Zs.w({code:"YASP_EMPTY_MIME",details:{},isFatal:!0,category:$s.q.MEDIA});try{this.sourceBufferEngines[e]=new Td(t,this.mediaSource)}catch(r){throw new Zs.w({code:"YASP_CANNOT_CREATE_SOURCE_BUFFER",details:{reason:r.name,mimeType:t},isFatal:!0,category:$s.q.MEDIA})}}}},{key:"getDebugInfo",value:function(){var e,t,r,n,i,o;return{readyState:this.getReadyState(),audio:null!==(e=null===(t=this.sourceBufferEngines)||void 0===t||null===(r=t.audio)||void 0===r?void 0:r.getDebugInfo())&&void 0!==e?e:null,video:null!==(n=null===(i=this.sourceBufferEngines)||void 0===i||null===(o=i.video)||void 0===o?void 0:o.getDebugInfo())&&void 0!==n?n:null}}}])&&ac(r.prototype,n),i&&ac(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),jd=r(85348),Ad=r(81917),Ld=r(81917);!function(e){e[e.KILOBYTE=1024]="KILOBYTE",e[e.MEGABYTE=Math.pow(1024,2)]="MEGABYTE"}(Sd||(Sd={}));var Id=r(83361),Dd=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ec(this,"destroyed",!1),Ec(this,"key",null),Ec(this,"keysReceivingDeferred",new $f.B)}var t,r,n,i,o,a;return t=e,r=[{key:"decode",value:(a=wc(gc().mark((function t(r,n,i,o,a){var u;return gc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkDestroyed(),this.key){t.next=4;break}return t.next=4,this.keysReceivingDeferred.promise;case 4:if(void 0!==a){t.next=6;break}return t.abrupt("return",r);case 6:return t.next=8,e.decryptData(r,a,this.key);case 8:return u=t.sent,t.abrupt("return",u);case 10:case"end":return t.stop()}}),t,this)}))),function(e,t,r,n,i){return a.apply(this,arguments)})},{key:"setKeys",value:function(e){this.checkDestroyed(),e&&e.hex_key&&(this.key=e.hex_key,this.keysReceivingDeferred.resolve())}},{key:"getKeys",value:function(){return this.checkDestroyed(),this.key}},{key:"destroy",value:function(){this.destroyed=!0}},{key:"checkDestroyed",value:function(){if(this.destroyed)throw new Zs.w({code:"YASP_AES_CTR_DECODER_ERROR",message:"AesCtr decoder is destroyed",details:{},category:$s.q.MEDIA,isFatal:!1})}}],n=[{key:"decryptData",value:(o=wc(gc().mark((function t(r,n,i){var o,a,u;return gc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.createCounter(n),t.next=3,e.getDecryptionKey(i);case 3:return a=t.sent,t.next=6,self.crypto.subtle.decrypt({name:"AES-CTR",counter:o,length:128},a,r);case 6:return u=t.sent,t.abrupt("return",new Uint8Array(u));case 8:case"end":return t.stop()}}),t)}))),function(e,t,r){return o.apply(this,arguments)})},{key:"createCounter",value:function(e){for(var t=e,r=new Uint8Array(16),n=0;n<16;++n)r[r.length-1-n]=255&t,t>>=8;return r}},{key:"getDecryptionKey",value:(i=wc(gc().mark((function t(r){var n;return gc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,self.crypto.subtle.importKey("raw",e.parseHexString(r),{name:"AES-CTR"},!1,["decrypt"]);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(e){return i.apply(this,arguments)})},{key:"parseHexString",value:function(e){var t=e.match(/.{1,2}/g);return new Uint8Array(t.map((function(e){return parseInt(e,16)})))}}],r&&_c(t.prototype,r),n&&_c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Nd=r(83361),Md=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fc(Mc(r=l.call(this)),"url",void 0),Fc(Mc(r),"fetcher",void 0),Fc(Mc(r),"timeline",void 0),Fc(Mc(r),"segmentDecoder",void 0),Fc(Mc(r),"isEncrypted",void 0),Fc(Mc(r),"parser",void 0),Fc(Mc(r),"attempt",0),Fc(Mc(r),"aborted",!1),Fc(Mc(r),"abortFn",null),Fc(Mc(r),"offset",void 0),Fc(Mc(r),"ftyp",void 0),Fc(Mc(r),"moov",void 0),Fc(Mc(r),"sidx",void 0),Fc(Mc(r),"segmentsInfo",void 0),Fc(Mc(r),"timescale",void 0),Fc(Mc(r),"loadedSegmentMediaData",void 0),r.url=e.url,r.timeline=e.timeline,r.parser=new rl.p,r.fetcher=new Df(e.fetcherParams),r.segmentDecoder=e.segmentDecoder,r.isEncrypted="AES-CTR"===e.segmentDecoder.encryptionType,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ic(e,t)}(t,e);var r,n,i,o,a,u,c,s,l=Dc(t);return r=t,(n=[{key:"update",value:(s=Pc(Rc().mark((function e(){var t;return Rc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.requestOffset();case 2:return this.offset=e.sent,e.next=5,this.requestFtypMoovSidxBoxes();case 5:if(t=e.sent){e.next=8;break}return e.abrupt("return");case 8:this.ftyp=t.ftyp,this.moov=t.moov,this.sidx=t.sidx.buffer,this.segmentsInfo=t.sidx.segmentsInfo,this.timescale=t.sidx.timescale,this.loadedSegmentMediaData=t.loadedSegmentMediaData,this.applySegmentsInfoToTimeline();case 15:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"applySegmentsInfoToTimeline",value:function(){if(this.isInitiallyLoaded()){var e,t,r,n=(0,Af.UO)(this.url),i=this.segmentsInfo[this.segmentsInfo.length-1].endTime/this.timescale*1e3,o=(e=this.segmentsInfo,t=this.timescale,Math.round(8*e.reduce((function(e,t){return e+t.size}),0)/e.reduce((function(e,r){return e+r.duration/t}),0))||0),a="".concat(n,"_").concat(i),u=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[];return e.forEach((function(e,o){i.push({endNumber:Math.max(Math.floor(o+1)),time:Math.floor(e.startTime/r*1e3),duration:Math.floor(e.duration/r*1e3),count:Math.max(Math.floor(1)),isMP4:!0,isEncrypted:n,startByteWithOffset:t+e.startByte,endByteWithOffset:t+e.endByte,originalValues:{time:e.startTime,duration:e.duration,trackPresentationTimeOffset:0,startByte:e.startByte,endByte:e.endByte}})})),i}(this.segmentsInfo,this.offset,this.timescale,this.isEncrypted),c=this.timeline.obtainTimelineTrack({type:"audio",name:n,codecs:(r=this.url,new Ld(r,"https://domain.com").searchParams.get("codec")||""),id:a,bitrate:o,language:null,initialization:null,timescale:this.timescale,media:"audio",mimeType:"audio/mp4",startNumber:Math.max(Math.floor(1)),startTime:this.segmentsInfo[0].startTime/this.timescale*1e3,endNumber:Math.max(Math.floor(this.segmentsInfo.length)),endTime:i,presentationTimeOffset:0,segmentSequences:u,isMP4:!0});c.appendSegment(this.createInitSegment(a)),this.appendLoadedSegmentsToTimelineTrack(c,i),this.loadedSegmentMediaData.clear()}}},{key:"createInitSegment",value:function(e){var t=new Cl({start:Math.max(Math.floor(0)),end:Math.max(Math.floor(0)),number:Math.max(Math.floor(0)),bitrate:Math.max(Math.floor(0)),width:0,height:0,isInitSegment:!0,trackId:e,originalStart:Math.max(Math.floor(0)),isMP4:!0});return t.append(bl.P.concat(new Uint8Array(this.ftyp),new Uint8Array(this.moov),new Uint8Array(this.sidx))),t.finish(),t}},{key:"appendLoadedSegmentsToTimelineTrack",value:function(e,t){var r,n=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=kc(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(this.loadedSegmentMediaData);try{for(n.s();!(r=n.n()).done;){var i=Sc(r.value,2),o=i[0],a=i[1],u=this.createLoadedSegment(o,a,e,t);u&&e.appendSegment(u)}}catch(c){n.e(c)}finally{n.f()}}},{key:"createLoadedSegment",value:function(e,t,r,n){var i=Io(this.timeline.getBufferedRanges(!0).audio,0,n/1e3),o=this.timeline.getSegmentForTrack(-1===i?0:i,r);if(o&&e===o.number)return o.append(t),o.finish(),o}},{key:"isInitiallyLoaded",value:function(){return void 0!==this.offset&&void 0!==this.ftyp&&void 0!==this.moov&&void 0!==this.sidx&&void 0!==this.segmentsInfo&&void 0!==this.timescale&&void 0!==this.loadedSegmentMediaData}},{key:"setFetcherBaseParams",value:function(e){this.fetcher.setBaseParams(e)}},{key:"getBaseUrls",value:function(){return[this.url]}},{key:"abort",value:function(){this.abortFn&&this.abortFn(),this.aborted=!0}},{key:"destroy",value:function(){this.abort(),Ac(Cc(t.prototype),"destroy",this).call(this)}},{key:"getDebugInfo",value:function(){return{url:this.url,offset:this.offset,segmentsInfo:this.segmentsInfo,attempt:this.attempt}}},{key:"setSourceIndex",value:function(e){}},{key:"getMediaType",value:function(){return af.D.VOD}},{key:"requestFtypMoovSidxBoxes",value:(c=Pc(Rc().mark((function e(){var t,r,n,i,o,a,u;return Rc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.offset){e.next=3;break}return e.abrupt("return");case 3:if(t={start:this.offset,end:this.offset+Sd.MEGABYTE-1},this.isEncrypted){e.next=12;break}return e.next=7,this.requestByteRange(t);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return");case 10:e.next=28;break;case 12:return n=go(t),e.next=15,this.requestByteRange(n);case 15:if(i=e.sent){e.next=18;break}return e.abrupt("return");case 18:if("string"===typeof(o=this.segmentDecoder.getKeys())){e.next=21;break}throw new Error("Decoding key is not a string");case 21:return e.t0=Bo,e.next=24,Dd.decryptData(i,Fo(n),o);case 24:e.t1=e.sent,e.t2=t,e.t3=n,r=(0,e.t0)(e.t1,e.t2,e.t3);case 28:return a={ftyp:new ArrayBuffer(0),moov:new ArrayBuffer(0),sidx:{buffer:new ArrayBuffer(0),segmentsInfo:[],timescale:1},loadedSegmentMediaData:new Map},this.parser.fullBox("ftyp",(function(e){a.ftyp=e.reader.getDataView().buffer.slice(e.start,e.start+e.size)})).fullBox("moov",(function(e){a.moov=e.reader.getDataView().buffer.slice(e.start,e.start+e.size)})).fullBox("sidx",(function(e){a.sidx.buffer=e.reader.getDataView().buffer.slice(e.start,e.start+e.size);var t=vc(e);a.sidx.segmentsInfo=t.segmentsInfo,a.sidx.timescale=t.timescale})).parse(r),a.loadedSegmentMediaData=this.getLoadedSegmentMediaDataFromByteRange(r,a.sidx.segmentsInfo),e.abrupt("return",a);case 34:return e.prev=34,e.t4=e.catch(0),u=(0,Bf.V)(e.t4)?new Zs.w({code:"YASP_PARSE_SIDX_ERROR",details:{url:this.url,error:e.t4},message:e.t4.message,isFatal:!0,category:$s.q.EXCEPTION}):new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{url:this.url,error:e.t4},message:"Unknown error. Expect error to be an instance of Error.",isFatal:!0,category:$s.q.EXCEPTION}),this.emit("Error",u),e.abrupt("return");case 39:case"end":return e.stop()}}),e,this,[[0,34]])}))),function(){return c.apply(this,arguments)})},{key:"getLoadedSegmentMediaDataFromByteRange",value:function(e,t){for(var r=new Map,n=0;n<t.length;n++){var i=t[n],o=i.startByte,a=i.endByte;if(a>e.length)break;r.set(Math.max(Math.floor(n+1)),e.slice(o,a+1))}return r}},{key:"requestOffset",value:(u=Pc(Rc().mark((function e(){var t,r,n,i;return Rc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestByteRange({start:0,end:Sd.KILOBYTE-1});case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:if(!this.isEncrypted){e.next=13;break}if("string"===typeof(r=this.segmentDecoder.getKeys())){e.next=10;break}throw new Error("Decoding key is not a string");case 10:return e.next=12,Dd.decryptData(t,0,r);case 12:t=e.sent;case 13:return n=0,this.parser.box("uuid",(function(e){e.reader.readUUID(),n=e.reader.readUint64()})).parse(t),e.abrupt("return",n);case 18:return e.prev=18,e.t0=e.catch(0),i=(0,Bf.V)(e.t0)?new Zs.w({code:"YASP_PARSE_OFFSET_ERROR",details:{url:this.url,error:e.t0},message:e.t0.message,isFatal:!0,category:$s.q.EXCEPTION}):new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{url:this.url,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:!0,category:$s.q.EXCEPTION}),this.emit("Error",i),e.abrupt("return");case 23:case"end":return e.stop()}}),e,this,[[0,18]])}))),function(){return u.apply(this,arguments)})},{key:"requestByteRange",value:(a=Pc(Rc().mark((function e(){var t,r,n,i,o,a,u,c,s,l,f,h=this,d=arguments;return Rc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{start:null,end:null},this.aborted=!1,e.prev=2,r=(0,Oh.hj)(t.start)?this.fetcher.fetchDataStream(this.url,{headers:{Range:"bytes=".concat(t.start,"-").concat((0,Oh.hj)(t.end)?t.end:"")}}):this.fetcher.fetchDataStream(this.url),n=r.response,i=r.abort,this.abortFn=i,e.next=7,n;case 7:if(o=e.sent,a=o.body,(u=o.status)>=200&&u<300||304===u){e.next=13;break}throw u;case 13:return this.attempt=0,this.abortFn=null,e.next=17,this.readDataStream(a);case 17:return e.abrupt("return",e.sent);case 20:if(e.prev=20,e.t0=e.catch(2),s=this.attempt>=10,this.abortFn=null,!(0,Oh.hj)(e.t0)){e.next=29;break}l=e.t0,c=0===l?new Zs.w({code:"YASP_FETCH_RANGE_HTTP_ERROR",message:"Network Error",details:{url:this.url},category:$s.q.NETWORK_MEDIA,isFatal:s}):new Zs.w({code:"YASP_FETCH_RANGE_BAD_HTTP_STATUS",message:"Error: ".concat(l),details:{status:l,url:this.url},isFatal:s,category:$s.q.NETWORK_MEDIA}),e.next=36;break;case 29:if(!(0,Bf.V)(e.t0)){e.next=35;break}if("Request canceled"!==e.t0.message&&"Abort error"!==e.t0.message){e.next=32;break}return e.abrupt("return");case 32:c=new Zs.w({code:"Request timed out"===e.t0.message?"YASP_FETCH_RANGE_TIMEOUT":"YASP_FETCH_RANGE_HTTP_ERROR",details:{url:this.url},message:e.t0.message,isFatal:s,category:"Request timed out"===e.t0.message?$s.q.NETWORK_TIMEOUT:$s.q.NETWORK_MEDIA}),e.next=36;break;case 35:c=new Zs.w({code:"YASP_UNKNOWN_ERROR",details:{url:this.url,error:e.t0},message:"Unknown error. Expect error to be an instance of Error.",isFatal:s,category:$s.q.NETWORK_MEDIA});case 36:if(this.emit("Error",c),!s&&!c.isFatal){e.next=39;break}return e.abrupt("return");case 39:if(f=(0,Uf._)(Wn(this.attempt++)),!this.aborted){e.next=42;break}return e.abrupt("return");case 42:return e.abrupt("return",f.then((function(){if(!h.aborted)return h.requestByteRange(t)})));case 43:case"end":return e.stop()}}),e,this,[[2,20]])}))),function(){return a.apply(this,arguments)})},{key:"readDataStream",value:(o=Pc(Rc().mark((function e(t){var r,n,i,o,a;return Rc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=new Uint8Array,n=!1;case 3:if(n){e.next=13;break}return e.next=6,t.read();case 6:i=e.sent,o=i.value,a=i.done,n=a,o&&(r=bl.P.concat(r,o)),e.next=3;break;case 13:return e.abrupt("return",r);case 16:return e.prev=16,e.t0=e.catch(0),this.emit("Error",new Zs.w({code:"YASP_PARSE_ERROR_EXCEPTION",message:"Data stream reading exception",details:{error:e.t0,errorString:e.t0 instanceof Error?e.t0.message:"Data stream reading exception"},category:$s.q.EXCEPTION,isFatal:!0})),e.abrupt("return");case 20:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(e){return o.apply(this,arguments)})}])&&jc(r.prototype,n),i&&jc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Cd=r(83361),Fd=r(83361),Bd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks.Z;qc(this,e),Wc(this,"decoder",null),Wc(this,"_encryptionType",null),Wc(this,"loadDecoderDeferred",null),Wc(this,"onWaitForKey",void 0),this.onWaitForKey=t}var t,n,i,o,a,u;return t=e,(n=[{key:"encryptionType",get:function(){return this._encryptionType},set:function(e){this._encryptionType=e}},{key:"setKeys",value:function(e){var t=this,r=function(){t.decoder&&t.decoder.setKeys(e)};this.loadDecoderDeferred?this.loadDecoderDeferred.promise.then(r):r()}},{key:"getKeys",value:function(){var e;return(null===(e=this.decoder)||void 0===e?void 0:e.getKeys())||null}},{key:"decode",value:(u=Vc(Gc().mark((function e(t,r,n,i,o){return Gc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loadDecoderDeferred){e.next=3;break}return e.next=3,this.loadDecoderDeferred.promise;case 3:if(this.decoder){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",this.decoder.decode(t,r,n,i,o));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,i){return u.apply(this,arguments)})},{key:"setEncryptionType",value:(a=Vc(Gc().mark((function e(t){var r,n,i;return Gc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.encryptionType){e.next=2;break}return e.abrupt("return",Fd.resolve());case 2:return null===(r=this.decoder)||void 0===r||r.destroy(),null===(n=this.loadDecoderDeferred)||void 0===n||n.reject(new Error("Encryption type changed")),i=new $f.B,this.loadDecoder(t,i),e.next=8,i.promise;case 8:return this.encryptionType=t,e.abrupt("return",i.promise);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"destroy",value:function(){var e;this.encryptionType=null,null===(e=this.decoder)||void 0===e||e.destroy(),this.decoder=null,this.loadDecoderDeferred=null}},{key:"loadDecoder",value:(o=Vc(Gc().mark((function e(t,n){var i,o;return Gc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadDecoderDeferred=n,e.t0=t,e.next="AES-CBC"===e.t0?4:"AES-CTR"===e.t0?11:14;break;case 4:return e.next=6,r.e(869).then(r.bind(r,63372));case 6:return i=e.sent,o=i.AesCbc,this.decoder=new o(this.onWaitForKey),n.resolve(),e.abrupt("break",16);case 11:return this.decoder=new Dd,n.resolve(),e.abrupt("break",16);case 14:return n.reject(new Error("Unknown encryption type: ".concat(t))),e.abrupt("break",16);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})}])&&Yc(t.prototype,n),i&&Yc(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ud=r(18535),Gd=r(88218),Hd=r(83361),Vd=(0,hh.V)(self)||(0,dh.y)(self)||(0,jd.F)(self),qd=function(e){function t(e,r,n,i){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=u.call(this)).cron=e,o.url=r,o.mediaState=n,o.callbacks=i,us(os(o),"abr",void 0),us(os(o),"bandwidthEstimator",void 0),us(os(o),"ttfbEstimator",void 0),us(os(o),"playlist",void 0),us(os(o),"playlistUpdater",void 0),us(os(o),"timeline",void 0),us(os(o),"mse",void 0),us(os(o),"mseFeeder",void 0),us(os(o),"mseGc",void 0),us(os(o),"timelineFiller",void 0),us(os(o),"seekableUpdater",void 0),us(os(o),"timelineGc",void 0),us(os(o),"yaspWatchedTimeCollector",void 0),us(os(o),"segmentFetcher",void 0),us(os(o),"segmentDecoder",void 0),us(os(o),"targetLatencyUpdater",void 0),us(os(o),"cmafLogger",void 0),us(os(o),"fetcher",void 0),us(os(o),"fetcherParams",void 0),us(os(o),"fetcherProgressAccumulator",void 0),us(os(o),"attached",!1),us(os(o),"startPosition",null),us(os(o),"destroyed",!1),us(os(o),"performOnLoad",void 0),us(os(o),"watchedTime",0),us(os(o),"bufferGoalManager",void 0),us(os(o),"timelineFillerBufferGoalInterval",void 0),us(os(o),"mediaType",void 0),us(os(o),"isLowLatency",!1),us(os(o),"maxStartTimestamp",null),us(os(o),"wasSegmentLoaded",!1),us(os(o),"drmKeysResponse",null),us(os(o),"audioDecodingKey",null),self.source=os(o),o.startPosition=oa(o.url),o.performOnLoad=(0,xh.P)(new Hd((function(e){o.once("PlaylistLoaded",e)}))),o.timeline=o.createTimeline(),o.subscribeToTrackChanges(),o.bufferGoalManager=new dd;var a=function(e,t,r,n,i){var o=Vh.f.obtain(i),a=new Wh,u=[new sd,new od(e),new ad(o),new Kh(o,a,n),new nd(r,t),new id];return{bandwidthEstimator:o,ttfbEstimator:a,abr:new Hh({rules:u})}}((function(){var e;return o.playlist instanceof Vf&&null!==(e=o.playlist.getPlaylistCapHeight())&&void 0!==e?e:null}),(function(){return o.callbacks.getUserQuality()}),(function(){return o.callbacks.getMaxAutoQuality()}),(function(){return o.getRemainingTimeToStart()}),o.callbacks.getDefaultBandwidth().value),c=a.bandwidthEstimator,s=a.ttfbEstimator,l=a.abr;o.bandwidthEstimator=c,o.ttfbEstimator=s,o.abr=l,o.abr.on("AbrDecisionChange",(function(e){var t=JSON.stringify(Jc(Jc({},e),{},{type:o.attached?"main":"preload"}));o.sendEvent({name:"AbrDecisionChange",data:{message:t}})})),o.abr.on("MaxCapAllowedVideoTrackUpdate",(function(e){var t,r,n,i;e&&null!==(t=e.video)&&void 0!==t&&t.width&&null!==(r=e.video)&&void 0!==r&&r.height&&o.emit("MaxCapAllowedVideoTrackUpdate",{width:null===(n=e.video)||void 0===n?void 0:n.width,height:null===(i=e.video)||void 0===i?void 0:i.height})})),o.on("SegmentLoaded",(function(e){var t;null===(t=o.mseFeeder)||void 0===t||t.run(),o.wasSegmentLoaded=!0}));var f=(0,yd.p)();return void 0!==f&&(o.maxStartTimestamp=Date.now()+1e3*f),o}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rs(e,t)}(t,e);var r,n,i,o,a,u=ns(t);return r=t,n=[{key:"getRemainingTimeToStart",value:function(){if(!this.maxStartTimestamp||this.wasSegmentLoaded)return null;var e=this.maxStartTimestamp-Date.now();return e<=0?0:e/1e3}},{key:"updateSourceInfo",value:function(e){var t,r,n=(0,Xs.IN)(e);null===(t=this.playlist)||void 0===t||t.setSourceIndex(n),null===(r=this.timelineFiller)||void 0===r||r.setSourceIndex(n)}},{key:"checkTotalBufferDuration",value:function(e,t){var r=this.timelineGc?this.timelineGc.getTotalExpectedBufferSize()+10:60,n=e.reduce((function(e,t){return e+(t.end-t.start)}),0);n>r&&this.sendEvent({name:"FatTimelineBuffer",data:{type:t,expectedSize:r,size:n}})}},{key:"emitManifestoError",value:function(e,t,r){var n,i=null===(n=this.playlist)||void 0===n?void 0:n.getDebugInfo();if(i){var o=new Zs.w({message:e.message,code:"YASP_MANIFESTO_UNHANDLED",details:Jc(Jc({},i),{},{start:t,end:r}),isFatal:!1,category:$s.q.EXCEPTION});this.emit("Error",o)}}},{key:"createTimeline",value:function(){var e=this;if(this.timeline)return this.timeline;var t=new Kl;return t.on("BufferedInfoChanged",(function(t){e.checkTotalBufferDuration(t.video,"video"),e.checkTotalBufferDuration(t.audio,"audio"),e.emit("BufferedInfoChanged",t)})),t.on("CuesAdded",(function(t){e.emit("CuesAdded",t)})),t.on("CodecsChange",(function(t){var r;if(e.mse){null===(r=e.mseFeeder)||void 0===r||r.abortForType(t.type);var n=t.getFullMimeType();e.mse.changeCodec(t.type,n)}})),t.on("StreamEndTimeUpdate",(function(t){e.emit("StreamEndTimeUpdate",t)})),t}},{key:"getStartPosition",value:function(){var e;return null!==this.startPosition&&Number.isFinite(this.startPosition)?this.startPosition:null!==(e=this.timeline)&&void 0!==e&&e.getIsDynamic()?Math.floor(this.timeline.getSeekableRange().end/1e3):this.timeline.getSeekableRange().start/1e3}},{key:"setDurationByVideoType",value:function(){if(this.mse&&this.mediaType){var e=this.timeline.getDuration();void 0!==e&&this.mse.setDuration(e/1e3)}}},{key:"updateStreamingParameters",value:function(){var e=this;if(this.mediaType&&this.emit("VideoTypeChange",this.mediaType),this.playlist){var t,r=this.playlist instanceof Vf?this.playlist.getDrmInfos():[];if(r.length>0)(0,Ud.b)(r)&&(null===(t=this.segmentDecoder)||void 0===t||t.setEncryptionType("AES-CBC")),this.emit("DrmInfoReceived",r)}this.emit("UtcStartTimeUpdate",this.timeline.getUtcStartTime());var n=this.timeline.getSeekableRange(),i=n.start/1e3,o=n.end/1e3;"number"===typeof this.startPosition&&(this.startPosition=Math.min(Math.max(this.startPosition,i),o-vd.C)),this.mse&&this.timeline.getIsDynamic()&&this.mse.setLiveSeekableRange(i,o).catch((function(t){e.attached&&(e.emitManifestoError(t,i,o),(0,Nl.L)(t))})),this.emit("SeekableRangeUpdate",{start:i,end:o}),this.emit("IsLowLatencyChange",this.isLowLatency)}},{key:"load",value:(a=Zc(Kc().mark((function e(t){var r,n,i,o,a,u,c=this;return Kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.timeline.emitBufferedInfoChanged(),this.segmentDecoder){e.next=10;break}if(!this.audioDecodingKey||"mp4"!==yc(this.url)){e.next=9;break}return this.segmentDecoder=new Bd,e.next=6,this.segmentDecoder.setEncryptionType("AES-CTR");case 6:this.segmentDecoder.setKeys({hex_key:this.audioDecodingKey}),e.next=10;break;case 9:this.segmentDecoder=new Bd(function(){var e=Zc(Kc().mark((function e(t){var r;return Kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.drmKeysResponse?null===(r=c.segmentDecoder)||void 0===r||r.setKeys((0,Gd.N)(c.drmKeysResponse)):c.emit("WaitForKey",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:if(this.playlist||(this.playlist=this.createPlaylist()),this.playlist instanceof Vf&&(this.playlistUpdater=null!==(r=this.playlistUpdater)&&void 0!==r?r:new Wf(this.playlist)),this.playlist.isInitiallyLoaded()){e.next=23;break}if(!this.playlistUpdater){e.next=18;break}return e.next=16,this.playlistUpdater.update();case 16:e.next=20;break;case 18:return e.next=20,this.playlist.update();case 20:this.emit("PlaylistLoaded"),e.next=24;break;case 23:this.updateStreamingParameters();case 24:if(!this.destroyed){e.next=26;break}return e.abrupt("return");case 26:return this.fetcher||(this.fetcher=new Df(Jc(Jc({},this.fetcherParams),{},{contentId:t})),this.fetcher.setIsLL(this.timeline.isLowLatencyLive()),this.fetcher.isLL()?this.bandwidthEstimator.appendFetcher(this.fetcher):(this.fetcherProgressAccumulator=new Fh,this.fetcherProgressAccumulator.on("NetworkTrace",(function(e){c.sendEvent({name:"NetworkTrace",data:e})})),this.fetcherProgressAccumulator.appendFetcher(this.fetcher),this.bandwidthEstimator.appendFetcher(this.fetcherProgressAccumulator)),null===(n=this.ttfbEstimator)||void 0===n||n.appendFetcher(this.fetcher)),this.cmafLogger||(i=function(e){c.sendEvent({name:"MediaFormatChange",data:e})},this.cmafLogger=new md(i,this.getMseConfig())),this.segmentFetcher||(this.segmentFetcher=new kh(this.fetcher,this.segmentDecoder),this.segmentFetcher.setEmsgSchemeIdUris(this.playlist instanceof Vf?this.playlist.getEmsgSchemeIdUris():void 0),this.segmentFetcher.on("Error",(function(e){c.emit("Error",e)})),this.segmentFetcher.on("EmsgDetected",(function(e){c.emit("EmsgDetected",e)})),this.segmentFetcher.on("ManifestUpdateRequired",(function(){var e;null===(e=c.playlistUpdater)||void 0===e||e.forceUpdate()})),this.segmentFetcher.on("SegmentLoaded",(function(e){var t;null===(t=c.cmafLogger)||void 0===t||t.update(e.type,e.cmaf),c.emit("SegmentLoaded",e)})),this.segmentFetcher.on("BufferAllocationError",(function(e){var t,r=c.mediaState.currentTime?1e3*c.mediaState.currentTime:0,n=c.timeline.getSegmentsDebugInfo(r),i=(null===(t=c.mse)||void 0===t?void 0:t.getBufferedRanges())||{audio:[],video:[]},o=new Zs.w({isFatal:!1,message:e.error.message,code:"YASP_BUFFER_ALLOCATION_ERROR",category:$s.q.EXCEPTION,details:{type:e.type,video:Jc(Jc({},n.video),{},{buffered:i.video}),audio:Jc(Jc({},n.audio),{},{buffered:i.audio})}});c.emit("Error",o)}))),this.timelineFiller?(0,Wl.RW)("web_yasp_remove_abortuseless_source")||this.timelineFiller.abortUseless():(this.timelineFiller=new _h({timeline:this.timeline,mediaState:this.mediaState,playlist:this.playlist,bufferGoal:this.getBufferGoal(this.attached),abr:this.abr,segmentFetcher:this.segmentFetcher,bandwidthEstimator:this.bandwidthEstimator,ttfbEstimator:this.ttfbEstimator,sourceIndex:(0,Xs.IN)(this.url)}),this.timelineFiller.on("Error",(function(e){c.emit("Error",e)})),this.timelineFiller.on("BandwidthEstimateUpdate",(function(e){c.emit("BandwidthEstimateUpdate",e)})),this.timelineFiller.on("SegmentInProgress",(function(){c.bandwidthEstimator.addActiveSource(c.url)})),this.timelineFiller.on("NoSegmentsInProgress",(function(){c.bandwidthEstimator.removeActiveSource(c.url)})),this.timelineFiller.on("OutOfBytesLimit",(function(){var e;null===(e=c.timelineGc)||void 0===e||e.onOutOfBytesLimit()})),this.cron.plan(this.timelineFiller,100),this.initTimelineFillerBufferGoalAutoUpdate(),this.timelineFiller.setVideoState(lu(this.mediaState,{currentTime:Math.max(null!==(o=this.getStartPosition())&&void 0!==o?o:0,0),duration:this.timeline.getDuration()/1e3})),this.timelineFiller.run()),this.timelineGc||(this.timelineGc=new Eh(this.timeline,this.mediaState,30,(function(){return c.getBufferGoal()})),this.cron.plan(this.timelineGc,1e3)),this.yaspWatchedTimeCollector||(this.yaspWatchedTimeCollector=new fd(this.mediaState),this.yaspWatchedTimeCollector.on("WatchedTimeUpdated",(function(e){var t=e.watchedTime;c.watchedTime=t})),this.cron.plan(this.yaspWatchedTimeCollector,100)),this.handleAttachedState(),a=this.getBufferGoal(this.attached),u=a===Number.MAX_SAFE_INTEGER?0:a,e.next=37,Bc(this.timeline,u);case 37:return e.abrupt("return",{startPosition:this.startPosition,drmInfos:this.playlist instanceof Vf?this.playlist.getDrmInfos():[]});case 38:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"createPlaylist",value:function(){return"mp4"===yc(this.url)?this.createSidxo():this.createManifesto()}},{key:"createManifesto",value:function(){var e=this,t=new Vf({url:this.url,timeline:this.timeline,fetcherParams:this.fetcherParams});return t.on("Error",(function(t){e.emit("Error",t)})),t.on("DrmInfoReceived",(function(t){var r;(0,Ud.b)(t)&&(null===(r=e.segmentDecoder)||void 0===r||r.setEncryptionType("AES-CBC")),e.emit("DrmInfoReceived",t)})),t.on("ServerTimeChange",(function(t){e.emit("ServerTimeChange",t)})),t.on("ManifestUpdate",(function(){var t,r,n;e.emit("UtcStartTimeUpdate",e.timeline.getUtcStartTime());var i=e.timeline.getSeekableRange(),o=i.start/1e3,a=i.end/1e3;null===(t=e.mse)||void 0===t||t.setLiveSeekableRange(o,a).catch((function(t){e.attached&&(e.emitManifestoError(t,o,a),(0,Nl.L)(t))})),e.emit("SeekableRangeUpdate",{start:o,end:a});var u=null===(r=e.playlist)||void 0===r?void 0:r.getMediaType();e.mediaType!==u&&(e.mediaType=u,e.emit("VideoTypeChange",e.mediaType),e.setDurationByVideoType());var c=e.timeline.isLowLatencyLive();e.isLowLatency!==c&&(e.isLowLatency=c,e.emit("IsLowLatencyChange",e.isLowLatency),e.isLowLatency&&e.sendEvent({name:"LowLatencyDetected",data:{url:e.url}})),null===(n=e.segmentFetcher)||void 0===n||n.setEmsgSchemeIdUris(e.playlist instanceof Vf?e.playlist.getEmsgSchemeIdUris():void 0)})),t}},{key:"createSidxo",value:function(){var e=this,t=new Md({url:this.url,timeline:this.timeline,fetcherParams:this.fetcherParams,segmentDecoder:this.segmentDecoder});return t.on("Error",(function(t){e.emit("Error",t)})),t}},{key:"getBufferGoal",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.bufferGoalManager.getBufferGoal({watchedTime:this.watchedTime,currentTime:this.mediaState.currentTime||0,usePreloadBufferGoal:!e})}},{key:"initTimelineFillerBufferGoalAutoUpdate",value:function(){var e=this;this.stopTimelineFillerBufferGoalAutoUpdate();var t=function(){var t;null===(t=e.timelineFiller)||void 0===t||t.setBufferGoal(e.getBufferGoal(e.attached))};this.timelineFillerBufferGoalInterval=setInterval(t,1e3),t()}},{key:"stopTimelineFillerBufferGoalAutoUpdate",value:function(){this.timelineFillerBufferGoalInterval&&clearInterval(this.timelineFillerBufferGoalInterval)}},{key:"handleSeek",value:(o=Zc(Kc().mark((function e(){var t,r,n,i,o,a,u,c,s,l=this;return Kc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,dh.y)(self)){e.next=5;break}return e.next=3,(0,Uf._)(100);case 3:e.next=8;break;case 5:if(!(0,hh.V)(self)){e.next=8;break}return e.next=8,(0,Uf._)(0);case 8:if(null===(t=this.timelineFiller)||void 0===t||t.abortUseless(),null===(r=this.timelineFiller)||void 0===r||r.run(),null===(n=this.cmafLogger)||void 0===n||n.onSeek(),!(0,Wl.RW)("yasp_no_source_abort_on_fake_seek")){e.next=18;break}return null===(o=this.mse)||void 0===o||o.abort(),null===(a=this.mseFeeder)||void 0===a||a.abortUseless(),e.next=16,null===(u=this.mseGc)||void 0===u?void 0:u.forceRun(this.mediaState.currentTime).catch((function(e){if(l.attached)throw e}));case 16:e.next=21;break;case 18:return e.next=20,null===(c=this.mseGc)||void 0===c?void 0:c.forceRun().catch((function(e){if(l.attached)throw e}));case 20:null===(s=this.mseFeeder)||void 0===s||s.abort();case 21:null===(i=this.mseFeeder)||void 0===i||i.run();case 22:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"handleAttachedState",value:function(){var e,t,r,n=this.attached?this.mediaState:lu(this.mediaState,{currentTime:Math.max(null!==(e=this.startPosition)&&void 0!==e?e:0,0),duration:this.timeline.getDuration()/1e3});null===(t=this.timelineFiller)||void 0===t||t.setVideoState(n),null===(r=this.timelineGc)||void 0===r||r.setVideoState(n)}},{key:"handleSeekableUpdater",value:function(){var e=this;if(!this.seekableUpdater&&this.attached)return this.seekableUpdater=new pd(this.timeline),this.seekableUpdater.on("SeekableUpdate",(function(t){e.emit("SeekableRangeUpdate",t)})),void this.cron.plan(this.seekableUpdater,100);this.seekableUpdater&&!this.attached&&(this.cron.cancel(this.seekableUpdater),this.seekableUpdater.destroy(),this.seekableUpdater=void 0)}},{key:"attach",value:function(e){var t=this;return new Hd((function(r){t.performOnLoad((function(){var n,i,o,a;t.attached=!0,t.updateSourceInfo(e),t.playlistUpdater&&t.playlistUpdater.update(),t.startPosition=null!==(n=t.startPosition)&&void 0!==n?n:oa(e),t.timelineGc&&t.cron.plan(t.timelineGc,1e3),t.handleAttachedState(),t.mse=null!==(i=t.mse)&&void 0!==i?i:new Pd(t.getMseConfig()),t.mse.on("Reset",(function(e){var r;null===(r=t.mseFeeder)||void 0===r||r.reset(),t.emit("UpdateUrlObject",e)})),t.mse.on("Open",(function(e){t.sendEvent({name:"YaspSourceOpen",data:{time:e}})})),t.handleSeekableUpdater(),t.setDurationByVideoType(),t.updateStreamingParameters(),t.mseFeeder=null!==(o=t.mseFeeder)&&void 0!==o?o:new Qf(t.timeline,t.mediaState,t.mse,{bufferGoal:30,totalBufferSoftCap:zf(),totalBufferHardCap:Kf()}),t.mseFeeder.on("QuotaExceededError",(function(){var e,r;null===(e=t.mseFeeder)||void 0===e||e.setBufferGoal(15),null===(r=t.mseGc)||void 0===r||r.setBufferGoal(15)})),t.mseFeeder.on("FatBuffer",(function(e){t.sendEvent({name:"FatBuffer",data:{type:e}}),t.mseGc&&t.mseGc.run()})),t.mseFeeder.on("GorgedBuffer",(function(e){t.sendEvent({name:"GorgedBuffer",data:{type:e}})})),t.mseGc=null!==(a=t.mseGc)&&void 0!==a?a:new Rh(t.mse,t.mediaState,10,Kf()),t.mseFeeder.on("Error",(function(e){t.emit("Error",e)})),!t.targetLatencyUpdater&&t.timeline.isLowLatencyLive()&&(t.targetLatencyUpdater=new Hl({timeline:t.timeline,mediaState:t.mediaState}),t.targetLatencyUpdater.on("TargetLatencyUpdate",(function(e){t.emit("TargetLatencyUpdated",e)})),t.targetLatencyUpdater.notifyTargetLatency()),t.cron.plan(t.mseFeeder,100),t.cron.plan(t.mseGc,1e4),t.sendEvent({name:"YaspSourceAttached",data:{url:e}}),r(t.mse.getObjectUrl())}))}))}},{key:"setVideoTrack",value:function(e){this.timeline.setVideoTrack(e),void 0!==e&&this.handleSetTrack()}},{key:"setAudioTrack",value:function(e){this.timeline.setAudioLanguage(e),void 0!==e&&this.handleSetTrack()}},{key:"handleSetTrack",value:function(){var e,t=this;null===(e=this.mseGc)||void 0===e||e.forceRun().then((function(){var e;null===(e=t.mseFeeder)||void 0===e||e.abort(),Vd||t.emit("FlushMediaPipelineRequested")})).catch((function(e){var r;!t.attached||null!==(r=t.mse)&&void 0!==r&&r.isReloading()||(0,Nl.L)(e)}))}},{key:"setTextTrack",value:function(e){this.timeline.setTextTrack(e)}},{key:"getVideoTracks",value:function(){return this.timeline.getVideoTracksInfo()}},{key:"getAudioTracks",value:function(){return this.timeline.getAudioTracksInfo()}},{key:"getTextTracks",value:function(){return this.timeline.getTextTracksInfo()}},{key:"detach",value:function(){if(this.attached){this.attached=!1,this.timelineGc&&this.cron.cancel(this.timelineGc),this.playlistUpdater&&this.playlistUpdater.disable();var e=this.mediaState,t=e.duration,r=e.currentTime;if(r&&r>=t){var n=this.timeline.getSeekableRange().start;this.startPosition=n/1e3}else this.playlist instanceof Md?this.startPosition=null:this.startPosition=this.mediaState.currentTime;this.handleSeekableUpdater(),this.handleAttachedState(),this.mseFeeder&&(this.cron.cancel(this.mseFeeder),this.mseFeeder.destroy(),this.mseFeeder=void 0),this.mseGc&&(this.cron.cancel(this.mseGc),this.mseGc=void 0),this.mse&&(this.mse.destroy(),this.mse=void 0),this.yaspWatchedTimeCollector&&(this.cron.cancel(this.yaspWatchedTimeCollector),this.yaspWatchedTimeCollector.destroy(),this.yaspWatchedTimeCollector=void 0),this.targetLatencyUpdater&&(this.targetLatencyUpdater.destroy(),this.targetLatencyUpdater=void 0),this.sendEvent({name:"YaspSourceDetached",data:{url:this.url}})}}},{key:"setVideoElementSizes",value:function(e){var t,r;null!==(t=e.width)&&void 0!==t||(e.width=1/0),null!==(r=e.height)&&void 0!==r||(e.height=1/0),this.abr.setVideoElementSizes(e)}},{key:"destroy",value:function(){var e,r,n,i;this.sendEvent({name:"YaspSourceDestroyCalled",data:{url:this.url}}),this.detach(),this.playlistUpdater&&(this.playlistUpdater.disable(),this.playlistUpdater=void 0),this.mseFeeder&&(this.cron.cancel(this.mseFeeder),this.mseFeeder.destroy(),this.mseFeeder=void 0),this.mseGc&&(this.cron.cancel(this.mseGc),this.mseGc=void 0),this.mse&&(this.mse.destroy(),this.mse=void 0),this.timelineFiller&&(this.cron.cancel(this.timelineFiller),this.timelineFiller.destroy(),this.timelineFiller=void 0,this.stopTimelineFillerBufferGoalAutoUpdate()),this.segmentFetcher&&(this.segmentFetcher.destroy(),this.segmentFetcher=void 0),this.segmentDecoder&&(this.segmentDecoder.destroy(),this.segmentFetcher=void 0),this.timelineGc&&(this.cron.cancel(this.timelineGc),this.timelineGc=void 0),this.playlist&&(this.playlist.destroy(),this.playlist=void 0),this.fetcher&&(null===(e=this.bandwidthEstimator)||void 0===e||e.removeFetcher(this.fetcher),null===(r=this.fetcherProgressAccumulator)||void 0===r||r.removeFetcher(this.fetcher),null===(n=this.ttfbEstimator)||void 0===n||n.removeFetcher(this.fetcher),this.fetcher.destroy(),this.fetcher=void 0),this.fetcherProgressAccumulator&&(this.fetcherProgressAccumulator.off("NetworkTrace"),null===(i=this.bandwidthEstimator)||void 0===i||i.removeFetcher(this.fetcherProgressAccumulator)),this.yaspWatchedTimeCollector&&(this.cron.cancel(this.yaspWatchedTimeCollector),this.yaspWatchedTimeCollector.destroy(),this.yaspWatchedTimeCollector=void 0),this.fetcherProgressAccumulator=void 0,this.timeline.destroy(),this.abr.off("AbrDecisionChange"),this.destroyed=!0,this.sendEvent({name:"YaspSourceDestroyed",data:{url:this.url}}),es(as(t.prototype),"destroy",this).call(this)}},{key:"getMseConfig",value:function(){var e=this.timeline.getMimeTypes(),t=e.audio[0],r=e.video[0],n={};return t&&(n.audio=t),r&&(n.video=r),n}},{key:"isAttached",value:function(){return this.attached}},{key:"getDebugInfo",value:function(){var e=null!==this.mediaState.currentTime?1e3*this.mediaState.currentTime:void 0;try{var t,r,n,i,o,a,u,c,s,l,f,h,d,p,y,v,m,g;return JSON.parse(JSON.stringify({attached:this.attached,url:this.url,mediaState:this.mediaState,abr:this.abr.getDebugInfo(),bandwidthEstimator:this.bandwidthEstimator.getDebugInfo(),ttfbEstimator:null!==(t=null===(r=this.ttfbEstimator)||void 0===r?void 0:r.getDebugInfo())&&void 0!==t?t:null,playlist:null!==(n=null===(i=this.playlist)||void 0===i?void 0:i.getDebugInfo())&&void 0!==n?n:null,playlistUpdater:null!==(o=null===(a=this.playlistUpdater)||void 0===a?void 0:a.getDebugInfo())&&void 0!==o?o:null,mse:null!==(u=null===(c=this.mse)||void 0===c?void 0:c.getDebugInfo())&&void 0!==u?u:null,mseFeeder:null!==(s=null===(l=this.mseFeeder)||void 0===l?void 0:l.getDebugInfo())&&void 0!==s?s:null,mseGc:null!==(f=null===(h=this.mseGc)||void 0===h?void 0:h.getDebugInfo())&&void 0!==f?f:null,timeline:this.timeline.getDebugInfo(e),timelineFiller:null!==(d=null===(p=this.timelineFiller)||void 0===p?void 0:p.getDebugInfo())&&void 0!==d?d:null,timelineGc:null!==(y=null===(v=this.timelineGc)||void 0===v?void 0:v.getDebugInfo())&&void 0!==y?y:null,fetcher:null!==(m=null===(g=this.fetcher)||void 0===g?void 0:g.getDebugInfo())&&void 0!==m?m:null,userQuality:this.callbacks.getUserQuality(),maxAutoQuality:this.callbacks.getMaxAutoQuality(),wasSegmentLoaded:this.wasSegmentLoaded,maxStartTimestamp:this.maxStartTimestamp}))}catch(b){return{attached:String(this.attached),url:String(this.url),message:"failed to serialize debug info",error:String(b),stack:String(null===b||void 0===b?void 0:b.stack)}}}},{key:"sendEvent",value:function(e){this.emit("Event",e)}},{key:"getStats",value:function(){var e;return{bandwidth:null===(e=this.bandwidthEstimator)||void 0===e?void 0:e.getBandwidthEstimate()}}},{key:"configure",value:function(e){var t,r,n,i,o,a;if(e.videoSizes&&this.setVideoElementSizes(e.videoSizes),e.drmKeysResponse&&(this.drmKeysResponse=e.drmKeysResponse,null===(a=this.segmentFetcher)||void 0===a||a.setKeys((0,Gd.N)(this.drmKeysResponse))),e.audioDecodingKey&&(this.audioDecodingKey=e.audioDecodingKey),null!==(t=e.tracks)&&void 0!==t&&t.videoTrackId&&this.setVideoTrack(e.tracks.videoTrackId),null!==(r=e.tracks)&&void 0!==r&&r.audioLang&&this.setAudioTrack(e.tracks.audioLang),void 0!==(null===(n=e.tracks)||void 0===n?void 0:n.textTrack)&&this.setTextTrack(e.tracks.textTrack),null!==(i=e.offlineParams)&&void 0!==i&&i.contentId){var u,c=e.offlineParams,s=c.contentId,l=c.downloadedFragments;e.tracks&&!l&&this.playlist instanceof Vf&&jf.handleStart(this.url,s,null===(u=this.playlist)||void 0===u?void 0:u.getMpdXml(),e.tracks),this.getBufferGoal()===Number.MAX_SAFE_INTEGER&&0===e.bufferGoal&&jf.handlePause(s),l&&(Pf.downloadedFragments=l)}void 0!==e.bufferGoal&&this.bufferGoalManager.setConstantBufferGoal(e.bufferGoal),void 0!==e.preloadBufferGoal&&this.bufferGoalManager.setPreloadBufferGoal(e.preloadBufferGoal),this.bandwidthEstimator&&e.defaultBandwidthEstimate&&this.bandwidthEstimator.setDefaultEstimate(e.defaultBandwidthEstimate),this.timeline.setPresentationDelay(e.presentationDelay);var f=this.bufferGoalManager.getSkippableFragments();this.bufferGoalManager.setSkippableFragments(null!==(o=e.skippableFragments)&&void 0!==o?o:f),void 0===e.maxStartTime||this.wasSegmentLoaded||(this.maxStartTimestamp=Date.now()+1e3*e.maxStartTime),this.updateFetchersParams(e)}},{key:"updateFetchersParams",value:function(e){var t,r;this.fetcherParams=function(e,t){var r={};return e.offlineParams&&(r.contentId=e.offlineParams.contentId),void 0===e.withCredentials?Vu(Vu({},t),r):(r.credentials=e.withCredentials?"include":"omit",r)}(e,this.fetcherParams),null===(t=this.fetcher)||void 0===t||t.setBaseParams(this.fetcherParams),null===(r=this.playlist)||void 0===r||r.setFetcherBaseParams(this.fetcherParams)}},{key:"subscribeToTrackChanges",value:function(){var e=this;this.timeline.on("VideoTrackChange",(function(t){e.emit("VideoTrackChange",t)})),this.timeline.on("VideoTracksChange",(function(t){e.emit("VideoTracksChange",t)})),this.timeline.on("AudioLanguageChange",(function(t){e.emit("AudioLanguageChange",t)})),this.timeline.on("TextTrackChange",(function(t){e.emit("TextTrackChange",t)}))}}],i=[{key:"removeFromDisk",value:function(e){Pf.removeDirectory(e),delete Pf.downloadedFragments[e]}}],n&&Qc(r.prototype,n),i&&Qc(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Al.M),Yd=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ss(this,"timesheet",[]),ss(this,"started",!1),ss(this,"startTimesheetItem",(function(e){clearInterval(e.intervalId),e.intervalId=self.setInterval((function(){e.tasks.forEach((function(e){if(t.started)try{e.run()}catch(r){self.setTimeout((function(){throw r}))}}))}),e.interval)}))}var t,r,n;return t=e,n=[{key:"stopTimesheetItem",value:function(e){clearInterval(e.intervalId),e.intervalId=void 0}}],(r=[{key:"obtainTimesheetItemByInterval",value:function(e){var t=this.timesheet.find((function(t){return t.interval===e}));if(void 0!==t)return t;var r={interval:e,intervalId:void 0,tasks:[]};return this.started&&this.startTimesheetItem(r),this.timesheet.push(r),r}},{key:"start",value:function(){this.started||(this.started=!0,this.timesheet.forEach(this.startTimesheetItem))}},{key:"stop",value:function(){this.started&&(this.started=!1,this.timesheet.forEach(e.stopTimesheetItem))}},{key:"plan",value:function(e,t){var r=this.obtainTimesheetItemByInterval(t);r.tasks.includes(e)||r.tasks.push(e)}},{key:"cancel",value:function(t){for(var r=0;r<this.timesheet.length;r++){var n=this.timesheet[r],i=n.tasks.indexOf(t);-1!==i&&(n.tasks.splice(i,1),0===n.tasks.length&&(e.stopTimesheetItem(n),this.timesheet.splice(r,1),r-=1))}}},{key:"destroy",value:function(){this.stop(),this.timesheet.length=0}}])&&cs(t.prototype,r),n&&cs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Wd=r(89501),zd=r(76741),Kd=r(77521),$d=r(7312),Zd=r(14381),Xd=r(33263),Jd=r(40097),Qd=r(82640),ep={userQuality:Jh.k,maxAutoQuality:Qh,defaultBandwidthEstimate:{value:Qd.S,source:"default"}},tp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ds(this,"storage",new Map),ds(this,"common",fs({},ep)),ds(this,"onError",void 0),this.onError=t}var t,r,n;return t=e,(r=[{key:"checkAndClearConfigStorage",value:function(){if(!(this.storage.size<100)){for(var e=this.storage.keys(),t=0;t<50;t++)this.storage.delete(e.next().value);this.onError(new Error("To many items in config storage! ".concat(100)))}}},{key:"updateCommonOptions",value:function(e){var t=this;Object.keys(this.common).forEach((function(r){var n=e[r];e.hasOwnProperty(r)&&void 0===n?t.common[r]=ep[r]:void 0!==n&&(t.common[r]=n)}))}},{key:"add",value:function(e,t){var r=fs(fs({},this.storage.get(e)),t);this.storage.set(e,r),this.updateCommonOptions(t),this.checkAndClearConfigStorage()}},{key:"extract",value:function(e){var t=this.storage.get(e);return this.storage.delete(e),t}},{key:"getCommonOptions",value:function(){return this.common}},{key:"getDebugInfo",value:function(){return fs({storage:this.storage,size:this.storage.size},this.common)}}])&&hs(t.prototype,r),n&&hs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),rp=function(e){function t(){return vs(this,t),o.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ms(e,t)}(t,e);var r,n,i,o=gs(t);return r=t,n&&ys(r.prototype,n),i&&ys(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(Ws),np=r(83361),ip=r(81917),op=["objectUrl"],ap=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,As(this,"yaspRpc",void 0),As(this,"cron",new Yd),As(this,"sourceManager",void 0),As(this,"resourceTimingsMonitor",void 0),As(this,"rpcIncomingHistory",new Xd.d(Jd.K)),As(this,"rpcOutgoingHistory",new Xd.d(Jd.K)),As(this,"handleRpcError",(function(e){var t=new Zs.w({code:e.code===zd.v.METHOD_NOT_FOUND?"YASP_UNKNOWN_METHOD":"YASP_UNKNOWN_ERROR",details:{error:e},isFatal:!1,category:$s.q.EXCEPTION,message:e.message});r.sendEventAndSaveHistory({method:"error",params:{source:null,error:JSON.stringify(t)}})})),As(this,"configStorage",new tp(this.handleRpcError)),As(this,"getMaxAutoQuality",(function(){return r.configStorage.getCommonOptions().maxAutoQuality})),As(this,"getUserQuality",(function(){return r.configStorage.getCommonOptions().userQuality})),As(this,"getDefaultBandwidth",(function(){return r.configStorage.getCommonOptions().defaultBandwidthEstimate})),this.yaspRpc=new Wd.A((function(e){t.postMessage(e,(0,Kd._)(e))}))}var t,r,n;return t=e,(r=[{key:"init",value:function(){var e=this;this.cron.start(),this.yaspRpc.registerHandler("initWorker",(function(t){return(0,Wl.Vc)(t),e.sourceManager=new Js(t.sourceLimit,(function(t,r){e.sendEventAndSaveHistory({method:"event",params:{source:null,event:{name:"YaspReleasedSrcAutomatically",data:{sourceLimit:r,urls:t}},isWorkerMessage:!0}})}),(function(t){e.sendEventAndSaveHistory({method:"error",params:{source:null,error:JSON.stringify(t),isWorkerMessage:!0}})})),setTimeout((function(){var t="undefined"===typeof document;e.sendEventAndSaveHistory({method:"event",params:{source:null,event:{name:t?"YaspWorkerEnabled":"YaspWorkerDisabled",data:void 0},isWorkerMessage:!0}})})),setTimeout((function(){var t;e.sendEventAndSaveHistory({method:"workerInited",params:{sourceLimit:(null===(t=e.sourceManager)||void 0===t?void 0:t.getSourceLimit())||0}})})),e.initResourceTimingsMonitor(t.perfLogUrl),{done:!0,value:""}})),this.registerHandlerWithHistorySaving("detach",(function(t){var r=t.source,n=e.getSourceObject(r);return n&&(n.off("VideoTrackChange"),n.off("VideoTracksChange"),n.off("AudioLanguageChange"),n.off("TextTrackChange"),n.off("BandwidthEstimateUpdate"),n.off("MaxCapAllowedVideoTrackUpdate"),n.off("ServerTimeChange"),n.detach()),{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("destroy",(function(t){var r,n,i=t.source,o=t.reason,a="ExternalApi"===o?"YaspReleaseSrcManuallyCalled":"YaspReleaseSrcOnErrorCalled",u="ExternalApi"===o?{url:i,sourceCount:null!==(r=null===(n=e.sourceManager)||void 0===n?void 0:n.getSourceCount())&&void 0!==r?r:0}:{url:i};if(e.sendEventAndSaveHistory({method:"event",params:{source:i,event:{name:a,data:u}}}),e.getSourceObject(i)){var c;null===(c=e.sourceManager)||void 0===c||c.removeSource(i);var s="ExternalApi"===o?"YaspReleasedSrcManually":"YaspReleasedSrcOnError";e.sendEventAndSaveHistory({method:"event",params:{source:i,event:{name:s,data:u},isWorkerMessage:!0}})}if(i.startsWith("streams")){var l=i.split("/").pop();l&&qd.removeFromDisk(l)}return{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("requestDebugInfo",(function(t){var r=t.source;return e.sourceManager?{done:!0,value:{yaspSrc:null!==r&&void 0!==r?r:null,sources:e.sourceManager.getAllSources().map((function(e){return e.getDebugInfo()})),outgoingHistory:e.rpcOutgoingHistory.toArray(),incomingHistory:e.rpcIncomingHistory.toArray(),configStorage:e.configStorage.getDebugInfo()}}:{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("configureSource",(function(t){var r=t.source,n=t.config;try{var i=e.getSourceObjectOrThrowException(r,"configureSource");e.configStorage.updateCommonOptions(n),i.configure(n)}catch(a){var o=(0,Xs.Hi)(r);e.configStorage.add(o,n)}return{done:!0,value:void 0}})),this.registerHandlerWithHistorySaving("attach",function(){var t=Ps(ks().mark((function t(r){var n,i,o;return ks().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,(i=e.obtainSource(n)).on("VideoTrackChange",(function(t){e.sendEventAndSaveHistory({method:"changeSelectedVideoTrack",params:{source:n,trackId:t}})})),i.on("AudioLanguageChange",(function(t){e.sendEventAndSaveHistory({method:"changeSelectedAudioLanguage",params:{source:n,language:t}})})),i.on("BandwidthEstimateUpdate",(function(t){e.sendEventAndSaveHistory({method:"updateBandwidthEstimate",params:{bandwidth:t}})})),i.on("MaxCapAllowedVideoTrackUpdate",(function(t){e.sendEventAndSaveHistory({method:"updateMaxCapAllowedVideoTrack",params:{maxCapAllowedVideoTrack:t}})})),i.on("DrmInfoReceived",(function(t){e.sendEventAndSaveHistory({method:"applyDrmInfos",params:{source:n,drmInfos:t}})})),i.on("WaitForKey",(function(t){e.sendEventAndSaveHistory({method:"notifyWaitForKey",params:{source:n,message:t}})})),i.on("FlushMediaPipelineRequested",(function(){e.sendEventAndSaveHistory({method:"flushMediaPipeline",params:{source:n}})})),i.on("ServerTimeChange",(function(t){e.sendEventAndSaveHistory({method:"updateServerTime",params:{source:n,time:t}})})),i.on("StreamEndTimeUpdate",(function(t){e.yaspRpc.sendEvent({method:"updateStreamEndTime",params:{source:n,time:t}})})),t.next=13,i.attach(n);case 13:return o=t.sent,e.sendEventAndSaveHistory({method:"setStartInfo",params:{source:n,objectUrl:o,startPosition:i.getStartPosition()}}),e.yaspRpc.sendEvent({method:"changeVideoTracks",params:{source:n,added:i.getVideoTracks().map((function(e){return{source:n,track:Rs(Rs({},e),{},{bitrate:e.bitrate?e.bitrate/1e3:void 0})}})),removed:[]}}),i.on("VideoTracksChange",(function(t){var r=t.added,i=t.removed;e.yaspRpc.sendEvent({method:"changeVideoTracks",params:{source:n,added:r.map((function(e){return{source:n,track:Rs(Rs({},e),{},{bitrate:e.bitrate?e.bitrate/1e3:void 0})}})),removed:i}})})),i.getAudioTracks().forEach((function(t){e.sendEventAndSaveHistory({method:"addAudioTrack",params:{source:n,track:Rs(Rs({},t),{},{bitrate:t.bitrate?t.bitrate/1e3:void 0})}})})),i.getTextTracks().forEach((function(t){e.sendEventAndSaveHistory({method:"addTextTrack",params:{source:n,track:{id:t.id,kind:t.kind,label:t.label,language:t.language||"unknown"}}})})),t.abrupt("return",{done:!0,value:void 0});case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("load",function(){var t=Ps(ks().mark((function t(r){var n,i,o,a,u,c;return ks().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=r.contentId,o=e.obtainSource(n),t.next=4,o.load(i);case 4:if(t.t0=t.sent,t.t0){t.next=7;break}t.t0={};case 7:return a=t.t0,u=a.drmInfos,c={video:o.getVideoTracks(),audio:o.getAudioTracks(),text:o.getTextTracks()},t.abrupt("return",{done:!0,value:{tracks:c,drmInfos:u}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.registerHandlerWithHistorySaving("seeking",function(){var t=Ps(ks().mark((function t(r){var n,i;return ks().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.source,i=e.obtainSource(n),t.next=4,i.handleSeek();case 4:return t.abrupt("return",{done:!0,value:void 0});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.scope.addEventListener("message",(function(t){"object"===Ss(t.data)&&("string"!==typeof t.data.method||"object"===Ss(t.data.params)&&null!==t.data.params)&&e.yaspRpc.handleMessage(t)}))}},{key:"initResourceTimingsMonitor",value:function(e){void 0!==e&&void 0===this.resourceTimingsMonitor&&"undefined"===typeof document&&(this.resourceTimingsMonitor=new $d.$({sendLog:function(t,r){var n=(0,Zd.Y)(t);if(n){var i=new ip(e);(0,ql.J)(r).forEach((function(e){var t=Es(e,2),r=t[0],n=t[1];void 0!==n&&i.searchParams.set(r,n)})),gf(i.href,{method:"POST",keepalive:!0,body:n})}}}),this.resourceTimingsMonitor.attach(self))}},{key:"getSourceObject",value:function(e){if(!this.sourceManager)throw new Error("Source Manager not inited!");return this.sourceManager.takeSource(e)}},{key:"getSourceObjectOrThrowException",value:function(e,t){var r=this.getSourceObject(e);if(void 0===r)throw new Error("[".concat(t,"] Unknown source ").concat(e,"."));return r}},{key:"sendEventAndSaveHistory",value:function(e){var t=e.method,r=e.params;if(!["updateBufferedInfo","updateSeekableRange"].includes(t)){var n=Rs({},r);if("objectUrl"in n){var i=n;i.objectUrl,n=_s(i,op)}this.rpcOutgoingHistory.push({method:t,params:n,time:Date.now()})}return this.yaspRpc.sendEvent(e)}},{key:"registerHandlerWithHistorySaving",value:function(e,t){var r=this;this.yaspRpc.registerHandler(e,(function(n){return r.rpcIncomingHistory.push({method:e,params:n,time:Date.now()}),t(n)}))}},{key:"obtainSource",value:function(e){var t,r,n,i=null!==(t=null===(r=this.sourceManager)||void 0===r?void 0:r.takeSource(e))&&void 0!==t?t:this.createSource(e);return null===(n=this.sourceManager)||void 0===n||n.putSource(e,i),i}},{key:"createSource",value:function(e){var t,r,n,i=this,o=(0,Xs.Hi)(e),a={getMaxAutoQuality:this.getMaxAutoQuality,getUserQuality:this.getUserQuality,getDefaultBandwidth:this.getDefaultBandwidth};if("mp4"===yc(e)){var u=Es(this.createAudioSource(e,o,a),3);t=u[0],r=u[1],n=u[2]}else{var c=Es(this.createVideoSource(e,o,a),3);t=c[0],r=c[1],n=c[2]}var s=this.configStorage.extract(o);return s&&t.configure(s),t.on("Error",(function(t){i.sendEventAndSaveHistory({method:"error",params:{source:e,error:JSON.stringify(t)}})})),t.on("BufferedInfoChanged",(function(t){i.sendEventAndSaveHistory({method:"updateBufferedInfo",params:{bufferedInfo:t,source:e,duration:r.duration}})})),t.on("Event",(function(t){i.sendEventAndSaveHistory({method:"event",params:{source:e,event:t}})})),t.on("IsLowLatencyChange",(function(t){i.sendEventAndSaveHistory({method:"changeIsLowLatency",params:{source:e,isLowLatency:t}})})),t.on("EmsgDetected",(function(t){i.sendEventAndSaveHistory({method:"emsg",params:{source:e,emsg:t}})})),t.on("SegmentLoaded",(function(t){i.sendEventAndSaveHistory({method:"logSegmentLoaded",params:{source:e,info:t}})})),t.on("TargetLatencyUpdated",(function(t){i.sendEventAndSaveHistory({method:"updateTargetLatency",params:{source:e,latency:t}})})),t.on("UtcStartTimeUpdate",(function(t){i.sendEventAndSaveHistory({method:"updateUtcStartTime",params:{source:e,time:t}})})),t.on("SeekableRangeUpdate",(function(t){var r=t.start,n=t.end;i.sendEventAndSaveHistory({method:"updateSeekableRange",params:{source:e,start:r,end:n}})})),t.on("UpdateUrlObject",(function(t){i.sendEventAndSaveHistory({method:"urlObjectUpdated",params:{source:e,objectUrl:t}})})),t.on("Destroy",(function(){var e;null===(e=n)||void 0===e||e.destroy(),n=null})),t}},{key:"createVideoSource",value:function(e,t,r){var n=this,i=new Zh,o=i,a=new zs(t,this.scope,i),u=new qd(this.cron,e,o,r),c=this.configStorage.extract(t);c&&u.configure(c),u.on("VideoTypeChange",(function(t){n.sendEventAndSaveHistory({method:"changeVideoType",params:{source:e,videoType:t}})})),u.on("CuesAdded",(function(t){var r=t.cues,i=t.label;n.sendEventAndSaveHistory({method:"cuesAdded",params:{source:e,cues:r,label:i}})}));var s=function(e){var r=e.source,n=e.devicePixelRatio;return(0,Xs.Hi)(r)!==t?{done:!1,value:void 0}:(i.devicePixelRatio=n,{done:!0,value:void 0})};return this.yaspRpc.registerHandler("setDevicePixelRatio",s),u.on("Destroy",(function(){n.yaspRpc.removeHandler("setDevicePixelRatio",s)})),[u,o,a]}},{key:"createAudioSource",value:function(e,t,r){var n=new Xh,i=n,o=new rp(t,this.scope,n);return[new qd(this.cron,e,i,r),i,o]}}])&&js(t.prototype,r),n&&js(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),up=Is;"object"!==("undefined"===typeof window?"undefined":Ls(window))&&(self.window=self,Is())},42521:function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var a=t&&t.prototype instanceof o?t:o,u=Object.create(a.prototype),c=new d(i||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=l(u,n);if(c){if(c===O)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===O)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,n,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function o(){}function a(){}function u(){}function c(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function s(e,t){var i;this._invoke=function(o,a){function u(){return new t((function(i,u){!function i(o,a,u,c){var s=r(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&g.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,u,c)}),(function(e){i("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return i("throw",e,u,c)}))}c(s.arg)}(o,a,i,u)}))}return i=i?i.then(u,u):u()}}function l(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,l(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(g.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}i=function(){return v};var v={},m=Object.prototype,g=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{e({},"")}catch(x){e=function(e,t,r){return e[t]=r}}v.wrap=t;var O={},S={};e(S,w,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(p([])));T&&T!==m&&g.call(T,w)&&(S=T);var R=u.prototype=o.prototype=Object.create(S);return a.prototype=u,e(R,"constructor",u),e(u,"constructor",a),a.displayName=e(u,E,"GeneratorFunction"),v.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,e(t,E,"GeneratorFunction")),t.prototype=Object.create(R),t},v.awrap=function(e){return{__await:e}},c(s.prototype),e(s.prototype,_,(function(){return this})),v.AsyncIterator=s,v.async=function(e,r,n,i,o){void 0===o&&(o=Bi);var a=new s(t(e,r,n,i),o);return v.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},c(R),e(R,E,"Generator"),e(R,w,(function(){return this})),e(R,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},v.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),O}},v}function o(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Bi.resolve(c).then(n,i)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),c=new d(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return y()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var c=l(u,n);if(c){if(c===O)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var s=r(e,t,n);if("normal"===s.type){if(i=n.done?"completed":"suspendedYield",s.arg===O)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(i="completed",n.method="throw",n.arg=s.arg)}}}(e,i,c),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function c(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function s(e,t){var n;this._invoke=function(i,o){function u(){return new t((function(n,u){!function n(i,o,u,c){var s=r(e[i],e,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==a(f)&&g.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,c)}),(function(e){n("throw",e,u,c)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,c)}))}c(s.arg)}(i,o,n,u)}))}return n=n?n.then(u,u):u()}}function l(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,l(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,O;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(g.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:void 0,done:!0}}u=function(){return v};var v={},m=Object.prototype,g=m.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",_=b.asyncIterator||"@@asyncIterator",E=b.toStringTag||"@@toStringTag";try{e({},"")}catch(x){e=function(e,t,r){return e[t]=r}}v.wrap=t;var O={},S={};e(S,w,(function(){return this}));var k=Object.getPrototypeOf,T=k&&k(k(p([])));T&&T!==m&&g.call(T,w)&&(S=T);var R=o.prototype=n.prototype=Object.create(S);return i.prototype=o,e(R,"constructor",o),e(o,"constructor",i),i.displayName=e(o,E,"GeneratorFunction"),v.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},v.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,E,"GeneratorFunction")),t.prototype=Object.create(R),t},v.awrap=function(e){return{__await:e}},c(s.prototype),e(s.prototype,_,(function(){return this})),v.AsyncIterator=s,v.async=function(e,r,n,i,o){void 0===o&&(o=Vi);var a=new s(t(e,r,n,i),o);return v.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},c(R),e(R,E,"Generator"),e(R,w,(function(){return this})),e(R,"toString",(function(){return"[object Generator]"})),v.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},v.values=p,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),h(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;h(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),O}},v}function c(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Vi.resolve(c).then(n,i)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var i=w(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===h(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{bubbles:!1,cancelable:!1,detail:void 0};if("function"===typeof CustomEvent)return new CustomEvent(e,t);var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=j(e);if(t){var i=j(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&("object"===O(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(){return(N="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=M(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function M(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=G(e);if(t){var i=G(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return B(this,r)}}function B(e,t){if(t&&("object"===L(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){for(var r=0;r<e.length;r++)t.id!==e[r].id&&(e[r].enabled=!1)}function q(e){if(void 0!==e)for(;e.length>0;)e.removeTrack(e[0])}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return($=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Q(e);if(t){var i=Q(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return X(this,r)}}function X(e,t){if(t&&("object"===Y(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(){return(ie="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=oe(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function oe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=le(e)););return e}function ae(e,t){return(ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=le(e);if(t){var i=le(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return ce(this,r)}}function ce(e,t){if(t&&("object"===te(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].selected=!1)}function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ye(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.map(ve),i="YA PLAYER: ".concat((new Date).toString()," ").concat(n.join(" "));return i}function ve(e){return e&&"object"===de(e)?JSON.stringify(e,Object.getOwnPropertyNames(e)):e}function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t){return(be=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ee(e);if(t){var i=Ee(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return _e(this,r)}}function _e(e,t){if(t&&("object"===me(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,wo.k)(e)&&e.forEach((function(e){"function"===typeof e&&e.apply(void 0,r)}))}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Re(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){Ie(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e,t){return(Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ue(e);if(t){var i=Ue(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Fe(this,r)}}function Fe(e,t){if(t&&("object"===De(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Be(e)}function Be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qe(e,t){!function(e){return"function"===typeof e.dispatch}(e)?e(t):e.dispatch(t)}function Ye(e,t){e.forEach((function(e){qe(e,t)}))}function We(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xe(){return(Xe="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Je(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Je(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nt(e)););return e}function Qe(e,t){return(Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=nt(e);if(t){var i=nt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return tt(this,r)}}function tt(e,t){if(t&&("object"===Ke(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rt(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function it(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e){return 0===No.length&&(Do=window.setInterval((function(){No.forEach((function(e){return e()}))}),250)),No.push(e),function(){var t=No.indexOf(e);t>-1&&No.splice(t,1),0===No.length&&clearInterval(Do)}}function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(u)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e,t){return(ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=yt(e);if(t){var i=yt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return dt(this,r)}}function dt(e,t){if(t&&("object"===at(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return(yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mt(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gt(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _t(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Et(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function St(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lt(){return(Lt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=It(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function It(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ft(e)););return e}function Dt(e,t){return(Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ft(e);if(t){var i=Ft(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Mt(this,r)}}function Mt(e,t){if(t&&("object"===jt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ht(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function Vt(e,t,n){var i={};i[n]=[];var o=t.toString(),a=o.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||o.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!a)return i;for(var u,c=a[1],s=new RegExp("(\\\\n|\\W)"+Ht(c)+"\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)","g");u=s.exec(o);)"dll-reference"!==u[3]&&i[n].push(u[3]);for(s=new RegExp("\\("+Ht(c)+'\\("(dll-reference\\s([\\.|\\-|\\+|\\w|/|@]+))"\\)\\)\\(\\s*(/\\*.*?\\*/)?\\s*.*?([\\.|\\-|\\+|\\w|/|@]+).*?\\)',"g");u=s.exec(o);)e[u[2]]||(i[n].push(u[1]),e[u[2]]=r(u[1]).m),i[u[2]]=i[u[2]]||[],i[u[2]].push(u[4]);for(var l,f=Object.keys(i),h=0;h<f.length;h++)for(var d=0;d<i[f[h]].length;d++)l=i[f[h]][d],isNaN(1*l)||(i[f[h]][d]=1*i[f[h]][d]);return i}function qt(e){return Object.keys(e).reduce((function(t,r){return t||e[r].length>0}),!1)}function Yt(e,t,r,n){var i=e[n].map((function(e){return'"'.concat(e,'": ').concat(t[n][e].toString())})).join(","),o=ia.toString().split("ENTRY_MODULE");return"".concat(o[0],"{").concat(i,"}").concat(o[1],'"').concat(r,'"').concat(o[2])}function Wt(e,t){t=t||{};var n={main:r.m},i=t.all?{main:Object.keys(n.main)}:function(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};qt(r);)for(var o=Object.keys(r),a=0;a<o.length;a++){var u=o[a],c=r[u].pop();if(i[u]=i[u]||{},!i[u][c]&&e[u][c]){i[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var s=Vt(e,e[u][c],u),l=Object.keys(s),f=0;f<l.length;f++)r[l[f]]=r[l[f]]||[],r[l[f]]=r[l[f]].concat(s[l[f]])}}return n}(n,e),o="";Object.keys(i).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;i[e][t];)t++;i[e].push(t),n[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o+="var ".concat(e," = (").concat(Yt(i,n,t,modules),")();\n")})),o+="var a = (".concat(Yt(i,n,e,"main"),");\ntry {\n    a();\n} catch(e) { console.warn(e); throw e }");var a=window.Blob;try{a=window.top.Blob}catch(h){}var u=new a([o],{type:"text/javascript"});if(t.bare)return u;var c=void 0;try{c=window.top.URL||window.top.webkitURL||window.top.mozURL||window.top.msURL}catch(h){}c=c||window.URL||window.webkitURL||window.mozURL||window.msURL;var s=window.Worker;try{s=window.top.Worker}catch(h){}var l=c.createObjectURL(u),f=new s(l);return f.objectURL=l,f}function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kt(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==zt(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Kt=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=sa);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function $t(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):sa.resolve(c).then(n,i)}function Zt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){or(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ir(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function or(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ur(e){switch(e.source){case"default":case"default-slow":case"cache":case"timing-api":case"network-api":case"ewma":case"hlsjs":case"external-yasp":return e;default:return{value:e.value,source:"external-yasp"}}}function cr(e,t){var r=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,Pa.s)(e,(function(e){var n=e.start,i=e.end;return n-r<=t&&t<=i+r}))}(e,t);return void 0===r?void 0:r.end-t}function sr(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lr(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};for(var r in e){var n=e[r],i=pr(n);"string"!==i&&"number"!==i&&"boolean"!==i||(t[r]=n)}return t}function vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gr(e){return"function"===typeof e||"Function"===function(e){var t=Ca.call(e);if(!t)return null;var r=t.match(Fa);if(!r)return null;var n=r[1];if(!n)return null;return n}(e)}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Or(e,t){return(0,go.Hi)(e)===(0,go.Hi)(t)}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function kr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tr(e){return e.startsWith("DETACHED_")?e:"DETACHED_".concat(e)}function Rr(e){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==Rr(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}xr=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=tu);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function jr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ar(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):tu.resolve(c).then(n,i)}function Lr(e){return function(){var t=this,r=arguments;return new tu((function(n,i){function o(e){Ar(u,n,i,o,a,"next",e)}function a(e){Ar(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Ir(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nr(){return(Nr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Mr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Mr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gr(e)););return e}function Cr(e,t){return(Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Fr(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Gr(e);if(t){var i=Gr(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Br(this,r)}}function Br(e,t){if(t&&("object"===Rr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ur(e)}function Ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vr(e){var t;return t=function(e){function t(){var e;Ir(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return Hr(Ur(e=s.call.apply(s,[this].concat(n))),"airplayController",void 0),Hr(Ur(e),"progressWatcher",void 0),Hr(Ur(e),"yaspEventListeners",void 0),Hr(Ur(e),"yaspErrorListeners",void 0),Hr(Ur(e),"gapController",void 0),Hr(Ur(e),"eventsWatcher",void 0),Hr(Ur(e),"playheadMover",void 0),Hr(Ur(e),"srcSetDeferred",void 0),Hr(Ur(e),"detachCallbacks",void 0),Hr(Ur(e),"playCalled",void 0),Hr(Ur(e),"shouldPlay",void 0),Hr(Ur(e),"restorePrototype",void 0),Hr(Ur(e),"yaspSrc",void 0),Hr(Ur(e),"yaspError",null),Hr(Ur(e),"error",null),Hr(Ur(e),"audioTrackList",void 0),Hr(Ur(e),"mediaStateNotifier",void 0),Hr(Ur(e),"stallDetector",null),Hr(Ur(e),"yaspSeekable",void 0),Hr(Ur(e),"startTime",NaN),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cr(e,t)}(t,e);var r,n,i,o,a,u,c,s=Fr(t);return r=t,n=[{key:"checkShouldPlay",value:function(){return this.shouldPlay}},{key:"airplaySrc",get:function(){var e;return null===(e=this.airplayController)||void 0===e?void 0:e.airplaySrc},set:function(e){this.airplayController&&(this.airplayController.airplaySrc=e)}},{key:"audioTracks",get:function(){var e;return this.yaspSrc?this.audioTrackList:null!==(e=Nr(Gr(t.prototype),"audioTracks",this))&&void 0!==e?e:this.audioTrackList}},{key:"canPlayType",value:function(e){return Nr(Gr(t.prototype),"canPlayType",this).call(this,e)}},{key:"rethrowEmptySrc",value:function(e){e||(0,Da.L)(new Error("Setting empty src"))}},{key:"getAttribute",value:function(e){return"src"===e&&void 0!==this.yaspSrc?this.yaspSrc:Nr(Gr(t.prototype),"getAttribute",this).call(this,e)}},{key:"setAttribute",value:function(e,r){return"src"===e?(this.rethrowEmptySrc(r),this.setSrc(r)):Nr(Gr(t.prototype),"setAttribute",this).call(this,e,r)}},{key:"removeAttribute",value:function(e){"src"===e&&this.setSrc(""),Nr(Gr(t.prototype),"removeAttribute",this).call(this,e)}},{key:"src",get:function(){var e;return void 0===this.yaspSrc?null!==(e=HTMLMediaElement.prototype.getAttribute.call(this,"src"))&&void 0!==e?e:"":this.yaspSrc},set:function(e){this.rethrowEmptySrc(e),this.setSrc(e)}},{key:"addEventListener",value:function(e,r,n){var i;if(Nr(Gr(t.prototype),"addEventListener",this).call(this,e,r,n),"yasp-event"===e)null===(i=this.yaspEventListeners)||void 0===i||i.add(r);else if("yasp-error"===e){var o;null===(o=this.yaspErrorListeners)||void 0===o||o.add(r)}}},{key:"removeEventListener",value:function(e,r,n){var i;if(Nr(Gr(t.prototype),"removeEventListener",this).call(this,e,r,n),"yasp-event"===e)null===(i=this.yaspEventListeners)||void 0===i||i.delete(r);else if("yasp-error"===e){var o;null===(o=this.yaspErrorListeners)||void 0===o||o.delete(r)}}},{key:"yasp",get:function(){return!0}},{key:"getMediaElementDebugDump",value:function(){var e=this.paused,r=this.seeking,n=this.yaspError,i=this.yaspSeekable,o=this.currentTime,a=this.yaspSrc,u=this.readyState,c=ma.getTimeRanges(t.getNativeSeekableAndInitYaspSeekable(this)),s=t.getNativeErrorAndAttachErrorStore(this),l=(0,Yo.w)(this);return{error:s,yaspError:n,paused:e,seeking:r,seekable:c,yaspSeekable:i,buffered:l,bufferedTime:cr(l,this.currentTime),currentTime:o,src:HTMLMediaElement.prototype.getAttribute.call(this,"src"),yaspSrc:a,readyState:u}}},{key:"yaspRequestDebugInfo",value:(c=Lr(xr().mark((function e(){var r,n,i;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={mediaElement:jr({},this.getMediaElementDebugDump()),time:Ya()/1e3,mediaEventsHistory:null===(r=this.eventsWatcher)||void 0===r?void 0:r.getEventHistory()},e.next=3,t.worker.request({method:"requestDebugInfo",params:{source:this.yaspSrc}});case 3:return i=e.sent,e.abrupt("return",jr(jr({},n),i));case 5:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"detach",value:(u=Lr(xr().mark((function e(){var r,n,i,o,a,u,c,s,l=this;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.yaspSrc){e.next=3;break}return e.next=3,t.worker.request({method:"detach",params:{source:this.yaspSrc}});case 3:this.detachCallbacks&&(this.detachCallbacks.filter(Boolean).forEach(function(){var e=Lr(xr().mark((function e(t){return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,Da.L)(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()),this.detachCallbacks.length=0,delete this.detachCallbacks),null===(r=this.yaspErrorListeners)||void 0===r||r.clear(),this.yaspErrorListeners=void 0,null===(n=this.yaspEventListeners)||void 0===n||n.clear(),this.yaspEventListeners=void 0,null===(i=this.gapController)||void 0===i||i.release(),this.stallDetector=null,this.gapController=void 0,null===(o=this.progressWatcher)||void 0===o||o.release(),this.progressWatcher=void 0,null===(a=this.eventsWatcher)||void 0===a||a.release(),this.eventsWatcher=void 0,null===(u=this.playheadMover)||void 0===u||u.release(),this.playheadMover=void 0,this.restore(),this.removeEventListener("progress",this.onSegmentAppended),this.removeEventListener("seeking",this.onSeeking),this.removeEventListener("canplay",this.onCanPlay),this.removeEventListener("error",this.onNativeError),this.removeAttribute("src"),t.messenger.emit("yasp-event",{name:"YaspDetached",data:void 0}),null===(c=this.restorePrototype)||void 0===c||c.call(this),this.restorePrototype=void 0,t.instances=t.instances.filter((function(e){return e!==l})),null===(s=this.mediaStateNotifier)||void 0===s||s.disable();case 28:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"yaspDispatchEvent",value:function(e,r,n){var i=new CustomEvent(e,jr({detail:r},n));Nr(Gr(t.prototype),"dispatchEvent",this).call(this,i)}},{key:"handleError",value:function(e){e.isFatal?(this.yaspError=this.createMediaError(MediaError.MEDIA_ERR_NETWORK,e.message,e),this.yaspDispatchEvent("error",void 0)):("YASP_BUFFER_ALLOCATION_ERROR"===e.code&&(e.details.memory=self?yr((self.performance||{}).memory):{}),this.yaspDispatchEvent("yasp-error",e,{cancelable:!0}))}},{key:"yaspSetAudioTrack",value:function(e){e&&t.configureSource(this.src,{tracks:{audioLang:e}})}},{key:"initAudioTrackList",value:function(){var e=this;if(void 0===this.audioTrackList){var r=new Qi;r.addEventListener("change",(function(){(0,uo.w)(r).find((function(r){r.enabled&&t.configureSource(e.src,{tracks:{audioLang:r.language}})}));var n=new Event("change");(0,no.Y)((function(){Nr(Gr(t.prototype),"audioTracks",e).dispatchEvent(n)}))})),this.audioTrackList=r}}},{key:"updateObjectUrl",value:function(e){this.rethrowEmptySrc(e),"string"===typeof e?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):this.srcObject=e}},{key:"registerRpcHandlerForInstance",value:function(e,r){var n=this;this.detachCallbacks.push(t.worker.registerRpcHandler(e,(function(e){return t.isCurrentSrc(n,"source"in e?e.source:null)?r(e):{done:!1,value:void 0}})))}},{key:"registerMediaRpcHandlers",value:function(){var e=this;this.registerRpcHandlerForInstance("setStartInfo",(function(t){var r,n;return e.updateObjectUrl(t.objectUrl),e.setStartPosition(t.startPosition),e.readyState<HTMLMediaElement.HAVE_METADATA&&e.addEventListener("loadedmetadata",(function(){Or(e.yaspSrc,t.source)&&e.setStartPosition(t.startPosition)}),{once:!0}),null===(r=e.mediaStateNotifier)||void 0===r||r.handleTimeupdate(),null===(n=e.srcSetDeferred)||void 0===n||n.resolve(),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("addAudioTrack",(function(t){var r,n,i;return(null===(r=e.audioTrackList)||void 0===r?void 0:r.getTrackById(t.track.id))&&Or(e.yaspSrc,t.source)||null===(n=e.audioTrackList)||void 0===n||n.addTrack(new Zi({enabled:t.track.selected,label:t.track.label,language:null!==(i=t.track.language)&&void 0!==i?i:void 0,id:t.track.id,kind:t.track.kind,bitrate:t.track.bitrate,channels:t.track.channels})),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeSelectedAudioLanguage",(function(t){if(!e.audioTrackList)return{done:!0,value:void 0};for(var r=0;r<e.audioTrackList.length;r++)e.audioTrackList[r].enabled=e.audioTrackList[r].language===t.language;return{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("applyDrmInfos",(function(t){return e.yaspDispatchEvent("yasp-drmInfoReceived",t.drmInfos,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("notifyWaitForKey",(function(t){return e.yaspDispatchEvent("yasp-waitForKey",t,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("emsg",(function(t){return e.yaspDispatchEvent("yasp-emsg",t.emsg,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("logSegmentLoaded",(function(t){var r="[SegmentLoader] loaded type = ".concat(t.info.type,", number = ").concat(t.info.number,", cmaf = ").concat(t.info.cmaf);return e.yaspDispatchEvent("yasp-debug",r,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateUtcStartTime",(function(t){return e.startTime=t.time,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateSeekableRange",(function(t){return e.yaspSeekable={start:t.start,end:t.end},{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("urlObjectUpdated",(function(t){var r=e.currentTime;return e.updateObjectUrl(t.objectUrl),e.currentTime=r,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("flushMediaPipeline",(function(t){return 0===e.buffered.length&&(e.currentTime-=.001),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("event",(function(t){var r,n=t.source,i=t.event;return Or(n,e.yaspSrc)&&null!==(r=e.yaspEventListeners)&&void 0!==r&&r.size?(e.yaspDispatchEvent("yasp-event",i,{cancelable:!0}),{done:!0,value:void 0}):{done:!1,value:void 0}})),this.registerRpcHandlerForInstance("error",(function(r){var n,i=r.error;if(Or(r.source,e.yaspSrc)&&null!==(n=e.yaspErrorListeners)&&void 0!==n&&n.size){var o=t.parseErrorString(i);return e.handleError(o),{done:!0,value:void 0}}return{done:!1,value:void 0}}))}},{key:"setStartPosition",value:function(e){var t;e<=0||null===this.clampPosition(e)&&((0,ha.RW)("yasp_no_source_abort_on_fake_seek")&&this.currentTime===e||null===(t=this.playheadMover)||void 0===t||t.moveTo(e))}},{key:"forceTimeUpdate",value:function(){var e;null===(e=this.mediaStateNotifier)||void 0===e||e.handleTimeupdate()}},{key:"clearTrackLists",value:function(){q(this.audioTrackList)}},{key:"createMediaError",value:function(e,t,r){var n=r;if(this.error)try{var i="string"===typeof(null===r||void 0===r?void 0:r.details)?jr(jr({},JSON.parse(r.details)),{},{mediaTagError:this.error}):jr(jr({},r.details),{},{mediaTagError:this.error});n=new ga.w(jr(jr({},r),{},{details:i}))}catch(o){}return{code:e,message:t,yaspError:n}}},{key:"initNativeErrorHandling",value:function(){this.addEventListener("error",this.onNativeError)}},{key:"onNativeError",value:function(){this.yaspSrc&&t.getNativeErrorAndAttachErrorStore(this)&&t.worker.sendEvent({method:"destroy",params:{source:this.yaspSrc,reason:"Error"}})}},{key:"initEventsWatcher",value:function(){var e=this;this.eventsWatcher=new Qa(this,(function(){return e.getMediaElementDebugDump()}))}},{key:"initPlayheadMover",value:function(){this.playheadMover=new za(this,3)}},{key:"initWatchdog",value:function(){var e=this;this.initStallDetector(),this.gapController||(this.gapController=new ya(this,{getSeekRangeEnd:function(){return e.seekable.end(0)}},{jumpLargeGaps:!0,jumpOnPause:!0,largeGapLimit:wa},this.stallDetector,(function(t){var r;null===(r=e.eventsWatcher)||void 0===r||r.pushCustomEvent({event:"YaspLargeGap",timestamp:Date.now(),dump:t}),e.yaspDispatchEvent("yasp-event",{name:"YaspLargeGap",data:t},{cancelable:!0})})),this.addEventListener("seeking",this.onSeeking),this.addEventListener("canplay",this.onCanPlay),this.addEventListener("progress",this.onSegmentAppended),this.progressWatcher=new Ma(this))}},{key:"onCanPlay",value:function(){var e;null===(e=this.gapController)||void 0===e||e.configure({jumpOnPause:!1}),this.shouldPlay&&(0,oa.v)(this.play())}},{key:"onSegmentAppended",value:function(){var e;null===(e=this.gapController)||void 0===e||e.onSegmentAppended()}},{key:"clampPosition",value:function(e){if(!this.seekable.length)return null;var t=this.seekable.end(this.seekable.length-1),r=this.seekable.start(0);return e<=t||t-r<=La.C?null:(this.currentTime=t-La.C,this.currentTime)}},{key:"onSeeking",value:function(){var e,r=this;if(null===this.clampPosition(this.currentTime))if(null===(e=this.gapController)||void 0===e||e.configure({jumpOnPause:!0}),!ma.isBuffered(this.buffered,this.currentTime,.5)&&this.yaspSrc){var n,i;(0,ha.RW)("yasp_no_source_abort_on_fake_seek")&&(null===(n=this.gapController)||void 0===n||n.lock(),null===(i=this.gapController)||void 0===i||i.onSeeking()),t.worker.request({method:"seeking",params:{source:this.yaspSrc,currentTime:this.currentTime}}).then(Lr(xr().mark((function e(){var t,n,i;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,ha.RW)("yasp_no_source_abort_on_fake_seek")?null===(t=r.gapController)||void 0===t||t.unlock():null===(n=r.gapController)||void 0===n||n.onSeeking(),Ho&&tu.resolve().then(null===(i=r.mediaStateNotifier)||void 0===i?void 0:i.handleTimeupdate);case 2:case"end":return e.stop()}}),e)})))).catch((function(){var e;(0,ha.RW)("yasp_no_source_abort_on_fake_seek")&&(null===(e=r.gapController)||void 0===e||e.unlock())}))}else{var o;null===(o=this.gapController)||void 0===o||o.onSeeking()}}},{key:"updateShouldPlayState",value:function(e){this.shouldPlay=e}},{key:"play",value:(a=Lr(xr().mark((function e(){var r;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.playCalled=!0,this.updateShouldPlayState(!0),this.yaspSrc&&"none"===this.preload&&t.worker.sendEvent({method:"load",params:{source:this.yaspSrc}}),HTMLMediaElement.prototype.getAttribute.call(this,"src")||this.srcObject){e.next=6;break}return e.next=6,null===(r=this.srcSetDeferred)||void 0===r?void 0:r.promise;case 6:if(this.playCalled){e.next=8;break}return e.abrupt("return");case 8:return this.playCalled=!1,this.handleLivePresentationWindowDropout(),e.abrupt("return",Nr(Gr(t.prototype),"play",this).call(this));case 11:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"pause",value:function(){this.playCalled=!1,this.updateShouldPlayState(!1),Nr(Gr(t.prototype),"pause",this).call(this)}},{key:"isSupportedSrc",value:function(e){return mo(e)}},{key:"initAirplayController",value:function(){var e=this;this.airplayController||(this.airplayController=new eu(this,(function(t){return e.logAirplayStateChange(t)})))}},{key:"logAirplayStateChange",value:function(e){this.yaspDispatchEvent("yasp-event",{name:"AirplayStateChange",data:{enabled:e}})}},{key:"setSrc",value:function(e){var r,n,i;if(this.yaspSrc&&(t.worker.sendEvent({method:"detach",params:{source:this.yaspSrc}}),this.yaspSrc=void 0,this.clearSrcFromNativeElements(),this.srcSetDeferred=void 0,null===(r=this.mediaStateNotifier)||void 0===r||r.disable(),this.clearTrackLists(),this.restore()),this.srcSetDeferred=new Wa.B,this.isSupportedSrc(e))return this.airplayController&&this.airplayController.airplayEnabled?void(this.airplayController.detachedSrc=e):(this.yaspSrc=e,t.worker.sendEvent({method:"attach",params:{source:e}}),null===(n=this.mediaStateNotifier)||void 0===n||n.enable(),null===(i=this.gapController)||void 0===i||i.configure({jumpOnPause:!0}),"none"!==this.preload&&t.worker.sendEvent({method:"load",params:{source:e}}),void(t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:e,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()}}})));e?HTMLMediaElement.prototype.setAttribute.call(this,"src",e):HTMLMediaElement.prototype.removeAttribute.call(this,"src")}},{key:"clearSrcFromNativeElements",value:function(){this.srcObject=null,HTMLMediaElement.prototype.removeAttribute.call(this,"src")}},{key:"initStallDetector",value:function(){var e=this;this.stallDetector||(this.stallDetector=new Aa(this,(function(){var t;null===(t=e.eventsWatcher)||void 0===t||t.pushCustomEvent({event:"YaspNudgeStalled",timestamp:Date.now(),dump:e.getMediaElementDebugDump()}),e.yaspDispatchEvent("yasp-event",{name:"YaspNudgeStalled",data:void 0},{cancelable:!0})})))}},{key:"restore",value:function(){this.startTime=NaN,this.yaspSeekable=void 0}},{key:"handleLivePresentationWindowDropout",value:function(){this.duration===1/0&&this.seekable.length&&this.currentTime<this.seekable.start(0)&&(this.currentTime=this.seekable.end(this.seekable.length-1))}},{key:"getStartDate",value:function(){return this.yaspSrc||"function"!==typeof Nr(Gr(t.prototype),"getStartDate",this)?new Date(this.startTime):new Date(Nr(Gr(t.prototype),"getStartDate",this).call(this))}}],i=[{key:"isSupported",value:function(){var e;return"function"===typeof(null===(e=(0,Ka.Q)())||void 0===e?void 0:e.isTypeSupported)}},{key:"isCurrentSrc",value:function(e,r){return!(null===r||!t.isYaspElement(e))&&Or(e.yaspSrc,r)}},{key:"getDefaultBandwidthEstimate",value:function(){var e=t.bandwidth;if(e)return ur(e);var r=function(){try{var e=Sa.t.getItem("videoplayer-bandwidth-estimate");if(!e)return NaN;var t=JSON.parse(e),r=t.bandwidthEstimate,n=t.time,i=t.source;return Ta.includes(i)&&Oa()-n<ka?r:NaN}catch(o){return NaN}}();return r?{value:r,source:"cache"}:{value:_a.S,source:"default"}}},{key:"attachElement",value:function(e,r,n){if(!t.isSupported())throw new Error("Unsupported platform");if(t.isYaspElement(r))return(0,Da.L)(new Error("Unexpected YaspMediaElement.attach(yaspMediaElement) call")),r;t.setWorkerConfig(n);var i,o,a=(o=ea(i=r))?function(){ea(i)!==o&&Jo()(i,o)}:Di.Z;Jo()(r,e.prototype);var u=r;u.restorePrototype=a,u.detachCallbacks=[],u.yaspEventListeners=new Set,u.yaspErrorListeners=new Set,u.registerMediaRpcHandlers(),u.initAudioTrackList(),u.initPlayheadMover(),u.initWatchdog(),u.initEventsWatcher(),u.initNativeErrorHandling(),u.initAirplayController();var c=t.overrideYaspGetters(u);return u.detachCallbacks.push(c),t.instances.push(u),u}},{key:"warmUp",value:function(){(0,Di.Z)(t.worker)}},{key:"destroy",value:(o=Lr(xr().mark((function e(){var r;return xr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tu.all(t.instances.map((function(e){return e.detach()})));case 2:null===(r=t.workerImpl)||void 0===r||r.destroy();case 3:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"hasActiveInstance",value:function(){return Boolean(t.instances.length)}},{key:"overrideYaspGetters",value:function(e){var r=t.initYaspSeekable(e),n=t.attachErrorStore(e),i=t.initYaspCurrentSrc(e);return function(){r(),n(),i()}}},{key:"attachErrorStore",value:function(e){return Object.defineProperty(e,"error",{get:function(){return void 0!==this.yaspError?this.yaspError:t.getNativeErrorAndAttachErrorStore(e)},configurable:!0}),function(){return delete e.error}}},{key:"getNativeErrorAndAttachErrorStore",value:function(e){delete e.error;var r=e.error;return t.attachErrorStore(e),r}},{key:"getNativeSeekableAndInitYaspSeekable",value:function(e){delete e.seekable;var r=e.seekable;return t.initYaspSeekable(e),r}},{key:"isYaspElement",value:function(e){return!0===e.yasp}},{key:"getStats",value:function(){return{bandwidth:t.bandwidth}}},{key:"configureSource",value:function(e,r){var n=r.defaultBandwidthEstimate?ur(r.defaultBandwidthEstimate):void 0;void 0!==n&&(t.shouldSaveBandwidth=!1);var i=n?jr(jr({},r),{},{defaultBandwidthEstimate:n}):r;t.worker.sendEvent({method:"configureSource",params:{source:e,config:i}})}},{key:"setWorkerConfig",value:function(e){void 0!==e&&(t.workerConfig.sourceLimit=e.sourceLimit,t.workerConfig.perfLogUrl=e.perfLogUrl)}},{key:"worker",get:function(){if(void 0!==t.workerImpl)return t.workerImpl;var e=(0,Ka.Q)(),r=!!e&&"canConstructInDedicatedWorker"in e&&Boolean(e.canConstructInDedicatedWorker)&&!Ho,n=!(!(0,ha.RW)("web_yasp_enable_worker")||!r)&&Boolean(window.MediaSourceHandle);return t.workerImpl=new la({useWebWorker:n,workerConfig:jr(jr({},t.workerConfig),{},{flags:(0,ha.qm)()}),onTerminate:function(){t.messenger.emit("yasp-event",{name:"YaspWorkerTerminate",data:void 0}),t.workerImpl=void 0}}),t.workerImpl.registerStaticRpcHandler("updateBandwidthEstimate",(function(e){return t.bandwidth=e.bandwidth,t.shouldSaveBandwidth&&function(e){if(!isNaN(e.value)&&Ta.includes(e.source)){var t={bandwidthEstimate:Math.floor(e.value),time:Oa(),source:e.source};Sa.t.setItem("videoplayer-bandwidth-estimate",JSON.stringify(t))}}(e.bandwidth),{done:!0,value:void 0}})),t.workerImpl.registerStaticRpcHandler("updateBufferedInfo",(function(e){return t.messenger.emit("BufferedInfoChanged",e),{done:!0,value:void 0}})),t.workerImpl.registerStaticRpcHandler("error",t.globalErrorRpcHandler),t.workerImpl.registerStaticRpcHandler("event",t.globalEventRpcHandler),t.workerImpl}},{key:"parseErrorString",value:function(e){try{return new ga.w(JSON.parse(e))}catch(t){return new ga.w({code:"YASP_PARSE_ERROR_EXCEPTION",details:{error:t,errorString:e},message:"Expect error to be serialized error.",isFatal:!0,category:ba.q.EXCEPTION})}}},{key:"initYaspCurrentSrc",value:function(e){return Object.defineProperty(e,"currentSrc",{get:function(){return this.src},configurable:!0}),function(){return delete e.currentSrc}}},{key:"initYaspSeekable",value:function(e){return Object.defineProperty(e,"seekable",{get:function(){var e=this;return this.yaspSeekable?{start:function(t){if(t>e.length-1)throw new Error("Failed to execute 'start' on 'TimeRanges': The index provided (".concat(t,") is greater than the maximum bound (").concat(e.length-1,")"));return e.yaspSeekable.start},end:function(t){if(t>e.length-1)throw new Error("Failed to execute 'end' on 'TimeRanges': The index provided (".concat(t,") is greater than the maximum bound (").concat(e.length-1,")"));return e.yaspSeekable.end},length:1}:t.getNativeSeekableAndInitYaspSeekable(this)},configurable:!0}),function(){return delete e.seekable}}},{key:"getExpConfig",value:function(){var e=(0,ha.rg)()||{},t=e.flags,r=e.testids,n=e.slots;return{flags:(0,so.K)(t)?JSON.parse(JSON.stringify(t)):{},testids:(0,Ia.H)(r)?r.split(",").map(Number).filter(Boolean):[],slots:(0,Ia.H)(n)?n:""}}}],n&&Dr(r.prototype,n),i&&Dr(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(e),Hr(t,"instances",[]),Hr(t,"shouldSaveBandwidth",!0),Hr(t,"bandwidth",void 0),Hr(t,"workerImpl",void 0),Hr(t,"messenger",new fa.v),Hr(t,"workerConfig",{}),Hr(t,"globalErrorRpcHandler",(function(e){var r=e.error,n=e.source,i=t.parseErrorString(r),o=new ga.w(jr(jr({},i),{},{message:"Detached mediaElement error: ".concat(i.message),isFatal:!1,code:Tr(i.code)}));return i.isFatal&&n&&t.worker.sendEvent({method:"destroy",params:{source:n,reason:"Error"}}),t.messenger.emit("yasp-error",o),{done:!0,value:void 0}})),Hr(t,"globalEventRpcHandler",(function(e){var r=e.event,n=e.isWorkerMessage;return t.messenger.emit("yasp-event",jr(jr({},r),{},{name:n?r.name:Tr(r.name)})),{done:!0,value:void 0}})),t}function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==qr(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}Yr=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=ru);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(r),!0).forEach((function(t){an(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Kr(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):ru.resolve(c).then(n,i)}function $r(e){return function(){var t=this,r=arguments;return new ru((function(n,i){function o(e){Kr(u,n,i,o,a,"next",e)}function a(e){Kr(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jr(){return(Jr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Qr(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function Qr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=on(e)););return e}function en(e,t){return(en=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=on(e);if(t){var i=on(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return rn(this,r)}}function rn(e,t){if(t&&("object"===qr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return nn(e)}function nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function un(e){return(un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sn(e,t){return(sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ln(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=hn(e);if(t){var i=hn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return fn(this,r)}}function fn(e,t){if(t&&("object"===un(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pn(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==dn(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}pn=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=uu);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(r),!0).forEach((function(t){mn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gn(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):uu.resolve(c).then(n,i)}function bn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _n(){return(_n="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=En(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function En(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Tn(e)););return e}function On(e,t){return(On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Tn(e);if(t){var i=Tn(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return kn(this,r)}}function kn(e,t){if(t&&("object"===dn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e){switch(e){case du.ly:return ou.widevine;case du.xE:return ou.playready;case du.dn:return ou.clearkey;default:return ou.none}}function xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(r),!0).forEach((function(t){jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function An(e,t){var r=function(){try{return function(e){return{error:String(e.error)||"",isFatal:Boolean(e.isFatal),helpLink:String(e.helpLink)||""}}(JSON.parse(e))}catch(t){return Pn(Pn({},mu),{},{error:e})}}();return r.isFatal=r.isFatal||!isFinite(t)||t<=0,r}function Ln(e){if(void 0===e)return ba.q.DEFAULT;var t=function(e){switch(e){case hu.DEFAULT_ERROR:return ba.q.DEFAULT;case hu.BROADCAST_AD_BLOCK_INIT_ERROR:case hu.AD_TYPE_IS_NOT_RECOGNIZED:case hu.AD_IS_ALREADY_PLAYING:case hu.MULTIROLL_INIT_ERROR:case hu.PLAY_AD_VIEWERS_ERROR:return ba.q.ADS;case hu.INVALID_METADATA:case hu.NO_STREAMS:case hu.INVALID_STREAM_URL:case hu.NO_DRM_CONFIG:return ba.q.CONFIG;case hu.ON_TICK_ERROR:case hu.SAGA_ERROR:case hu.NO_HLS_JS_INSTANCE:case hu.REACT_COMPONENT_DID_CATCH_ERROR_INFO:case hu.RECOVER_TASK_ERROR:case hu.PRELOAD_SOURCE_FAILED:case hu.MEDIA_ERR_ABORTED:return ba.q.EXCEPTION;case hu.UNSUPPORTED_MEDIA_TYPE:case hu.NATIVE_HLS_NOT_SUPPORTED_ERROR:case hu.HLS_JS_NOT_SUPPORTED_ERROR:case hu.MEDIA_ERR_SRC_NOT_SUPPORTED:case hu.MEDIA_ERR_CUSTOM:case hu.MEDIA_ERR_DECODE:case hu.REPRESENTATION_CHANGE:return ba.q.MEDIA;case hu.SCRIPT_INIT_ERROR:case hu.META_INFO_REQUEST_FAILED:case hu.STRM_ABD_INVALID_RESPONSE:case hu.MANIFEST_NOT_FOUND:return ba.q.NETWORK_PLAYER;case hu.MEDIA_ERR_NETWORK:return ba.q.NETWORK_MEDIA;case hu.MPD_WIDEVINE_CERT_LOAD_ERROR:case hu.FAIRPLAY_CERT_LOAD_ERROR:case hu.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR:case hu.FAIRPLAY_CREATE_KEY_SESSION_ERROR:case hu.FAIRPLAY_SPC_LOAD_ERROR:case hu.FAIRPLAY_CREATE_KEY_ERROR:case hu.FAIRPLAY_INVALID_CONTENT_ID:case hu.DRM_PROXY_ERROR:case hu.DRM_PROXY_ERROR_NEED_COOKIE:case hu.DRM_PROXY_ERROR_NEED_TEAM_LOGIN:case hu.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION:case hu.DRM_PROXY_ERROR_SIGNATURE_EXPIRED:case hu.MEDIA_ERR_ENCRYPTED:case hu.FAIRPLAY_NOT_SUPPORTED:case hu.NO_DRM:case hu.DRM_INIT_ERROR:case hu.DRM_NO_INIT_DATA:case hu.DRM_CERT_LOAD_ERROR:case hu.DRM_NO_SUPPORTED_KEY_SYSTEM:case hu.DRM_FAILED_TO_CREATE_CDM:case hu.DRM_FAILED_TO_SET_MEDIA_KEYS:case hu.DRM_NO_LICENSE_SERVER:case hu.DRM_FAILED_TO_CREATE_SESSION:case hu.DRM_SESSION_ERROR:case hu.DRM_FAILED_TO_GENERATE_REQUEST:case hu.DRM_UNKNOWN_ERROR:return ba.q.DRM;case hu.REGIONAL_LIMITATION_MANIFEST:case hu.REGIONAL_LIMITATION_LEVEL:case hu.REGIONAL_LIMITATION_SEGMENT:return ba.q.REGIONAL;case hu.SIGNATURE_EXPIRED_MANIFEST:case hu.SIGNATURE_EXPIRED_LEVEL:case hu.SIGNATURE_EXPIRED_SEGMENT:return ba.q.ACCESS;case hu.BANNED_MANIFEST:case hu.BANNED_LEVEL:case hu.BANNED_SEGMENT:return ba.q.BANNED;case hu.NO_CODECS:return ba.q.NO_CODECS;case hu.NO_PLAYABLE_STREAMS:return ba.q.CANNOT_PLAY;case hu.NO_MSE:return ba.q.UNSUPPORTED_ENV}return}(e);if(void 0!==t)return t;if(void 0!==(t=function(e){switch(e){case"VH_ACCESS_ERROR_OLD_BROWSER":case"VH_ACCESS_ERROR_UNSUPPORTED_BROWSER":return ba.q.UNSUPPORTED_ENV;case"VH_ACCESS_DENIED":return ba.q.ACCESS;case"VH_ACCESS_ERROR_INVALID_REGION":return ba.q.REGIONAL;case"VH_ACCESS_ERROR_NO_LICENSE":return ba.q.DRM;case"VH_ACCESS_ERROR_FUTURE_VOD_RELEASE":case"VH_ACCESS_ERROR_NOT_FOUND":case"VH_VIDEO_PROCESSING":case"VH_VIDEO_PROCESSING_FAILED":case"VH_ACCESS_ERROR_UNEXPECTED":return ba.q.DEFAULT}return}(e)))return t;switch(e){case fu.BUFFER_FULL_ERROR:case fu.BUFFER_NUDGE_ON_STALL:case fu.BUFFER_STALLED_ERROR:case fu.FRAG_PARSING_ERROR:case fu.BUFFER_SEEK_OVER_HOLE:case fu.BUFFER_APPENDING_ERROR:case fu.PIPELINE_ERROR_DECODE:case fu.DECODER_ERROR_NOT_SUPPORTED:case fu.BUFFER_APPEND_ERROR:case fu.MEDIA_ELEMENT_ERROR_FORMAT_ERROR:case fu.REMUX_ALLOC_ERROR:case fu.BUFFER_ADD_CODEC_ERROR:case fu.DEMUXER_ERROR_COULD_NOT_OPEN:case fu.NS_ERROR_DOM_INVALID_STATE_ERR:case fu.CHUNK_DEMUXER_ERROR_APPEND_FAILED:case fu.FAILED_TO_INIT_DECODER:case fu.PIPELINE_ERROR_INITIALIZATION_FAILED:case fu.NS_ERROR_FAILURE:case fu.REQUEST_FAILED:case fu.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED:case fu.PIPELINE_ERROR_COULD_NOT_RENDER:case fu.NS_ERROR_DOM_MEDIA_METADATA_ERR:case fu.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE:case fu.NS_ERROR_DOM_MEDIA_FATAL_ERR:case fu.MANIFEST_PARSING_ERROR:return ba.q.MEDIA;case fu.FRAG_LOAD_ERROR:case fu.MANIFEST_LOAD_ERROR:case fu.LEVEL_LOAD_ERROR:case fu.AUDIO_TRACK_LOAD_ERROR:return ba.q.NETWORK_MEDIA;case fu.FRAG_LOAD_TIME_OUT:case fu.MANIFEST_LOAD_TIME_OUT:case fu.LEVEL_LOAD_TIME_OUT:case fu.AUDIO_TRACK_LOAD_TIME_OUT:return ba.q.NETWORK_TIMEOUT;case fu.INTERNAL_EXCEPTION:case fu.ON_PLAYER_INIT_ERROR_INTERNAL:case fu.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case fu.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR:case fu.LOAD_SKIN_ERROR:case fu.INSERT_INTO_WITH_SECURE_FRAME:case fu.PLAY_AD_VIEWERS_WITH_SECURE_FRAME:case fu.ERROR_SCREEN_LOAD_ERROR:case fu.YASP_UNEXPECTED_METHOD_CALL:return ba.q.EXCEPTION;case fu.UNABLE_TO_LOAD_PLAYER_IFRAME:case fu.ON_PLAYER_INIT_ERROR:case fu.LOADER_INIT_ERROR:case fu.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT:case fu.FAILED_TO_DOWNLOAD_DEBUG_INFO:case fu.REQUEST_SOURCE_ERROR:return ba.q.NETWORK_PLAYER;case fu.PLAYER_CONTAINER_NOT_FOUND:case fu.KEY_LOAD_ERROR:case fu.FEATURE_HANDLER_ERROR:case fu.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER:case fu.INVALID_CONFIG_LANG_IN_CREATE_PLAYER:case fu.INVALID_CONFIG_IN_CREATE_PLAYER:case fu.INVALID_CONFIG_IN_SET_SOURCE:case fu.INVALID_CONFIG_IN_SOURCE_UPDATE:case fu.IFRAME_DOES_NOT_ALLOW_DRM:case fu.DRM_IS_NOT_ALLOWED:case fu.ELEMENT_NOT_IN_DOM:case fu.INVALID_LOG_URL:case fu.SCREEN_WAKE_LOCK_ERROR:return ba.q.CONFIG}return ba.q.DEFAULT}function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){function r(){this.constructor=e}if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Tu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function Nn(e,t,r,n){return new(r||(r=Eu))((function(i,o){function a(e){try{c(n.next(e))}catch(t){o(t)}}function u(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}c((n=n.apply(e,t||[])).next())}))}function Mn(e,t){function r(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return u.label++,{value:r[1],done:!1};case 5:u.label++,i=r[1],r=[0];continue;case 7:r=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){u=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){u.label=r[1];break}if(6===r[0]&&u.label<o[1]){u.label=o[1],o=r;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(r);break}o[2]&&u.ops.pop(),u.trys.pop();continue}r=t.call(e,u)}catch(a){r=[6,a],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}var n,i,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a}function Cn(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fn(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(u){i={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function Bn(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function Un(e,t,r){return r&&r.set(e,t),t}function Gn(e,t){var r=Nu({issueData:t,data:e.data,path:e.path,errorMaps:[e.contextualErrorMap,e.schemaErrorMap,Lu,Au].filter((function(e){return!!e}))});e.issues.push(r)}function Hn(e){if(!e)return{};var t=e.errorMap,r=e.invalid_type_error,n=e.required_error,i=e.description;if(t&&(r||n))throw new Error('Can\'t use "invalid" or "required" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:function(t,r){return"invalid_type"!==t.code?{message:r.defaultError}:"undefined"===typeof r.data&&n?{message:n}:e.invalid_type_error?{message:e.invalid_type_error}:{message:r.defaultError}},description:i}}function Vn(e){if(e instanceof sc){var t={};for(var r in e.shape){var n=e.shape[r];t[r]=Sc.create(Vn(n))}return new sc(Ru(Ru({},e._def),{shape:function(){return t}}))}return e instanceof ac?ac.create(Vn(e.element)):e instanceof Sc?Sc.create(Vn(e.unwrap())):e instanceof kc?kc.create(Vn(e.unwrap())):e instanceof dc?dc.create(e.items.map((function(e){return Vn(e)}))):e}function qn(e){return new wc({values:e,typeName:uc.ZodEnum})}function Yn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(r),!0).forEach((function(t){ri(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $n(e,t){if(t&&("object"===zn(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zn(e)}function Zn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xn(e){var t="function"===typeof Map?new Map:void 0;return(Xn=function(e){function r(){return Jn(e,arguments,ti(this).constructor)}if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ei(r,e)})(e)}function Jn(e,t,r){return(Jn=Qn()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&ei(i,r.prototype),i}).apply(null,arguments)}function Qn(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ei(e,t){return(ei=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ri(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ni(e){switch(e.error){case xc.EXPIRED_SIGNATURE:return hu.DRM_PROXY_ERROR_SIGNATURE_EXPIRED;case xc.NEED_COOKIE:return hu.DRM_PROXY_ERROR_NEED_COOKIE;case xc.NEED_YATEAM_LOGIN:return hu.DRM_PROXY_ERROR_NEED_TEAM_LOGIN;case xc.NEED_VIEW_PERMISSION:return hu.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION;default:return hu.DRM_PROXY_ERROR}}function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ai(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(r),!0).forEach((function(t){gi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ui(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==ii(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}ui=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Mc);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function ci(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Mc.resolve(c).then(n,i)}function si(e){return function(){var t=this,r=arguments;return new Mc((function(n,i){function o(e){ci(u,n,i,o,a,"next",e)}function a(e){ci(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function li(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fi(){return(fi="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=hi(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}}).apply(this,arguments)}function hi(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mi(e)););return e}function di(e,t){return(di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pi(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=mi(e);if(t){var i=mi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return yi(this,r)}}function yi(e,t){if(t&&("object"===ii(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vi(e)}function vi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wi(){function e(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,i,o){var a=t&&t.prototype instanceof n?t:n,u=Object.create(a.prototype),s=new f(o||[]);return u._invoke=function(e,t,n){var i="suspendedStart";return function(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=c(u,n);if(s){if(s===_)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=r(e,t,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===_)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(e,i,s),u}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach((function(r){e(t,r,(function(e){return this._invoke(r,e)}))}))}function u(e,t){var n;this._invoke=function(i,o){function a(){return new t((function(n,a){!function n(i,o,a,u){var c=r(e[i],e,o);if("throw"!==c.type){var s=c.arg,l=s.value;return l&&"object"==bi(l)&&v.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(l).then((function(e){s.value=e,a(s)}),(function(e){return n("throw",e,a,u)}))}u(c.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function c(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,c(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=r(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function s(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(s,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:d}}function d(){return{value:void 0,done:!0}}wi=function(){return p};var p={},y=Object.prototype,v=y.hasOwnProperty,m="function"==typeof Symbol?Symbol:{},g=m.iterator||"@@iterator",b=m.asyncIterator||"@@asyncIterator",w=m.toStringTag||"@@toStringTag";try{e({},"")}catch(T){e=function(e,t,r){return e[t]=r}}p.wrap=t;var _={},E={};e(E,g,(function(){return this}));var O=Object.getPrototypeOf,S=O&&O(O(h([])));S&&S!==y&&v.call(S,g)&&(E=S);var k=o.prototype=n.prototype=Object.create(E);return i.prototype=o,e(k,"constructor",o),e(o,"constructor",i),i.displayName=e(o,w,"GeneratorFunction"),p.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},p.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,w,"GeneratorFunction")),t.prototype=Object.create(k),t},p.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,b,(function(){return this})),p.AsyncIterator=u,p.async=function(e,r,n,i,o){void 0===o&&(o=Fc);var a=new u(t(e,r,n,i),o);return p.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(k),e(k,w,"Generator"),e(k,g,(function(){return this})),e(k,"toString",(function(){return"[object Generator]"})),p.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},p.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=void 0),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=v.call(i,"catchLoc"),u=v.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;l(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:h(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},p}function _i(e,t,r,n,i,o,a){try{var u=e[o](a),c=u.value}catch(s){return void r(s)}u.done?t(c):Fc.resolve(c).then(n,i)}function Ei(e){return function(){var t=this,r=arguments;return new Fc((function(n,i){function o(e){_i(u,n,i,o,a,"next",e)}function a(e){_i(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))}}function Oi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Si(e,t){return(Si=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ki(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xi(e);if(t){var i=xi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ti(this,r)}}function Ti(e,t){if(t&&("object"===bi(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ri(e)}function Ri(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(e){return(xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ji,Ai,Li,Ii=function(e){return e.devicePixelRatio||e.screen.deviceXDPI&&e.screen.deviceXDPI/e.screen.logicalXDPI||1},Di=r(69497),Ni=(0,r(44885).y)(),Mi=(0,r(85348).F)(),Ci=(0,r(12917).V)(),Fi=r(80445),Bi=r(83361),Ui=(0,Fi.I)(function(){var e,t=(e=i().mark((function e(t){var r,n,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ii(t),Ni){e.next=3;break}return e.abrupt("return",r);case 3:if(n=t.tizen){e.next=6;break}return e.abrupt("return",r);case 6:return o=t.screen.height,e.prev=7,e.next=10,new Bi((function(e){n.systeminfo.getPropertyValue("PANEL",(function(t){return e(t.panelHeight)}))}));case 10:if(a=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",a/o);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var t=this,r=arguments;return new Bi((function(n,i){function a(e){o(c,n,i,a,u,"next",e)}function u(e){o(c,n,i,a,u,"throw",e)}var c=e.apply(t,r);a(void 0)}))});return function(e){return t.apply(this,arguments)}}()),Gi=(0,Fi.I)((function(e){var t=Ii(e);if(!Mi)return t;var r=e.Hisense_GetPanelResolution,n=e.Hisense_Get4KSupportState;if(n&&n()&&(t=2),!r)return t;var i=e.screen.height;try{var o=r(),a=Hi(o).height;return a?a/i:t}catch(u){return t}})),Hi=function(e){var t=e.split("*");return{height:parseInt(t[1],10),width:parseInt(t[0],10)}},Vi=r(83361),qi=(0,Fi.I)(function(){var e,t=(e=u().mark((function e(t){var r,n,i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ii(t),Ci){e.next=3;break}return e.abrupt("return",r);case 3:if(n=t.webOS){e.next=6;break}return e.abrupt("return",r);case 6:return i=t.screen.height,e.prev=7,e.next=10,new Vi((function(e){n.deviceInfo((function(t){return e(t.screenHeight)}))}));case 10:if(o=e.sent){e.next=13;break}return e.abrupt("return",r);case 13:return e.abrupt("return",o/i);case 16:return e.prev=16,e.t0=e.catch(7),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[7,16]])})),function(){var t=this,r=arguments;return new Vi((function(n,i){function o(e){c(u,n,i,o,a,"next",e)}function a(e){c(u,n,i,o,a,"throw",e)}var u=e.apply(t,r);o(void 0)}))});return function(e){return t.apply(this,arguments)}}()),Yi=r(83361),Wi=function(e){return Ni?Ui(e):Ci?qi(e):Mi?Yi.resolve(Gi(e)):Yi.resolve(Ii(e))},zi=0,Ki=l((function e(t){var r=t.label,n=void 0===r?"":r,i=t.language,o=void 0===i?"":i,a=t.id,u=void 0===a?"media-track-".concat(zi++):a,c=t.sourceBuffer,s=void 0===c?null:c,l=t.props,h=void 0===l?void 0:l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"label",void 0),f(this,"id",void 0),f(this,"language",void 0),f(this,"kind",""),f(this,"props",void 0),f(this,"sourceBuffer",null),this.label=n,this.language=o,this.id=u,this.sourceBuffer=s,this.props=h})),$i=["enabled","bitrate","channels"],Zi=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.enabled,i=void 0!==n&&n,a=r.bitrate,u=r.channels,c=d(r,$i);return p(this,t),_(b(e=o.call(this,c)),"_enabled",!1),_(b(e),"bitrate",void 0),_(b(e),"channels",void 0),_(b(e),"onenabledchange",void 0),e._enabled=i,e.bitrate=a,e.channels=u,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e);var r,n,i,o=m(t);return r=t,(n=[{key:"_destroy",value:function(){delete this.onenabledchange}},{key:"enabled",get:function(){return this._enabled},set:function(e){var t;"boolean"===typeof e&&e!==this._enabled&&(this._enabled=e,null===(t=this.onenabledchange)||void 0===t||t.call(this))}}])&&y(r.prototype,n),i&&y(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ki),Xi=r(40313),Ji=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];S(this,t),A(P(e=o.call(this)),"tracks",[]),A(P(e),"_changing",!1);for(var n=0;n<r.length;n++)e.addTrack(r[n]);return e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e);var r,n,i,o=R(t);return r=t,(n=[{key:"length",get:function(){return this.tracks.length}},{key:"addTrack",value:function(e){var t=this;if(-1===this.tracks.indexOf(e)){var r=this.tracks.length;Object.defineProperty(this,r,{get:function(){return t.tracks[r]},enumerable:!1,configurable:!0}),this.tracks.push(e),this.dispatchTrackEvent("addtrack",e)}}},{key:"removeTrack",value:function(e){var t,r=this.tracks.indexOf(e);if(-1!==r){null===(t=e._destroy)||void 0===t||t.call(e);var n=this.tracks.length-1;String(n)in this&&Object.defineProperty(this,n,{get:void 0,enumerable:!1,configurable:!0}),this.tracks.splice(r,1),this.dispatchTrackEvent("removetrack",e)}}},{key:"getTrackById",value:function(e){return this.tracks.find((function(t){return t.id===e}))||null}},{key:"item",value:function(e){return this.tracks[e]}},{key:"dispatchTrackEvent",value:function(e,t){var r=E(e);r.track=t,this.dispatchEvent(r)}}])&&k(r.prototype,n),i&&k(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Xi.Z),Qi=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];I(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].enabled){V(r,r[n]);break}return H(U(e=o.call(this,r)),"onaddtrack",void 0),H(U(e),"onchange",void 0),H(U(e),"onremovetrack",void 0),e.onaddtrack=null,e.onchange=null,e.onremovetrack=null,e.addEventListener("change",(function(t){var r,n;return null===(r=(n=e).onchange)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("addtrack",(function(t){var r,n;return null===(r=(n=e).onaddtrack)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("removetrack",(function(t){var r,n;return null===(r=(n=e).onremovetrack)||void 0===r?void 0:r.call(n,t)})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e);var r,n,i,o=F(t);return r=t,(n=[{key:"addTrack",value:function(e){var r=this;e.enabled&&V(this,e),N(G(t.prototype),"addTrack",this).call(this,e),e.onenabledchange=function(){r._changing||(r._changing=!0,V(r,e),r._changing=!1,r.dispatchEvent(E("change")))}}},{key:"addEventListener",value:function(e,r,n){N(G(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){N(G(t.prototype),"removeEventListener",this).call(this,e,r,n)}}])&&D(r.prototype,n),i&&D(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ji),eo=["selected","width","height","bitrate","frameRate"],to=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.selected,i=void 0!==n&&n,a=r.width,u=r.height,c=r.bitrate,s=r.frameRate,l=W(r,eo);return z(this,t),ee(J(e=o.call(this,l)),"_selected",!1),ee(J(e),"width",void 0),ee(J(e),"height",void 0),ee(J(e),"bitrate",void 0),ee(J(e),"frameRate",void 0),ee(J(e),"onselectedchange",void 0),e.selected=i,e.bitrate=c,e.frameRate=s,e.width=a,e.height=u,e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(t,e);var r,n,i,o=Z(t);return r=t,(n=[{key:"_destroy",value:function(){delete this.onselectedchange}},{key:"selected",get:function(){return this._selected},set:function(e){var t;"boolean"===typeof e&&e!==this._selected&&(this._selected=e,null===(t=this.onselectedchange)||void 0===t||t.call(this))}}])&&K(r.prototype,n),i&&K(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ki),ro=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];re(this,t);for(var n=r.length-1;n>=0;n--)if(r[n].selected){he(r,r[n]);break}return fe(se(e=o.call(this,r)),"onaddtrack",void 0),fe(se(e),"onchange",void 0),fe(se(e),"onremovetrack",void 0),e.onaddtrack=null,e.onchange=null,e.onremovetrack=null,e.addEventListener("change",(function(t){var r,n;return null===(r=(n=e).onchange)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("addtrack",(function(t){var r,n;return null===(r=(n=e).onaddtrack)||void 0===r?void 0:r.call(n,t)})),e.addEventListener("removetrack",(function(t){var r,n;return null===(r=(n=e).onremovetrack)||void 0===r?void 0:r.call(n,t)})),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ae(e,t)}(t,e);var r,n,i,o=ue(t);return r=t,(n=[{key:"addEventListener",value:function(e,r,n){ie(le(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){ie(le(t.prototype),"removeEventListener",this).call(this,e,r,n)}},{key:"selectedIndex",get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1}},{key:"addTrack",value:function(e){var r=this;e.selected&&he(this,e),ie(le(t.prototype),"addTrack",this).call(this,e),e.onselectedchange=function(){r._changing||(r._changing=!0,he(r,e),r._changing=!1,r.dispatchEvent(E("change")))}}}])&&ne(r.prototype,n),i&&ne(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ji),no=r(21658),io=r(6005),oo=r(81917).createObjectURL(new Blob(["WEBVTT"],{type:"text/vtt"})),ao=r(24611),uo=r(29015),co=(r(25443),r(14381)),so=r(34129),lo=[],fo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"enableConsole",value:function(){e.consoleEnabled=!0,e.log("YA PLAYER VERSION: 1.0-12390")}},{key:"log",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.log(ye.apply(void 0,r)),e.addToHistory("log",r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.warn(ye.apply(void 0,r)),e.addToHistory("warn",r)}},{key:"error",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.consoleEnabled&&console.error(ye.apply(void 0,r)),e.addToHistory("error",r)}},{key:"getHistory",value:function(){return[].concat(lo)}},{key:"addToHistory",value:function(e,t){lo.length>=150&&lo.shift(),lo.push("[".concat(e,"][").concat(Date.now(),"] ").concat(t.map((function(e){try{return(0,co.Y)(e)}catch(t){return(0,so.K)(t)?JSON.stringify(["stringify_error",t.stack]):JSON.stringify(["stringify_error","not_an_object_error"])}})).join()))}}],(r=null)&&pe(t.prototype,r),n&&pe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Li=void 0,(Ai="consoleEnabled")in(ji=fo)?Object.defineProperty(ji,Ai,{value:Li,enumerable:!0,configurable:!0,writable:!0}):ji[Ai]=Li;var ho,po,yo,vo=r(16566),mo=function(e){return"mpd"===(0,vo.lm)(e.toLocaleLowerCase())},go=r(33157),bo=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=o.call(this);var i={videoWidth:e.videoWidth,videoHeight:e.videoHeight},a=function(){var t=e.videoWidth,n=e.videoHeight;isNaN(t)||isNaN(n)||t<1||n<1||i.videoWidth===t&&i.videoHeight===n||(i={videoWidth:t,videoHeight:n},r({videoWidth:t,videoHeight:n}))};if("onresize"in e)e.addEventListener("resize",a),n.once("Destroy",(function(){return e.removeEventListener("resize",a)}));else{e.addEventListener("timeupdate",a),n.once("Destroy",(function(){return e.removeEventListener("timeupdate",a)}));var u=setInterval(a,1e3);n.once("Destroy",(function(){return clearInterval(u)}))}return n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&be(e,t)}(t,e);var r,n,i,o=we(t);return r=t,n&&ge(r.prototype,n),i&&ge(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}(r(16258).M),wo=(r(15168),r(64059)),_o=(r(20348),r(10525)),Eo=_o.Z,Oo=_o.Z,So=_o.Z,ko=r(83361),To=r(83361),Ro=(ho={propertyName:"YANDEX_DESTROYABLE_GLOBAL_CALLBACK_PROPERTY_NAME",win:window},po=ho.win,yo=ho.propertyName,function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),je(this,"_isDestroyed",!1),je(this,"destroyHandlers",[]),je(this,"_destroyReason",void 0)}var t,r,n;return t=e,n=[{key:"addErrorHandler",value:function(t){e.errorHandlers.push(t)}}],(r=[{key:"destroyReason",get:function(){return this._destroyReason}},{key:"isDestroyed",get:function(){return this._isDestroyed}},{key:"addDestroyHandler",value:function(e){this._isDestroyed?e.apply(void 0,Re([this._destroyReason])):this.destroyHandlers.push(e)}},{key:"destroy",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(!this._isDestroyed){this._isDestroyed=!0,this._destroyReason=i;try{Oe.apply(void 0,[this.destroyHandlers].concat(r))}catch(o){Oe(e.errorHandlers,o)}this.destroyHandlers.length=0}}}])&&Pe(t.prototype,r),n&&Pe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());je(Ro,"errorHandlers",[]);var xo={droppedVideoFrames:0,corruptedVideoFrames:0,totalVideoFrames:0},Po=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ge(Be(r=o.call(this)),"video",void 0),Ge(Be(r),"playbackQuality",xo),Ge(Be(r),"persistedPlaybackQuality",xo),Ge(Be(r),"accumulatedPlaybackQuality",xo),r.video=e,r.addDestroyHandler((function(){r.reset(),r.video=void 0})),r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(t,e);var r,n,i,o=Ce(t);return r=t,(n=[{key:"update",value:function(){if(this.video){var e=function(e){if("function"===typeof e.getVideoPlaybackQuality){var t=e.getVideoPlaybackQuality();return{droppedVideoFrames:t.droppedVideoFrames,corruptedVideoFrames:t.corruptedVideoFrames,totalVideoFrames:t.totalVideoFrames}}var r=e;return"number"===typeof r.webkitDroppedFrameCount&&"number"===typeof r.webkitDecodedFrameCount?Le(Le({},xo),{},{droppedVideoFrames:r.webkitDroppedFrameCount,totalVideoFrames:r.webkitDecodedFrameCount}):xo}(this.video);this.playbackQuality=e,0!==this.persistedPlaybackQuality.totalVideoFrames&&(this.persistedPlaybackQuality.totalVideoFrames>e.totalVideoFrames&&(this.accumulatedPlaybackQuality={droppedVideoFrames:this.accumulatedPlaybackQuality.droppedVideoFrames+this.persistedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.accumulatedPlaybackQuality.corruptedVideoFrames+this.persistedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.accumulatedPlaybackQuality.totalVideoFrames+this.persistedPlaybackQuality.totalVideoFrames}),this.persistedPlaybackQuality=xo)}}},{key:"persist",value:function(){0!==this.playbackQuality.totalVideoFrames&&(this.persistedPlaybackQuality=this.playbackQuality,this.playbackQuality=xo)}},{key:"reset",value:function(){this.playbackQuality=xo,this.persistedPlaybackQuality=xo,this.accumulatedPlaybackQuality=xo}},{key:"getPlaybackQuality",value:function(){return this.persistedPlaybackQuality.totalVideoFrames>0?xo:{droppedVideoFrames:this.playbackQuality.droppedVideoFrames+this.accumulatedPlaybackQuality.droppedVideoFrames,corruptedVideoFrames:this.playbackQuality.corruptedVideoFrames+this.accumulatedPlaybackQuality.corruptedVideoFrames,totalVideoFrames:this.playbackQuality.totalVideoFrames+this.accumulatedPlaybackQuality.totalVideoFrames}}}])&&Ne(r.prototype,n),i&&Ne(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ro),jo=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ve(this,"callback",void 0),Ve(this,"intervalId",void 0),Ve(this,"playbackQualityController",void 0),Ve(this,"oldValues",{}),Ve(this,"dprCheckingInProgress",!1),Ve(this,"tick",(function(){var e;null===(e=n.playbackQualityController)||void 0===e||e.update();var t=n.getFramesValue();void 0!==t&&n.callback("frames",t),n.checkDevicePixelRatio()})),this.callback=r,this.playbackQualityController=new Po(t),this.intervalId=null}var t,r,n;return t=e,(r=[{key:"getFramesValue",value:function(){var e,t;if(null!==this.playbackQualityController&&null!==this.oldValues){var r=this.playbackQualityController.getPlaybackQuality(),n=r.droppedVideoFrames,i=r.totalVideoFrames;if((null===(e=this.oldValues.frames)||void 0===e?void 0:e.dropped)!==n||(null===(t=this.oldValues.frames)||void 0===t?void 0:t.total)!==i)return this.oldValues.frames={dropped:Math.max(Math.floor(n)),total:Math.max(Math.floor(i))},this.oldValues.frames}}},{key:"checkDevicePixelRatio",value:function(){var e=this;if(null!==this.oldValues&&!this.dprCheckingInProgress){var t="undefined"!==typeof globalThis?globalThis:window;this.oldValues.devicePixelRatio||this.handleDpr(Ii(t)),this.dprCheckingInProgress=!0,Wi(t).then((function(t){e.handleDpr(t)})).catch((function(){e.handleDpr(Ii(t))}))}}},{key:"handleDpr",value:function(e){this.dprCheckingInProgress=!1,null!==this.oldValues&&this.oldValues.devicePixelRatio!==e&&(this.oldValues.devicePixelRatio=e,void 0!==e&&this.callback("devicePixelRatio",e))}},{key:"enable",value:function(){this.tick(),this.intervalId=setInterval(this.tick,250)}},{key:"disable",value:function(){var e;this.oldValues={},null===(e=this.playbackQualityController)||void 0===e||e.persist(),clearInterval(this.intervalId)}},{key:"destroy",value:function(){var e;this.disable(),null===(e=this.playbackQualityController)||void 0===e||e.destroy(),this.callback=Di.Z,this.oldValues=null}}])&&He(t.prototype,r),n&&He(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ao=function(e){try{var t=e.getBoundingClientRect(),r=t.left,n=t.right,i=t.top,o=t.bottom;return{left:r,right:n,top:i,bottom:o,width:n-r,height:o-i}}catch(a){return{left:0,width:0,top:0,height:0,right:0,bottom:0}}},Lo=r(83361),Io=function(e){function t(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t};return $e(this,t),(r=o.call(this)).checkToEqualFunction=n,it(rt(r),"value",void 0),r.value=e,r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(t,e);var r,n,i,o=et(t);return r=t,(n=[{key:"getValue",value:function(){return this.value}},{key:"subscribeValueCondition",value:function(e,t){return this.add((function(r){e(r)&&qe(t,r)}))}},{key:"subscribeValueConditionOnce",value:function(e,t){var r=this.subscribeValueCondition(e,(function(e){r(),qe(t,e)}));return r}},{key:"dispatch",value:function(e){this.checkToEqualFunction(this.value,e)||(this.value=e,Xe(nt(t.prototype),"dispatch",this).call(this,e))}}])&&Ze(r.prototype,n),i&&Ze(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ze(this,"on",[]),ze(this,"once",[])}var t,r,n;return t=e,(r=[{key:"add",value:function(){for(var e,t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=this.on).push.apply(e,n),function(){return t.remove.apply(t,n)}}},{key:"addOne",value:function(){for(var e,t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=this.once).push.apply(e,n),function(){return t.remove.apply(t,n)}}},{key:"promise",value:function(){var e=this;return new Lo((function(t){return e.addOne(t)}))}},{key:"dispatch",value:function(e){var t=this.once;this.once=[],Ye(this.on,e),Ye(t,e)}},{key:"removeAll",value:function(){this.on.length=0,this.once.length=0}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.on=this.on.filter((function(e){return t.indexOf(e)<0})),this.once=this.once.filter((function(e){return t.indexOf(e)<0}))}}])&&We(t.prototype,r),n&&We(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),Do=0,No=[],Mo=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vt(pt(r=o.call(this)),"onResize",void 0),vt(pt(r),"resizeObserverCallback",(function(e){var t=ct(e,1)[0].contentRect,n=t.width,i=t.height;r.onResize.dispatch({width:n,height:i})}));var n=Ao(e);if(r.onResize=new Io({width:n.width,height:n.height},(function(e,t){var r=t.width,n=t.height;return!!(isNaN(r)||isNaN(n)||r<1||n<1)||e.width===r&&e.height===n})),r.addDestroyHandler((function(){r.onResize.removeAll()})),"undefined"!==typeof ResizeObserver)try{var i=new ResizeObserver(r.resizeObserverCallback);i.observe(e),r.addDestroyHandler((function(){i.disconnect()}))}catch(a){r.fallbackToCustomDetectionMethods(e)}else r.fallbackToCustomDetectionMethods(e);return r}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(t,e);var r,n,i,o=ht(t);return r=t,(n=[{key:"getSize",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){vt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.onResize.getValue())}},{key:"fallbackToCustomDetectionMethods",value:function(e){var t=this,r=e.ownerDocument;if(r){var n=r.defaultView;if(n){var i=function(){var r=Ao(e);t.onResize.dispatch({width:r.width,height:r.height})};this.addDestroyHandler((0,io.O)(n,"resize",i,{passive:!0})),this.addDestroyHandler(ot(i))}}}}])&&lt(r.prototype,n),i&&lt(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ro),Co=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),wt(this,"observer",void 0),wt(this,"lastValue",void 0),wt(this,"video",void 0),wt(this,"onChangeCallbacks",[]),this.video=t,this.lastValue=this.computeObjectFit(),this.observer=new MutationObserver((function(e){var t,n=mt(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;"attributes"!==i.type||"class"!==i.attributeName&&"style"!==i.attributeName||function(){var e=r.computeObjectFit();r.lastValue!==e&&(r.lastValue=e,r.onChangeCallbacks.forEach((function(t){return t(e)})))}()}}catch(o){n.e(o)}finally{n.f()}})),this.observer.observe(t,{attributes:!0,attributeFilter:["class","style"]})}var t,r,n;return t=e,(r=[{key:"computeObjectFit",value:function(){if(!this.video)throw new Error("No video-element to compute object-fit");return self.getComputedStyle(this.video).getPropertyValue("object-fit")}},{key:"getObjectFit",value:function(){return this.lastValue}},{key:"onChange",value:function(e){this.onChangeCallbacks.push(e)}},{key:"destroy",value:function(){var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null,this.video=null,this.onChangeCallbacks=[]}}])&&bt(t.prototype,r),n&&bt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Fo={attributes:!0,childList:!1,subtree:!1,attributeFilter:["loop"]},Bo=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"observer",void 0),this.observer=new MutationObserver((function(e){var n,i=_t(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("attributes"!==o.type)return;var a=o.attributeName;r(a,t[a])}}catch(u){i.e(u)}finally{i.f()}})),this.observer.observe(t,Fo)}var t,r,n;return t=e,(r=[{key:"destroy",value:function(){var e;null===(e=this.observer)||void 0===e||e.disconnect(),this.observer=null}}])&&Ot(t.prototype,r),n&&Ot(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Uo=r(20809),Go=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;return-1!==(0,Uo.N)(e)}(),Ho=(0,r(15699).z)(),Vo=Go||Ho?function(e,t){var r=e.paused;return ot((function(){e.paused!==r&&(r=e.paused,t(r))}))}:function(e,t){var r=e.paused,n=function(e){var n="pause"===e.type;n!==r&&t(r=n)},i=(0,io.O)(e,"pause",n,{passive:!0}),o=(0,io.O)(e,"playing",n,{passive:!0}),a=(0,io.O)(e,"play",n,{passive:!0});return function(){i(),o(),a()}},qo=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kt(this,"unsubscribers",[]),kt(this,"media",void 0),kt(this,"destroy",(function(){Oe(r.unsubscribers)})),this.unsubscribers=[],this.media=t}var t,r,n;return t=e,(r=[{key:"observe",value:function(e){var t=this,r=Vo(this.media,e),n=function e(){r(),t.unsubscribers=t.unsubscribers.filter((function(t){return t!==e}))};return this.unsubscribers.push(n),n}}])&&St(t.prototype,r),n&&St(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Yo=r(53396),Wo=function(e,t){if(!e||!e.length)return null;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return null;for(var r=0;r<e.length;r++)if(e.start(r)>t&&(0===r||e.end(r-1)-t<=.5))return r;return null},zo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,r=arguments.length>2?arguments[2]:void 0,n=e.currentTime,i=e.duration;if(e.readyState<e.HAVE_FUTURE_DATA)return!0;var o=null!==Wo(e.buffered,e.currentTime);return(!o||!r)&&!(0,Yo.w)(e).some((function(e){var r=e.start,o=e.end;return!(n<r||n>o)&&(i<=o||n+t<o)}))},Ko=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rt(this,"unsubscribers",[]),Rt(this,"media",void 0),Rt(this,"destroy",(function(){Oe(r.unsubscribers)})),this.unsubscribers=[],this.media=t}var t,r,n;return t=e,(r=[{key:"observe",value:function(e){var t=this,r=function(e,t,r){var n=!1,i=function(){var i=zo(e,n?.3:.15,r);i!==n&&t(n=i)},o=ot(i),a=setTimeout(i,0);return function(){o(),clearTimeout(a)}}(this.media,e),n=function e(){r(),t.unsubscribers=t.unsubscribers.filter((function(t){return t!==e}))};return this.unsubscribers.push(n),n}}])&&Tt(t.prototype,r),n&&Tt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$o=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pt(this,"yaspMediaElement",void 0),Pt(this,"notifyCallback",void 0),Pt(this,"notify",void 0),Pt(this,"attributeObserver",null),Pt(this,"pausedObserver",null),Pt(this,"bufferingObserver",null),Pt(this,"handlePaused",(function(e){n.notify("updatePaused",e)})),Pt(this,"handleBuffering",(function(e){n.notify("updateBuffering",e)})),Pt(this,"handleBuffered",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");for(var e=[],t=n.yaspMediaElement.buffered,r=0;r<t.length;r++)e.push([t.start(r),t.end(r)]);n.notify("updateBuffered",e)})),Pt(this,"handleRatechange",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updatePlaybackRate",n.yaspMediaElement.playbackRate)})),Pt(this,"handleTimeupdate",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateCurrentTime",Math.max(n.yaspMediaElement.currentTime,0))})),Pt(this,"handleDurationchange",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateDuration",Math.max(n.yaspMediaElement.duration,0))})),this.yaspMediaElement=t,this.notifyCallback=r,this.notify=function(e,t){n.notifyCallback&&n.notifyCallback(e,t)}}var t,r,n;return t=e,(r=[{key:"enable",value:function(){var e,t=this;null!==this.yaspMediaElement&&(this.disable(),this.yaspMediaElement.addEventListener("ratechange",this.handleRatechange,{passive:!0}),this.yaspMediaElement.addEventListener("timeupdate",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("seeking",this.handleTimeupdate,{passive:!0}),this.yaspMediaElement.addEventListener("durationchange",this.handleDurationchange,{passive:!0}),this.yaspMediaElement.addEventListener("progress",this.handleBuffered,{passive:!0}),this.attributeObserver=new Bo(this.yaspMediaElement,(function(e,r){"loop"===e&&t.handleLoop(null!==r&&void 0!==r&&r)})),this.pausedObserver=new qo(this.yaspMediaElement),this.bufferingObserver=new Ko(this.yaspMediaElement),this.pausedObserver.observe(this.handlePaused),this.bufferingObserver.observe(this.handleBuffering),this.handleLoop(null!==(e=this.yaspMediaElement.loop)&&void 0!==e&&e))}},{key:"disable",value:function(){var e,t,r;null!==this.yaspMediaElement&&(this.yaspMediaElement.removeEventListener("ratechange",this.handleRatechange),this.yaspMediaElement.removeEventListener("timeupdate",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("seeking",this.handleTimeupdate),this.yaspMediaElement.removeEventListener("durationchange",this.handleDurationchange),this.yaspMediaElement.removeEventListener("progress",this.handleBuffered),null===(e=this.attributeObserver)||void 0===e||e.destroy(),this.attributeObserver=null,null===(t=this.pausedObserver)||void 0===t||t.destroy(),this.pausedObserver=null,null===(r=this.bufferingObserver)||void 0===r||r.destroy(),this.bufferingObserver=null)}},{key:"destroy",value:function(){this.disable(),this.yaspMediaElement=null,this.notifyCallback=null}},{key:"handleLoop",value:function(e){this.notify("updateLoop",e)}}])&&xt(t.prototype,r),n&&xt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Zo=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Bt(Ct(n=o.call(this,e,r)),"intervalWatcher",null),Bt(Ct(n),"videoSizeObserver",null),Bt(Ct(n),"videoSizeSensor",null),Bt(Ct(n),"objectFitObserver",null),Bt(Ct(n),"handleIntervalUpdate",(function(e,t){switch(e){case"frames":return void n.handleFrames(t);case"devicePixelRatio":return void n.handleDevicePixelRatio(t)}})),Bt(Ct(n),"handleVideoResize",(function(){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateVideoSize",{height:Math.max(Math.floor(n.yaspMediaElement.videoHeight)),width:Math.max(Math.floor(n.yaspMediaElement.videoWidth))})})),Bt(Ct(n),"handleResize",(function(e,t){if(null===n.yaspMediaElement)throw new Error("Unexpected subscription call after destroy");n.notify("updateContainerSize",{height:Math.max(Math.floor(t),0),width:Math.max(Math.floor(e),0)})})),Bt(Ct(n),"handleObjectFit",(function(e){n.notify("updateObjectFit",e)})),n.yaspMediaElement=e,n.intervalWatcher=new jo(n.yaspMediaElement,n.handleIntervalUpdate),n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dt(e,t)}(t,e);var r,n,i,o=Nt(t);return r=t,(n=[{key:"enable",value:function(){var e=this;if(null!==this.intervalWatcher){Lt(Ft(t.prototype),"enable",this).call(this),this.intervalWatcher.enable(),this.videoSizeObserver=new bo(this.yaspMediaElement,this.handleVideoResize),this.videoSizeSensor=new Mo(this.yaspMediaElement),this.videoSizeSensor.onResize.add((function(t){var r=t.width,n=t.height;return e.handleResize(r,n)})),this.objectFitObserver=new Co(this.yaspMediaElement),this.objectFitObserver.onChange(this.handleObjectFit);var r=this.videoSizeSensor.getSize();this.handleResize(r.width,r.height)}}},{key:"disable",value:function(){var e,r,n;null!==this.intervalWatcher&&(Lt(Ft(t.prototype),"disable",this).call(this),this.intervalWatcher.disable(),null===(e=this.videoSizeSensor)||void 0===e||e.destroy(),null===(r=this.videoSizeObserver)||void 0===r||r.destroy(),this.videoSizeObserver=null,null===(n=this.objectFitObserver)||void 0===n||n.destroy(),this.objectFitObserver=null)}},{key:"destroy",value:function(){var e;Lt(Ft(t.prototype),"destroy",this).call(this),null===(e=this.intervalWatcher)||void 0===e||e.destroy(),this.intervalWatcher=null}},{key:"handleFrames",value:function(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateFrames",e)}},{key:"handleDevicePixelRatio",value:function(e){if(null===this.yaspMediaElement)throw new Error("Unexpected notification call after destroy");this.notify("updateDevicePixelRatio",e)}}])&&At(r.prototype,n),i&&At(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}($o),Xo=r(93559),Jo=r.n(Xo),Qo=r(27794),ea=(0,Qo.t)(Object.getPrototypeOf)?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__||Object.prototype},ta=r(17360),ra=r(83361),na=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Gt(this,"externalEventTarget",new Xi.Z),Gt(this,"internalEventTarget",new Xi.Z),t({addEventListener:this.internalEventTarget.addEventListener.bind(this.internalEventTarget),removeEventListener:this.internalEventTarget.removeEventListener.bind(this.internalEventTarget),postMessage:function(e){var t=new MessageEvent("message",{data:e});ra.resolve().then((function(){return r.externalEventTarget.dispatchEvent(t)}))}})}var t,r,n;return t=e,(r=[{key:"addEventListener",value:function(e,t,r){this.externalEventTarget.addEventListener(e,t,r)}},{key:"removeEventListener",value:function(e,t,r){this.externalEventTarget.removeEventListener(e,t,r)}},{key:"terminate",value:function(){}},{key:"postMessage",value:function(e){this.internalEventTarget.dispatchEvent(new MessageEvent("message",{data:e}))}}])&&Ut(t.prototype,r),n&&Ut(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ia=function(){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{}};return t[n](i,i.exports,e),i.exports}var t=ENTRY_MODULE,r={};e.m=t,e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.g=function(){if("[object Object]"===Object.prototype.toString.call(globalThis))return globalThis;try{return this||new Function("return this")()}catch(e){if("[object Object]"===Object.prototype.toString.call(window))return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n=e(ENTRY_MODULE);return n.default||n};ia.toString();var oa=r(49257),aa=r(89501),ua=r(77521),ca=r(83361),sa=r(83361),la=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Xt(this,"workerPromise",void 0),Xt(this,"handleTerminate",void 0),this.workerPromise=function e(t){var r,n=t.inline,i=t.path,o=t.workerInternal,a=t.workerConfig;if(!n)try{r=Wt(i),(0,Qo.t)(r.constructor)||(n=!0,r.terminate())}catch(l){n=!0}n&&(r=new na(o));var u=new aa.A((function(e){r.postMessage(e,(0,ua._)(e))})),c=!1,s=new ca((function(t,s){var l=u.request({method:"initWorker",params:a}),f=function(u){c||n?console.error(u):(h(),r.terminate(),t(e({inline:!0,workerInternal:o,path:i,workerConfig:a})))},h=function(){r.removeEventListener("error",f)};l.then((function(){c=!0,h(),t({worker:r,rpc:u})})).catch(f),r.addEventListener("error",f),r.addEventListener("message",(function(e){u.handleMessage(e)}))}));return(0,oa.v)(s),s}({inline:!t.useWebWorker,path:17360,workerInternal:ta.Z,workerConfig:t.workerConfig}),this.handleTerminate=t.onTerminate}var t,r,n,i,o;return t=e,(r=[{key:"postMessage",value:(i=Kt().mark((function e(){var t,r,n=arguments;return Kt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.workerPromise;case 2:t=e.sent,(r=t.worker).postMessage.apply(r,n);case 5:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new sa((function(r,n){function o(e){$t(u,r,n,o,a,"next",e)}function a(e){$t(u,r,n,o,a,"throw",e)}var u=i.apply(e,t);o(void 0)}))},function(){return o.apply(this,arguments)})},{key:"sendEvent",value:function(e){var t=e.method,r=e.params;return this.workerPromise.then((function(e){return e.rpc.sendEvent({method:t,params:r})}))}},{key:"request",value:function(e){var t=e.method,r=e.params;return this.workerPromise.then((function(e){return e.rpc.request({method:t,params:r})}))}},{key:"registerRpcHandler",value:function(e,t){var r=this;return this.workerPromise.then((function(r){return r.rpc.registerHandler(e,t)})),function(){return r.removeRpcHandler(e,t)}}},{key:"registerStaticRpcHandler",value:function(e,t){var r=this;return this.workerPromise.then((function(r){return r.rpc.registerStaticHandler(e,t)})),function(){return r.removeRpcHandler(e,t)}}},{key:"removeRpcHandler",value:function(e,t){this.workerPromise.then((function(r){return r.rpc.removeHandler(e,t)}))}},{key:"destroy",value:function(){var e=this;this.workerPromise.then((function(t){var r=t.worker,n=t.rpc;r.terminate(),n.destroy(),e.handleTerminate()}))}}])&&Zt(t.prototype,r),n&&Zt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),fa=r(42630),ha=r(99628),da=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qt(this,"onTick",void 0),Qt(this,"cancelPending",void 0),this.onTick=t,this.cancelPending=null}var t,r,n;return t=e,(r=[{key:"tickAfter",value:function(e){var t=this;this.stop();var r=!0,n=null;return this.cancelPending=function(){self.clearTimeout(n),r=!1},n=self.setTimeout((function(){r&&t.onTick()}),1e3*e),this}},{key:"stop",value:function(){this.cancelPending&&(this.cancelPending(),this.cancelPending=null)}}])&&Jt(t.prototype,r),n&&Jt(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),pa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),tr(this,"onTick",void 0),tr(this,"ticker",void 0),this.onTick=t,this.ticker=null}var t,r,n;return t=e,(r=[{key:"tickNow",value:function(){return this.stop(),this.onTick(),this}},{key:"tickAfter",value:function(e){var t=this;return this.stop(),this.ticker=new da((function(){t.onTick()})).tickAfter(e),this}},{key:"tickEvery",value:function(e){var t=this;return this.stop(),this.ticker=new da((function(){var r;null===(r=t.ticker)||void 0===r||r.tickAfter(e),t.onTick()})).tickAfter(e),this}},{key:"stop",value:function(){this.ticker&&(this.ticker.stop(),this.ticker=null)}}])&&er(t.prototype,r),n&&er(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ya=function(){function e(t,r,n,i,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),or(this,"media",void 0),or(this,"timeline",void 0),or(this,"config",void 0),or(this,"stallDetector",void 0),or(this,"onEvent",void 0),or(this,"unsubscribe",void 0),or(this,"seekingEventReceived",void 0),or(this,"prevReadyState",void 0),or(this,"didFireLargeGap",void 0),or(this,"hadSegmentAppended",void 0),or(this,"locked",void 0),or(this,"gapJumpTimer",void 0),this.media=t,this.timeline=r,this.config=n,this.stallDetector=i,this.onEvent=o,this.seekingEventReceived=!1,this.prevReadyState=t.readyState,this.didFireLargeGap=!1,this.hadSegmentAppended=!1,this.locked=!1,this.unsubscribe=(0,io.O)(t,"waiting",(function(){return a.onPollGapJump()}),!1),this.gapJumpTimer=new pa((function(){a.onPollGapJump()})).tickEvery(.25)}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null),null!==this.gapJumpTimer&&(this.gapJumpTimer.stop(),this.gapJumpTimer=null),this.stallDetector&&(this.stallDetector.release(),this.stallDetector=null),this.onEvent=null,this.timeline=null,this.media=null}},{key:"configure",value:function(e){this.config=nr(nr({},this.config),e)}},{key:"onSegmentAppended",value:function(){this.hadSegmentAppended=!0,this.onPollGapJump()}},{key:"onSeeking",value:function(){this.seekingEventReceived=!0,this.hadSegmentAppended=!1,this.didFireLargeGap=!1}},{key:"lock",value:function(){this.locked=!0}},{key:"unlock",value:function(){this.locked=!1}},{key:"onPollGapJump",value:function(){var t,r,n,i,o;if(this.media&&(!this.locked||!(0,ha.RW)("yasp_no_source_abort_on_fake_seek"))&&0!==this.media.readyState){if(this.media.seeking){if(!this.seekingEventReceived)return}else this.seekingEventReceived=!1;if((!this.media.paused||null!==(t=this.config)&&void 0!==t&&t.jumpOnPause)&&(this.media.readyState!==this.prevReadyState&&(this.didFireLargeGap=!1,this.prevReadyState=this.media.readyState),null===(r=this.stallDetector)||void 0===r||!r.poll())){var a=(null===(n=this.config)||void 0===n?void 0:n.smallGapLimit)||.5,u=(null===(i=this.config)||void 0===i?void 0:i.largeGapLimit)||1/0,c=this.media.currentTime,s=this.media.buffered,l=Wo(s,c);if(null!==l&&(0!==l||this.hadSegmentAppended)){var f=s.start(l);if(!(f>=((null===(o=this.timeline)||void 0===o?void 0:o.getSeekRangeEnd())||0))){var h=f-c,d=h<=a,p=!1;if(!(h<e.BROWSER_GAP_TOLERANCE)){if(!d&&!this.didFireLargeGap){var y,v;this.didFireLargeGap=!0;for(var m=[],g=0;g<this.media.buffered.length;g++)m.push([this.media.buffered.start(g),this.media.buffered.end(g)]);null===(y=this.onEvent)||void 0===y||y.call(this,{currentTime:c,gapSize:h,bufferedRanges:m}),null!==(v=this.config)&&void 0!==v&&v.jumpLargeGaps&&h<u&&(p=!0)}(d||p)&&(this.media.currentTime=f)}}}}}}}])&&ir(t.prototype,r),n&&ir(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();or(ya,"BROWSER_GAP_TOLERANCE",.001);var va=r(95594),ma=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"isBuffered",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e||!e.length)return!1;if(1===e.length&&e.end(0)-e.start(0)<1e-6)return!1;if(t>e.end(e.length-1))return!1;for(var n=0;n<e.length;n++)if(t+r>=e.start(n)&&t-r<=e.end(n))return!0;return!1}},{key:"getTimeRanges",value:function(e){for(var t=[],r=0;r<e.length;r++)try{t.push({start:e.start(r),end:e.end(r)})}catch(n){}return(0,va.l)(t)}}],(r=null)&&ar(t.prototype,r),n&&ar(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ga=r(41838),ba=r(89225),wa=Math.max(5,0),_a=r(82640),Ea=r(69780),Oa=Date&&(0,Ea.m)(Date.now)?function(){return Date.now()}:function(){return(new Date).getTime()},Sa=r(57740),ka=(0,r(20724).b)()?9e5:864e5,Ta=["ewma","hlsjs"],Ra=r(2428),xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=(0,Ra.i)(e);return t.includes("CrKey")}(),Pa=r(69864),ja=Mi||Ci||Ni,Aa=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Di.Z,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;fr(this,e),dr(this,"video",void 0),dr(this,"wasMakingProgress",void 0),dr(this,"value",void 0),dr(this,"lastUpdateSeconds",void 0),dr(this,"didJump",void 0),dr(this,"didTryToEscape",void 0),dr(this,"didTryToEscapeSeekingStucking",void 0),dr(this,"skipOffset",void 0),dr(this,"stallThresholdSeconds",void 0),dr(this,"extraThresholdSeconds",void 0),dr(this,"onEvent",void 0),dr(this,"makePP",(function(){r.video&&(r.video.pause(),(0,oa.v)(r.video.play()))})),dr(this,"handleTVPoll",(function(e,t){return!!r.video&&(r.video.seeking?r.tryToEscapeSeekingStucking(e):e>=r.stallThresholdSeconds&&t&&!r.didJump?(r.onStall(),r.didJump=!0,r.value=r.video.currentTime,r.onEvent(),!0):!(!(e>=r.extraThresholdSeconds&&t)||r.didTryToEscape)&&r.tryToEscapeTVStucking())})),dr(this,"handlePoll",(function(e,t){if(!r.video)return!1;var n=e>=r.stallThresholdSeconds&&t&&!r.didJump;return n&&(r.onStall(),r.didJump=!0,r.value=r.video.currentTime,r.onEvent()),n})),this.video=t,this.wasMakingProgress=this.shouldBeMakingProgress(),this.value=null===t||void 0===t?void 0:t.currentTime,this.lastUpdateSeconds=Date.now()/1e3,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1,this.skipOffset=i,this.stallThresholdSeconds=o,this.extraThresholdSeconds=2*o,this.onEvent=n}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.video=null,this.onEvent=Di.Z}},{key:"onStall",value:function(){this.video&&(Ci||Ni||xa||!this.skipOffset?this.makePP():this.video.currentTime+=this.skipOffset)}},{key:"poll",value:function(){if(this.video){var e=this.shouldBeMakingProgress(),t=this.video.currentTime,r=Date.now()/1e3;(this.value!==t||this.wasMakingProgress!==e)&&(this.lastUpdateSeconds=r,this.value=t,this.wasMakingProgress=e,this.didJump=!1,this.didTryToEscape=!1,this.didTryToEscapeSeekingStucking=!1);var n=r-this.lastUpdateSeconds;return(ja?this.handleTVPoll:this.handlePoll)(n,e)}}},{key:"shouldBeMakingProgress",value:function(){return!!this.video&&!this.video.paused&&0!==this.video.playbackRate&&0!==this.video.buffered.length&&this.hasContentFor(this.video.currentTime)}},{key:"tryToEscapeTVStucking",value:function(){var e=this;if(!this.video)return!1;if(Mi)return!(this.video.readyState<this.video.HAVE_ENOUGH_DATA)&&(this.didTryToEscape=!0,setTimeout((function(){var t;null!==(t=e.video)&&void 0!==t&&t.paused||e.makePP()}),2e3),!0);if(Ni){var t=cr((0,Yo.w)(this.video),this.video.currentTime);if(!t||t<7.5)return!1;if(this.video.readyState===this.video.HAVE_METADATA)return this.video.currentTime+=this.skipOffset,this.value=this.video.currentTime,this.didTryToEscape=!0,!0}return!1}},{key:"tryToEscapeSeekingStucking",value:function(e){return!(!this.video||this.didTryToEscapeSeekingStucking||!this.video.paused||e<this.extraThresholdSeconds)&&this.video.readyState===this.video.HAVE_METADATA&&(this.video.currentTime+=this.skipOffset,this.value=this.video.currentTime,this.didTryToEscapeSeekingStucking=!0,!0)}},{key:"hasContentFor",value:function(e){if(!this.video)return!1;var t,r=sr((0,Yo.w)(this.video));try{for(r.s();!(t=r.n()).done;){var n=t.value,i=n.start,o=n.end;if(!(e<i-.1)&&!(e>o-.5))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}}])&&hr(t.prototype,r),n&&hr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),La=r(67709),Ia=r(66696),Da=r(84780),Na=r(86589),Ma=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mr(this,"media",null),mr(this,"wasNativeProgressEmited",{default:!1,onPause:!1}),mr(this,"interval",null),mr(this,"lastBufferedEnd",0),mr(this,"onPoll",(function(){if(r.media){var e=r.media.buffered.length;if(e){var t=r.media.buffered.end(e-1);r.lastBufferedEnd<t&&r.emitProgress(),r.lastBufferedEnd=t}else r.lastBufferedEnd=0}})),mr(this,"onProgress",(function(e){r.media&&("detail"in e&&e.detail.synthetic||(r.media.paused?r.wasNativeProgressEmited.onPause=!0:r.wasNativeProgressEmited.default=!0,r.shouldStopPolling()&&r.release()))})),this.media=t,t.addEventListener("progress",this.onProgress),this.interval=setInterval(this.onPoll,250)}var t,r,n;return t=e,(r=[{key:"shouldStopPolling",value:function(){return(0,Na.z)(this.wasNativeProgressEmited).every(Boolean)}},{key:"release",value:function(){var e;null===(e=this.media)||void 0===e||e.removeEventListener("progress",this.onProgress),this.interval&&(clearInterval(this.interval),this.interval=null),this.media=null}},{key:"emitProgress",value:function(){var e,t;this.shouldStopPolling()||(this.wasNativeProgressEmited.default||null!==(e=this.media)&&void 0!==e&&e.paused)&&(this.wasNativeProgressEmited.onPause||null===(t=this.media)||void 0===t||!t.paused)||this.dispatchSyntheticProgress()}},{key:"dispatchSyntheticProgress",value:function(){var e;null===(e=this.media)||void 0===e||e.dispatchEvent(new CustomEvent("progress",{detail:{synthetic:!0}}))}}])&&vr(t.prototype,r),n&&vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ca={}.toString,Fa=/\[object (\w+)\]/,Ba=Date&&gr(Date.now)?function(){return Date.now()}:function(){return(new Date).getTime()},Ua="undefined"===typeof window?void 0:window.performance,Ga=Ua&&gr(Ua.now),Ha=Ua&&Ua.timing&&Ua.timing.navigationStart,Va=Ua&&Ua.timeOrigin?Ua.timeOrigin:Ha?Ua.timing.navigationStart:Ba(),qa=0,Ya=function(){return Ga?Ua.now():(e=Ba()-Va,qa=Math.max(e,qa));var e},Wa=r(20989),za=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxAttempts=r,wr(this,"remainingAttempts",0),wr(this,"originTime",0),wr(this,"targetTime",0),wr(this,"timer",new pa((function(){n.onTick()}))),wr(this,"media",void 0),this.media=t}var t,r,n;return t=e,(r=[{key:"release",value:function(){this.timer&&(this.timer.stop(),this.timer=null),this.media=null}},{key:"moveTo",value:function(e){this.media&&this.timer&&(this.originTime=this.media.currentTime,this.targetTime=e,this.remainingAttempts=this.maxAttempts,this.media.currentTime=e,this.timer.tickEvery(.1))}},{key:"onTick",value:function(){this.media&&this.timer&&(this.remainingAttempts<=0?this.timer.stop():this.media.currentTime===this.originTime?(this.media.currentTime=this.targetTime,this.remainingAttempts--):this.timer.stop())}}])&&br(t.prototype,r),n&&br(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ka=r(17986),$a=r(40097),Za=r(33263),Xa=["play","playing","pause","error","waiting","stalled","suspend","ended","loadstart","abort","loadedmetadata","loadeddata","canplay","canplaythrough","durationchange","seeking","seeked","encrypted","ratechange"],Ja=["error","waiting","seeking","seeked","canplay","encrypted"],Qa=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.media=t,this.getDump=r,Er(this,"history",new Za.d($a.K)),Er(this,"handleEvent",(function(e){var t=e.type,r={event:t,timestamp:Date.now()};Ja.includes(t)&&(r.dump=n.getDump()),n.history.push(r)})),this.subscribeToEvents()}var t,r,n;return t=e,(r=[{key:"subscribeToEvents",value:function(){var e=this;Xa.forEach((function(t){e.media.addEventListener(t,e.handleEvent)}))}},{key:"release",value:function(){var e=this;Xa.forEach((function(t){e.media.removeEventListener(t,e.handleEvent)}))}},{key:"getEventHistory",value:function(){return this.history.toArray()}},{key:"pushCustomEvent",value:function(e){this.history.push(e)}}])&&_r(t.prototype,r),n&&_r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),eu=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kr(this,"yaspMedia",void 0),kr(this,"detachedSrcInternal",void 0),kr(this,"airplaySrcInternal",void 0),kr(this,"airplayEnabled",void 0),kr(this,"lastSetSrcTime",void 0),kr(this,"onAirplayStateChange",void 0),this.airplayEnabled=t.webkitCurrentPlaybackTargetIsWireless,this.onAirplayStateChange=r,this.yaspMedia=t,this.setUpAirplay()}var t,r,n;return t=e,(r=[{key:"airplaySrc",get:function(){return this.airplaySrcInternal},set:function(e){this.airplaySrcInternal=e,this.airplayEnabled&&e&&(this.lastSetSrcTime=Ya(),this.yaspMedia.src=e,this.yaspMedia.play())}},{key:"detachedSrc",get:function(){return this.detachedSrcInternal},set:function(e){this.detachedSrcInternal=e}},{key:"setUpAirplay",value:function(){var e,t=this;this.yaspMedia.setAttribute("x-webkit-airplay","allow"),this.yaspMedia.disableRemotePlayback=!0,this.yaspMedia.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(function(r){var n=Ya();if(!(t.lastSetSrcTime&&n-t.lastSetSrcTime<3e3)&&!(e&&n-e<2e3)){e=Ya();var i=t.yaspMedia.currentTime;t.yaspMedia.disableRemotePlayback?(t.yaspMedia.disableRemotePlayback=!1,t.onAirplayStateChange(!0),t.airplayEnabled=!0,t.detachedSrc=t.yaspMedia.src,t.yaspMedia.src=t.airplaySrcInternal,t.yaspMedia.addEventListener("loadedmetadata",(function(){t.yaspMedia.currentTime=i,t.yaspMedia.play()}))):(t.airplayEnabled=!1,t.onAirplayStateChange(!1),t.yaspMedia.disableRemotePlayback=!0,t.yaspMedia.src=t.detachedSrc,t.yaspMedia.addEventListener("loadedmetadata",(function(){t.yaspMedia.currentTime=i,t.yaspMedia.play()})))}}))}}])&&Sr(t.prototype,r),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),tu=r(83361),ru=r(83361),nu=Vr(HTMLVideoElement),iu=function(e){function t(){var e;Zr(this,t);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return an(nn(e=f.call.apply(f,[this].concat(n))),"videoTrackList",void 0),an(nn(e),"unsubscribeTextTracksChange",void 0),an(nn(e),"unsubscribeTextTracksAdd",void 0),an(nn(e),"isLowLatency",!1),an(nn(e),"serverTimeInfo",void 0),an(nn(e),"streamEndTime",void 0),e}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&en(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f=tn(t);return r=t,n=[{key:"videoTracks",get:function(){var e;return this.yaspSrc?this.videoTrackList:null!==(e=Jr(on(t.prototype),"videoTracks",this))&&void 0!==e?e:this.videoTrackList}},{key:"canPlayType",value:function(e){return t.isSupported()&&"application/dash+xml"===e?Jr(on(t.prototype),"canPlayType",this).call(this,'video/mp4; codecs="avc1.42E01E"'):Jr(on(t.prototype),"canPlayType",this).call(this,e)}},{key:"addEventListener",value:function(e,r,n){Jr(on(t.prototype),"addEventListener",this).call(this,e,r,n)}},{key:"removeEventListener",value:function(e,r,n){Jr(on(t.prototype),"removeEventListener",this).call(this,e,r,n)}},{key:"yaspRequestDebugInfo",value:(l=$r(Yr().mark((function e(){var r,n,i,o;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.videoTracks,n=this.audioTracks,i=this.textTracks,o={videoElement:{audioTracks:(0,uo.w)(n),videoTracks:(0,uo.w)(r),textTracks:(0,uo.w)(i)}},e.t0=zr,e.t1=zr({},o),e.next=6,Jr(on(t.prototype),"yaspRequestDebugInfo",this).call(this);case 6:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"detach",value:(s=$r(Yr().mark((function e(){var r,n;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jr(on(t.prototype),"detach",this).call(this);case 2:null===(r=this.unsubscribeTextTracksChange)||void 0===r||r.call(this),this.unsubscribeTextTracksChange=void 0,null===(n=this.unsubscribeTextTracksAdd)||void 0===n||n.call(this),this.unsubscribeTextTracksAdd=void 0;case 6:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"yaspPreloadSrc",value:(c=$r(Yr().mark((function e(r,n){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.preloadSrc(r,n));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})},{key:"yaspReleaseSrc",value:(u=$r(Yr().mark((function e(r){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.releaseSrc(r));case 1:case"end":return e.stop()}}),e)}))),function(e){return u.apply(this,arguments)})},{key:"yaspSetVideoElementSizes",value:function(e){t.setVideoElementSizes(this.src,e)}},{key:"yaspDispatchEvent",value:function(e,r,n){var i=new CustomEvent(e,zr({detail:r},n));Jr(on(t.prototype),"dispatchEvent",this).call(this,i)}},{key:"initVideoTrackList",value:function(){var e=this;if(void 0===this.videoTrackList){var r=new ro;r.addEventListener("change",(function(){var n=r[r.selectedIndex].id;t.configureSource(e.src,{tracks:{videoTrackId:n}});var i=new Event("change");(0,no.Y)((function(){Jr(on(t.prototype),"videoTracks",e).dispatchEvent(i)}))})),this.videoTrackList=r}}},{key:"initTextTrackList",value:function(){var e=this;Mi&&(this.unsubscribeTextTracksAdd=(0,io.O)(this.textTracks,"addtrack",(function(t){var r,n=t.track;"empty-yasp-text-track"===n.id&&"showing"===n.mode&&(n.mode="disabled",null===(r=e.findEmptyTextTrack())||void 0===r||r.remove())}))),this.unsubscribeTextTracksChange=(0,io.O)(this.textTracks,"change",(function(r){for(var n=r.target,i={source:e.yaspSrc,track:null},o=n,a=0;a<o.length;a++){var u,c=o[a];"empty-yasp-text-track"!==c.id?"disabled"!==c.mode&&(t.removeCues(c),i.track={id:c.id,label:c.label,language:c.language,kind:c.kind}):null===(u=e.findEmptyTextTrack())||void 0===u||u.remove()}t.configureSource(e.src,{tracks:{textTrack:i.track}})}))}},{key:"findEmptyTextTrack",value:function(){return this.querySelector('track[id="'.concat("empty-yasp-text-track",'"]'))}},{key:"registerVideoRpcHandlers",value:function(){var e=this;this.registerRpcHandlerForInstance("changeVideoTracks",(function(t){var r=t.added;return t.removed.forEach((function(t){var r,n,i=null===(r=e.videoTrackList)||void 0===r?void 0:r.getTrackById(t);i&&(null===(n=e.videoTrackList)||void 0===n||n.removeTrack(i))})),r.forEach((function(t){var r,n,i,o=t.source,a=t.track,u=null===(r=e.videoTrackList)||void 0===r?void 0:r.getTrackById(a.id);Or(e.yaspSrc,o)&&u||null===(n=e.videoTrackList)||void 0===n||n.addTrack(new to({selected:a.selected,width:a.width,height:a.height,bitrate:a.bitrate,label:a.label,language:null!==(i=a.language)&&void 0!==i?i:void 0,frameRate:a.frameRate,id:a.id,kind:a.kind}))})),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("addTextTrack",(function(t){var r=e.getElementsByTagName("track"),n=(0,uo.w)(r).some((function(e){return e.id===t.track.id}));if(Or(e.yaspSrc,t.source)&&n)return{done:!0,value:void 0};if(Mi&&!e.findEmptyTextTrack()){var i=document.createElement("track");i.setAttribute("kind",t.track.kind),i.setAttribute("default","true"),i.setAttribute("id","empty-yasp-text-track"),i.src=oo,e.appendChild(i)}var o=document.createElement("track");return o.setAttribute("kind",t.track.kind),o.setAttribute("label",t.track.label),o.setAttribute("srclang",t.track.language),o.setAttribute("id",t.track.id),o.src=oo,e.appendChild(o),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("cuesAdded",(function(t){t.source;for(var r,n=t.cues,i=t.label,o=0;o<e.textTracks.length;o++)e.textTracks[o].label===i&&(r=e.textTracks[o]);return r?(n.forEach((function e(t){var n=new VTTCue(t.startTime,t.endTime,t.payload);r.addCue(n),(t.nestedCues||[]).forEach(e)})),{done:!0,value:void 0}):{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeSelectedVideoTrack",(function(t){if(!e.videoTrackList)return{done:!0,value:void 0};var r=e.videoTrackList.getTrackById(t.trackId);return r?(r.selected=!0,{done:!0,value:void 0}):{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeVideoType",(function(t){return e.yaspDispatchEvent("yasp-videoTypeChange",t.videoType,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("changeIsLowLatency",(function(t){return e.isLowLatency=t.isLowLatency,{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateTargetLatency",(function(t){return e.yaspDispatchEvent("yasp-updateTargetLatency",t.latency,{cancelable:!0}),{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateServerTime",(function(t){return e.serverTimeInfo?(e.serverTimeInfo.time=t.time,e.serverTimeInfo.getTime=(0,ao.u)()):e.serverTimeInfo={time:t.time,getTime:(0,ao.u)()},{done:!0,value:void 0}})),this.registerRpcHandlerForInstance("updateStreamEndTime",(function(t){return e.streamEndTime=t.time,{done:!0,value:void 0}}))}},{key:"initVideoStateNotifier",value:function(){var e=this;this.mediaStateNotifier=new Zo(this,(function(r,n){null!==e.yasp&&t.worker.postMessage({jsonrpc:"2.0",method:r,sourceKey:(0,go.Hi)(e.yaspSrc),params:n})})),this.mediaStateNotifier.enable()}},{key:"getServerTime",value:function(){if(this.serverTimeInfo&&this.serverTimeInfo.time)return(this.serverTimeInfo.time+this.serverTimeInfo.getTime())/1e3}},{key:"getStreamEndTime",value:function(){return this.streamEndTime?this.streamEndTime/1e3:null}},{key:"isLowLatencyLive",value:function(){return this.isLowLatency}},{key:"clearTextTrackList",value:function(){for(var e=0;e<this.textTracks.length;e++)this.textTracks[e].mode="disabled";for(var t=this.getElementsByTagName("track");t.length;)t[0].remove()}},{key:"clearTrackLists",value:function(){Jr(on(t.prototype),"clearTrackLists",this).call(this),q(this.videoTrackList),this.clearTextTrackList()}},{key:"setSrc",value:function(e){Jr(on(t.prototype),"setSrc",this).call(this,e),mo(e)&&t.setDevicePixelRatioForSource(e)}},{key:"restore",value:function(){Jr(on(t.prototype),"restore",this).call(this),this.streamEndTime=void 0,this.serverTimeInfo=void 0,this.isLowLatency=!1}}],i=[{key:"setDevicePixelRatioForSource",value:function(e){t.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:Ii(window)}}).catch(Di.Z),Wi(window).then((function(r){return t.worker.request({method:"setDevicePixelRatio",params:{source:e,devicePixelRatio:r}})})).catch(Di.Z)}},{key:"attach",value:function(e,r){if(t.isYaspVideoElement(e))return e;var n=nu.attachElement(t,e,r);return n.registerVideoRpcHandlers(),n.initVideoStateNotifier(),n.initVideoTrackList(),n.initTextTrackList(),nu.messenger.emit("yasp-event",{name:"YaspAttached",data:void 0}),n}},{key:"isYaspVideoElement",value:function(e){return!0===e.yasp}},{key:"preloadSrc",value:(a=$r(Yr().mark((function e(r,n){var i,o;return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=n.yaspSourceConfig)?t.configureSource(r,o):t.shouldSaveBandwidth&&t.worker.sendEvent({method:"configureSource",params:{source:r,config:{defaultBandwidthEstimate:t.getDefaultBandwidthEstimate()}}}),t.setDevicePixelRatioForSource(r),e.abrupt("return",t.worker.request({method:"load",params:{source:r,contentId:null===o||void 0===o||null===(i=o.offlineParams)||void 0===i?void 0:i.contentId}}));case 4:case"end":return e.stop()}}),e)}))),function(e,t){return a.apply(this,arguments)})},{key:"releaseSrc",value:(o=$r(Yr().mark((function e(r){return Yr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.worker.request({method:"destroy",params:{source:r,reason:"ExternalApi"}}).catch(fo.warn));case 1:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"setVideoElementSizes",value:function(e,r){mo(e)&&t.configureSource(e,{videoSizes:r})}},{key:"getStats",value:function(){return zr(zr({},nu.getStats()),{},{maxCapAllowedVideoTrack:t.maxCapAllowedVideoTrack})}},{key:"worker",get:function(){var e=nu.worker;return e.registerStaticRpcHandler("updateMaxCapAllowedVideoTrack",(function(e){return t.maxCapAllowedVideoTrack=e.maxCapAllowedVideoTrack,{done:!0,value:void 0}})),nu.worker.registerStaticRpcHandler("workerInited",(function(e){return t.sourceLimit=e.sourceLimit,{done:!0,value:e.sourceLimit}})),e}},{key:"removeCues",value:function(e){if(e.cues)for(var t=e.cues,r=t.length-1;r>=0;r--){var n=t[r];n&&e.removeCue(n)}}}],n&&Xr(r.prototype,n),i&&Xr(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(nu);an(iu,"maxCapAllowedVideoTrack",void 0),an(iu,"sourceLimit",null);var ou,au=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o.call(this,e,r)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sn(e,t)}(t,e);var r,n,i,o=ln(t);return r=t,n&&cn(r.prototype,n),i&&cn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r}($o),uu=r(83361),cu=r(81917),su=Vr(HTMLAudioElement),lu=function(e){function t(){return bn(this,t),u.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&On(e,t)}(t,e);var r,n,i,o,a,u=Sn(t);return r=t,n=[{key:"isSupportedSrc",value:function(e){return _n(Tn(t.prototype),"isSupportedSrc",this).call(this,e)||this.isSupportedAudioSrc(e)}},{key:"isSupportedAudioSrc",value:function(e){var t,r,n=new cu(e,"https://domain.com"),i=Boolean(n.searchParams.get("codec")),o=(r=e,"mp4"===(0,vo.lm)(r.toLocaleLowerCase())||"mp4"===(null===(t=n.searchParams.get("container"))||void 0===t?void 0:t.toLowerCase()));return i&&o}},{key:"initAudioStateNotifier",value:function(){var e=this;this.mediaStateNotifier=new au(this,(function(r,n){null!==e.yasp&&t.worker.postMessage({jsonrpc:"2.0",method:r,sourceKey:(0,go.Hi)(e.yaspSrc),params:n})})),this.mediaStateNotifier.enable()}},{key:"yaspRequestDebugInfo",value:(o=pn().mark((function e(){var r,n;return pn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.audioTracks,n={audioElement:{audioTracks:(0,uo.w)(r)}},e.t0=vn,e.t1=vn({},n),e.next=6,_n(Tn(t.prototype),"yaspRequestDebugInfo",this).call(this);case 6:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new uu((function(r,n){function i(e){gn(u,r,n,i,a,"next",e)}function a(e){gn(u,r,n,i,a,"throw",e)}var u=o.apply(e,t);i(void 0)}))},function(){return a.apply(this,arguments)})}],i=[{key:"attach",value:function(e,r){if(t.isYaspAudioElement(e))return n=new Error("Unexpected YaspAudioElement.attach(yaspAudioElement) call"),setTimeout((function(){throw n}),0),e;var n,i=su.attachElement(t,e,r);return i.initAudioStateNotifier(),su.messenger.emit("yasp-event",{name:"YaspAttached",data:void 0}),i}},{key:"isYaspAudioElement",value:function(e){return!0===e.yasp}}],n&&wn(r.prototype,n),i&&wn(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(su);!function(e){e.fairplay="fairplay",e.playready="playready",e.widevine="widevine",e.clearkey="clearkey",e.none="none"}(ou||(ou={}));var fu,hu,du=r(3309),pu=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]}],yu=r(19071),vu=r(58828),mu={error:"",isFatal:!1,helpLink:""},gu=r(48932),bu=r(49607);!function(e){e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.BUFFER_STALLED_ERROR="bufferStalledError",e.FRAG_PARSING_ERROR="fragParsingError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.PIPELINE_ERROR_DECODE="PIPELINE_ERROR_DECODE",e.DECODER_ERROR_NOT_SUPPORTED="DECODER_ERROR_NOT_SUPPORTED",e.BUFFER_APPEND_ERROR="bufferAppendError",e.MEDIA_ELEMENT_ERROR_FORMAT_ERROR="MEDIA_ELEMENT_ERROR: Format error",e.REMUX_ALLOC_ERROR="remuxAllocError",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.DEMUXER_ERROR_COULD_NOT_OPEN="DEMUXER_ERROR_COULD_NOT_OPEN",e.NS_ERROR_DOM_INVALID_STATE_ERR="NS_ERROR_DOM_INVALID_STATE_ERR",e.CHUNK_DEMUXER_ERROR_APPEND_FAILED="CHUNK_DEMUXER_ERROR_APPEND_FAILED",e.FAILED_TO_INIT_DECODER="Failed to init decoder",e.PIPELINE_ERROR_INITIALIZATION_FAILED="PIPELINE_ERROR_INITIALIZATION_FAILED",e.NS_ERROR_FAILURE="NS_ERROR_FAILURE",e.REQUEST_FAILED="2147500036: Request failed",e.PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED="PIPELINE_ERROR_EXTERNAL_RENDERER_FAILED",e.PIPELINE_ERROR_COULD_NOT_RENDER="PIPELINE_ERROR_COULD_NOT_RENDER",e.MEDIA_ELEMENT_ERROR_EMPTY_SRC_ATTRIBUTE="MEDIA_ELEMENT_ERROR: Empty src attribute",e.NS_ERROR_DOM_MEDIA_METADATA_ERR="NS_ERROR_DOM_MEDIA_METADATA_ERR",e.NS_ERROR_DOM_MEDIA_FATAL_ERR="NS_ERROR_DOM_MEDIA_FATAL_ERR",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.FRAG_LOAD_ERROR="fragLoadError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.LEVEL_LOAD_ERROR="levelLoadError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.FRAG_LOAD_TIME_OUT="fragLoadTimeOut",e.MANIFEST_LOAD_TIME_OUT="manifestLoadTimeOut",e.LEVEL_LOAD_TIME_OUT="levelLoadTimeOut",e.AUDIO_TRACK_LOAD_TIME_OUT="audioTrackLoadTimeOut",e.INTERNAL_EXCEPTION="internalException",e.ON_PLAYER_INIT_ERROR_INTERNAL="ON_PLAYER_INIT_ERROR_INTERNAL",e.UNABLE_TO_LOAD_PLAYER_IFRAME="UNABLE_TO_LOAD_PLAYER_IFRAME",e.ON_PLAYER_INIT_ERROR="ON_PLAYER_INIT_ERROR",e.LOADER_INIT_ERROR="LoaderInitError",e.UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT="UNABLE_TO_LOAD_PLAYER_INTERNAL_SCRIPT",e.FAILED_TO_DOWNLOAD_DEBUG_INFO="FAILED_TO_DOWNLOAD_DEBUG_INFO",e.PLAYER_CONTAINER_NOT_FOUND="PLAYER_CONTAINER_NOT_FOUND",e.KEY_LOAD_ERROR="keyLoadError",e.FEATURE_HANDLER_ERROR="FEATURE_HANDLER_ERROR",e.INVALID_CONFIG_ELEMENT_IN_CREATE_PLAYER="InvalidConfigElementInCreatePlayer",e.INVALID_CONFIG_LANG_IN_CREATE_PLAYER="InvalidConfigLangInCreatePlayer",e.INVALID_CONFIG_IN_CREATE_PLAYER="InvalidConfigInCreatePlayer",e.INVALID_CONFIG_IN_SET_SOURCE="InvalidConfigInSetSource",e.INVALID_CONFIG_IN_SOURCE_UPDATE="InvalidConfigInSourceUpdate",e.INVALID_LOG_URL="InvalidLogUrl",e.IFRAME_DOES_NOT_ALLOW_DRM="IframeDoesNotAllowDrm",e.DRM_IS_NOT_ALLOWED="DrmIsNotAllowed",e.EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="EXTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR="INTERNAL_POST_MESSENGER_SEND_MESSAGE_ERROR",e.LOAD_SKIN_ERROR="LOAD_SKIN_ERROR",e.INSERT_INTO_WITH_SECURE_FRAME="INSERT_INTO_WITH_SECURE_FRAME",e.PLAY_AD_VIEWERS_WITH_SECURE_FRAME="PLAY_AD_VIEWERS_WITH_SECURE_FRAME",e.ELEMENT_NOT_IN_DOM="ELEMENT_NOT_IN_DOM",e.ERROR_SCREEN_LOAD_ERROR="ERROR_SCREEN_LOAD_ERROR",e.REQUEST_SOURCE_ERROR="REQUEST_SOURCE_ERROR",e.SCREEN_WAKE_LOCK_ERROR="SCREEN_WAKE_LOCK_ERROR",e.YASP_UNEXPECTED_METHOD_CALL="YASP_UNEXPECTED_METHOD_CALL"}(fu||(fu={})),function(e){e.DEFAULT_ERROR="DEFAULT_ERROR",e.BROADCAST_AD_BLOCK_INIT_ERROR="BROADCAST_AD_BLOCK_INIT_ERROR",e.AD_TYPE_IS_NOT_RECOGNIZED="AD_TYPE_IS_NOT_RECOGNIZED",e.INVALID_METADATA="INVALID_METADATA",e.INVALID_STREAM_URL="INVALID_STREAM_URL",e.UNSUPPORTED_MEDIA_TYPE="UNSUPPORTED_MEDIA_TYPE",e.SCRIPT_INIT_ERROR="SCRIPT_INIT_ERROR",e.MPD_WIDEVINE_CERT_LOAD_ERROR="MPD_WIDEVINE_CERT_LOAD_ERROR",e.NATIVE_HLS_NOT_SUPPORTED_ERROR="NATIVE_HLS_NOT_SUPPORTED_ERROR",e.HLS_JS_NOT_SUPPORTED_ERROR="HLS_JS_NOT_SUPPORTED_ERROR",e.ON_TICK_ERROR="ON_TICK_ERROR",e.FAIRPLAY_NOT_SUPPORTED="FAIRPLAY_NOT_SUPPORTED",e.FAIRPLAY_CERT_LOAD_ERROR="FAIRPLAY_CERT_LOAD_ERROR",e.FAIRPLAY_CREATE_MEDIA_KEYS_ERROR="FAIRPLAY_CREATE_MEDIA_KEYS_ERROR",e.FAIRPLAY_CREATE_KEY_SESSION_ERROR="FAIRPLAY_CREATE_KEY_SESSION_ERROR",e.FAIRPLAY_SPC_LOAD_ERROR="FAIRPLAY_SPC_LOAD_ERROR",e.FAIRPLAY_CREATE_KEY_ERROR="FAIRPLAY_CREATE_KEY_ERROR",e.FAIRPLAY_INVALID_CONTENT_ID="FAIRPLAY_INVALID_CONTENT_ID",e.DRM_PROXY_ERROR="DRM_PROXY_ERROR",e.DRM_PROXY_ERROR_SIGNATURE_EXPIRED="DRM_PROXY_ERROR_SIGNATURE_EXPIRED",e.DRM_PROXY_ERROR_NEED_COOKIE="DRM_PROXY_ERROR_NEED_COOKIE",e.DRM_PROXY_ERROR_NEED_TEAM_LOGIN="DRM_PROXY_ERROR_NEED_TEAM_LOGIN",e.DRM_PROXY_ERROR_NEED_VIEW_PERMISSION="DRM_PROXY_ERROR_NEED_VIEW_PERMISSION",e.DRM_INIT_ERROR="DRM_INIT_ERROR",e.DRM_NO_INIT_DATA="DRM_NO_INIT_DATA",e.DRM_CERT_LOAD_ERROR="DRM_CERT_LOAD_ERROR",e.DRM_LICENSE_LOAD_ERROR="DRM_CERT_LOAD_ERROR",e.DRM_NO_SUPPORTED_KEY_SYSTEM="DRM_NO_SUPPORTED_KEY_SYSTEM",e.DRM_FAILED_TO_CREATE_CDM="DRM_FAILED_TO_CREATE_CDM",e.DRM_FAILED_TO_SET_MEDIA_KEYS="DRM_FAILED_TO_SET_MEDIA_KEYS",e.DRM_NO_LICENSE_SERVER="DRM_NO_LICENSE_SERVER",e.DRM_FAILED_TO_CREATE_SESSION="DRM_FAILED_TO_CREATE_SESSION",e.DRM_SESSION_ERROR="DRM_SESSION_ERROR",e.DRM_FAILED_TO_GENERATE_REQUEST="DRM_FAILED_TO_GENERATE_REQUEST",e.DRM_UNKNOWN_ERROR="DRM_UNKNOWN_ERROR",e.NO_HLS_JS_INSTANCE="NO_HLS_JS_INSTANCE",e.AD_IS_ALREADY_PLAYING="AD_IS_ALREADY_PLAYING",e.META_INFO_REQUEST_FAILED="META_INFO_REQUEST_FAILED",e.MULTIROLL_INIT_ERROR="MULTIROLL_INIT_ERROR",e.REACT_COMPONENT_DID_CATCH_ERROR_INFO="REACT_COMPONENT_DID_CATCH_ERROR_INFO",e.PLAY_AD_VIEWERS_ERROR="PLAY_AD_VIEWERS_ERROR",e.SAGA_ERROR="SAGA_ERROR",e.STRM_ABD_INVALID_RESPONSE="STRM_ABD_INVALID_RESPONSE",e.REPRESENTATION_CHANGE="REPRESENTATION_CHANGE",e.RECOVER_TASK_ERROR="RECOVER_TASK_ERROR",e.PRELOAD_SOURCE_FAILED="PRELOAD_SOURCE_FAILED",e.REGIONAL_LIMITATION_MANIFEST="REGIONAL_LIMITATION_MANIFEST",e.REGIONAL_LIMITATION_LEVEL="REGIONAL_LIMITATION_LEVEL",e.REGIONAL_LIMITATION_SEGMENT="REGIONAL_LIMITATION_SEGMENT",e.SIGNATURE_EXPIRED_MANIFEST="SIGNATURE_EXPIRED_MANIFEST",e.SIGNATURE_EXPIRED_LEVEL="SIGNATURE_EXPIRED_LEVEL",e.SIGNATURE_EXPIRED_SEGMENT="SIGNATURE_EXPIRED_SEGMENT",e.BANNED_MANIFEST="BANNED_MANIFEST",e.BANNED_LEVEL="BANNED_LEVEL",e.BANNED_SEGMENT="BANNED_SEGMENT",e.MANIFEST_NOT_FOUND="MANIFEST_NOT_FOUND",e.NO_STREAMS="NO_STREAMS",e.NO_CODECS="NO_CODECS",e.NO_MSE="NO_MSE",e.NO_DRM_CONFIG="NO_DRM_CONFIG",e.NO_DRM="NO_DRM",e.NO_PLAYABLE_STREAMS="NO_PLAYABLE_STREAMS",e.MEDIA_ERR_CUSTOM="MEDIA_ERR_CUSTOM",e.MEDIA_ERR_ABORTED="MEDIA_ERR_ABORTED",e.MEDIA_ERR_NETWORK="MEDIA_ERR_NETWORK",e.MEDIA_ERR_DECODE="MEDIA_ERR_DECODE",e.MEDIA_ERR_SRC_NOT_SUPPORTED="MEDIA_ERR_SRC_NOT_SUPPORTED",e.MEDIA_ERR_ENCRYPTED="MEDIA_ERR_ENCRYPTED"}(hu||(hu={}));var wu,_u=r(83237),Eu=r(83361),Ou=r(81917),Su=window.Map||function(){},ku=window.Set||function(){},Tu=function(e,t){return(Tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},Ru=function(){return(Ru=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};!function(e){e.assertNever=function(e){throw new Error},e.arrayToEnum=function(e){var t,r,n={};try{for(var i=Cn(e),o=i.next();!o.done;o=i.next()){var a=o.value;n[a]=a}}catch(u){t={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},e.getValidEnumValues=function(t){var r,n,i=e.objectKeys(t).filter((function(e){return"number"!==typeof t[t[e]]})),o={};try{for(var a=Cn(i),u=a.next();!u.done;u=a.next()){var c=u.value;o[c]=t[c]}}catch(s){r={error:s}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return e.objectValues(o)},e.objectValues=function(t){return e.objectKeys(t).map((function(e){return t[e]}))},e.objectKeys="function"===typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=function(e,t){var r,n;try{for(var i=Cn(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t(a))return a}}catch(u){r={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.isInteger="function"===typeof Number.isInteger?function(e){return Number.isInteger(e)}:function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}}(wu||(wu={}));var xu,Pu=wu.arrayToEnum(["invalid_type","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]),ju=function(e){function t(t){var r=this.constructor,n=e.call(this)||this;n.issues=[],n.format=function(){var e={_errors:[]};return function t(r){var n,i;try{for(var o=Cn(r.issues),a=o.next();!a.done;a=o.next()){var u=a.value;if("invalid_union"===u.code)u.unionErrors.map(t);else if("invalid_return_type"===u.code)t(u.returnTypeError);else if("invalid_arguments"===u.code)t(u.argumentsError);else if(0===u.path.length)e._errors.push(u.message);else for(var c=e,s=0;s<u.path.length;){var l=u.path[s];if(s===u.path.length-1)c[l]=c[l]||{_errors:[]},c[l]._errors.push(u.message);else if("string"===typeof l)c[l]=c[l]||{_errors:[]};else if("number"===typeof l){var f=[];f._errors=[],c[l]=c[l]||f}c=c[l],s++}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}(n),e},n.addIssue=function(e){n.issues=Bn(Bn([],Fn(n.issues),!1),[e],!1)},n.addIssues=function(e){void 0===e&&(e=[]),n.issues=Bn(Bn([],Fn(n.issues),!1),Fn(e),!1)};var i=r.prototype;return Object.setPrototypeOf?Object.setPrototypeOf(n,i):n.__proto__=i,n.name="ZodError",n.issues=t,n}return Dn(t,e),Object.defineProperty(t.prototype,"errors",{get:function(){return this.issues},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.message},Object.defineProperty(t.prototype,"message",{get:function(){return JSON.stringify(this.issues,null,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.issues.length},enumerable:!1,configurable:!0}),t.prototype.flatten=function(e){var t,r;void 0===e&&(e=function(e){return e.message});var n={},i=[];try{for(var o=Cn(this.issues),a=o.next();!a.done;a=o.next()){var u=a.value;u.path.length>0?(n[u.path[0]]=n[u.path[0]]||[],n[u.path[0]].push(e(u))):i.push(e(u))}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return{formErrors:i,fieldErrors:n}},Object.defineProperty(t.prototype,"formErrors",{get:function(){return this.flatten()},enumerable:!1,configurable:!0}),t.create=function(e){return new t(e)},t}(Error),Au=function(e,t){var r;switch(e.code){case Pu.invalid_type:r="undefined"===e.received?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case Pu.unrecognized_keys:r="Unrecognized key(s) in object: ".concat(e.keys.map((function(e){return"'".concat(e,"'")})).join(", "));break;case Pu.invalid_union:r="Invalid input";break;case Pu.invalid_union_discriminator:r="Invalid discriminator value. Expected ".concat(e.options.map((function(e){return"string"===typeof e?"'".concat(e,"'"):e})).join(" | "));break;case Pu.invalid_enum_value:r="Invalid enum value. Expected ".concat(e.options.map((function(e){return"string"===typeof e?"'".concat(e,"'"):e})).join(" | "));break;case Pu.invalid_arguments:r="Invalid function arguments";break;case Pu.invalid_return_type:r="Invalid function return type";break;case Pu.invalid_date:r="Invalid date";break;case Pu.invalid_string:r="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case Pu.too_small:r="array"===e.type?"Array must contain ".concat(e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be greater than ".concat(e.inclusive?"or equal to ":"").concat(e.minimum):"Invalid input";break;case Pu.too_big:r="array"===e.type?"Array must contain ".concat(e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be less than ".concat(e.inclusive?"or equal to ":"").concat(e.maximum):"Invalid input";break;case Pu.custom:r="Invalid input";break;case Pu.invalid_intersection_types:r="Intersection results could not be merged";break;case Pu.not_multiple_of:r="Number must be a multiple of ".concat(e.multipleOf);break;default:r=t.defaultError,wu.assertNever(e)}return{message:r}},Lu=Au,Iu=wu.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Du=function(e,t){if(t&&t.has(e))return t.get(e);switch(In(e)){case"undefined":return Un(e,Iu.undefined,t);case"string":return Un(e,Iu.string,t);case"number":return Un(e,isNaN(e)?Iu.nan:Iu.number,t);case"boolean":return Un(e,Iu.boolean,t);case"function":return Un(e,Iu.function,t);case"bigint":return Un(e,Iu.bigint,t);case"object":return Array.isArray(e)?Un(e,Iu.array,t):null===e?Un(e,Iu.null,t):e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?Un(e,Iu.promise,t):"undefined"!==typeof Su&&e instanceof Su?Un(e,Iu.map,t):"undefined"!==typeof ku&&e instanceof ku?Un(e,Iu.set,t):"undefined"!==typeof Date&&e instanceof Date?Un(e,Iu.date,t):Un(e,Iu.object,t);default:return Un(e,Iu.unknown,t)}},Nu=function(e){var t,r,n=e.data,i=e.path,o=e.errorMaps,a=e.issueData,u=Bn(Bn([],Fn(i),!1),Fn(a.path||[]),!1),c=Ru(Ru({},a),{path:u}),s="",l=o.filter((function(e){return!!e})).slice().reverse();try{for(var f=Cn(l),h=f.next();!h.done;h=f.next()){s=(0,h.value)(c,{data:n,defaultError:s}).message}}catch(d){t={error:d}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}return Ru(Ru({},a),{path:u,message:a.message||s})},Mu=function(){function e(){this.value="valid"}return e.prototype.dirty=function(){"valid"===this.value&&(this.value="dirty")},e.prototype.abort=function(){"aborted"!==this.value&&(this.value="aborted")},e.mergeArray=function(e,t){var r,n,i=[];try{for(var o=Cn(t),a=o.next();!a.done;a=o.next()){var u=a.value;if("aborted"===u.status)return Cu;"dirty"===u.status&&e.dirty(),i.push(u.value)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return{status:e.value,value:i}},e.mergeObjectAsync=function(t,r){return Nn(this,void 0,void 0,(function(){var n,i,o,a,u,c,s,l,f,h;return Mn(this,(function(d){switch(d.label){case 0:n=[],d.label=1;case 1:d.trys.push([1,7,8,9]),i=Cn(r),o=i.next(),d.label=2;case 2:return o.done?[3,6]:(a=o.value,c=(u=n).push,h={},[4,a.key]);case 3:return h.key=d.sent(),[4,a.value];case 4:c.apply(u,[(h.value=d.sent(),h)]),d.label=5;case 5:return o=i.next(),[3,2];case 6:return[3,9];case 7:return s=d.sent(),l={error:s},[3,9];case 8:try{o&&!o.done&&(f=i.return)&&f.call(i)}finally{if(l)throw l.error}return[7];case 9:return[2,e.mergeObjectSync(t,n)]}}))}))},e.mergeObjectSync=function(e,t){var r,n,i={};try{for(var o=Cn(t),a=o.next();!a.done;a=o.next()){var u=a.value,c=u.key,s=u.value;if("aborted"===c.status)return Cu;if("aborted"===s.status)return Cu;"dirty"===c.status&&e.dirty(),"dirty"===s.status&&e.dirty(),("undefined"!==typeof s.value||u.alwaysSet)&&(i[c.value]=s.value)}}catch(l){r={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return{status:e.value,value:i}},e}(),Cu=Object.freeze({status:"aborted"}),Fu=function(e){return{status:"valid",value:e}},Bu=function(e){return"aborted"===e.status},Uu=function(e){return"dirty"===e.status},Gu=function(e){return"valid"===e.status},Hu=function(e){return void 0!==("undefined"===typeof Eu?"undefined":In(Eu))&&e instanceof Eu};!function(e){e.errToObj=function(e){return"string"===typeof e?{message:e}:e||{}},e.toString=function(e){return"string"===typeof e?e:null===e||void 0===e?void 0:e.message}}(xu||(xu={}));var Vu,qu=function(e,t){if(Gu(t))return{success:!0,data:t.value};if(!e.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new ju(e.issues)}},Yu=function(){function e(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isOptional=this.isOptional.bind(this),this.isNullable=this.isNullable.bind(this)}return Object.defineProperty(e.prototype,"description",{get:function(){return this._def.description},enumerable:!1,configurable:!0}),e.prototype._processInputParams=function(e){return{status:new Mu,ctx:Ru(Ru({},e.parent),{data:e.data,parsedType:Du(e.data,e.parent.typeCache),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent})}},e.prototype._parseSync=function(e){var t=this._parse(e);if(Hu(t))throw new Error("Synchronous parse encountered promise.");return t},e.prototype._parseAsync=function(e){var t=this._parse(e);return Eu.resolve(t)},e.prototype.parse=function(e,t){var r=this.safeParse(e,t);if(r.success)return r.data;throw r.error},e.prototype.safeParse=function(e,t){var r,n={path:(null===t||void 0===t?void 0:t.path)||[],issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,schemaErrorMap:this._def.errorMap,async:null!==(r=null===t||void 0===t?void 0:t.async)&&void 0!==r&&r,typeCache:"undefined"!==typeof Su?new Su:void 0,parent:null,data:e,parsedType:Du(e)},i=this._parseSync({data:e,path:n.path,parent:n});return qu(n,i)},e.prototype.parseAsync=function(e,t){return Nn(this,void 0,void 0,(function(){var r;return Mn(this,(function(n){switch(n.label){case 0:return[4,this.safeParseAsync(e,t)];case 1:if((r=n.sent()).success)return[2,r.data];throw r.error}}))}))},e.prototype.safeParseAsync=function(e,t){return Nn(this,void 0,void 0,(function(){var r,n,i;return Mn(this,(function(o){switch(o.label){case 0:return r={path:(null===t||void 0===t?void 0:t.path)||[],issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,schemaErrorMap:this._def.errorMap,async:!0,typeCache:"undefined"!==typeof Su?new Su:void 0,parent:null,data:e,parsedType:Du(e)},n=this._parse({data:e,path:[],parent:r}),[4,Hu(n)?n:Eu.resolve(n)];case 1:return i=o.sent(),[2,qu(r,i)]}}))}))},e.prototype.refine=function(e,t){return this._refinement((function(r,n){var i=e(r),o=function(){return n.addIssue(Ru({code:Pu.custom},function(e){return"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t}(r)))};return"undefined"!==typeof Eu&&i instanceof Eu?i.then((function(e){return!!e||(o(),!1)})):!!i||(o(),!1)}))},e.prototype.refinement=function(e,t){return this._refinement((function(r,n){return!!e(r)||(n.addIssue("function"===typeof t?t(r,n):t),!1)}))},e.prototype._refinement=function(e){return new Oc({schema:this,typeName:uc.ZodEffects,effect:{type:"refinement",refinement:e}})},e.prototype.optional=function(){return Sc.create(this)},e.prototype.nullable=function(){return kc.create(this)},e.prototype.nullish=function(){return this.optional().nullable()},e.prototype.array=function(){return ac.create(this)},e.prototype.promise=function(){return Ec.create(this)},e.prototype.or=function(e){return lc.create([this,e])},e.prototype.and=function(e){return hc.create(this,e)},e.prototype.transform=function(e){return new Oc({schema:this,typeName:uc.ZodEffects,effect:{type:"transform",transform:e}})},e.prototype.default=function(e){return new Tc({innerType:this,defaultValue:"function"===typeof e?e:function(){return e},typeName:uc.ZodDefault})},e.prototype.describe=function(e){return new(0,this.constructor)(Ru(Ru({},this._def),{description:e}))},e.prototype.isOptional=function(){return this.safeParse(void 0).success},e.prototype.isNullable=function(){return this.safeParse(null).success},e}(),Wu=/^c[^\s-]{8,}$/i,zu=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Ku=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,$u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._regex=function(e,r,n){return t.refinement((function(t){return e.test(t)}),Ru({validation:r,code:Pu.invalid_string},xu.errToObj(n)))},t.nonempty=function(e){return t.min(1,xu.errToObj(e))},t}return Dn(t,e),t.prototype._parse=function(e){var t,r,n=this._processInputParams(e),i=n.status,o=n.ctx;if(o.parsedType!==Iu.string)return Gn(o,{code:Pu.invalid_type,expected:Iu.string,received:o.parsedType}),Cu;try{for(var a=Cn(this._def.checks),u=a.next();!u.done;u=a.next()){var c=u.value;if("min"===c.kind)o.data.length<c.value&&(Gn(o,{code:Pu.too_small,minimum:c.value,type:"string",inclusive:!0,message:c.message}),i.dirty());else if("max"===c.kind)o.data.length>c.value&&(Gn(o,{code:Pu.too_big,maximum:c.value,type:"string",inclusive:!0,message:c.message}),i.dirty());else if("email"===c.kind)Ku.test(o.data)||(Gn(o,{validation:"email",code:Pu.invalid_string,message:c.message}),i.dirty());else if("uuid"===c.kind)zu.test(o.data)||(Gn(o,{validation:"uuid",code:Pu.invalid_string,message:c.message}),i.dirty());else if("cuid"===c.kind)Wu.test(o.data)||(Gn(o,{validation:"cuid",code:Pu.invalid_string,message:c.message}),i.dirty());else if("url"===c.kind)try{new Ou(o.data)}catch(s){Gn(o,{validation:"url",code:Pu.invalid_string,message:c.message}),i.dirty()}else if("regex"===c.kind){c.regex.lastIndex=0,c.regex.test(o.data)||(Gn(o,{validation:"regex",code:Pu.invalid_string,message:c.message}),i.dirty())}}}catch(l){t={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return{status:i.value,value:o.data}},t.prototype._addCheck=function(e){return new t(Ru(Ru({},this._def),{checks:Bn(Bn([],Fn(this._def.checks),!1),[e],!1)}))},t.prototype.email=function(e){return this._addCheck(Ru({kind:"email"},xu.errToObj(e)))},t.prototype.url=function(e){return this._addCheck(Ru({kind:"url"},xu.errToObj(e)))},t.prototype.uuid=function(e){return this._addCheck(Ru({kind:"uuid"},xu.errToObj(e)))},t.prototype.cuid=function(e){return this._addCheck(Ru({kind:"cuid"},xu.errToObj(e)))},t.prototype.regex=function(e,t){return this._addCheck(Ru({kind:"regex",regex:e},xu.errToObj(t)))},t.prototype.min=function(e,t){return this._addCheck(Ru({kind:"min",value:e},xu.errToObj(t)))},t.prototype.max=function(e,t){return this._addCheck(Ru({kind:"max",value:e},xu.errToObj(t)))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},Object.defineProperty(t.prototype,"isEmail",{get:function(){return!!this._def.checks.find((function(e){return"email"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isURL",{get:function(){return!!this._def.checks.find((function(e){return"url"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUUID",{get:function(){return!!this._def.checks.find((function(e){return"uuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCUID",{get:function(){return!!this._def.checks.find((function(e){return"cuid"===e.kind}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){var e=-1/0;return this._def.checks.map((function(t){"min"===t.kind&&(null===e||t.value>e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){var e=null;return this._def.checks.map((function(t){"max"===t.kind&&(null===e||t.value<e)&&(e=t.value)})),e},enumerable:!1,configurable:!0}),t.create=function(e){return new t(Ru({checks:[],typeName:uc.ZodString},Hn(e)))},t}(Yu),Zu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.min=t.gte,t.max=t.lte,t.step=t.multipleOf,t}return Dn(t,e),t.prototype._parse=function(e){var t,r,n,i,o,a,u,c=this._processInputParams(e),s=c.status,l=c.ctx;if(l.parsedType!==Iu.number)return Gn(l,{code:Pu.invalid_type,expected:Iu.number,received:l.parsedType}),Cu;try{for(var f=Cn(this._def.checks),h=f.next();!h.done;h=f.next()){var d=h.value;if("int"===d.kind)wu.isInteger(l.data)||(Gn(l,{code:Pu.invalid_type,expected:"integer",received:"float",message:d.message}),s.dirty());else if("min"===d.kind){(d.inclusive?l.data<d.value:l.data<=d.value)&&(Gn(l,{code:Pu.too_small,minimum:d.value,type:"number",inclusive:d.inclusive,message:d.message}),s.dirty())}else if("max"===d.kind){(d.inclusive?l.data>d.value:l.data>=d.value)&&(Gn(l,{code:Pu.too_big,maximum:d.value,type:"number",inclusive:d.inclusive,message:d.message}),s.dirty())}else"multipleOf"===d.kind?0!==(n=l.data,i=d.value,o=void 0,a=void 0,u=void 0,o=(n.toString().split(".")[1]||"").length,a=(i.toString().split(".")[1]||"").length,u=o>a?o:a,parseInt(n.toFixed(u).replace(".",""))%parseInt(i.toFixed(u).replace(".",""))/Math.pow(10,u))&&(Gn(l,{code:Pu.not_multiple_of,multipleOf:d.value,message:d.message}),s.dirty()):wu.assertNever(d)}}catch(p){t={error:p}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}return{status:s.value,value:l.data}},t.prototype.gte=function(e,t){return this.setLimit("min",e,!0,xu.toString(t))},t.prototype.gt=function(e,t){return this.setLimit("min",e,!1,xu.toString(t))},t.prototype.lte=function(e,t){return this.setLimit("max",e,!0,xu.toString(t))},t.prototype.lt=function(e,t){return this.setLimit("max",e,!1,xu.toString(t))},t.prototype.setLimit=function(e,r,n,i){return new t(Ru(Ru({},this._def),{checks:Bn(Bn([],Fn(this._def.checks),!1),[{kind:e,value:r,inclusive:n,message:xu.toString(i)}],!1)}))},t.prototype._addCheck=function(e){return new t(Ru(Ru({},this._def),{checks:Bn(Bn([],Fn(this._def.checks),!1),[e],!1)}))},t.prototype.int=function(e){return this._addCheck({kind:"int",message:xu.toString(e)})},t.prototype.positive=function(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xu.toString(e)})},t.prototype.negative=function(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xu.toString(e)})},t.prototype.nonpositive=function(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xu.toString(e)})},t.prototype.nonnegative=function(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xu.toString(e)})},t.prototype.multipleOf=function(e,t){return this._addCheck({kind:"multipleOf",value:e,message:xu.toString(t)})},Object.defineProperty(t.prototype,"minValue",{get:function(){var e,t,r=null;try{for(var n=Cn(this._def.checks),i=n.next();!i.done;i=n.next()){var o=i.value;"min"===o.kind&&(null===r||o.value>r)&&(r=o.value)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){var e,t,r=null;try{for(var n=Cn(this._def.checks),i=n.next();!i.done;i=n.next()){var o=i.value;"max"===o.kind&&(null===r||o.value<r)&&(r=o.value)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInt",{get:function(){return!!this._def.checks.find((function(e){return"int"===e.kind}))},enumerable:!1,configurable:!0}),t.create=function(e){return new t(Ru({checks:[],typeName:uc.ZodNumber},Hn(e)))},t}(Yu),Xu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return t.parsedType!==Iu.bigint?(Gn(t,{code:Pu.invalid_type,expected:Iu.bigint,received:t.parsedType}),Cu):Fu(t.data)},t.create=function(e){return new t(Ru({typeName:uc.ZodBigInt},Hn(e)))},t}(Yu),Ju=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return t.parsedType!==Iu.boolean?(Gn(t,{code:Pu.invalid_type,expected:Iu.boolean,received:t.parsedType}),Cu):Fu(t.data)},t.create=function(e){return new t(Ru({typeName:uc.ZodBoolean},Hn(e)))},t}(Yu),Qu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;return n.parsedType!==Iu.date?(Gn(n,{code:Pu.invalid_type,expected:Iu.date,received:n.parsedType}),Cu):isNaN(n.data.getTime())?(Gn(n,{code:Pu.invalid_date}),Cu):{status:r.value,value:new Date(n.data.getTime())}},t.create=function(e){return new t(Ru({typeName:uc.ZodDate},Hn(e)))},t}(Yu),ec=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return t.parsedType!==Iu.undefined?(Gn(t,{code:Pu.invalid_type,expected:Iu.undefined,received:t.parsedType}),Cu):Fu(t.data)},t.create=function(e){return new t(Ru({typeName:uc.ZodUndefined},Hn(e)))},t}(Yu),tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return t.parsedType!==Iu.null?(Gn(t,{code:Pu.invalid_type,expected:Iu.null,received:t.parsedType}),Cu):Fu(t.data)},t.create=function(e){return new t(Ru({typeName:uc.ZodNull},Hn(e)))},t}(Yu),rc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._any=!0,t}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return Fu(t.data)},t.create=function(e){return new t(Ru({typeName:uc.ZodAny},Hn(e)))},t}(Yu),nc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._unknown=!0,t}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return Fu(t.data)},t.create=function(e){return new t(Ru({typeName:uc.ZodUnknown},Hn(e)))},t}(Yu),ic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return Gn(t,{code:Pu.invalid_type,expected:Iu.never,received:t.parsedType}),Cu},t.create=function(e){return new t(Ru({typeName:uc.ZodNever},Hn(e)))},t}(Yu),oc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return t.parsedType!==Iu.undefined?(Gn(t,{code:Pu.invalid_type,expected:Iu.void,received:t.parsedType}),Cu):Fu(t.data)},t.create=function(e){return new t(Ru({typeName:uc.ZodVoid},Hn(e)))},t}(Yu),ac=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx,i=this._def;if(n.parsedType!==Iu.array)return Gn(n,{code:Pu.invalid_type,expected:Iu.array,received:n.parsedType}),Cu;if(null!==i.minLength&&n.data.length<i.minLength.value&&(Gn(n,{code:Pu.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&n.data.length>i.maxLength.value&&(Gn(n,{code:Pu.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,message:i.maxLength.message}),r.dirty()),n.async)return Eu.all(n.data.map((function(e,t){return i.type._parseAsync({parent:n,path:Bn(Bn([],Fn(n.path),!1),[t],!1),data:e})}))).then((function(e){return Mu.mergeArray(r,e)}));var o=n.data.map((function(e,t){return i.type._parseSync({parent:n,path:Bn(Bn([],Fn(n.path),!1),[t],!1),data:e})}));return Mu.mergeArray(r,o)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.type},enumerable:!1,configurable:!0}),t.prototype.min=function(e,r){return new t(Ru(Ru({},this._def),{minLength:{value:e,message:xu.toString(r)}}))},t.prototype.max=function(e,r){return new t(Ru(Ru({},this._def),{maxLength:{value:e,message:xu.toString(r)}}))},t.prototype.length=function(e,t){return this.min(e,t).max(e,t)},t.prototype.nonempty=function(e){return this.min(1,e)},t.create=function(e,r){return new t(Ru({type:e,minLength:null,maxLength:null,typeName:uc.ZodArray},Hn(r)))},t}(Yu);!function(e){e.mergeShapes=function(e,t){return Ru(Ru({},e),t)}}(Vu||(Vu={}));var uc,cc=function(e){return function(t){return new sc(Ru(Ru({},e),{shape:function(){return Ru(Ru({},e.shape()),t)}}))}},sc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cached=null,t.nonstrict=t.passthrough,t.augment=cc(t._def),t.extend=cc(t._def),t}return Dn(t,e),t.prototype._getCached=function(){if(null!==this._cached)return this._cached;var e=this._def.shape(),t=wu.objectKeys(e);return this._cached={shape:e,keys:t}},t.prototype._parse=function(e){var t,r,n,i,o,a,u=this,c=this._processInputParams(e),s=c.status,l=c.ctx;if(l.parsedType!==Iu.object)return Gn(l,{code:Pu.invalid_type,expected:Iu.object,received:l.parsedType}),Cu;var f=this._getCached(),h=f.shape,d=f.keys,p=wu.objectKeys(l.data).filter((function(e){return!d.includes(e)})),y=[];try{for(var v=Cn(d),m=v.next();!m.done;m=v.next()){var g=h[O=m.value],b=l.data[O];y.push({key:{status:"valid",value:O},value:g._parse({parent:l,data:b,path:Bn(Bn([],Fn(l.path),!1),[O],!1)}),alwaysSet:O in l.data})}}catch(R){t={error:R}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(t)throw t.error}}if(this._def.catchall instanceof ic){var w=this._def.unknownKeys;if("passthrough"===w)try{for(var _=Cn(p),E=_.next();!E.done;E=_.next()){var O=E.value;y.push({key:{status:"valid",value:O},value:{status:"valid",value:l.data[O]}})}}catch(x){n={error:x}}finally{try{E&&!E.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}else if("strict"===w)p.length>0&&(Gn(l,{code:Pu.unrecognized_keys,keys:p}),s.dirty());else if("strip"!==w)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var S=this._def.catchall;try{for(var k=Cn(p),T=k.next();!T.done;T=k.next()){O=T.value,b=l.data[O];y.push({key:{status:"valid",value:O},value:S._parse({parent:l,path:Bn(Bn([],Fn(l.path),!1),[O],!1),data:b}),alwaysSet:O in l.data})}}catch(P){o={error:P}}finally{try{T&&!T.done&&(a=k.return)&&a.call(k)}finally{if(o)throw o.error}}}return l.async?Eu.resolve().then((function(){return Nn(u,void 0,void 0,(function(){var e,t,r,n,i,o,a,u,c,s,l;return Mn(this,(function(f){switch(f.label){case 0:e=[],f.label=1;case 1:f.trys.push([1,7,8,9]),t=Cn(y),r=t.next(),f.label=2;case 2:return r.done?[3,6]:[4,(n=r.value).key];case 3:return i=f.sent(),a=(o=e).push,l={key:i},[4,n.value];case 4:a.apply(o,[(l.value=f.sent(),l.alwaysSet=n.alwaysSet,l)]),f.label=5;case 5:return r=t.next(),[3,2];case 6:return[3,9];case 7:return u=f.sent(),c={error:u},[3,9];case 8:try{r&&!r.done&&(s=t.return)&&s.call(t)}finally{if(c)throw c.error}return[7];case 9:return[2,e]}}))}))})).then((function(e){return Mu.mergeObjectSync(s,e)})):Mu.mergeObjectSync(s,y)},Object.defineProperty(t.prototype,"shape",{get:function(){return this._def.shape()},enumerable:!1,configurable:!0}),t.prototype.strict=function(e){var r=this;return xu.errToObj,new t(Ru(Ru(Ru({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:function(t,n){var i,o,a,u,c=null!==(a=null===(o=(i=r._def).errorMap)||void 0===o?void 0:o.call(i,t,n).message)&&void 0!==a?a:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(u=xu.errToObj(e).message)&&void 0!==u?u:c}:{message:c}}}:{}))},t.prototype.strip=function(){return new t(Ru(Ru({},this._def),{unknownKeys:"strip"}))},t.prototype.passthrough=function(){return new t(Ru(Ru({},this._def),{unknownKeys:"passthrough"}))},t.prototype.setKey=function(e,t){var r;return this.augment(((r={})[e]=t,r))},t.prototype.merge=function(e){var r=this;return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:function(){return Vu.mergeShapes(r._def.shape(),e._def.shape())},typeName:uc.ZodObject})},t.prototype.catchall=function(e){return new t(Ru(Ru({},this._def),{catchall:e}))},t.prototype.pick=function(e){var r=this,n={};return wu.objectKeys(e).map((function(e){n[e]=r.shape[e]})),new t(Ru(Ru({},this._def),{shape:function(){return n}}))},t.prototype.omit=function(e){var r=this,n={};return wu.objectKeys(this.shape).map((function(t){-1===wu.objectKeys(e).indexOf(t)&&(n[t]=r.shape[t])})),new t(Ru(Ru({},this._def),{shape:function(){return n}}))},t.prototype.deepPartial=function(){return Vn(this)},t.prototype.partial=function(e){var r=this,n={};if(e)return wu.objectKeys(this.shape).map((function(t){-1===wu.objectKeys(e).indexOf(t)?n[t]=r.shape[t]:n[t]=r.shape[t].optional()})),new t(Ru(Ru({},this._def),{shape:function(){return n}}));for(var i in this.shape){var o=this.shape[i];n[i]=o.optional()}return new t(Ru(Ru({},this._def),{shape:function(){return n}}))},t.prototype.required=function(){var e={};for(var r in this.shape){for(var n=this.shape[r];n instanceof Sc;)n=n._def.innerType;e[r]=n}return new t(Ru(Ru({},this._def),{shape:function(){return e}}))},t.create=function(e,r){return new t(Ru({shape:function(){return e},unknownKeys:"strip",catchall:ic.create(),typeName:uc.ZodObject},Hn(r)))},t.strictCreate=function(e,r){return new t(Ru({shape:function(){return e},unknownKeys:"strict",catchall:ic.create(),typeName:uc.ZodObject},Hn(r)))},t.lazycreate=function(e,r){return new t(Ru({shape:e,unknownKeys:"strip",catchall:ic.create(),typeName:uc.ZodObject},Hn(r)))},t}(Yu),lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){function t(e){var t,r,i,o,a;try{for(var u=Cn(e),c=u.next();!c.done;c=u.next()){if("valid"===(f=c.value).result.status)return f.result}}catch(d){t={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}try{for(var s=Cn(e),l=s.next();!l.done;l=s.next()){var f;if("dirty"===(f=l.value).result.status)return(a=n.issues).push.apply(a,Bn([],Fn(f.ctx.issues),!1)),f.result}}catch(p){i={error:p}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}var h=e.map((function(e){return new ju(e.ctx.issues)}));return Gn(n,{code:Pu.invalid_union,unionErrors:h}),Cu}var r=this,n=this._processInputParams(e).ctx,i=this._def.options;return n.async?Eu.all(i.map((function(e){return Nn(r,void 0,void 0,(function(){var t,r;return Mn(this,(function(i){switch(i.label){case 0:return t=Ru(Ru({},n),{issues:[],parent:null}),r={},[4,e._parseAsync({data:n.data,path:n.path,parent:t})];case 1:return[2,(r.result=i.sent(),r.ctx=t,r)]}}))}))}))).then(t):t(i.map((function(e){var t=Ru(Ru({},n),{issues:[],parent:null});return{result:e._parseSync({data:n.data,path:n.path,parent:t}),ctx:t}})))},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e,r){return new t(Ru({options:e,typeName:uc.ZodUnion},Hn(r)))},t}(Yu),fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;if(t.parsedType!==Iu.object)return Gn(t,{code:Pu.invalid_type,expected:Iu.object,received:t.parsedType}),Cu;var r=this.discriminator,n=t.data[r],i=this.options.get(n);return i?t.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Gn(t,{code:Pu.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),Cu)},Object.defineProperty(t.prototype,"discriminator",{get:function(){return this._def.discriminator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validDiscriminatorValues",{get:function(){return Array.from(this.options.keys())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._def.options},enumerable:!1,configurable:!0}),t.create=function(e,r,n){var i=new Su;try{r.forEach((function(t){var r=t.shape[e].value;i.set(r,t)}))}catch(o){throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(i.size!==r.length)throw new Error("Some of the discriminator values are not unique");return new t(Ru({typeName:uc.ZodDiscriminatedUnion,discriminator:e,options:i},Hn(n)))},t}(Yu),hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx,i=function(e,t){if(Bu(e)||Bu(t))return Cu;var i=function e(t,r){var n,i,o=Du(t),a=Du(r);if(t===r)return{valid:!0,data:t};if(o===Iu.object&&a===Iu.object){var u=wu.objectKeys(r),c=wu.objectKeys(t).filter((function(e){return-1!==u.indexOf(e)})),s=Ru(Ru({},t),r);try{for(var l=Cn(c),f=l.next();!f.done;f=l.next()){var h=f.value;if(!(y=e(t[h],r[h])).valid)return{valid:!1};s[h]=y.data}}catch(v){n={error:v}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return{valid:!0,data:s}}if(o===Iu.array&&a===Iu.array){if(t.length!==r.length)return{valid:!1};for(var d=[],p=0;p<t.length;p++){var y;if(!(y=e(t[p],r[p])).valid)return{valid:!1};d.push(y.data)}return{valid:!0,data:d}}return o===Iu.date&&a===Iu.date&&+t===+r?{valid:!0,data:t}:{valid:!1}}(e.value,t.value);return i.valid?((Uu(e)||Uu(t))&&r.dirty(),{status:r.value,value:i.data}):(Gn(n,{code:Pu.invalid_intersection_types}),Cu)};return n.async?Eu.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((function(e){var t=Fn(e,2),r=t[0],n=t[1];return i(r,n)})):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))},t.create=function(e,r,n){return new t(Ru({left:e,right:r,typeName:uc.ZodIntersection},Hn(n)))},t}(Yu),dc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this,r=this._processInputParams(e),n=r.status,i=r.ctx;if(i.parsedType!==Iu.array)return Gn(i,{code:Pu.invalid_type,expected:Iu.array,received:i.parsedType}),Cu;if(i.data.length<this._def.items.length)return Gn(i,{code:Pu.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),Cu;!this._def.rest&&i.data.length>this._def.items.length&&(Gn(i,{code:Pu.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),n.dirty());var o=i.data.map((function(e,r){var n=t._def.items[r]||t._def.rest;return n?n._parse({data:e,path:Bn(Bn([],Fn(i.path),!1),[r],!1),parent:i}):null})).filter((function(e){return!!e}));return i.async?Eu.all(o).then((function(e){return Mu.mergeArray(n,e)})):Mu.mergeArray(n,o)},Object.defineProperty(t.prototype,"items",{get:function(){return this._def.items},enumerable:!1,configurable:!0}),t.prototype.rest=function(e){return new t(Ru(Ru({},this._def),{rest:e}))},t.create=function(e,r){return new t(Ru({items:e,typeName:uc.ZodTuple,rest:null},Hn(r)))},t}(Yu),pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),Object.defineProperty(t.prototype,"keySchema",{get:function(){return this._def.keyType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueSchema",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;if(n.parsedType!==Iu.object)return Gn(n,{code:Pu.invalid_type,expected:Iu.object,received:n.parsedType}),Cu;var i=[],o=this._def.keyType,a=this._def.valueType;for(var u in n.data)i.push({key:o._parse({data:u,path:Bn(Bn([],Fn(n.path),!1),[u],!1),parent:n}),value:a._parse({data:n.data[u],path:Bn(Bn([],Fn(n.path),!1),[u],!1),parent:n})});return n.async?Mu.mergeObjectAsync(r,i):Mu.mergeObjectSync(r,i)},Object.defineProperty(t.prototype,"element",{get:function(){return this._def.valueType},enumerable:!1,configurable:!0}),t.create=function(e,r,n){return new t(r instanceof Yu?Ru({keyType:e,valueType:r,typeName:uc.ZodRecord},Hn(n)):Ru({keyType:$u.create(),valueType:e,typeName:uc.ZodRecord},Hn(r)))},t}(Yu),yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t,r,n=this,i=this._processInputParams(e),o=i.status,a=i.ctx;if(a.parsedType!==Iu.map)return Gn(a,{code:Pu.invalid_type,expected:Iu.map,received:a.parsedType}),Cu;var u=this._def.keyType,c=this._def.valueType,s=Bn([],Fn(a.data.entries()),!1).map((function(e,t){var r=Fn(e,2),n=r[0],i=r[1];return{key:u._parse({data:n,path:Bn(Bn([],Fn(a.path),!1),[t,"key"],!1),parent:a}),value:c._parse({data:i,path:Bn(Bn([],Fn(a.path),!1),[t,"value"],!1),parent:a})}}));if(a.async){var l=new Su;return Eu.resolve().then((function(){return Nn(n,void 0,void 0,(function(){var e,t,r,n,i,a,u,c;return Mn(this,(function(f){switch(f.label){case 0:f.trys.push([0,6,7,8]),e=Cn(s),t=e.next(),f.label=1;case 1:return t.done?[3,5]:[4,(r=t.value).key];case 2:return n=f.sent(),[4,r.value];case 3:if(i=f.sent(),"aborted"===n.status||"aborted"===i.status)return[2,Cu];"dirty"!==n.status&&"dirty"!==i.status||o.dirty(),l.set(n.value,i.value),f.label=4;case 4:return t=e.next(),[3,1];case 5:return[3,8];case 6:return a=f.sent(),u={error:a},[3,8];case 7:try{t&&!t.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}return[7];case 8:return[2,{status:o.value,value:l}]}}))}))}))}var f=new Su;try{for(var h=Cn(s),d=h.next();!d.done;d=h.next()){var p=d.value,y=p.key,v=p.value;if("aborted"===y.status||"aborted"===v.status)return Cu;"dirty"!==y.status&&"dirty"!==v.status||o.dirty(),f.set(y.value,v.value)}}catch(m){t={error:m}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return{status:o.value,value:f}},t.create=function(e,r,n){return new t(Ru({valueType:r,keyType:e,typeName:uc.ZodMap},Hn(n)))},t}(Yu),vc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){function t(e){var t,r,i=new ku;try{for(var o=Cn(e),a=o.next();!a.done;a=o.next()){var u=a.value;if("aborted"===u.status)return Cu;"dirty"===u.status&&n.dirty(),i.add(u.value)}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return{status:n.value,value:i}}var r=this._processInputParams(e),n=r.status,i=r.ctx;if(i.parsedType!==Iu.set)return Gn(i,{code:Pu.invalid_type,expected:Iu.set,received:i.parsedType}),Cu;var o=this._def;null!==o.minSize&&i.data.size<o.minSize.value&&(Gn(i,{code:Pu.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,message:o.minSize.message}),n.dirty()),null!==o.maxSize&&i.data.size>o.maxSize.value&&(Gn(i,{code:Pu.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,message:o.maxSize.message}),n.dirty());var a=this._def.valueType,u=Bn([],Fn(i.data.values()),!1).map((function(e,t){return a._parse({data:e,path:Bn(Bn([],Fn(i.path),!1),[t],!1),parent:i})}));return i.async?Eu.all(u).then((function(e){return t(e)})):t(u)},t.prototype.min=function(e,r){return new t(Ru(Ru({},this._def),{minSize:{value:e,message:xu.toString(r)}}))},t.prototype.max=function(e,r){return new t(Ru(Ru({},this._def),{maxSize:{value:e,message:xu.toString(r)}}))},t.prototype.size=function(e,t){return this.min(e,t).max(e,t)},t.prototype.nonempty=function(e){return this.min(1,e)},t.create=function(e,r){return new t(Ru({valueType:e,minSize:null,maxSize:null,typeName:uc.ZodSet},Hn(r)))},t}(Yu),mc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.validate=t.implement,t}return Dn(t,e),t.prototype._parse=function(e){function t(e,t){return Nu({data:e,path:i.path,errorMaps:[i.contextualErrorMap,i.schemaErrorMap,Lu,Au].filter((function(e){return!!e})),issueData:{code:Pu.invalid_arguments,argumentsError:t}})}function r(e,t){return Nu({data:e,path:i.path,errorMaps:[i.contextualErrorMap,i.schemaErrorMap,Lu,Au].filter((function(e){return!!e})),issueData:{code:Pu.invalid_return_type,returnTypeError:t}})}var n=this,i=this._processInputParams(e).ctx;if(i.parsedType!==Iu.function)return Gn(i,{code:Pu.invalid_type,expected:Iu.function,received:i.parsedType}),Cu;var o={errorMap:i.contextualErrorMap},a=i.data;return this._def.returns instanceof Ec?Fu((function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return Nn(n,void 0,void 0,(function(){var n,i,u;return Mn(this,(function(c){switch(c.label){case 0:return n=new ju([]),[4,this._def.args.parseAsync(e,o).catch((function(r){throw n.addIssue(t(e,r)),n}))];case 1:return i=c.sent(),[4,a.apply(void 0,Bn([],Fn(i),!1))];case 2:return u=c.sent(),[4,this._def.returns._def.type.parseAsync(u,o).catch((function(e){throw n.addIssue(r(u,e)),n}))];case 3:return[2,c.sent()]}}))}))})):Fu((function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var u=n._def.args.safeParse(e,o);if(!u.success)throw new ju([t(e,u.error)]);var c=a.apply(void 0,Bn([],Fn(u.data),!1)),s=n._def.returns.safeParse(c,o);if(!s.success)throw new ju([r(c,s.error)]);return s.data}))},t.prototype.parameters=function(){return this._def.args},t.prototype.returnType=function(){return this._def.returns},t.prototype.args=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new t(Ru(Ru({},this._def),{args:dc.create(e).rest(nc.create())}))},t.prototype.returns=function(e){return new t(Ru(Ru({},this._def),{returns:e}))},t.prototype.implement=function(e){return this.parse(e)},t.prototype.strictImplement=function(e){return this.parse(e)},t.create=function(e,r,n){return new t(Ru({args:e?e.rest(nc.create()):dc.create([]).rest(nc.create()),returns:r||nc.create(),typeName:uc.ZodFunction},Hn(n)))},t}(Yu),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),Object.defineProperty(t.prototype,"schema",{get:function(){return this._def.getter()},enumerable:!1,configurable:!0}),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return this._def.getter()._parse({data:t.data,path:t.path,parent:t})},t.create=function(e,r){return new t(Ru({getter:e,typeName:uc.ZodLazy},Hn(r)))},t}(Yu),bc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;return n.data!==this._def.value?(Gn(n,{code:Pu.invalid_type,expected:Du(this._def.value),received:n.parsedType}),Cu):{status:r.value,value:n.data}},Object.defineProperty(t.prototype,"value",{get:function(){return this._def.value},enumerable:!1,configurable:!0}),t.create=function(e,r){return new t(Ru({value:e,typeName:uc.ZodLiteral},Hn(r)))},t}(Yu),wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return-1===this._def.values.indexOf(t.data)?(Gn(t,{code:Pu.invalid_enum_value,options:this._def.values}),Cu):Fu(t.data)},Object.defineProperty(t.prototype,"options",{get:function(){return this._def.values},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enum",{get:function(){var e,t,r={};try{for(var n=Cn(this._def.values),i=n.next();!i.done;i=n.next()){var o=i.value;r[o]=o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Values",{get:function(){var e,t,r={};try{for(var n=Cn(this._def.values),i=n.next();!i.done;i=n.next()){var o=i.value;r[o]=o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Enum",{get:function(){var e,t,r={};try{for(var n=Cn(this._def.values),i=n.next();!i.done;i=n.next()){var o=i.value;r[o]=o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},enumerable:!1,configurable:!0}),t.create=qn,t}(Yu),_c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx,r=wu.getValidEnumValues(this._def.values);return-1===r.indexOf(t.data)?(Gn(t,{code:Pu.invalid_enum_value,options:wu.objectValues(r)}),Cu):Fu(t.data)},t.create=function(e,r){return new t(Ru({values:e,typeName:uc.ZodNativeEnum},Hn(r)))},t}(Yu),Ec=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this,r=this._processInputParams(e).ctx;if(r.parsedType!==Iu.promise&&!1===r.async)return Gn(r,{code:Pu.invalid_type,expected:Iu.promise,received:r.parsedType}),Cu;var n=r.parsedType===Iu.promise?r.data:Eu.resolve(r.data);return Fu(n.then((function(e){return t._def.type.parseAsync(e,{path:r.path,errorMap:r.contextualErrorMap})})))},t.create=function(e,r){return new t(Ru({type:e,typeName:uc.ZodPromise},Hn(r)))},t}(Yu),Oc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype.innerType=function(){return this._def.schema},t.prototype._parse=function(e){var t=this,r=this._processInputParams(e),n=r.status,i=r.ctx,o=this._def.effect||null;if("preprocess"===o.type){var a=o.transform(i.data);return i.async?Eu.resolve(a).then((function(e){return t._def.schema._parseAsync({data:e,path:i.path,parent:i})})):this._def.schema._parseSync({data:a,path:i.path,parent:i})}if("refinement"===o.type){var u={addIssue:function(e){Gn(i,e),e.fatal?n.abort():n.dirty()},get path(){return i.path}};u.addIssue=u.addIssue.bind(u);var c=function(e){var t=o.refinement(e,u);if(i.async)return Eu.resolve(t);if(t instanceof Eu)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===i.async){var s=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return"aborted"===s.status?Cu:("dirty"===s.status&&n.dirty(),c(s.value),{status:n.value,value:s.value})}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((function(e){return"aborted"===e.status?Cu:("dirty"===e.status&&n.dirty(),c(e.value).then((function(){return{status:n.value,value:e.value}})))}))}if("transform"===o.type){if(!1===i.async){var l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Gu(l))return l;var f=o.transform(l.value);if(f instanceof Eu)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return Fu(f)}return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then((function(e){return Gu(e)?Eu.resolve(o.transform(e.value)).then(Fu):e}))}wu.assertNever(o)},t.create=function(e,r,n){return new t(Ru({schema:e,typeName:uc.ZodEffects,effect:r},Hn(n)))},t.createWithPreprocess=function(e,r,n){return new t(Ru({schema:r,effect:{type:"preprocess",transform:e},typeName:uc.ZodEffects},Hn(n)))},t}(Yu),Sc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return t.parsedType===Iu.undefined?Fu(void 0):this._def.innerType._parse({data:t.data,path:t.path,parent:t})},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,r){return new t(Ru({innerType:e,typeName:uc.ZodOptional},Hn(r)))},t}(Yu),kc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx;return t.parsedType===Iu.null?Fu(null):this._def.innerType._parse({data:t.data,path:t.path,parent:t})},t.prototype.unwrap=function(){return this._def.innerType},t.create=function(e,r){return new t(Ru({innerType:e,typeName:uc.ZodNullable},Hn(r)))},t}(Yu),Tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e).ctx,r=t.data;return t.parsedType===Iu.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})},t.prototype.removeDefault=function(){return this._def.innerType},t.create=function(e,t){return new Sc(Ru({innerType:e,typeName:uc.ZodOptional},Hn(t)))},t}(Yu),Rc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Dn(t,e),t.prototype._parse=function(e){var t=this._processInputParams(e),r=t.status,n=t.ctx;return n.parsedType!==Iu.nan?(Gn(n,{code:Pu.invalid_type,expected:Iu.nan,received:n.parsedType}),Cu):{status:r.value,value:n.data}},t.create=function(e){return new t(Ru({typeName:uc.ZodNaN},Hn(e)))},t}(Yu);sc.lazycreate;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodPromise="ZodPromise"}(uc||(uc={}));$u.create,Zu.create,Rc.create,Xu.create,Ju.create,Qu.create,ec.create,tc.create,rc.create,nc.create,ic.create,oc.create,ac.create,sc.create,sc.strictCreate,lc.create,fc.create,hc.create,dc.create,pc.create,yc.create,vc.create,mc.create,gc.create,bc.create,wc.create,_c.create,Ec.create,Oc.create,Sc.create,kc.create,Oc.createWithPreprocess;var xc,Pc=function(e){function t(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i="object"===zn(e)?e:{message:String(e),code:0};ri(Zn(n=u.call(this,i.message||String(i.code))),"message",void 0),ri(Zn(n),"messageDetails",void 0),ri(Zn(n),"code",void 0),ri(Zn(n),"category",void 0),ri(Zn(n),"isFatal",void 0),ri(Zn(n),"details",void 0),ri(Zn(n),"stack",void 0),ri(Zn(n),"vsid",void 0),ri(Zn(n),"helpLink",void 0),Jo()(Zn(n),t.prototype),n.message=i.message||String(i.code)||n.message,n.messageDetails=i.messageDetails,n.code=i.code;var o=Ln(n.code);if(n.category=null!==i&&void 0!==i&&i.category&&o===ba.q.DEFAULT?i.category:o,n.details=i.details,n.isFatal=void 0===i.isFatal||i.isFatal,n.stack=i.stack&&"?:?:?"!==i.stack?i.stack:n.details&&n.details.stack||function(e,t){var r=e.url,n=e.line,i=e.col,o=e.fileName,a=e.columnNumber,u=e.lineNumber;return String(t||"".concat(r||o||"?",":").concat(n||u||"?",":").concat(i||a||"?"))}(i,Zn(n).stack),!n.stack||n.stack===bu.J.stack)try{throw new Error(n.message)}catch(a){(0,so.K)(a)&&(n.stack=a.stack||bu.J.stack)}return n.helpLink=i.helpLink||void 0,n.vsid=r||i.vsid,n}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ei(e,t)}(t,e);var r,n,i,o,a,u=(r=t,n=Qn(),function(){var e,t=ti(r);if(n){var i=ti(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return $n(this,e)});return i=t,a=[{key:"from",value:function(e){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(r=null!==(n=i.code)&&void 0!==n?n:(0,no.Y)((function(){return e.code})))&&void 0!==r?r:0;return e instanceof t?i?new t(Wn(Wn(Wn({},e),i),{},{code:o})):e:e instanceof ju?new t(Wn(i?Wn(Wn({},e),i):Wn({},e),{},{code:o})):(0,_u.V)(e)?new t(Wn(Wn(Wn({},e),i),{},{code:o})):(0,Ia.H)(e)?new t(Wn(Wn({message:e},i),{},{code:o})):new t(Wn(Wn({message:"UNEXPECTED_ERROR_TYPE"},i),{},{code:o}))}}],(o=[{key:"toString",value:function(){return JSON.stringify(this.toJSON())}},{key:"toJSON",value:function(){var e={message:this.message,messageDetails:this.messageDetails,code:this.code,category:this.category,isFatal:this.isFatal,details:this.details,stack:this.stack,vsid:this.vsid,helpLink:this.helpLink||void 0};return Wn(Wn({},e),{},{raw:JSON.stringify(e)})}}])&&Kn(i.prototype,o),a&&Kn(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}(Xn(Error));!function(e){e.EXPIRED_SIGNATURE="EXPIRED_SIGNATURE",e.NEED_COOKIE="NEED_COOKIE",e.NEED_YATEAM_LOGIN="NEED_YATEAM_LOGIN",e.NEED_VIEW_PERMISSION="NEED_VIEW_PERMISSION"}(xc||(xc={}));var jc,Ac=r(83361),Lc=function(e){var t=0;return{promise:new Ac((function(r){t=window.setTimeout(r,e)})),clear:function(){clearTimeout(t)},timeoutId:t}},Ic=r(69071),Dc=r(47751),Nc=r(18535);!function(e){e.Temporary="temporary",e.Persistent="persistent"}(jc||(jc={}));var Mc=r(83361),Cc=function(e){function t(e,r,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=E.call(this)).video=e,o.config=r,o.onEvent=i,gi(vi(o),"session",void 0),gi(vi(o),"initPromise",void 0),gi(vi(o),"shouldStopOnEncrypted",!1),gi(vi(o),"mainEventUnsubscribers",[]),gi(vi(o),"currentDrmKeySystem",ou.none),gi(vi(o),"keySystem",void 0),gi(vi(o),"requestSync",(0,Ic.l)()),gi(vi(o),"onError",void 0),o.onError=function(e){o.isDestroyed||(e.isFatal&&o.destroy(),n(e))},o.mainEventUnsubscribers.push(o.addEventListener(o.video,"encrypted",(function(e){o.logEvent("DrmEncrypted",{initDataType:e.initDataType}),o.removeSubscriptions(),o.onEncrypted(e.target)}),{once:!0})),o.mainEventUnsubscribers.push(o.addEventListener(o.video,"waitingforkey",(function(e){o.logEvent("DrmWaitingForKey",void 0),o.removeSubscriptions(),o.onEncrypted(e.target)}),{once:!0})),o.keySystem=null,o.logEvent("CreateDrmController",{config:r}),o}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&di(e,t)}(t,e);var r,n,i,o,a,u,c,s,l,f,h,d,p,y,v,m,g,b,w,_,E=pi(t);return r=t,n=[{key:"removeSubscriptions",value:function(){this.mainEventUnsubscribers.forEach((function(e){return e()})),this.mainEventUnsubscribers.length=0}},{key:"getMediaKeySessionInitData",value:(_=si(ui().mark((function e(){return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mc.resolve({}));case 1:case"end":return e.stop()}}),e)}))),function(){return _.apply(this,arguments)})},{key:"loadCertificate",value:(w=si(ui().mark((function e(r){var n,i,o,a;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem!==du.dn){e.next=2;break}return e.abrupt("return",new ArrayBuffer(0));case 2:if(!r){e.next=18;break}return e.prev=3,this.logEvent("DrmCertificateLoad",{url:r}),n=(0,ao.u)(),e.next=8,t.requestDrmProxy({method:"get",responseType:"arraybuffer",url:r,withCredentials:this.config.withCredentials},0,this.requestSync);case 8:return i=e.sent,o=i.response,this.logEvent("DrmCertificateLoadEnd",{url:r,requestTime:Math.round(n())}),e.abrupt("return",o);case 14:e.prev=14,e.t0=e.catch(3),a=Pc.from(e.t0),this.onError(new Pc(ai(ai({},a.toJSON()),{},{code:hu.DRM_CERT_LOAD_ERROR,message:"Failed to get certificate via direct link: ".concat(a),isFatal:!1})));case 18:return e.abrupt("return",new ArrayBuffer(0));case 19:case"end":return e.stop()}}),e,this,[[3,14]])}))),function(e){return w.apply(this,arguments)})},{key:"removeMediaKeys",value:(b=si(ui().mark((function e(){var t;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.video.mediaKeys){e.next=2;break}return e.abrupt("return");case 2:if(""!==(t=this.video.src)){e.next=12;break}return e.prev=4,e.next=7,this.video.setMediaKeys(null);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:return e.abrupt("return");case 12:return this.video.removeAttribute("src"),e.prev=13,e.next=16,this.video.setMediaKeys(null);case 16:e.next=20;break;case 18:e.prev=18,e.t1=e.catch(13);case 20:this.video.src=t;case 21:case"end":return e.stop()}}),e,this,[[4,9],[13,18]])}))),function(){return b.apply(this,arguments)})},{key:"activatePreloadedSession",value:(g=si(ui().mark((function e(t){var r;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.mediaKeys,e.next=3,this.removeMediaKeys();case 3:if(!this.isDestroyed){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.video.setMediaKeys(r);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return g.apply(this,arguments)})},{key:"loadOfflineSession",value:(m=si(ui().mark((function e(r){var n;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPreloadedSession(r,jc.Persistent);case 2:if(n=e.sent){e.next=5;break}throw new Pc({code:hu.DRM_SESSION_ERROR,message:"Session not found for content ID: ".concat(r),isFatal:!1});case 5:return e.abrupt("return",this.activatePreloadedSession(n));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"init",value:(v=si(ui().mark((function e(){return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initPromise){e.next=2;break}return e.abrupt("return",this.initPromise);case 2:return this.initPromise=this.initInternal(),e.abrupt("return",this.initPromise);case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"initInternal",value:(y=si(ui().mark((function e(){var r,n,i,o,a,u,c,s,l,f,h;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentDrmKeySystem===ou.none){e.next=2;break}return e.abrupt("return");case 2:if(this.video){e.next=4;break}return e.abrupt("return");case 4:if(r=this.config.privateParams||{},n=r.mode,i=r.licenseId,n!==jc.Persistent){e.next=7;break}return e.abrupt("return",this.loadOfflineSession(i));case 7:return e.next=9,t.getPreloadedSession(i,n);case 9:if(!(o=e.sent)){e.next=29;break}return e.prev=11,e.next=14,this.activatePreloadedSession(o);case 14:return this.session=o.session,this.keySystem=o.keySystem,this.currentDrmKeySystem=Rn(this.keySystem),this.shouldStopOnEncrypted=!0,e.abrupt("return");case 21:return e.prev=21,e.t0=e.catch(11),e.next=25,this.removeMediaKeys();case 25:this.shouldStopOnEncrypted=!1;case 26:return e.prev=26,t.temporarySessions.delete(i),e.finish(26);case 29:if(this.keySystem=t.getDrmKeySystem(this.config),this.keySystem){e.next=33;break}return this.onError(new Pc({code:hu.DRM_NO_SUPPORTED_KEY_SYSTEM,message:"No supported drm server specified",isFatal:!0})),e.abrupt("return");case 33:if(!this.video.mediaKeys){e.next=35;break}return e.abrupt("return");case 35:if(!(0,Nc.b)([{keySystem:this.keySystem}])){e.next=38;break}return this.currentDrmKeySystem=Rn(this.keySystem),e.abrupt("return");case 38:return a=t.getServerCertificateUrl(this.config,this.keySystem),u=this.loadCertificate(a),e.prev=40,e.next=43,t.getMediaKeySystemAccess(this.keySystem);case 43:return s=e.sent,e.next=46,s.createMediaKeys();case 46:c=e.sent,e.next=54;break;case 49:return e.prev=49,e.t1=e.catch(40),l=(0,so.K)(e.t1)?e.t1.message:(0,Ia.H)(e.t1)?e.t1:"",this.onError(Pc.from(e.t1,{code:hu.DRM_FAILED_TO_CREATE_CDM,message:"Failed to create mediaKeys: ".concat(l),isFatal:!0})),e.abrupt("return");case 54:if(e.prev=54,!this.isDestroyed){e.next=57;break}return e.abrupt("return");case 57:return e.next=59,this.video.setMediaKeys(c);case 59:e.next=66;break;case 61:return e.prev=61,e.t2=e.catch(54),f=(0,so.K)(e.t2)?e.t2.message:(0,Ia.H)(e.t2)?e.t2:"",this.onError(Pc.from(e.t2,{code:hu.DRM_FAILED_TO_SET_MEDIA_KEYS,message:"Failed set mediaKeys: ".concat(f),isFatal:!0})),e.abrupt("return");case 66:return e.next=68,u;case 68:if(!(h=e.sent).byteLength){e.next=72;break}return e.next=72,c.setServerCertificate(h);case 72:this.currentDrmKeySystem=Rn(this.keySystem);case 73:case"end":return e.stop()}}),e,this,[[11,21,26,29],[40,49],[54,61]])}))),function(){return y.apply(this,arguments)})},{key:"onEncrypted",value:(p=si(ui().mark((function e(r){var n,i,o,a,u=this;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.initPromise;case 4:if(!this.shouldStopOnEncrypted){e.next=6;break}return e.abrupt("return");case 6:if(r.mediaKeys&&this.keySystem){e.next=9;break}return this.onError(new Pc({code:hu.DRM_INIT_ERROR,message:"MediaKeys not inited",isFatal:!0})),e.abrupt("return");case 9:if(i=null===(n=this.config.servers)||void 0===n?void 0:n[this.keySystem]){e.next=13;break}return this.onError(new Pc({code:hu.DRM_NO_LICENSE_SERVER,message:"No valid url to license server",isFatal:!0})),e.abrupt("return");case 13:e.prev=13,this.session=r.mediaKeys.createSession(),e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(13),o=(0,so.K)(e.t0)?e.t0.message:(0,Ia.H)(e.t0)?e.t0:"",this.onError(Pc.from(e.t0,{code:hu.DRM_FAILED_TO_CREATE_SESSION,message:"Failed to create session: ".concat(o),isFatal:!0})),e.abrupt("return");case 22:if(this.session){e.next=25;break}return this.onError(new Pc({code:hu.DRM_FAILED_TO_CREATE_SESSION,message:"session is ".concat(this.session),isFatal:!0})),e.abrupt("return");case 25:return this.addEventListener(this.session,"message",function(){var e=si(ui().mark((function e(r){var n,o,a,c,s,l,f,h;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.message,e.prev=1,u.logEvent("DrmProxyRequest",{requestParams:u.config.requestParams,url:i,keySystem:u.keySystem}),o=(0,ao.u)(),a={keySystem:u.keySystem,url:i,config:u.config,message:n,retry:0},e.next=7,t.handleSessionMessage(a,u.requestSync,u.onError);case 7:if(c=e.sent,s=c.response,u.logEvent("DrmProxyRequestEnd",{url:i,requestTime:Math.round(o()),keySystem:u.keySystem}),!u.isDestroyed){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,u.updateSession(s);case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(1),f=Pc.from(e.t0),h=null!==(l=f.details)&&void 0!==l&&l.drmProxyError?f.code:hu.DRM_SESSION_ERROR,u.onError(new Pc(ai(ai({},f.toJSON()),{},{code:h,message:"Failed to handle session message: ".concat(f)})));case 21:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}(),!1),this.addEventListener(this.session,"error",(function(e){var t,r;u.onError(new Pc(ai(ai({},e),{},{code:hu.DRM_SESSION_ERROR,message:"Session error: ".concat(e.message),isFatal:null===(t=null===(r=e.details)||void 0===r?void 0:r.isFatal)||void 0===t||t})))})),e.prev=27,e.next=30,this.getMediaKeySessionInitData();case 30:return a=e.sent,e.next=33,this.generateRequest(this.session,a);case 33:e.next=39;break;case 35:return e.prev=35,e.t1=e.catch(27),this.onError(Pc.from(e.t1,{code:hu.DRM_UNKNOWN_ERROR})),e.abrupt("return");case 39:case"end":return e.stop()}}),e,this,[[13,17],[27,35]])}))),function(e){return p.apply(this,arguments)})},{key:"updateSession",value:(d=si(ui().mark((function e(t){var r;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem!==du.dn){e.next=5;break}return e.next=3,this.updateClearKeyLicense(t);case 3:e.next=7;break;case 5:return e.next=7,null===(r=this.session)||void 0===r?void 0:r.update(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"createClearKeyObject",value:function(e,t){return{kty:"oct",kid:e,k:t,alg:"A128KW"}}},{key:"updateClearKeyLicense",value:(h=si(ui().mark((function e(t){var r,n,i,o,a,u=this;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.keySystem===du.dn){e.next=2;break}return e.abrupt("return");case 2:return n=JSON.parse((new TextDecoder).decode(t)),i=n.keys,o=i.map((function(e){var t=e.key_id,r=e.key;return u.createClearKeyObject(t,r)})),a=(new TextEncoder).encode(JSON.stringify({keys:o})),e.next=8,null===(r=this.session)||void 0===r?void 0:r.update(a);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"generateRequest",value:(f=si(ui().mark((function e(t,r){var n,i,o,a;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.initData,i=r.initDataType,!this.isDestroyed){e.next=3;break}return e.abrupt("return");case 3:if(n){e.next=6;break}return this.onError(new Pc({code:hu.DRM_NO_INIT_DATA,message:"No drm initialization data in initialization info",isFatal:!0})),e.abrupt("return");case 6:return e.prev=6,o=yu.P.fromBase64(n).buffer,e.next=10,t.generateRequest(i,o);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),a=(0,so.K)(e.t0)?e.t0.message:(0,Ia.H)(e.t0)?e.t0:"",this.onError(Pc.from(e.t0,{code:hu.DRM_FAILED_TO_GENERATE_REQUEST,message:"Failed to generate request: ".concat(a,"}"),isFatal:!0}));case 16:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e,t){return f.apply(this,arguments)})},{key:"addEventListener",value:function(e,t,r,n){var i=(0,io.O)(e,t,r,n);return this.addDestroyHandler(i),i}},{key:"destroy",value:(l=si(ui().mark((function e(){var r,n,i;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fi(mi(t.prototype),"destroy",this).call(this),this.logEvent("DestroyDrmControllerCalled",void 0),this.currentDrmKeySystem=ou.none,e.prev=3,i=Lc(1e3).promise,e.next=7,Mc.race([Mc.all([null===(r=this.session)||void 0===r?void 0:r.closed,null===(n=this.session)||void 0===n?void 0:n.close()]),i]);case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:if(this.session=void 0,""!==this.video.src){e.next=20;break}return e.prev=13,e.next=16,this.video.setMediaKeys(null);case 16:e.next=20;break;case 18:e.prev=18,e.t1=e.catch(13);case 20:this.logEvent("DestroyDrmController",void 0);case 21:case"end":return e.stop()}}),e,this,[[3,9],[13,18]])}))),function(){return l.apply(this,arguments)})},{key:"logEvent",value:function(e,t){this.onEvent({name:e,data:t})}}],i=[{key:"savePreloadedSession",value:function(e,r,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jc.Temporary;if(o!==jc.Persistent)t.temporarySessions.set(r,{session:n,mediaKeys:i,keySystem:e});else{var a=n.sessionId;Sa.t.setItem(r,JSON.stringify({sessionId:a,keySystem:e}))}}},{key:"getMediaKeySystemAccess",value:(s=si(ui().mark((function e(r){var n,i,o=arguments;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:jc.Temporary,!(i=t.mediaKeySystemAccessMaps[n].get(r))){e.next=4;break}return e.abrupt("return",i);case 4:return e.next=6,window.navigator.requestMediaKeySystemAccess(r,t.getVideoConfigs(n));case 6:return i=e.sent,t.mediaKeySystemAccessMaps[n].set(r,i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)})},{key:"extendDrmConfig",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jc.Temporary;return ai(ai({},e),{},{privateParams:{licenseId:t,mode:r}})}},{key:"preloadSession",value:(c=si(ui().mark((function e(r,n){var i,o,a,u,c,s;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.privateParams||{},o=i.mode,a=void 0===o?jc.Temporary:o,u=i.licenseId,e.next=3,t.getPreloadedSession(u,a);case 3:if(!e.sent){e.next=6;break}return e.abrupt("return");case 6:return c=new Wa.B,s=t.preloadSessionInternal(r,n,c),e.abrupt("return",Mc.race([s,c.promise]).then(function(){var e=si(ui().mark((function e(r){var n,i,o,a,u;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.keySystem,i=r.licenseId,o=r.session,a=r.mediaKeys,u=r.mode,t.savePreloadedSession(n,i,o,a,u),u!==jc.Persistent){e.next=5;break}return e.next=5,o.close();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})},{key:"preloadSessionInternal",value:(u=si(ui().mark((function e(r,n,i){var o,a,u,c,s,l,f,h,d,p,y,v,m,g,b,w,_,E,O,S,k,T,R,x,P,j,A,L;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=r.privateParams||{},c=u.mode,s=void 0===c?jc.Temporary:c,l=u.licenseId){e.next=3;break}throw new Pc({code:hu.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without licenseId",isFatal:!1});case 3:if(null!==(f=t.getDrmKeySystem(r))){e.next=6;break}throw new Pc({code:hu.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without supported key system in drm config",isFatal:!1});case 6:if(h=n.find((function(e){return e.keySystem===f}))){e.next=9;break}throw new Pc({code:hu.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without drm info for chosen key system ".concat(f),isFatal:!1});case 9:if(d=h.initData[0],p=d.initData,y=d.initDataType,p){e.next=12;break}throw new Pc({code:hu.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without init data for chosen key system ".concat(f),isFatal:!1});case 12:if(v=null===(o=r.servers)||void 0===o?void 0:o[f]){e.next=15;break}throw new Pc({code:hu.DRM_CERT_LOAD_ERROR,message:"Can not preload drm session without license url",isFatal:!1});case 15:return e.next=17,t.getMediaKeySystemAccess(f,s);case 17:return m=e.sent,e.next=20,m.createMediaKeys();case 20:if(g=e.sent,b=yu.P.fromBase64(p).buffer,(w=g.createSession(s===jc.Persistent?"persistent-license":"temporary")).onkeystatuseschange=function(){switch(w.keyStatuses.values().next().value){case"usable":i.resolve({keySystem:f,licenseId:l,session:w,mediaKeys:g,mode:s});break;case"expired":i.reject(new Pc({code:hu.DRM_LICENSE_LOAD_ERROR,message:"License expired",isFatal:!1}));break;case"internal-error":i.reject(new Pc({code:hu.DRM_LICENSE_LOAD_ERROR,message:"EME internal error",isFatal:!1}))}},_=(0,Ic.l)(),E=(null===(a=r.advanced)||void 0===a?void 0:a[f])||{},!(O=E.serverCertificateUrl)){e.next=33;break}return e.next=29,t.requestDrmProxy({method:"get",responseType:"arraybuffer",url:O,withCredentials:r.withCredentials},0,_);case 29:return S=e.sent,k=S.response,e.next=33,g.setServerCertificate(k);case 33:return e.next=35,w.generateRequest(y,b);case 35:if(O){e.next=45;break}return e.next=38,t.getSessionMessage(w,i.promise);case 38:return T=e.sent,e.next=41,t.handleSessionMessage({keySystem:f,url:v,config:r,message:T,retry:0},_);case 41:return R=e.sent,x=R.response,e.next=45,w.update(x);case 45:return e.next=47,t.getSessionMessage(w,i.promise);case 47:return P=e.sent,j={keySystem:f,url:v,config:r,message:P,retry:0},e.next=51,t.handleSessionMessage(j,_);case 51:return A=e.sent,L=A.response,e.next=55,w.update(L);case 55:return e.abrupt("return",{keySystem:f,licenseId:l,session:w,mediaKeys:g,mode:s});case 56:case"end":return e.stop()}}),e)}))),function(e,t,r){return u.apply(this,arguments)})},{key:"getSessionMessage",value:function(e,t){return new Mc((function(r,n){var i=function(e){r(e.message)},o=function(){n(new Pc({code:hu.DRM_SESSION_ERROR,message:"DRM session error",isFatal:!1}))};if(e.addEventListener("message",i,{once:!0}),e.addEventListener("error",o,{once:!0}),t){var a=function(){e.removeEventListener("message",i),e.removeEventListener("error",o)};t.then(a,a)}}))}},{key:"isExpired",value:function(e){var t=e.expiration;return!isNaN(t)&&t<=Date.now()}},{key:"getPreloadedSession",value:(a=si(ui().mark((function e(r){var n,i,o,a,u,c,s,l,f,h,d=arguments;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=d.length>1&&void 0!==d[1]?d[1]:jc.Temporary,r){e.next=3;break}return e.abrupt("return",null);case 3:if(i!==jc.Persistent){e.next=18;break}if(o=Sa.t.getItem(r)){e.next=7;break}return e.abrupt("return",null);case 7:return a=JSON.parse(o),u=a.sessionId,c=a.keySystem,e.next=10,t.getMediaKeySystemAccess(c,jc.Persistent);case 10:return s=e.sent,e.next=13,s.createMediaKeys();case 13:return l=e.sent,f=l.createSession("persistent-license"),e.next=17,f.load(u);case 17:return e.abrupt("return",{session:f,mediaKeys:l,keySystem:c});case 18:if(h=t.temporarySessions.get(r)){e.next=21;break}return e.abrupt("return",null);case 21:if(!t.isExpired(h.session)){e.next=24;break}return t.temporarySessions.delete(r),e.abrupt("return",null);case 24:return e.abrupt("return",null!==(n=t.temporarySessions.get(r))&&void 0!==n?n:null);case 25:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"removeOfflineSession",value:(o=si(ui().mark((function e(r){var n,i;return ui().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPreloadedSession(r,jc.Persistent);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(n=e.t0,i=n.session,e.t1=i,!e.t1){e.next=11;break}return e.next=11,i.remove();case 11:Sa.t.removeItem(r);case 12:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"getVideoConfigs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jc.Temporary;return e===jc.Persistent?pu.map((function(e){return ai(ai({},e),{},{sessionTypes:["persistent-license"]})})):pu}},{key:"requestDrmProxy",value:function(e,t,r){return r.waitAndLock((function(){return new Mc((function(n,i){(0,vu.W)(ai(ai({},e),{},{onSuccess:n,onError:function(e,n){var o,a=An(gu.x.fromUTF8(n.response),n.status),u=function(e,t){switch(e){case 429:return([500,2500,6500][t]||1e3)+1e3*Math.random();default:return 0}}(n.status,t);return r.addLock((0,Dc._)(u)),i(new Pc({isFatal:(o=a).isFatal,code:ni(o),details:{drmProxyError:o.error},helpLink:o.helpLink}))}}))}))}))}},{key:"getRequestParams",value:function(e,r,n,i){var o=i,a=n.requestParams,u=n.withCredentials,c=ai({},a),s={method:"post",data:"",responseType:"arraybuffer",url:r,withCredentials:u};if(e===du.xE){var l=t.unpackPlayReadyRequest(i);s.headers=ai(ai({},l.headers),s.headers),delete s.headers["Content-Type"],o=l.data}if(e===du.dn){var f=JSON.parse((new TextDecoder).decode(i));c.key_ids=f.kids}return s.data=function(){if(!a)return o;var e=ai(ai({},c),{},{rawLicenseRequestBase64:yu.P.toBase64(new Uint8Array(o))});return gu.x.toUTF8(JSON.stringify(e))}(),s}},{key:"handleSessionMessage",value:function(e,r,n){var i=e.keySystem,o=e.url,a=e.config,u=e.message,c=e.retry,s=t.getRequestParams(i,o,a,u);return t.requestDrmProxy(s,c,r).catch((function(e){var s,l=Pc.from(e),f=new Pc(ai(ai({},l.toJSON()),{},{isFatal:l.isFatal||c>3,code:null!==(s=l.details)&&void 0!==s&&s.drmProxyError?l.code:hu.DRM_SESSION_ERROR,message:"Failed to handle session message: ".concat(l)}));if(null===n||void 0===n||n(f),f.isFatal)throw f;return t.handleSessionMessage({keySystem:i,url:o,config:a,message:u,retry:c+1},r,n)}))}},{key:"unpackPlayReadyRequest",value:function(e){var t=gu.x.fromUTF16(e,!0,!0),r={},n=e;if(!t.includes("PlayReadyKeyMessage"))return{headers:r,data:n};for(var i=(new DOMParser).parseFromString(t,"application/xml"),o=i.getElementsByTagName("HttpHeader"),a=0;a<o.length;++a){var u=o[a].getElementsByTagName("name")[0],c=o[a].getElementsByTagName("value")[0];u.textContent&&c.textContent&&(r[u.textContent]=c.textContent)}var s=i.getElementsByTagName("Challenge")[0];return s&&"base64encoded"===s.getAttribute("encoding")&&(n=yu.P.fromBase64(s.textContent).buffer),{headers:r,data:n}}},{key:"getDrmKeySystem",value:function(e){var t,r,n;return null!==(t=e.servers)&&void 0!==t&&t[du.ly]?du.ly:null!==(r=e.servers)&&void 0!==r&&r[du.xE]?du.xE:null!==(n=e.servers)&&void 0!==n&&n[du.dn]?du.dn:null}},{key:"getServerCertificateUrl",value:function(e,t){var r;return((null===(r=e.advanced)||void 0===r?void 0:r[t])||{}).serverCertificateUrl}}],n&&li(r.prototype,n),i&&li(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Ro);gi(Cc,"temporarySessions",new Map),gi(Cc,"mediaKeySystemAccessMaps",{persistent:new Map,temporary:new Map});var Fc=r(83361),Bc=function(e){function t(e,r,n){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pi(Ri(i=a.call(this,e,r,n,(function(t){var r;null===(r=e.yaspDispatchEvent)||void 0===r||r.call(e,"yasp-event",t)}))),"drmInfoReceivedDeferred",new Wa.B),Pi(Ri(i),"onYaspWaitForKey",function(){var e=Ei(wi().mark((function e(t){var r,n,o,a,u,c,s;return wi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,o=t.source,e.next=3,i.initPromise;case 3:if(i.keySystem&&i.keySystem===du.dn){e.next=5;break}return e.abrupt("return");case 5:if(a=null===(r=i.config.servers)||void 0===r?void 0:r[i.keySystem]){e.next=8;break}return e.abrupt("return");case 8:return u={keySystem:i.keySystem,url:a,config:i.config,message:n,retry:0},e.next=11,Cc.handleSessionMessage(u,i.requestSync,i.onError);case 11:c=e.sent,s=c.response,iu.configureSource(o,{drmKeysResponse:s});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.addEventListener(i.video,"yasp-drmInfoReceived",(function(t){var r,n=t.detail.map((function(e){return e.keySystem}));null===(r=e.yaspDispatchEvent)||void 0===r||r.call(e,"yasp-event",{name:"DrmInfoReceived",data:{keySystems:n}}),i.drmInfoReceivedDeferred.resolve(t)}),{once:!0}),i.addEventListener(i.video,"yasp-waitForKey",(function(e){var t=e.detail;return i.onYaspWaitForKey(t)}),{once:!0}),i}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Si(e,t)}(t,e);var r,n,i,o,a=ki(t);return r=t,(n=[{key:"getMediaKeySessionInitData",value:(o=Ei(wi().mark((function e(){var t,r,n,i,o,a=this;return wi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.drmInfoReceivedDeferred.promise;case 2:if(n=e.sent,i=n.detail,o=i.find((function(e){return e.keySystem===a.keySystem}))){e.next=7;break}throw new Pc({code:hu.DRM_INIT_ERROR,message:"No drm initialization info",isFatal:!0});case 7:if(null!==(t=o.initData)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.initData){e.next=9;break}throw new Pc({code:hu.DRM_INIT_ERROR,message:"No drm initialization data in initialization info",isFatal:!0});case 9:return e.abrupt("return",o.initData[0]);case 10:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})}])&&Oi(r.prototype,n),i&&Oi(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(Cc),Uc=r(83361),Gc=self;Gc.Ya=Gc.Ya||{},Gc.Ya.YaspVideoElement=iu,Gc.Ya.YaspAudioElement=lu,Gc.Ya.YaspDrmController=Bc,Gc.Ya.preloadYaspScripts=function(){return Uc.resolve()},Gc.Ya.applyFlags=function(e){var t=(0,no.Y)((function(){return JSON.parse(e)}))||{};(0,ha.Vc)({flags:t})}},50041:function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,i,o;"undefined"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView=function(e){return null!=e&&null!=e.__proto__&&e.__proto__.__proto__===Int8Array.prototype.__proto__}),"undefined"===typeof Math.imul&&(Math.imul=function(e,t){return(4294901760&e)*(65535&t)+(65535&e)*(0|t)|0}),i=[t],void 0===(o="function"===typeof(n=function(e){"use strict";function t(e){return e.length-1|0}function n(e,t){if(null==t){var r=0,n=e.length-1|0;if(r<=n)do{var i=r;if(r=r+1|0,null==e[i])return i}while(r<=n)}else{var o=0,a=e.length-1|0;if(o<=a)do{var u=o;if(o=o+1|0,ut(t,e[u]))return u}while(o<=a)}return-1}function i(e,t,r,n,i,o,a){return t=t===$r?", ":t,r=r===$r?"":r,n=n===$r?"":n,i=i===$r?-1:i,o=o===$r?"...":o,a=a===$r?null:a,function(e,t,r,n,i,o,a,u){r=r===$r?", ":r,n=n===$r?"":n,i=i===$r?"":i,o=o===$r?-1:o,a=a===$r?"...":a,u=u===$r?null:u,t.a(n);var c=0,s=e.b();e:for(;s.c();){var l=s.d();if((c=c+1|0)>1&&t.a(r),!(o<0||c<=o))break e;N(t,l,u)}return o>=0&&c>o&&t.a(a),t.a(i),t}(e,Le(),t,r,n,i,o,a).toString()}function o(e){if(Ht(e,Fe)){var t;switch(e.e()){case 0:t=P();break;case 1:t=z(Ht(e,Ce)?e.f(0):e.b().d());break;default:t=a(e)}return t}return function(e){switch(e.e()){case 0:return P();case 1:return z(e.f(0));default:return e}}(u(e))}function a(e){return ue(e)}function u(e){return Ht(e,Fe)?a(e):function(e,t){for(var r=e.b();r.c();){var n=r.d();t.g(n)}return t}(e,ae())}function c(e,t){return Ht(e,Fe)?e.h(t):function(e,t){if(Ht(e,Ce))return e.i(t);for(var r=0,n=e.b();n.c();){var i=n.d();if(Z(r),ut(t,i))return r;r=r+1|0}return-1}(e,t)>=0}function s(){}function l(){_r=this}function f(){return null==_r&&new l,_r}function h(e){this.q_1=e}function d(e,t){return t===e?"(this Map)":Ve(t)}function p(e,t){var r;e:{for(var n=e.s().b();n.c();){var i=n.d();if(ut(i.r(),t)){r=i;break e}}r=null}return r}function y(){Er=this}function v(){return null==Er&&new y,Er}function m(e){this.x_1=e,_.call(this)}function g(){v(),this.z_1=null,this.a1_1=null}function b(){Or=this}function w(){return null==Or&&new b,Or}function _(){w(),s.call(this)}function E(e,t){if(t<0)throw Qt("Deque is too big.");if(t<=e.k1_1.length)return G();if(e.k1_1===R().m1_1){var r,n=e;R();var i=(o=t)<(a=10)?a:o;return r=Ye(Array(i),null),n.k1_1=r,G()}var o,a;!function(e,t){var r=Ye(Array(t),null),n=e.k1_1,i=e.j1_1,o=e.k1_1.length;$(n,r,0,i,o);var a=e.k1_1,u=e.k1_1.length-e.j1_1|0,c=e.j1_1;$(a,r,u,0,c),e.j1_1=0,e.k1_1=r}(e,R().p1(e.k1_1.length,t))}function O(e,t){return t>=e.k1_1.length?t-e.k1_1.length|0:t}function S(e,r){return r===t(e.k1_1)?0:r+1|0}function k(e,r){return 0===r?t(e.k1_1):r-1|0}function T(){var e;Sr=this,e=[],this.m1_1=e,this.n1_1=2147483639,this.o1_1=10}function R(){return null==Sr&&new T,Sr}function x(){R(),this.j1_1=0,this.l1_1=0}function P(){return null==kr&&new j,kr}function j(){kr=this,this.c2_1=new vt(-1478467534,-1720727600)}function A(){Tr=this}function L(e){return e.e()-1|0}function I(e,t){this.g2_1=e,this.h2_1=t}function D(){Rr=this}function N(e,t,r){var n;null!=r?e.a(r(t)):null==t||"string"===typeof(n=t)||Ht(n,C)?e.a(t):t instanceof Me?e.r2(t.q2_1):e.a(Ve(t))}function M(e,t){this.k2_1=e,this.l2_1=t}function C(){}function F(){}function B(){}function U(){xr=this}function G(){return null==xr&&new U,xr}function H(){Pr=this,this.MIN_VALUE=-2147483648,this.MAX_VALUE=2147483647,this.SIZE_BYTES=4,this.SIZE_BITS=32}function V(){jr=this,this.MIN_VALUE=5e-324,this.MAX_VALUE=17976931348623157e292,this.POSITIVE_INFINITY=1/0,this.NEGATIVE_INFINITY=-1/0,this.NaN=NaN,this.SIZE_BYTES=8,this.SIZE_BITS=64}function q(){return null==jr&&new V,jr}function Y(){}function W(e){for(var t=[],r=e.b();r.c();)t.push(r.d());return t}function z(e){return 0===(t=[e]).length?ae():ue(new I(t,!0));var t}function K(e){return void 0!==e.toArray?e.toArray():W(e)}function $(e,t,r,n,i){f().n(n,i,e.length);var o=i-n|0;if(f().n(r,r+o|0,t.length),Xr(t)&&Xr(e)){var a=e.subarray(n,i);t.set(a,r)}else if(e!==t||r<=n){var u=0;if(u<o)do{var c=u;u=u+1|0,t[r+c|0]=e[n+c|0]}while(u<o)}else{var s=o-1|0;if(0<=s)do{var l=s;s=s+-1|0,t[r+l|0]=e[n+l|0]}while(0<=s)}}function Z(e){return e<0&&function(){throw dr("Index overflow has happened.")}(),e}function X(){s.call(this)}function J(e){this.e3_1=e,this.c3_1=0,this.d3_1=-1}function Q(){X.call(this),this.a2_1=0}function ee(e){this.f3_1=e}function te(e,t){this.g3_1=e,this.h3_1=t}function re(){oe.call(this)}function ne(e){this.l3_1=e,oe.call(this)}function ie(){g.call(this),this.q3_1=null,this.r3_1=null}function oe(){X.call(this)}function ae(){return e=lt(st(se)),t=[],se.call(e,t),e;var e,t}function ue(e){return function(e,t){var r;return r=K(e),se.call(t,r),t}(e,lt(st(se)))}function ce(e,t){return f().l(t,e.e()),t}function se(e){Q.call(this),this.t3_1=e,this.u3_1=!1}function le(e,r){if(function(){var e=Ar;if(null!=e)return e;Ar=!1;var t=[],r=0;if(r<600)do{var n=r;r=r+1|0,t.push(n)}while(r<600);t.sort(fe);var i=1,o=t.length;if(i<o)do{var a=i;i=i+1|0;var u=t[a-1|0],c=t[a];if((3&u)===(3&c)&&u>=c)return!1}while(i<o);return Ar=!0,!0}()){var n=(i=r,function(e,t){return i.compare(e,t)});e.sort(n)}else!function(e,t,r,n){var i,o=e.length;i=Ye(Array(o),null);var a=function e(t,r,n,i,o){if(n===i)return t;var a=(n+i|0)/2|0,u=e(t,r,n,a,o),c=e(t,r,a+1|0,i,o),s=u===r?t:r,l=n,f=a+1|0,h=n;if(h<=i)do{var d=h;if(h=h+1|0,l<=a&&f<=i){var p=u[l],y=c[f];o.compare(p,y)<=0?(s[d]=p,l=l+1|0):(s[d]=y,f=f+1|0)}else l<=a?(s[d]=u[l],l=l+1|0):(s[d]=c[f],f=f+1|0)}while(d!==i);return s}(e,i,t,r,n);if(a!==e){var u=t;if(u<=r)do{var c=u;u=u+1|0,e[c]=a[c]}while(c!==r)}}(e,0,t(e),r);var i}function fe(e,t){return(3&e)-(3&t)|0}function he(){Lr=this}function de(e){this.x3_1=e,re.call(this)}function pe(e){return function(e,t){ie.call(t),ye.call(t),t.d4_1=e,t.e4_1=e.g4()}(new _e((null==Lr&&new he,Lr)),e),e}function ye(){this.f4_1=null}function ve(){}function me(e,t){var r=be(e,e.s4_1.w3(t));if(null==r)return null;var n=r;if(null!=n&&Vt(n))return ge(n,e,t);var i=n;return e.s4_1.v3(i.r(),t)?i:null}function ge(e,t,r){var n;e:{for(var i=e,o=0,a=i.length;o<a;){var u=i[o];if(o=o+1|0,t.s4_1.v3(u.r(),r)){n=u;break e}}n=null}return n}function be(e,t){var r=e.t4_1[t];return void 0===r?null:r}function we(e){this.r4_1=e,this.k4_1=-1,this.l4_1=Object.keys(e.t4_1),this.m4_1=-1,this.n4_1=null,this.o4_1=!1,this.p4_1=-1,this.q4_1=null}function _e(e){this.s4_1=e,this.t4_1=this.v4(),this.u4_1=0}function Ee(){}function Oe(e){this.y4_1=e,this.w4_1=null,this.x4_1=null,this.x4_1=this.y4_1.j5_1.g5_1}function Se(e,t,r){this.o5_1=e,te.call(this,t,r),this.m5_1=null,this.n5_1=null}function ke(e){this.j5_1=e,re.call(this)}function Te(e,t){e.m5_1===e?t.g5_1=null:(t.g5_1===e&&(t.g5_1=e.m5_1),dt(e.m5_1).n5_1=e.n5_1,dt(e.n5_1).m5_1=e.m5_1),e.m5_1=null,e.n5_1=null}function Re(e){return pe(e),Pe.call(e),e.h5_1=pe(lt(st(ye))),e}function xe(){return Re(lt(st(Pe)))}function Pe(){this.g5_1=null,this.i5_1=!1}function je(){}function Ae(e){return!(e===e)}function Le(){return e=lt(st(Ie)),Ie.call(e,""),e;var e}function Ie(e){this.q5_1=void 0!==e?e:""}function De(e,t){return e-t|0}function Ne(){Ir=this,this.r5_1=0,this.s5_1=65535,this.t5_1=55296,this.u5_1=56319,this.v5_1=56320,this.w5_1=57343,this.x5_1=55296,this.y5_1=57343,this.z5_1=2,this.a6_1=16}function Me(e){null==Ir&&new Ne,this.q2_1=e}function Ce(){}function Fe(){}function Be(){}function Ue(){}function Ge(){}function He(){}function Ve(e){var t=null==e?null:ot(e);return null==t?"null":t}function qe(e){for(var t=1,r=[],n=e,i=0,o=n.length;i<o;){var a=n[i];i=i+1|0;var u=t,c=a.prototype.$imask$,s=null==c?a.$imask$:c;null!=s&&(r.push(s),u=s.length);var l,f=a.$metadata$.iid;null==f?l=null:(d=f,p=void 0,y=void 0,v=void 0,p=new Int32Array(1+(d>>5)|0),v=1<<(31&d),p[y=d>>5]=p[y]|v,l=p);var h=l;null!=h&&(r.push(h),u=Math.max(u,h.length)),u>t&&(t=u)}var d,p,y,v;return function(e,t){for(var r=0,n=e,i=new Int32Array(n);r<n;){for(var o,a=r,u=0,c=t,s=0,l=c.length;s<l;){var f=c[s];s=s+1|0,a<f.length&&(u|=f[a])}o=u,i[a]=o,r=r+1|0}return i}(t,r)}function Ye(e,t){var r=0,n=e.length-1|0;if(r<=n)do{var i=r;r=r+1|0,e[i]=t}while(i!==n);return e}function We(e){return new ze(e)}function ze(e){this.d6_1=e,this.c6_1=0}function Ke(){return Qe(),Dr}function $e(){return Qe(),Nr}function Ze(){return Qe(),Mr}function Xe(){return Qe(),Cr}function Je(e){return Qe(),(0|e)===e?(t=e)instanceof vt?t.q6():function(e){return e>2147483647?2147483647:e<-2147483648?-2147483648:0|e}(t):($e()[0]=e,Zr(Ze()[(Qe(),Fr)],31)+Ze()[Xe()]|0);var t}function Qe(){if(Br);else{Br=!0,Dr=new ArrayBuffer(8);var e=new Float64Array(Ke());Nr=e;new Float32Array(Ke());var t,r=new Int32Array(Ke());Mr=r,$e()[0]=-1,t=0!==Ze()[0]?1:0,Cr=t,Fr=1-Xe()|0}}function et(e){return ot(e)}function tt(e,t){var n;switch(r(e)){case"number":n="number"===typeof t?rt(e,t):t instanceof vt?rt(e,t.g6()):nt(e,t);break;case"string":case"boolean":n=nt(e,t);break;default:n=function(e,t){return e.s2(t)}(e,t)}return n}function rt(e,t){var r;if(e<t)r=-1;else if(e>t)r=1;else if(e===t){var n;if(0!==e)n=0;else{var i=1/e;n=i===1/t?0:i<0?-1:1}r=n}else r=e!==e?t!==t?0:1:-1;return r}function nt(e,t){return e<t?-1:e>t?1:0}function it(e){if(!("kotlinHashCodeValue$"in e)){var t=0|4294967296*Math.random(),r=new Object;r.value=t,r.enumerable=!1,Object.defineProperty(e,"kotlinHashCodeValue$",r)}return e.kotlinHashCodeValue$}function ot(e){return null==e?"null":function(e){return!!Ut(e)||Xr(e)}(e)?"[...]":e.toString()}function at(e){if(null==e)return 0;var t;switch(r(e)){case"object":t="function"===typeof e.hashCode?e.hashCode():it(e);break;case"function":t=it(e);break;case"number":t=Je(e);break;case"boolean":t=e?1:0;break;default:t=function(e){var t=0,r=e.length,n=0,i=r-1|0;if(n<=i)do{var o=n;n=n+1|0;var a=e.charCodeAt(o);t=Zr(t,31)+a|0}while(o!==i);return t}(String(e))}return t}function ut(e,t){if(null==e)return null==t;if(null==t)return!1;if("object"===r(e)&&"function"===typeof e.equals)return e.equals(t);if(e!==e)return t!==t;if("number"===typeof e&&"number"===typeof t){var n;if(e===t)n=0!==e||1/e===1/t;else n=!1;return n}return e===t}function ct(e,t){null!=Error.captureStackTrace?Error.captureStackTrace(e,t):e.stack=(new Error).stack}function st(e){return e.prototype}function lt(e){return Object.create(e)}function ft(e,t,r){Error.call(e),function(e,t,r){if(!ht(e,"message")){var n;if(null==t){var i;if(null!==t){var o=r,a=null==o?null:o.toString();i=null==a?$r:a}else i=$r;n=i}else n=t;e.message=n}ht(e,"cause")||(e.cause=r),e.name=Object.getPrototypeOf(e).constructor.name}(e,t,r)}function ht(e,t){return Object.getPrototypeOf(e).hasOwnProperty(t)}function dt(e){var t;return null==e?function(){throw yr()}():t=e,t}function pt(){throw mr()}function yt(){Ur=this,this.h6_1=new vt(0,-2147483648),this.i6_1=new vt(-1,2147483647),this.j6_1=8,this.k6_1=64}function vt(e,t){null==Ur&&new yt,B.call(this),this.e6_1=e,this.f6_1=t}function mt(){return Ct(),Gr}function gt(){return Ct(),Hr}function bt(){return Ct(),Vr}function wt(){return Ct(),Yr}function _t(){return Ct(),Wr}function Et(e,t){if(Ct(),Rt(e,t))return 0;var r=Pt(e),n=Pt(t);return r&&!n?-1:!r&&n?1:Pt(St(e,t))?-1:1}function Ot(e,t){Ct();var r=e.f6_1>>>16|0,n=65535&e.f6_1,i=e.e6_1>>>16|0,o=65535&e.e6_1,a=t.f6_1>>>16|0,u=65535&t.f6_1,c=t.e6_1>>>16|0,s=0,l=0,f=0,h=0;return s=(s=s+((l=(l=l+((f=(f=f+((h=h+(o+(65535&t.e6_1)|0)|0)>>>16|0)|0)+(i+c|0)|0)>>>16|0)|0)+(n+u|0)|0)>>>16|0)|0)+(r+a|0)|0,new vt((f&=65535)<<16|(h&=65535),(s&=65535)<<16|(l&=65535))}function St(e,t){return Ct(),Ot(e,t.o6())}function kt(e,t){if(Ct(),jt(e))return mt();if(jt(t))return mt();if(Rt(e,wt()))return At(t)?wt():mt();if(Rt(t,wt()))return At(e)?wt():mt();if(Pt(e))return Pt(t)?kt(Lt(e),Lt(t)):Lt(kt(Lt(e),t));if(Pt(t))return Lt(kt(e,Lt(t)));if(It(e,_t())&&It(t,_t()))return Dt(Tt(e)*Tt(t));var r=e.f6_1>>>16|0,n=65535&e.f6_1,i=e.e6_1>>>16|0,o=65535&e.e6_1,a=t.f6_1>>>16|0,u=65535&t.f6_1,c=t.e6_1>>>16|0,s=65535&t.e6_1,l=0,f=0,h=0,d=0;return h=h+((d=d+Zr(o,s)|0)>>>16|0)|0,d&=65535,f=(f=f+((h=h+Zr(i,s)|0)>>>16|0)|0)+((h=(h&=65535)+Zr(o,c)|0)>>>16|0)|0,h&=65535,l=(l=(l=l+((f=f+Zr(n,s)|0)>>>16|0)|0)+((f=(f&=65535)+Zr(i,c)|0)>>>16|0)|0)+((f=(f&=65535)+Zr(o,u)|0)>>>16|0)|0,f&=65535,l=l+(((Zr(r,s)+Zr(n,c)|0)+Zr(i,u)|0)+Zr(o,a)|0)|0,new vt(h<<16|d,(l&=65535)<<16|f)}function Tt(e){return Ct(),4294967296*e.f6_1+function(e){return Ct(),e.e6_1>=0?e.e6_1:4294967296+e.e6_1}(e)}function Rt(e,t){return Ct(),e.f6_1===t.f6_1&&e.e6_1===t.e6_1}function xt(e){return Ct(),new vt(e,e<0?-1:0)}function Pt(e){return Ct(),e.f6_1<0}function jt(e){return Ct(),0===e.f6_1&&0===e.e6_1}function At(e){return Ct(),1===(1&e.e6_1)}function Lt(e){return Ct(),e.o6()}function It(e,t){return Ct(),Et(e,t)<0}function Dt(e){return Ct(),Ae(e)?mt():e<=-0x8000000000000000?wt():e+1>=0x8000000000000000?(Ct(),qr):e<0?Lt(Dt(-e)):new vt(0|e%4294967296,0|e/4294967296)}function Nt(e,t){return Ct(),Et(e,t)>0}function Mt(e,t){return Ct(),Et(e,t)>=0}function Ct(){zr||(zr=!0,Gr=xt(0),Hr=xt(1),Vr=xt(-1),qr=new vt(-1,2147483647),Yr=new vt(0,-2147483648),Wr=xt(16777216))}function Ft(e,t,r,n){return Bt("class",e,t,r,n,null)}function Bt(e,t,r,n,i,o){return{kind:e,simpleName:t,associatedObjectKey:r,associatedObjects:n,suspendArity:i,$kClass$:$r,iid:o}}function Ut(e){return Array.isArray(e)}function Gt(e,t,r,n,i,o,a,u){null!=n&&(e.prototype=Object.create(n.prototype),e.prototype.constructor=e);var c=r(t,o,a,null==u?[]:u);e.$metadata$=c,null!=i&&((null!=c.iid?e:e.prototype).$imask$=qe(i))}function Ht(e,t){return function(e,t){var r=e.$imask$,n=r;return null!=n&&function(e,t){var r=t>>5;if(r>e.length)return!1;var n=1<<(31&t);return!(0===(e[r]&n))}(n,t)}(e,t.$metadata$.iid)}function Vt(e){return!!Ut(e)&&!e.$type$}function qt(e){var t;switch(r(e)){case"string":case"number":case"boolean":case"function":t=!0;break;default:t=e instanceof Object}return t}function Yt(e){var t,n=r(e);return"string"===n||"boolean"===n||"number"===typeof(t=e)||t instanceof vt||Ht(e,F)}function Wt(e,t,r,n){return Bt("interface",e,t,r,n,function(){null==Kr&&(Kr=0);var e=zt();Kr=e+1|0;var t=zt();return t}())}function zt(){if(null!=Kr)return Kr;!function(e){throw br("lateinit property "+e+" has not been initialized")}("iid")}function Kt(e,t,r,n){return Bt("object",e,t,r,n,null)}function $t(e){var t=function(e,t){return or(e,t),Zt.call(t),t}(e,lt(st(Zt)));return ct(t,$t),t}function Zt(){ct(this,Zt)}function Xt(e){var t=function(e,t){return or(e,t),Jt.call(t),t}(e,lt(st(Jt)));return ct(t,Xt),t}function Jt(){ct(this,Jt)}function Qt(e){var t=function(e,t){return or(e,t),er.call(t),t}(e,lt(st(er)));return ct(t,Qt),t}function er(){ct(this,er)}function tr(e,t){return ft(t,e),nr.call(t),t}function rr(e){var t=tr(e,lt(st(nr)));return ct(t,rr),t}function nr(){ct(this,nr)}function ir(e){return function(e){ft(e),nr.call(e)}(e),ar.call(e),e}function or(e,t){return tr(e,t),ar.call(t),t}function ar(){ct(this,ar)}function ur(){var e,t=(ir(e=lt(st(sr))),sr.call(e),e);return ct(t,ur),t}function cr(e){var t=function(e,t){return or(e,t),sr.call(t),t}(e,lt(st(sr)));return ct(t,cr),t}function sr(){ct(this,sr)}function lr(){var e,t=(ir(e=lt(st(hr))),hr.call(e),e);return ct(t,lr),t}function fr(e){var t=function(e,t){return or(e,t),hr.call(t),t}(e,lt(st(hr)));return ct(t,fr),t}function hr(){ct(this,hr)}function dr(e){var t=function(e,t){return or(e,t),pr.call(t),t}(e,lt(st(pr)));return ct(t,dr),t}function pr(){ct(this,pr)}function yr(){var e,t=(ir(e=lt(st(vr))),vr.call(e),e);return ct(t,yr),t}function vr(){ct(this,vr)}function mr(){var e,t=(ir(e=lt(st(gr))),gr.call(e),e);return ct(t,mr),t}function gr(){ct(this,gr)}function br(e){var t=function(e,t){return or(e,t),wr.call(t),t}(e,lt(st(wr)));return ct(t,br),t}function wr(){ct(this,wr)}var _r,Er,Or,Sr,kr,Tr,Rr,xr,Pr,jr,Ar,Lr,Ir,Dr,Nr,Mr,Cr,Fr,Br,Ur,Gr,Hr,Vr,qr,Yr,Wr,zr,Kr,$r,Zr=Math.imul,Xr=ArrayBuffer.isView;return Gt(Fe,"Collection",Wt),Gt(s,"AbstractCollection",Ft,$r,[Fe]),Gt(l,"Companion",Kt),Gt(h,$r,Ft),Gt(y,"Companion",Kt),Gt(He,"Set",Wt,$r,[Fe]),Gt(_,"AbstractSet",Ft,s,[s,He]),Gt(m,$r,Ft,_),Gt(Ue,"Map",Wt),Gt(g,"AbstractMap",Ft,$r,[Ue]),Gt(b,"Companion",Kt),Gt(T,"Companion",Kt),Gt(X,"AbstractMutableCollection",Ft,s,[s,Fe]),Gt(Ce,"List",Wt,$r,[Fe]),Gt(Q,"AbstractMutableList",Ft,X,[X,Ce,Fe]),Gt(x,"ArrayDeque",Ft,Q),Gt(j,"EmptyList",Kt,$r,[Ce]),Gt(A,"EmptyIterator",Kt),Gt(I,"ArrayAsCollection",Ft,$r,[Fe]),Gt(Y,"Comparator",Wt),Gt(D,"ReverseOrderComparator",Kt,$r,[Y]),Gt(M,"Pair",Ft),Gt(C,"CharSequence",Wt),Gt(F,"Comparable",Wt),Gt(B,"Number",Ft),Gt(U,"Unit",Kt),Gt(H,"IntCompanionObject",Kt),Gt(V,"DoubleCompanionObject",Kt),Gt(J,"IteratorImpl",Ft),Gt(ee,$r,Ft),Gt(Be,"Entry",Wt),Gt(Ge,"MutableEntry",Wt,$r,[Be]),Gt(te,"SimpleEntry",Ft,$r,[Ge]),Gt(oe,"AbstractMutableSet",Ft,X,[X,He,Fe]),Gt(re,"AbstractEntrySet",Ft,oe),Gt(ne,$r,Ft,oe),Gt(ie,"AbstractMutableMap",Ft,g,[g,Ue]),Gt(se,"ArrayList",Ft,Q,[Q,Ce,Fe]),Gt(he,"HashCode",Kt),Gt(de,"EntrySet",Ft,re),Gt(ye,"HashMap",Ft,ie,[ie,Ue]),Gt(ve,"HashSet",Ft,oe,[oe,He,Fe]),Gt(we,$r,Ft),Gt(Ee,"InternalMap",Wt),Gt(_e,"InternalHashCodeMap",Ft,$r,[Ee]),Gt(Oe,"EntryIterator",Ft),Gt(Se,"ChainEntry",Ft,te),Gt(ke,"EntrySet",Ft,re),Gt(Pe,"LinkedHashMap",Ft,ye,[ye,Ue]),Gt(je,"LinkedHashSet",Ft,ve,[ve,He,Fe]),Gt(Ie,"StringBuilder",Ft,$r,[C]),Gt(Ne,"Companion",Kt),Gt(Me,"Char",Ft,$r,[F]),Gt(ze,$r,Ft),Gt(yt,"Companion",Kt),Gt(vt,"Long",Ft,B,[B,F]),Gt(nr,"Exception",Ft,Error),Gt(ar,"RuntimeException",Ft,nr),Gt(Zt,"IllegalArgumentException",Ft,ar),Gt(Jt,"IndexOutOfBoundsException",Ft,ar),Gt(er,"IllegalStateException",Ft,ar),Gt(sr,"NoSuchElementException",Ft,ar),Gt(hr,"UnsupportedOperationException",Ft,ar),Gt(pr,"ArithmeticException",Ft,ar),Gt(vr,"NullPointerException",Ft,ar),Gt(gr,"ClassCastException",Ft,ar),Gt(wr,"UninitializedPropertyAccessException",Ft,ar),st(s).h=function(e){var t;e:if(Ht(this,Fe)&&this.j())t=!1;else{for(var r=this.b();r.c();)if(ut(r.d(),e)){t=!0;break e}t=!1}return t},st(s).k=function(e){var t;e:if(Ht(e,Fe)&&e.j())t=!0;else{for(var r=e.b();r.c();){var n=r.d();if(!this.h(n)){t=!1;break e}}t=!0}return t},st(s).j=function(){return 0===this.e()},st(s).toString=function(){return i(this,", ","[","]",$r,$r,(e=this,function(t){return t===e?"(this Collection)":Ve(t)}));var e},st(s).toArray=function(){return W(this)},st(l).l=function(e,t){if(e<0||e>=t)throw Xt("index: "+e+", size: "+t)},st(l).m=function(e,t){if(e<0||e>t)throw Xt("index: "+e+", size: "+t)},st(l).n=function(e,t,r){if(e<0||t>r)throw Xt("fromIndex: "+e+", toIndex: "+t+", size: "+r);if(e>t)throw $t("fromIndex: "+e+" > toIndex: "+t)},st(l).o=function(e){for(var t=1,r=e.b();r.c();){var n=r.d(),i=Zr(31,t),o=null==n?null:at(n);t=i+(null==o?0:o)|0}return t},st(l).p=function(e,t){if(e.e()!==t.e())return!1;for(var r=t.b(),n=e.b();n.c();)if(!ut(n.d(),r.d()))return!1;return!0},st(h).c=function(){return this.q_1.c()},st(h).d=function(){return this.q_1.d().r()},st(y).t=function(e){var t=e.r(),r=null==t?null:at(t),n=null==r?0:r,i=e.u(),o=null==i?null:at(i);return n^(null==o?0:o)},st(y).v=function(e){return Ve(e.r())+"="+Ve(e.u())},st(y).w=function(e,t){return!(null==t||!Ht(t,Be))&&!!ut(e.r(),t.r())&&ut(e.u(),t.u())},st(m).y=function(e){return this.x_1.b1(e)},st(m).h=function(e){return!(null!=e&&!qt(e))&&this.y(null==e||qt(e)?e:pt())},st(m).b=function(){return new h(this.x_1.s().b())},st(m).e=function(){return this.x_1.e()},st(g).b1=function(e){return!(null==p(this,e))},st(g).d1=function(e){if(null==e||!Ht(e,Be))return!1;var t=e.r(),r=e.u(),n=(Ht(this,Ue)?this:pt()).e1(t);return!!ut(r,n)&&!(null==n&&!(Ht(this,Ue)?this:pt()).b1(t))},st(g).equals=function(e){if(e===this)return!0;if(null==e||!Ht(e,Ue))return!1;if(this.e()!==e.e())return!1;var t;e:{var r=e.s();if(Ht(r,Fe)&&r.j())t=!0;else{for(var n=r.b();n.c();){var i=n.d();if(!this.d1(i)){t=!1;break e}}t=!0}}return t},st(g).e1=function(e){var t=p(this,e);return null==t?null:t.u()},st(g).hashCode=function(){return at(this.s())},st(g).j=function(){return 0===this.e()},st(g).e=function(){return this.s().e()},st(g).f1=function(){return null==this.z_1&&(this.z_1=new m(this)),dt(this.z_1)},st(g).toString=function(){var e;return i(this.s(),", ","{","}",$r,$r,(e=this,function(t){return e.c1(t)}))},st(g).c1=function(e){return d(this,e.r())+"="+d(this,e.u())},st(b).g1=function(e){for(var t=0,r=e.b();r.c();){var n=r.d(),i=t,o=null==n?null:at(n);t=i+(null==o?0:o)|0}return t},st(b).h1=function(e,t){return e.e()===t.e()&&e.k(t)},st(_).equals=function(e){return e===this||!(null==e||!Ht(e,He))&&w().h1(this,e)},st(_).hashCode=function(){return w().g1(this)},st(T).p1=function(e,t){var r=e+(e>>1)|0;return(r-t|0)<0&&(r=t),(r-2147483639|0)>0&&(r=t>2147483639?(null==Pr&&new H,Pr).MAX_VALUE:2147483639),r},st(x).e=function(){return this.l1_1},st(x).j=function(){return 0===this.l1_1},st(x).q1=function(e){E(this,this.l1_1+1|0),this.j1_1=k(this,this.j1_1),this.k1_1[this.j1_1]=e,this.l1_1=this.l1_1+1|0},st(x).r1=function(e){E(this,this.l1_1+1|0);var t=this.k1_1,r=this.l1_1;t[O(this,this.j1_1+r|0)]=e,this.l1_1=this.l1_1+1|0},st(x).s1=function(){if(this.j())throw cr("ArrayDeque is empty.");var e=this.j1_1,t=this.k1_1[e],r=null==t||qt(t)?t:pt();return this.k1_1[this.j1_1]=null,this.j1_1=S(this,this.j1_1),this.l1_1=this.l1_1-1|0,r},st(x).t1=function(){return this.j()?null:this.s1()},st(x).u1=function(){if(this.j())throw cr("ArrayDeque is empty.");var e=L(this),t=O(this,this.j1_1+e|0),r=this.k1_1[t],n=null==r||qt(r)?r:pt();return this.k1_1[t]=null,this.l1_1=this.l1_1-1|0,n},st(x).g=function(e){return this.r1(e),!0},st(x).v1=function(e,t){if(f().m(e,this.l1_1),e===this.l1_1)return this.r1(t),G();if(0===e)return this.q1(t),G();E(this,this.l1_1+1|0);var r=O(this,this.j1_1+e|0);if(e<(this.l1_1+1|0)>>1){var n=k(this,r),i=k(this,this.j1_1);if(n>=this.j1_1){this.k1_1[i]=this.k1_1[this.j1_1];var o=this.k1_1,a=this.k1_1;$(o,a,this.j1_1,this.j1_1+1|0,n+1|0)}else{var u=this.k1_1,c=this.k1_1;$(u,c,this.j1_1-1|0,this.j1_1,this.k1_1.length),this.k1_1[this.k1_1.length-1|0]=this.k1_1[0];var s=this.k1_1,l=this.k1_1;$(s,l,0,1,n+1|0)}this.k1_1[n]=t,this.j1_1=i}else{var h=this.l1_1,d=O(this,this.j1_1+h|0);if(r<d){var p=this.k1_1,y=this.k1_1;$(p,y,r+1|0,r,d)}else{var v=this.k1_1,m=this.k1_1;$(v,m,1,0,d),this.k1_1[0]=this.k1_1[this.k1_1.length-1|0];var g=this.k1_1,b=this.k1_1;$(g,b,r+1|0,r,this.k1_1.length-1|0)}this.k1_1[r]=t}this.l1_1=this.l1_1+1|0},st(x).f=function(e){f().l(e,this.l1_1);var t=O(this,this.j1_1+e|0),r=this.k1_1[t];return null==r||qt(r)?r:pt()},st(x).w1=function(e,t){f().l(e,this.l1_1);var r=O(this,this.j1_1+e|0),n=this.k1_1[r],i=null==n||qt(n)?n:pt();return this.k1_1[r]=t,i},st(x).h=function(e){return!(-1===this.i(e))},st(x).i=function(e){var t=this.l1_1,r=O(this,this.j1_1+t|0);if(this.j1_1<r){var n=this.j1_1;if(n<r)do{var i=n;if(n=n+1|0,ut(e,this.k1_1[i]))return i-this.j1_1|0}while(n<r)}else if(this.j1_1>=r){var o=this.j1_1,a=this.k1_1.length;if(o<a)do{var u=o;if(o=o+1|0,ut(e,this.k1_1[u]))return u-this.j1_1|0}while(o<a);var c=0;if(c<r)do{var s=c;if(c=c+1|0,ut(e,this.k1_1[s]))return(s+this.k1_1.length|0)-this.j1_1|0}while(c<r)}return-1},st(x).x1=function(e){if(f().l(e,this.l1_1),e===L(this))return this.u1();if(0===e)return this.s1();var t=O(this,this.j1_1+e|0),r=this.k1_1[t],n=null==r||qt(r)?r:pt();if(e<this.l1_1>>1){if(t>=this.j1_1){var i=this.k1_1,o=this.k1_1;$(i,o,this.j1_1+1|0,this.j1_1,t)}else{var a=this.k1_1,u=this.k1_1;$(a,u,1,0,t),this.k1_1[0]=this.k1_1[this.k1_1.length-1|0];var c=this.k1_1,s=this.k1_1;$(c,s,this.j1_1+1|0,this.j1_1,this.k1_1.length-1|0)}this.k1_1[this.j1_1]=null,this.j1_1=S(this,this.j1_1)}else{var l=L(this),h=O(this,this.j1_1+l|0);if(t<=h){var d=this.k1_1,p=this.k1_1;$(d,p,t,t+1|0,h+1|0)}else{var y=this.k1_1,v=this.k1_1;$(y,v,t,t+1|0,this.k1_1.length),this.k1_1[this.k1_1.length-1|0]=this.k1_1[0];var m=this.k1_1,g=this.k1_1;$(m,g,0,1,h+1|0)}this.k1_1[h]=null}return this.l1_1=this.l1_1-1|0,n},st(x).y1=function(e){var t,r=e.length>=this.l1_1?e:(t=this.l1_1,Ye(Array(t),null)),n=Vt(r)?r:pt(),i=this.l1_1,o=O(this,this.j1_1+i|0);return this.j1_1<o?$(this.k1_1,n,0,this.j1_1,o):this.j()||($(this.k1_1,n,0,this.j1_1,this.k1_1.length),$(this.k1_1,n,this.k1_1.length-this.j1_1|0,0,o)),n.length>this.l1_1&&(n[this.l1_1]=null),Vt(n)?n:pt()},st(x).z1=function(){var e,t=this.l1_1;return e=Ye(Array(t),null),this.y1(e)},st(x).toArray=function(){return this.z1()},st(j).equals=function(e){return!(null==e||!Ht(e,Ce))&&e.j()},st(j).hashCode=function(){return 1},st(j).toString=function(){return"[]"},st(j).e=function(){return 0},st(j).j=function(){return!0},st(j).d2=function(e){return!1},st(j).h=function(e){return!1},st(j).e2=function(e){return e.j()},st(j).k=function(e){return this.e2(e)},st(j).f=function(e){throw Xt("Empty list doesn't contain element at index "+e+".")},st(j).f2=function(e){return-1},st(j).i=function(e){return-1},st(j).b=function(){return null==Tr&&new A,Tr},st(A).c=function(){return!1},st(A).d=function(){throw ur()},st(I).e=function(){return this.g2_1.length},st(I).j=function(){return 0===this.g2_1.length},st(I).i2=function(e){return function(e,t){return n(e,t)>=0}(this.g2_1,e)},st(I).h=function(e){return!(null!=e&&!qt(e))&&this.i2(null==e||qt(e)?e:pt())},st(I).j2=function(e){var t;e:if(Ht(e,Fe)&&e.j())t=!0;else{for(var r=e.b();r.c();){var n=r.d();if(!this.i2(n)){t=!1;break e}}t=!0}return t},st(I).k=function(e){return this.j2(e)},st(I).b=function(){return We(this.g2_1)},st(D).p2=function(e,t){return tt(t,e)},st(D).compare=function(e,t){var r=null!=e&&Yt(e)?e:pt();return this.p2(r,null!=t&&Yt(t)?t:pt())},st(M).toString=function(){return"("+this.k2_1+", "+this.l2_1+")"},st(M).m2=function(){return this.k2_1},st(M).n2=function(){return this.l2_1},st(M).hashCode=function(){var e=null==this.k2_1?0:at(this.k2_1);return e=Zr(e,31)+(null==this.l2_1?0:at(this.l2_1))|0},st(M).equals=function(e){if(this===e)return!0;if(!(e instanceof M))return!1;var t=e instanceof M?e:pt();return!!ut(this.k2_1,t.k2_1)&&!!ut(this.l2_1,t.l2_1)},st(U).toString=function(){return"kotlin.Unit"},st(H).t2=function(){return this.MIN_VALUE},st(H).u2=function(){return this.MAX_VALUE},st(H).v2=function(){return this.SIZE_BYTES},st(H).w2=function(){return this.SIZE_BITS},st(V).t2=function(){return this.MIN_VALUE},st(V).u2=function(){return this.MAX_VALUE},st(V).x2=function(){return this.POSITIVE_INFINITY},st(V).y2=function(){return this.NEGATIVE_INFINITY},st(V).z2=function(){return this.NaN},st(V).v2=function(){return this.SIZE_BYTES},st(V).w2=function(){return this.SIZE_BITS},st(X).a3=function(e){this.b2();for(var t=this.b();t.c();)if(ut(t.d(),e))return t.b3(),!0;return!1},st(X).toJSON=function(){return this.toArray()},st(X).b2=function(){},st(J).c=function(){return this.c3_1<this.e3_1.e()},st(J).d=function(){if(!this.c())throw ur();var e=this.c3_1;return this.c3_1=e+1|0,this.d3_1=e,this.e3_1.f(this.d3_1)},st(J).b3=function(){if(-1===this.d3_1)throw Qt(ot("Call next() or previous() before removing element from the iterator."));this.e3_1.x1(this.d3_1),this.c3_1=this.d3_1,this.d3_1=-1},st(Q).g=function(e){return this.b2(),this.v1(this.e(),e),!0},st(Q).b=function(){return new J(this)},st(Q).h=function(e){return this.i(e)>=0},st(Q).i=function(e){var t=0,r=L(this);if(t<=r)do{var n=t;if(t=t+1|0,ut(this.f(n),e))return n}while(n!==r);return-1},st(Q).equals=function(e){return e===this||!(null==e||!Ht(e,Ce))&&f().p(this,e)},st(Q).hashCode=function(){return f().o(this)},st(ee).c=function(){return this.f3_1.c()},st(ee).d=function(){return this.f3_1.d().r()},st(ee).b3=function(){return this.f3_1.b3()},st(te).r=function(){return this.g3_1},st(te).u=function(){return this.h3_1},st(te).i3=function(e){var t=this.h3_1;return this.h3_1=e,t},st(te).hashCode=function(){return v().t(this)},st(te).toString=function(){return v().v(this)},st(te).equals=function(e){return v().w(this,e)},st(re).h=function(e){return this.j3(e)},st(re).a3=function(e){return this.k3(e)},st(ne).m3=function(e){throw fr("Add is not supported on keys")},st(ne).g=function(e){return this.m3(null==e||qt(e)?e:pt())},st(ne).y=function(e){return this.l3_1.b1(e)},st(ne).h=function(e){return!(null!=e&&!qt(e))&&this.y(null==e||qt(e)?e:pt())},st(ne).b=function(){return new ee(this.l3_1.s().b())},st(ne).n3=function(e){return this.b2(),!!this.l3_1.b1(e)&&(this.l3_1.n3(e),!0)},st(ne).a3=function(e){return!(null!=e&&!qt(e))&&this.n3(null==e||qt(e)?e:pt())},st(ne).e=function(){return this.l3_1.e()},st(ne).b2=function(){return this.l3_1.b2()},st(ie).f1=function(){return null==this.q3_1&&(this.q3_1=new ne(this)),dt(this.q3_1)},st(ie).n3=function(e){this.b2();for(var t=this.s().b();t.c();){var r=t.d();if(ut(e,r.r())){var n=r.u();return t.b3(),n}}return null},st(ie).b2=function(){},st(oe).equals=function(e){return e===this||!(null==e||!Ht(e,He))&&w().h1(this,e)},st(oe).hashCode=function(){return w().g1(this)},st(se).e=function(){return this.t3_1.length},st(se).f=function(e){var t=this.t3_1[ce(this,e)];return null==t||qt(t)?t:pt()},st(se).w1=function(e,t){this.b2(),ce(this,e);var r=this.t3_1[e];this.t3_1[e]=t;var n=r;return null==n||qt(n)?n:pt()},st(se).g=function(e){this.b2(),this.t3_1.push(e);var t=this.a2_1;return this.a2_1=t+1|0,!0},st(se).v1=function(e,t){this.b2(),this.t3_1.splice(function(e,t){return f().m(t,e.e()),t}(this,e),0,t);var r=this.a2_1;this.a2_1=r+1|0},st(se).x1=function(e){this.b2(),ce(this,e);var t=this.a2_1;return this.a2_1=t+1|0,e===L(this)?this.t3_1.pop():this.t3_1.splice(e,1)[0]},st(se).i=function(e){return n(this.t3_1,e)},st(se).toString=function(){return e=this.t3_1,t=(t=", ")===$r?", ":t,r=(r="[")===$r?"":r,n=(n="]")===$r?"":n,i=(i=$r)===$r?-1:i,o=(o=$r)===$r?"...":o,a=(a=et)===$r?null:a,function(e,t,r,n,i,o,a,u){r=r===$r?", ":r,n=n===$r?"":n,i=i===$r?"":i,o=o===$r?-1:o,a=a===$r?"...":a,u=u===$r?null:u,t.a(n);var c=0,s=e,l=0,f=s.length;e:for(;l<f;){var h=s[l];if(l=l+1|0,(c=c+1|0)>1&&t.a(r),!(o<0||c<=o))break e;N(t,h,u)}return o>=0&&c>o&&t.a(a),t.a(i),t}(e,Le(),t,r,n,i,o,a).toString();var e,t,r,n,i,o,a},st(se).z1=function(){return[].slice.call(this.t3_1)},st(se).toArray=function(){return this.z1()},st(se).b2=function(){if(this.u3_1)throw lr()},st(he).v3=function(e,t){return ut(e,t)},st(he).w3=function(e){var t=null==e?null:at(e);return null==t?0:t},st(de).y3=function(e){throw fr("Add is not supported on entries")},st(de).g=function(e){return this.y3(null!=e&&Ht(e,Ge)?e:pt())},st(de).j3=function(e){return this.x3_1.d1(e)},st(de).b=function(){return this.x3_1.d4_1.b()},st(de).k3=function(e){return!!c(this,e)&&(this.x3_1.n3(e.r()),!0)},st(de).e=function(){return this.x3_1.e()},st(ye).h4=function(){this.d4_1.h4()},st(ye).b1=function(e){return this.d4_1.y(e)},st(ye).s=function(){return null==this.f4_1&&(this.f4_1=this.i4()),dt(this.f4_1)},st(ye).i4=function(){return new de(this)},st(ye).e1=function(e){return this.d4_1.e1(e)},st(ye).o2=function(e,t){return this.d4_1.o2(e,t)},st(ye).n3=function(e){return this.d4_1.n3(e)},st(ye).e=function(){return this.d4_1.e()},st(ve).g=function(e){return null==this.j4_1.o2(e,this)},st(ve).h4=function(){this.j4_1.h4()},st(ve).h=function(e){return this.j4_1.b1(e)},st(ve).j=function(){return this.j4_1.j()},st(ve).b=function(){return this.j4_1.f1().b()},st(ve).a3=function(e){return!(null==this.j4_1.n3(e))},st(ve).e=function(){return this.j4_1.e()},st(we).c=function(){return-1===this.k4_1&&(this.k4_1=function(e){if(null!=e.n4_1&&e.o4_1){var t=e.n4_1,r=t.length,n=e;if(n.p4_1=n.p4_1+1|0,n.p4_1<r)return 0}var i=e;if(i.m4_1=i.m4_1+1|0,i.m4_1<e.l4_1.length){e.n4_1=e.r4_1.t4_1[e.l4_1[e.m4_1]];var o=e,a=e.n4_1;return o.o4_1=null!=a&&Vt(a),e.p4_1=0,0}return e.n4_1=null,1}(this)),0===this.k4_1},st(we).d=function(){if(!this.c())throw ur();var e=this.o4_1?this.n4_1[this.p4_1]:this.n4_1;return this.q4_1=e,this.k4_1=-1,e},st(we).b3=function(){var e=this.q4_1;if(null==e)throw Qt(ot("Required value was null."));this.r4_1.n3(dt(this.q4_1).r()),this.q4_1=null;var t=this.p4_1;this.p4_1=t-1|0},st(_e).g4=function(){return this.s4_1},st(_e).e=function(){return this.u4_1},st(_e).o2=function(e,t){var r=this.s4_1.w3(e),n=be(this,r);if(null==n)this.t4_1[r]=new te(e,t);else{if(null==n||!Vt(n)){var i,o=n;if(this.s4_1.v3(o.r(),e))return o.i3(t);i=[o,new te(e,t)],this.t4_1[r]=i;var a=this.u4_1;return this.u4_1=a+1|0,null}var u=n,c=ge(u,this,e);if(null!=c)return c.i3(t);u.push(new te(e,t))}var s=this.u4_1;return this.u4_1=s+1|0,null},st(_e).n3=function(e){var t=this.s4_1.w3(e),r=be(this,t);if(null==r)return null;var n=r;if(null==n||!Vt(n)){var i=n;if(this.s4_1.v3(i.r(),e)){delete this.t4_1[t],G();var o=this.u4_1;return this.u4_1=o-1|0,i.u()}return null}var a=n,u=0,c=a.length-1|0;if(u<=c)do{var s=u;u=u+1|0;var l=a[s];if(this.s4_1.v3(e,l.r())){1===a.length?(a.length=0,delete this.t4_1[t],G()):a.splice(s,1);var f=this.u4_1;return this.u4_1=f-1|0,l.u()}}while(u<=c);return null},st(_e).h4=function(){this.t4_1=this.v4(),this.u4_1=0},st(_e).y=function(e){return!(null==me(this,e))},st(_e).e1=function(e){var t=me(this,e);return null==t?null:t.u()},st(_e).b=function(){return new we(this)},st(Oe).c=function(){return!(null===this.x4_1)},st(Oe).d=function(){if(!this.c())throw ur();var e=dt(this.x4_1);this.w4_1=e;var t,r=e.m5_1;return t=r!==this.y4_1.j5_1.g5_1?r:null,this.x4_1=t,e},st(Oe).b3=function(){if(null==this.w4_1)throw Qt(ot("Check failed."));this.y4_1.b2(),Te(dt(this.w4_1),this.y4_1.j5_1),this.y4_1.j5_1.h5_1.n3(dt(this.w4_1).r()),this.w4_1=null},st(Se).i3=function(e){return this.o5_1.b2(),st(te).i3.call(this,e)},st(ke).y3=function(e){throw fr("Add is not supported on entries")},st(ke).g=function(e){return this.y3(null!=e&&Ht(e,Ge)?e:pt())},st(ke).j3=function(e){return this.j5_1.d1(e)},st(ke).b=function(){return new Oe(this)},st(ke).k3=function(e){return this.b2(),!!c(this,e)&&(this.j5_1.n3(e.r()),!0)},st(ke).e=function(){return this.j5_1.e()},st(ke).b2=function(){return this.j5_1.b2()},st(Pe).h4=function(){this.b2(),this.h5_1.h4(),this.g5_1=null},st(Pe).b1=function(e){return this.h5_1.b1(e)},st(Pe).i4=function(){return new ke(this)},st(Pe).e1=function(e){var t=this.h5_1.e1(e);return null==t?null:t.u()},st(Pe).o2=function(e,t){this.b2();var r=this.h5_1.e1(e);if(null==r){var n=new Se(this,e,t);return this.h5_1.o2(e,n),function(e,t){if(null!=e.m5_1||null!=e.n5_1)throw Qt(ot("Check failed."));var r=t.g5_1;if(null==r)t.g5_1=e,e.m5_1=e,e.n5_1=e;else{var n=r.n5_1;if(null==n)throw Qt(ot("Required value was null."));var i=n;e.n5_1=i,e.m5_1=r,r.n5_1=e,i.m5_1=e}}(n,this),null}return r.i3(t)},st(Pe).n3=function(e){this.b2();var t=this.h5_1.n3(e);return null!=t?(Te(t,this),t.u()):null},st(Pe).e=function(){return this.h5_1.e()},st(Pe).b2=function(){if(this.i5_1)throw lr()},st(je).b2=function(){return this.j4_1.b2()},st(Ie).r2=function(e){return this.q5_1=this.q5_1+new Me(e),this},st(Ie).a=function(e){return this.q5_1=this.q5_1+Ve(e),this},st(Ie).toString=function(){return this.q5_1},st(Me).b6=function(e){return De(this.q2_1,e)},st(Me).s2=function(e){return function(e,t){return De(e.q2_1,t instanceof Me?t.q2_1:pt())}(this,e)},st(Me).equals=function(e){return function(e,t){return t instanceof Me&&e===t.q2_1}(this.q2_1,e)},st(Me).hashCode=function(){return this.q2_1},st(Me).toString=function(){return e=this.q2_1,String.fromCharCode(e);var e},st(ze).c=function(){return!(this.c6_1===this.d6_1.length)},st(ze).d=function(){if(this.c6_1===this.d6_1.length)throw cr(""+this.c6_1);var e=this.c6_1;return this.c6_1=e+1|0,this.d6_1[e]},st(vt).l6=function(e){return Et(this,e)},st(vt).s2=function(e){return this.l6(e instanceof vt?e:pt())},st(vt).m6=function(e){return Ot(this,e)},st(vt).n6=function(e){return function(e,t){if(Ct(),jt(t))throw rr("division by zero");if(jt(e))return mt();if(Rt(e,wt())){if(Rt(t,gt())||Rt(t,bt()))return wt();if(Rt(t,wt()))return gt();var r=function(e,t){Ct();var r=63&t;return 0===r?e:r<32?new vt(e.e6_1<<r,e.f6_1<<r|e.e6_1>>>(32-r|0)|0):new vt(0,e.e6_1<<(r-32|0))}(function(e,t){Ct();var r=63&t;return 0===r?e:r<32?new vt(e.e6_1>>>r|0|e.f6_1<<(32-r|0),e.f6_1>>r):new vt(e.f6_1>>(r-32|0),e.f6_1>=0?0:-1)}(e,1).n6(t),1);if(Rt(r,mt()))return Pt(t)?gt():bt();var n=St(e,kt(t,r));return Ot(r,n.n6(t))}if(Rt(t,wt()))return mt();if(Pt(e))return Pt(t)?Lt(e).n6(Lt(t)):Lt(Lt(e).n6(t));if(Pt(t))return Lt(e.n6(Lt(t)));for(var i=mt(),o=e;Mt(o,t);){for(var a=Tt(o)/Tt(t),u=Math.max(1,Math.floor(a)),c=Math.ceil(Math.log(u)/Math.LN2),s=c<=48?1:Math.pow(2,c-48),l=Dt(u),f=kt(l,t);Pt(f)||Nt(f,o);)l=Dt(u-=s),f=kt(l,t);jt(l)&&(l=gt()),i=Ot(i,l),o=St(o,f)}return i}(this,e)},st(vt).o6=function(){return this.p6().m6(new vt(1,0))},st(vt).p6=function(){return new vt(~this.e6_1,~this.f6_1)},st(vt).q6=function(){return this.e6_1},st(vt).g6=function(){return Tt(this)},st(vt).valueOf=function(){return this.g6()},st(vt).equals=function(e){return e instanceof vt&&Rt(this,e)},st(vt).hashCode=function(){return e=this,Ct(),e.e6_1^e.f6_1;var e},st(vt).toString=function(){return function e(t,r){if(Ct(),r<2||36<r)throw rr("radix out of range: "+r);if(jt(t))return"0";if(Pt(t)){if(Rt(t,wt())){var n=xt(r),i=t.n6(n),o=St(kt(i,n),t).q6(),a=e(i,r),u=o.toString(r);return a+u}return"-"+e(Lt(t),r)}for(var c=2===r?31:r<=10?9:r<=21?7:r<=35?6:5,s=Dt(Math.pow(r,c)),l=t,f="";;){var h=l.n6(s),d=St(l,kt(h,s)).q6(),p=d.toString(r),y=p;if(jt(l=h))return y+f;for(;y.length<c;)y="0"+y;f=y+f}}(this,10)},st(_e).v4=function(){var e=Object.create(null);return e.foo=1,delete e.foo,G(),e},Ar=null,e.$_$=e.$_$||{},e.$_$.a=function(){return e=lt(st(x)),Q.call(e),x.call(e),e.k1_1=R().m1_1,e;var e},e.$_$.b=ae,e.$_$.c=xe,e.$_$.d=function(){return e=lt(st(je)),function(e,t){oe.call(t),ve.call(t),t.j4_1=e}(xe(),e),je.call(e),e;var e},e.$_$.e=ur,e.$_$.f=function e(t){var r=or(t,lt(st(ar)));return ct(r,e),r},e.$_$.g=q,e.$_$.h=G,e.$_$.i=K,e.$_$.j=function(e){return n=(t=[e]).length,function(e,t){for(var r=t,n=0,i=r.length;n<i;){var o=r[n];n=n+1|0;var a=o.m2(),u=o.n2();e.o2(a,u)}}(r=function(e,t){return function(e,t,r){if(pe(r),!(e>=0))throw $t(ot("Negative initial capacity: "+e));if(!(t>=0))throw $t(ot("Non-positive load factor: "+t))}(e,0,t),t}(n,lt(st(ye))),t),r;var t,r,n},e.$_$.k=function(e){return function(e,t){if(Ht(e,Fe)){if(e.e()<=1)return o(e);var r=K(e),n=Vt(r)?r:pt();return function(e,t){e.length>1&&le(e,t)}(n,t),function(e){return new se(e)}(n)}var i=u(e);return function(e,t){!function(e,t){if(e.e()<=1)return G();var r=K(e);le(r,t);var n=0,i=r.length;if(n<i)do{var o=n;n=n+1|0,e.w1(o,r[o])}while(n<i)}(e,t)}(i,t),i}(e,(null==Rr&&new D,Ht(t=Rr,Y)?t:pt()));var t},e.$_$.l=o,e.$_$.m=We,e.$_$.n=Ft,e.$_$.o=tt,e.$_$.p=function(e,t,r,n){return Object.defineProperty(e,t,{configurable:!0,get:r,set:n})},e.$_$.q=ut,e.$_$.r=Wt,e.$_$.s=function(e){return e instanceof vt?e:Dt(e)},e.$_$.t=Kt,e.$_$.u=st,e.$_$.v=Gt,e.$_$.w=ot,e.$_$.x=vt,e.$_$.y=function(e){return!function(e){var t;return q(),e===1/0?t=!0:(q(),t=e===-1/0),t}(e)&&!Ae(e)},e.$_$.z=Ae,e.$_$.a1=function(e,t){return new M(e,t)},e.$_$.b1=$r,e})?n.apply(t,i):n)||(e.exports=o)},34204:function(e,t,r){var n,i,o;i=[t,r(50041)],void 0===(o="function"===typeof(n=function(e,t){"use strict";function r(e,t){return e=e===ke?null:e,this.h7(e)}function n(){ne=this,this.x6_1=(new z).getValue()}function i(){return null==ne&&new n,ne}function o(e){i(),this.t6_1=e;var t=this.t6_1;this.u6_1=null==t?null:t.flags;var r=this.t6_1;this.v6_1=new v(null==r?null:r.skippableFragments),this.w6_1=function(e){var t,r=e.t6_1;if(null!=(null==r?null:r.rules)){for(var n=_e(),i=e.t6_1.rules,o=Ee(i);o.c();){var a=o.d(),u=a.priority,c=a.rules;n.o2(u,c)}t=n}else{var s=[e.v6_1,new m];t=we(be(0,s))}return t}(this)}function a(e,t,r){this.disableDynamicBuffer=e,this.lowBufferBeforeStart=t,this.defaultBuffer=r}function u(e,t,r){this.skippableFragments=e,this.flags=t,this.rules=r}function c(){}function s(e,t,r){r=r!==ke&&r,this.startTime=e,this.endTime=t,this.autoSkip=r}function l(e,t,r){this.watchedTime=e,this.currentTime=t,this.flags=r}function f(){return ie}function h(e){e=e===ke?null:e,this.n7_1=e}function d(e){e=e===ke?null:e,this.o7_1=e}function p(e,t){this.watchedTime=e,this.currentTime=t}function y(e,t){this.priority=e,this.rules=t}function v(e){e=e===ke?null:e,this.y6_1=e}function m(){}function g(){fe=this,this.q7_1=null,this.r7_1=new te}function b(){return null==fe&&new g,fe}function w(e){var t,r,n;b(),e===ke?(Ie(),t=NaN):t=e,e=t,r=De(),this.w7_1=r,this.x7_1=new S(e,!0),this.y7_1=(n=this,function(e){return n.sample(e.durationMs,e.sizeBytes),ge()})}function _(e){Ie(),this.z7_1=NaN,this.a8_1=0,this.b8_1=0,this.c8(e)}function E(){de=this,this.f8_1=new k(5,2),this.g8_1=new k(2,1)}function O(){return null==de&&new E,de}function S(e,t){var r;O(),e===ke?(Ie(),r=NaN):r=e,e=r,t=t!==ke&&t,this.h8_1=e,this.i8_1=t,this.j8_1=new _(O().f8_1.fast),this.k8_1=new _(O().f8_1.slow),this.l8_1=0,this.m8_1=new J}function k(e,t){this.slow=e,this.fast=t}function T(e,t){e=e===ke?null:e,t=t===ke?null:t,this.okMessage=e,this.errorMessage=t}function R(e,t){this.value=e,this.source=t}function x(){ye=this,this.MAX="max",this.MIN="min",this.DEFAULT="default"}function P(){return null==ye&&new x,ye}function j(){P()}function A(e,t){Ue(t)&&function(e,t){for(e.b9_1.g(t);e.b9_1.l1_1>20;)e.b9_1.t1()}(e,t)}function L(e){var t=e.b9_1.b();if(!t.c())throw Ge();for(var r=t.d();t.c();){var n=t.d(),i=r;r=Math.max(i,n)}return r}function I(){this.b9_1=He()}function D(e,t,r){this.hasGoodEstimate=e,this.value=t,this.history=r}function N(e,t,r){r=r!==ke&&r,this.durationMs=e,this.sizeBytes=t,this.isLowLatency=r}function M(e,t){var r,n=H().h9_1;if(ee().t7_1){var i,o=t.sizeBytes;if(Ue(o)){var a=e;a.k9_1=a.k9_1+o,i=ge()}r=i}else{var u;e:{var c=n.u7_1;try{if(c.v7_1.h(c))throw Le("runLocked: recursion lock error");c.v7_1.g(c);var s,l=t.sizeBytes;if(Ue(l)){var f=e;f.k9_1=f.k9_1+l,s=ge()}u=s;break e}finally{c.v7_1.a3(c)}}r=u}return r}function C(e,t){var r,n=H().h9_1;if(ee().t7_1){var i=e.p9_1.e1(t),o=null==i?null:i.s9_1,a=null==o?0:o,u=e.p9_1.e1(t);null==u||(u.s9_1=a+1|0);var c,s=e,l=s.l9_1;if(s.l9_1=l+1|0,e.m9_1)c=!0;else{var f=e.r9_1;c=!0===(null==f?null:f.x9())}if(c)return ge();e.m9_1=!0,e.n9_1=e.i9_1.create();var h,d=e.r9_1;null==d?h=null:(d.start(),h=ge()),r=h}else{var p;e:{var y=n.u7_1;try{if(y.v7_1.h(y))throw Le("runLocked: recursion lock error");y.v7_1.g(y);var v=e.p9_1.e1(t),m=null==v?null:v.s9_1,g=null==m?0:m,b=e.p9_1.e1(t);null==b||(b.s9_1=g+1|0);var w,_=e,E=_.l9_1;if(_.l9_1=E+1|0,e.m9_1)w=!0;else{var O=e.r9_1;w=!0===(null==O?null:O.x9())}if(w)return ge();e.m9_1=!0,e.n9_1=e.i9_1.create();var S,k=e.r9_1;null==k?S=null:(k.start(),S=ge()),p=S;break e}finally{y.v7_1.a3(y)}}r=p}return r}function F(e,t){var r,n=H().h9_1;if(ee().t7_1){var i=e.p9_1.e1(t),o=null==i?null:i.s9_1,a=null==o?0:o,u=e.p9_1.e1(t);if(null==u);else{var c,s=u,l=a-1|0;c=Math.max(l,0),s.s9_1=c}var f,h=e,d=e.l9_1-1|0;f=Math.max(d,0),h.l9_1=f,r=ge()}else{var p;e:{var y=n.u7_1;try{if(y.v7_1.h(y))throw Le("runLocked: recursion lock error");y.v7_1.g(y);var v=e.p9_1.e1(t),m=null==v?null:v.s9_1,g=null==m?0:m,b=e.p9_1.e1(t);if(null==b);else{var w,_=b,E=g-1|0;w=Math.max(E,0),_.s9_1=w}var O,S=e,k=e.l9_1-1|0;O=Math.max(k,0),S.l9_1=O,p=ge();break e}finally{y.v7_1.a3(y)}}r=p}return r}function B(e){var t=e.n9_1,r=null==t?null:t.getDurationMs();return null==r?0:r}function U(e,t,r){e=e===ke?0:e,this.s9_1=e,this.t9_1=t,this.u9_1=r}function G(){ve=this,this.h9_1=new te}function H(){return null==ve&&new G,ve}function V(e,t){var r;H(),t=t===ke?null:t,this.i9_1=e,this.j9_1=t,this.k9_1=0,this.l9_1=0,this.m9_1=!1,this.n9_1=null,this.o9_1=new Z,r=_e(),this.p9_1=r;var n=this.j9_1,i=null==n?null:n.experimentalFlags;this.q9_1=null==i?null:i.experimentalEmitZeroProgressAfterTimeMs;var o,a,u,c,s,l=this.j9_1,f=null==l?null:l.intervalTaskFactory;a=null==f?null:f.create((u=this,(c=function(){return u.process(),ge()}).callableName="process",c),100),s=null==a?null:new X(a),o=s,this.r9_1=o}function q(e){e=e===ke?null:e,this.experimentalEmitZeroProgressAfterTimeMs=e}function Y(e,t){e=e===ke?null:e,t=t===ke?null:t,this.intervalTaskFactory=e,this.experimentalFlags=t}function W(){this.da_1=null,this.ea_1=null,this.fa_1=null}function z(e){e=e===ke?null:e,this.ga_1=e}function K(e){e=e===ke?null:e,this.ha_1=e}function $(e){e=e===ke?null:e,this.ia_1=e}function Z(){var e;e=De(),this.y9_1=e}function X(e){this.v9_1=e,this.w9_1=!1}function J(e){var t;e=e===ke?null:e,this.o8_1=e,t=De(),this.p8_1=t}function Q(){me=this,this.t7_1=!1}function ee(){return null==me&&new Q,me}function te(){ee(),this.u7_1=new re}function re(){var e;e=De(),this.v7_1=e}var ne,ie,oe,ae,ue,ce,se,le,fe,he,de,pe,ye,ve,me,ge=t.$_$.h,be=t.$_$.a1,we=t.$_$.j,_e=t.$_$.c,Ee=t.$_$.m,Oe=t.$_$.u,Se=t.$_$.t,ke=t.$_$.b1,Te=t.$_$.v,Re=t.$_$.n,xe=t.$_$.k,Pe=t.$_$.b,je=t.$_$.o,Ae=t.$_$.r,Le=t.$_$.f,Ie=t.$_$.g,De=t.$_$.d,Ne=t.$_$.p,Me=t.$_$.z,Ce=t.$_$.s,Fe=t.$_$.w,Be=t.$_$.x,Ue=t.$_$.y,Ge=t.$_$.e,He=t.$_$.a,Ve=t.$_$.i,qe=t.$_$.l,Ye=t.$_$.q;return Te(n,"Companion",Se),Te(o,"BufferGoalManager",Re),Te(a,"BufferGoalManagerFlags",Re),Te(u,"BufferGoalManagerProps",Re),Te(c,"BufferGoalRule",Ae),Te(s,"SkippableFragment",Re),Te(l,"BufferGoalRuleProps",Re),Te(h,"WatchedTime",Re),Te(d,"CurrentTime",Re),Te(p,"GetBufferGoalProps",Re),Te(y,"Rules",Re),Te(v,"SkippableFragmentsRule",Re,ke,[c]),Te(m,"WatchedTimeRule",Re,ke,[c]),Te(g,"Companion",Se),Te(w,"BandwidthEstimator",Re),Te(_,"EWMA",Re),Te(E,"Companion",Se),Te(S,"EwmaBandwidthEstimatorV2",Re),Te(k,"HalfLife",Re),Te(T,"Result",Re),Te(R,"TtfbEstimate",Re),Te(x,"Companion",Se),Te(j,"TtfbEstimateSource",Re),Te(I,"TtfbEstimator",Re),Te(D,"TtfbEstimatorDebugInfo",Re),Te(N,"BandwidthInfo",Re),Te(U,"FetcherInfo",Re),Te(G,"Companion",Se),Te(V,"FetcherProgressAccumulator",Re),Te(q,"FetcherProgressAccumulatorExperimentalFlags",Re),Te(Y,"FetcherProgressAccumulatorParams",Re),Te(W,"SingleListenerFetcher",Re),Te(z,"DefaultBuffer",Re),Te(K,"DisableDynamicBuffer",Re),Te($,"LowBufferBeforeStart",Re),Te(Z,"EventEmitter",Re),Te(X,"IntervalTaskWithState",Re),Te(J,"Signal",Re),Te(Q,"Companion",Se),Te(te,"Mutex",Re),Te(re,"PlatformMutex",Re),Oe(o).getBufferGoal=function(e){var t=this.u6_1,r=null==t?null:t.defaultBuffer,n=null==r?null:r.getValue(),o=null==n?i().x6_1:n,a=this.u6_1,u=null==a?null:a.disableDynamicBuffer;if(!0===(null==u?null:u.getValue()))return o;var c=null==e?null:e.watchedTime,s=null==c?null:c.getValue(),f=null==e?null:e.currentTime,h=new l(s,null==f?null:f.getValue(),this.u6_1),d=function(e,t){for(var r=xe(e.f1()).b();r.c();){var n,i=r.d(),o=e.e1(i);if(null==o)n=null;else{for(var a=Pe(),u=Ee(o);u.c();){var c=u.d(),s=c.getBufferGoal(t);null==s||(a.g(s),ge())}n=a}var l,f=n;if(null==f)l=null;else{var h,d=f.b();if(d.c()){var p=d.d();if(d.c()){var y=p;do{var v=d.d(),m=v;je(y,m)>0&&(p=v,y=m)}while(d.c());h=p}else h=p}else h=null;l=h}var g=l;if(null!=g)return g}return null}(this.w6_1,h);return null==d?o:d},Oe(o).setSkippableFragments=function(e){this.v6_1.z6(e)},Oe(o).getSkippableFragments=function(){return this.v6_1.a7()},Oe(a).b7=function(){return this.disableDynamicBuffer},Oe(a).c7=function(){return this.lowBufferBeforeStart},Oe(a).d7=function(){return this.defaultBuffer},Oe(u).e7=function(){return this.skippableFragments},Oe(u).f7=function(){return this.flags},Oe(u).g7=function(){return this.rules},Oe(s).i7=function(){return this.startTime},Oe(s).j7=function(){return this.endTime},Oe(s).k7=function(){return this.autoSkip},Oe(l).l7=function(){return this.watchedTime},Oe(l).m7=function(){return this.currentTime},Oe(l).f7=function(){return this.flags},Oe(h).getValue=function(){return this.n7_1},Oe(d).getValue=function(){return this.o7_1},Oe(p).l7=function(){return this.watchedTime},Oe(p).m7=function(){return this.currentTime},Oe(y).p7=function(){return this.priority},Oe(y).g7=function(){return this.rules},Oe(v).h7=function(e){var t,r,n,i,o=null==e?null:e.currentTime,a=null==o?0:o,u=this.y6_1;if(null==u)return null;e:{for(var c=Ee(u);c.c();){var s=c.d();if(s.startTime<=a&&a<s.endTime){r=s;break e}}r=null}if(null!=(t=r))return a-t.startTime<f()?ae:ue;e:{for(var l=Ee(u);l.c();){var h=l.d();if(a<h.startTime){i=h;break e}}i=null}return null!=(n=i)?n.startTime-a+ce:null},Oe(v).z6=function(e){this.y6_1=e},Oe(v).a7=function(){return this.y6_1},Oe(m).h7=function(e){var t=null==e?null:e.watchedTime,r=null==t?0:t,n=null==e?null:e.flags,i=null==n?null:n.lowBufferBeforeStart;return!0===(null==i?null:i.getValue())&&r<=0?se:r<f()?oe:null},Oe(g).s7=function(e){var t=this.q7_1;if(null!=t)return t;var r=this.r7_1;if(ee().t7_1){var n=b().q7_1;if(null!=n)return n;var i=new w(e);return b().q7_1=i,i}var o=r.u7_1;try{if(o.v7_1.h(o))throw Le("runLocked: recursion lock error");o.v7_1.g(o);var a=b().q7_1;if(null!=a)return a;var u=new w(e);return b().q7_1=u,u}finally{o.v7_1.a3(o)}},Oe(g).getInstance=function(e,t){var r;return e===ke?(Ie(),r=NaN):r=e,e=r,this.s7(e)},Oe(w).appendFetcher=function(e){this.w7_1.g(e),e.addProgressListener(this.y7_1)},Oe(w).removeFetcher=function(e){this.w7_1.a3(e),e.removeProgressListener(this.y7_1)},Oe(w).sample=function(e,t){return this.x7_1.sample(e,t,!1,pe,(he||(he=!0,le=new k(5,.45)),le))},Oe(w).getBandwidthEstimate=function(){return this.x7_1.getBandwidthEstimate()},Oe(w).hasGoodEstimate=function(){return this.x7_1.hasGoodEstimate()},Oe(w).setDefaultEstimate=function(e){this.x7_1.setDefaultEstimate(e)},Oe(w).addListener=function(e){this.x7_1.addListener(e)},Oe(w).removeListener=function(e){this.x7_1.removeListener(e)},Oe(w).removeAllListeners=function(){this.x7_1.removeAllListeners()},Oe(w).destroy=function(){for(var e=this.w7_1.b();e.c();)e.d().removeProgressListener(this.y7_1)},Oe(_).d8=function(e,t){var r=function(e,t,r){var n,i=e.z7_1;return n=Math.pow(i,t),r*(1-n)+n*e.a8_1}(this,e,t);Me(r)||(this.a8_1=r,this.b8_1=this.b8_1+e)},Oe(_).e8=function(){var e=this.z7_1,t=this.b8_1,r=1-Math.pow(e,t);return this.a8_1/r},Oe(_).c8=function(e){var t,r=Math.log(.5)/e;t=Math.exp(r),this.z7_1=t},Oe(S).n8=function(e,t,r,n,i){if(e<=0)return new T(ke,"Sample ["+Fe(Ce(t))+"]/["+Fe(Ce(e))+"] not applied. Reason: durationMs <= 0");if(t<(r?2e3:n))return new T(ke,"Sample ["+Fe(Ce(t))+"]/["+Fe(Ce(e))+"] not applied. Reason: too small sample. Min length = "+Fe(r?new Be(2e3,0):Ce(n)));var o=i;!function(e,t){e.j8_1.c8(t.fast),e.k8_1.c8(t.slow)}(this,null==o?r?O().g8_1:O().f8_1:o);var a=8*t/(e/1e3),u=this.i8_1?.1:e/1e3;return this.l8_1=this.l8_1+t,this.j8_1.d8(u,a),this.k8_1.d8(u,a),this.m8_1.q8(this.getBandwidthEstimate()),new T("ok")},Oe(S).sample=function(e,t,r,n,i,o){return r=r!==ke&&r,n=n===ke?16e3:n,i=i===ke?null:i,this.n8(e,t,r,n,i)},Oe(S).getBandwidthEstimate=function(){return this.hasGoodEstimate()?(t=(e=this).j8_1.e8(),r=e.k8_1.e8(),Math.min(t,r)):this.h8_1;var e,t,r},Oe(S).hasGoodEstimate=function(){return this.l8_1>=128e3},Oe(S).setDefaultEstimate=function(e){this.h8_1=e},Oe(S).addListener=function(e){this.m8_1.r8(e)},Oe(S).removeListener=function(e){this.m8_1.s8(e)},Oe(S).removeAllListeners=function(){this.m8_1.h4()},Oe(k).t8=function(){return this.slow},Oe(k).u8=function(){return this.fast},Oe(T).v8=function(){return this.okMessage},Oe(T).w8=function(){return this.errorMessage},Oe(R).u=function(){return this.value},Oe(R).x8=function(){return this.source},Oe(x).y8=function(){return this.MAX},Oe(x).z8=function(){return this.MIN},Oe(x).a9=function(){return this.DEFAULT},Oe(I).appendFetcher=function(e){var t,r;e.addRequestTtfbListener((t=this,(r=function(e){return A(t,e),ge()}).callableName="handleTtfb",r))},Oe(I).removeFetcher=function(e){var t,r;e.removeRequestTtfbListener((t=this,(r=function(e){return A(t,e),ge()}).callableName="handleTtfb",r))},Oe(I).getMinTtfbEstimate=function(e){if(!this.hasGoodEstimate())return e;var t=this.b9_1.b();if(!t.c())throw Ge();for(var r=t.d();t.c();){var n=t.d(),i=r;r=Math.min(i,n)}var o=r;return P(),new R(o,"min")},Oe(I).getTtfbEstimate=function(e){if(!this.hasGoodEstimate())return e;var t=L(this);return P(),new R(t,"max")},Oe(I).hasGoodEstimate=function(){return this.b9_1.l1_1>1},Oe(I).getDebugInfo=function(){var e=this.hasGoodEstimate(),t=L(this),r=this.b9_1;return new D(e,t,Ve(r))},Oe(D).c9=function(){return this.hasGoodEstimate},Oe(D).u=function(){return this.value},Oe(D).d9=function(){return this.history},Oe(N).e9=function(){return this.durationMs},Oe(N).f9=function(){return this.sizeBytes},Oe(N).g9=function(){return this.isLowLatency},Oe(V).appendFetcher=function(e){var t,r,n,i,o,a=H().h9_1;if(ee().t7_1){var u=(i=this,o=e,function(){return C(i,o),ge()}),c=new U(ke,u,function(e,t){return function(){return F(e,t),ge()}}(this,e));this.p9_1.o2(e,c),e.addProgressListener((r=this,(n=function(e){return M(r,e),ge()}).callableName="handleProgress",n)),e.addResponseStartListener(c.t9_1),e.addResponseEndListener(c.u9_1),t=ge()}else{var s;e:{var l=a.u7_1;try{if(l.v7_1.h(l))throw Le("runLocked: recursion lock error");l.v7_1.g(l);var f=function(e,t){return function(){return C(e,t),ge()}}(this,e),h=new U(ke,f,function(e,t){return function(){return F(e,t),ge()}}(this,e));this.p9_1.o2(e,h),e.addProgressListener(function(e){var t=function(t){return M(e,t),ge()};return t.callableName="handleProgress",t}(this)),e.addResponseStartListener(h.t9_1),e.addResponseEndListener(h.u9_1),s=ge();break e}finally{l.v7_1.a3(l)}}t=s}return t},Oe(V).removeFetcher=function(e){var t,r,n,i=H().h9_1;if(ee().t7_1){var o=this.p9_1.n3(e);if(null==o);else{var a,u=this.l9_1-o.s9_1|0;a=Math.max(u,0),this.l9_1=a,e.removeProgressListener((r=this,(n=function(e){return M(r,e),ge()}).callableName="handleProgress",n)),e.removeResponseStartListener(o.t9_1),e.removeResponseEndListener(o.u9_1),ge()}t=ge()}else{var c;e:{var s=i.u7_1;try{if(s.v7_1.h(s))throw Le("runLocked: recursion lock error");s.v7_1.g(s);var l=this.p9_1.n3(e);if(null==l);else{var f,h=this.l9_1-l.s9_1|0;f=Math.max(h,0),this.l9_1=f,e.removeProgressListener(function(e){var t=function(t){return M(e,t),ge()};return t.callableName="handleProgress",t}(this)),e.removeResponseStartListener(l.t9_1),e.removeResponseEndListener(l.u9_1),ge()}c=ge();break e}finally{s.v7_1.a3(s)}}t=c}return t},Oe(V).destroy=function(){var e,t=H().h9_1;if(ee().t7_1){var r=this.r9_1;null==r||r.stop();for(var n=qe(this.p9_1.f1()).b();n.c();){var i=n.d();this.removeFetcher(i)}e=ge()}else{var o;e:{var a=t.u7_1;try{if(a.v7_1.h(a))throw Le("runLocked: recursion lock error");a.v7_1.g(a);var u=this.r9_1;null==u||u.stop();for(var c=qe(this.p9_1.f1()).b();c.c();){var s=c.d();this.removeFetcher(s)}o=ge();break e}finally{a.v7_1.a3(a)}}e=o}return e},Oe(V).process=function(){var e,t=H().h9_1;if(ee().t7_1){if(!this.m9_1)return ge();if(0===this.l9_1&&0===this.k9_1){this.m9_1=!1,this.n9_1=null;var r=this.r9_1;return null==r||r.stop(),ge()}var n=this.k9_1;if(0===n&&!(null!=this.q9_1&&this.q9_1<B(this)))return ge();this.k9_1=0;var i=B(this);this.n9_1=this.i9_1.create(),this.o9_1.z9(new N(i,n,!1)),e=ge()}else{var o;e:{var a=t.u7_1;try{if(a.v7_1.h(a))throw Le("runLocked: recursion lock error");if(a.v7_1.g(a),!this.m9_1)return ge();if(0===this.l9_1&&0===this.k9_1){this.m9_1=!1,this.n9_1=null;var u=this.r9_1;return null==u||u.stop(),ge()}var c=this.k9_1;if(0===c&&!(null!=this.q9_1&&this.q9_1<B(this)))return ge();this.k9_1=0;var s=B(this);this.n9_1=this.i9_1.create(),this.o9_1.z9(new N(s,c,!1)),o=ge();break e}finally{a.v7_1.a3(a)}}e=o}return e},Oe(V).addProgressListener=function(e){var t,r=H().h9_1;if(ee().t7_1)this.o9_1.r8(e),t=ge();else{var n;e:{var i=r.u7_1;try{if(i.v7_1.h(i))throw Le("runLocked: recursion lock error");i.v7_1.g(i),this.o9_1.r8(e),n=ge();break e}finally{i.v7_1.a3(i)}}t=n}return t},Oe(V).removeProgressListener=function(e){var t,r=H().h9_1;if(ee().t7_1)this.o9_1.s8(e),t=ge();else{var n;e:{var i=r.u7_1;try{if(i.v7_1.h(i))throw Le("runLocked: recursion lock error");i.v7_1.g(i),this.o9_1.s8(e),n=ge();break e}finally{i.v7_1.a3(i)}}t=n}return t},Oe(q).aa=function(){return this.experimentalEmitZeroProgressAfterTimeMs},Oe(Y).ba=function(){return this.intervalTaskFactory},Oe(Y).ca=function(){return this.experimentalFlags},Oe(W).responseStart=function(){var e=this.da_1;null==e||e()},Oe(W).responseEnd=function(){var e=this.ea_1;null==e||e()},Oe(W).responseProgress=function(e){var t=this.fa_1;null==t||t(e)},Oe(W).addResponseStartListener=function(e){null==this.da_1&&(this.da_1=e)},Oe(W).removeResponseStartListener=function(e){this.da_1=null},Oe(W).addResponseEndListener=function(e){null==this.ea_1&&(this.ea_1=e)},Oe(W).removeResponseEndListener=function(e){this.ea_1=null},Oe(W).addProgressListener=function(e){null==this.fa_1&&(this.fa_1=e)},Oe(W).removeProgressListener=function(e){this.fa_1=null},Oe(z).getValue=function(){var e=this.ga_1;return null==e?30:e},Oe(K).getValue=function(){var e=this.ha_1;return null!=e&&e},Oe($).getValue=function(){var e=this.ia_1;return null!=e&&e},Oe(Z).r8=function(e){this.y9_1.g(e)},Oe(Z).s8=function(e){this.y9_1.a3(e)},Oe(Z).z9=function(e){for(var t=this.y9_1.b();t.c();)t.d()(e)},Oe(X).start=function(){this.v9_1.start(),this.w9_1=!0},Oe(X).stop=function(){this.v9_1.stop(),this.w9_1=!1},Oe(X).x9=function(){return this.w9_1},Oe(J).r8=function(e){this.p8_1.g(e)},Oe(J).s8=function(e){this.p8_1.a3(e)},Oe(J).h4=function(){this.p8_1.h4()},Oe(J).q8=function(e){if(Ye(this.o8_1,e))return ge();this.o8_1=e;for(var t=this.p8_1.b();t.c();)t.d()(e)},Oe(v).getBufferGoal=r,Oe(m).getBufferGoal=r,ie=15,oe=15,ae=3,ue=3,ce=5,se=5,pe=2e3,function(e){var t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={});(f=r.bgm||(r.bgm={})).BufferGoalManager=o,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).BufferGoalManagerFlags=a,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).BufferGoalManagerProps=u;var n,i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),f=(r=c.multiplatform||(c.multiplatform={})).bgm||(r.bgm={});t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).SkippableFragment=s,f.BufferGoalRuleProps=l,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).WatchedTime=h,f.CurrentTime=d,f.GetBufferGoalProps=p,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(f=r.bgm||(r.bgm={})).Rules=y,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).BandwidthEstimator=w,Ne(n.BandwidthEstimator,"Companion",b),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).EwmaBandwidthEstimatorV2=S,n.HalfLife=k,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).Result=T,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimate=R,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimateSource=j,Ne(n.TtfbEstimateSource,"Companion",P),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimator=I,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(n=r.estimate||(r.estimate={})).TtfbEstimatorDebugInfo=D,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).BandwidthInfo=N,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).FetcherProgressAccumulator=V,Ne(v.FetcherProgressAccumulator,"Companion",H),t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).FetcherProgressAccumulatorExperimentalFlags=q,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).FetcherProgressAccumulatorParams=Y,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={}),(v=r.fetcher||(r.fetcher={})).SingleListenerFetcher=W,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).DefaultBuffer=z,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).DisableDynamicBuffer=K,t=(i=e.ru||(e.ru={})).yandex||(i.yandex={}),((r=(c=t.videoplayer||(t.videoplayer={})).multiplatform||(c.multiplatform={})).flags||(r.flags={})).LowBufferBeforeStart=$,i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={});var v=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={});i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),v=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),v=(r=c.multiplatform||(c.multiplatform={})).fetcher||(r.fetcher={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={}),i=e.ru||(e.ru={}),c=(t=i.yandex||(i.yandex={})).videoplayer||(t.videoplayer={}),(r=c.multiplatform||(c.multiplatform={})).utils||(r.utils={})}(e),e})?n.apply(t,i):n)||(e.exports=o)},10060:function(e,t,r){"use strict";function n(e){return e}r.d(t,{y:function(){return n}})},25443:function(e,t,r){"use strict";r(51978)},51978:function(e,t,r){"use strict"},61008:function(e,t){"use strict";function r(e,t){try{return t(e)}catch(r){return e}}t.parse=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var i={},a=t||{},u=e.split(o),c=a.decode||n,s=0;s<u.length;s++){var l=u[s],f=l.indexOf("=");if(!(f<0)){var h=l.substr(0,f).trim(),d=l.substr(++f,l.length).trim();'"'==d[0]&&(d=d.slice(1,-1)),void 0==i[h]&&(i[h]=r(d,c))}}return i},t.serialize=function(e,t,r){var n=r||{},o=n.encode||i;if("function"!==typeof o)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");var u=o(t);if(u&&!a.test(u))throw new TypeError("argument val is invalid");var c=e+"="+u;if(null!=n.maxAge){var s=n.maxAge-0;if(isNaN(s))throw new Error("maxAge should be a Number");c+="; Max-Age="+Math.floor(s)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");c+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");c+="; Path="+n.path}if(n.expires){if("function"!==typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(c+="; HttpOnly"),n.secure&&(c+="; Secure"),n.sameSite)switch("string"===typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}return c};var n=decodeURIComponent,i=encodeURIComponent,o=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},7507:function(e){e.exports=function(e){e||(e=window);var t=e.navigator.userAgent,r=t.indexOf("MSIE ");if(r>0)return parseInt(t.substring(r+5,t.indexOf(".",r)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},7088:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.hasCookies=function(){var e=new l;try{e.setItem("__test","1");var t=e.getItem("__test");return e.removeItem("__test"),"1"===t}catch(r){return!1}};var a,u=r(61008),c=(a=u)&&a.__esModule?a:{default:a},s="lS_",l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.cookieOptions=n({path:"/"},t),s=void 0===t.prefix?s:t.prefix}return o(e,[{key:"getItem",value:function(e){var t=c.default.parse(document.cookie);return t&&t.hasOwnProperty(s+e)?t[s+e]:null}},{key:"setItem",value:function(e,t){return document.cookie=c.default.serialize(s+e,t,this.cookieOptions),t}},{key:"removeItem",value:function(e){var t=n({},this.cookieOptions,{maxAge:-1});return document.cookie=c.default.serialize(s+e,"",t),null}},{key:"clear",value:function(){var e=c.default.parse(document.cookie);for(var t in e)0===t.indexOf(s)&&this.removeItem(t.substr(s.length));return null}}]),e}();t.default=l},25544:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data={}}return r(e,[{key:"getItem",value:function(e){return this._data.hasOwnProperty(e)?this._data[e]:null}},{key:"setItem",value:function(e,t){return this._data[e]=String(t)}},{key:"removeItem",value:function(e){return delete this._data[e]}},{key:"clear",value:function(){return this._data={}}}]),e}();t.default=n},80604:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=n(r(518)),o=n(r(7088)),a=n(r(25544)),u=null;u=(0,i.default)("localStorage")?window.localStorage:(0,i.default)("sessionStorage")?window.sessionStorage:(0,i.default)("cookieStorage")?new o.default:new a.default,t.ZP=u,i.default,o.default,a.default},518:function(e,t,r){"use strict";function n(e){try{var t=window[e];return t.setItem("__test","1"),t.removeItem("__test"),!0}catch(r){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"localStorage",t=String(e).replace(/storage$/i,"").toLowerCase();if("local"===t)return n("localStorage");if("session"===t)return n("sessionStorage");if("cookie"===t)return(0,i.hasCookies)();if("memory"===t)return!0;throw new Error("Storage method `"+e+"` is not available.\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.")};var i=r(7088)},93559:function(e){"use strict";e.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e})},14675:function(e,t){function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o,a,u;!function(r,n){"object"==i(t)?n(t):(a=[t],void 0===(u="function"===typeof(o=n)?o.apply(t,a):o)||(e.exports=u))}(0,(function(e){"use strict";function t(e,t){function i(t){for(var n=[];e[f];)if(e.charCodeAt(f)==p){if(e.charCodeAt(f+1)===m){var i=f+2;if(f=e.indexOf(">",f),-1==e.substring(i,f).indexOf(t)){var o=e.substring(0,f).split("\n");throw new Error("Unexpected close tag\nLine: "+(o.length-1)+"\nColumn: "+(o[o.length-1].length+1)+"\nChar: "+e[f])}return f+1&&(f+=1),n}if(e.charCodeAt(f+1)===g){if(e.charCodeAt(f+2)==v){for(var u=f;-1!==f&&(e.charCodeAt(f)!==y||e.charCodeAt(f-1)!=v||e.charCodeAt(f-2)!=v||-1==f);)f=e.indexOf(">",f+1);-1===f&&(f=e.length),h&&n.push(e.substring(u,f+1))}else{if(e.charCodeAt(f+2)===_&&e.charCodeAt(f+8)===_&&"cdata"===e.substr(f+3,5).toLowerCase()){var s=e.indexOf("]]>",f);-1==s?(n.push(e.substr(f+9)),f=e.length):(n.push(e.substring(f+9,s)),f=s+3);continue}var l=f+1;f+=2;for(var b=!1;(e.charCodeAt(f)!==y||!0===b)&&e[f];)e.charCodeAt(f)===_?b=!0:!0===b&&e.charCodeAt(f)===E&&(b=!1),f++;n.push(e.substring(l,f))}f++;continue}var w=c();n.push(w),"?"===w.tagName[0]&&(n.push.apply(n,r(w.children)),w.children=[])}else{var O=a();if(d)O.length>0&&n.push(O);else{var S=O.trim();S.length>0&&n.push(S)}f++}return n}function a(){var t=f;return-2===(f=e.indexOf("<",f)-1)&&(f=e.length),e.slice(t,f+1)}function u(){for(var t=f;-1==="\r\n\t>/= ".indexOf(e[f])&&e[f];)f++;return e.slice(t,f)}function c(){f++;for(var t=u(),r={},n=[];e.charCodeAt(f)!==y&&e[f];){var o=e.charCodeAt(f);if(o>64&&o<91||o>96&&o<123){for(var a=u(),c=e.charCodeAt(f);c&&c!==b&&c!==w&&!(c>64&&c<91||c>96&&c<123)&&c!==y;)f++,c=e.charCodeAt(f);if(c===b||c===w){var l=s();if(-1===f)return{tagName:t,attributes:r,children:n}}else l=null,f--;r[a]=l}f++}if(e.charCodeAt(f-1)!==m)if("script"==t){var h=f+1;f=e.indexOf("<\/script>",f),n=[e.slice(h,f)],f+=9}else"style"==t?(h=f+1,f=e.indexOf("</style>",f),n=[e.slice(h,f)],f+=8):-1===O.indexOf(t)?(f++,n=i(t)):f++;else f++;return{tagName:t,attributes:r,children:n}}function s(){var t=e[f],r=f+1;return f=e.indexOf(t,r),e.slice(r,f)}var l,f=(t=t||{}).pos||0,h=!!t.keepComments,d=!!t.keepWhitespace,p="<".charCodeAt(0),y=">".charCodeAt(0),v="-".charCodeAt(0),m="/".charCodeAt(0),g="!".charCodeAt(0),b="'".charCodeAt(0),w='"'.charCodeAt(0),_="[".charCodeAt(0),E="]".charCodeAt(0),O=t.noChildNodes||["img","br","input","meta","link","hr"],S=null;if(void 0!==t.attrValue)for(t.attrName=t.attrName||"id",S=[];-1!==(void 0,l=new RegExp("\\s"+t.attrName+"\\s*=['\"]"+t.attrValue+"['\"]").exec(e),f=l?l.index:-1);)-1!==(f=e.lastIndexOf("<",f))&&S.push(c()),e=e.substr(f),f=0;else S=t.parseNode?c():i("");return t.filter&&(S=o(S,t.filter)),t.simplify?n(Array.isArray(S)?S:[S]):(t.setPos&&(S.pos=f),S)}function n(e){var t={};if(!e.length)return"";if(1===e.length&&"string"==typeof e[0])return e[0];for(var r in e.forEach((function(e){if("object"==i(e)){t[e.tagName]||(t[e.tagName]=[]);var r=n(e.children);t[e.tagName].push(r),Object.keys(e.attributes).length&&"string"!=typeof r&&(r._attributes=e.attributes)}})),t)1==t[r].length&&(t[r]=t[r][0]);return t}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=[];return e.forEach((function(e,u){if("object"==i(e)&&t(e,u,r,n)&&a.push(e),e.children){var c=o(e.children,t,r+1,(n?n+".":"")+u+"."+e.tagName);a=a.concat(c)}})),a}e.filter=o,e.getElementById=function(e,r,n){var i=t(e,{attrValue:r});return n?tXml.simplify(i):i[0]},e.getElementsByClassName=function(e,r,n){var i=t(e,{attrName:"class",attrValue:"[a-zA-Z0-9- ]*"+r+"[a-zA-Z0-9- ]*"});return n?tXml.simplify(i):i},e.parse=t,e.simplify=n,e.simplifyLostLess=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return t.length?1===t.length&&"string"==typeof t[0]?Object.keys(r).length?{_attributes:r,value:t[0]}:t[0]:(t.forEach((function(t){if("object"==i(t)){n[t.tagName]||(n[t.tagName]=[]);var r=e(t.children||[],t.attributes);n[t.tagName].push(r),Object.keys(t.attributes).length&&(r._attributes=t.attributes)}})),n):n},e.stringify=function(e){function t(e){if(e)for(var t=0;t<e.length;t++)"string"==typeof e[t]?n+=e[t].trim():r(e[t])}function r(e){for(var r in n+="<"+e.tagName,e.attributes)null===e.attributes[r]?n+=" "+r:-1===e.attributes[r].indexOf('"')?n+=" "+r+'="'+e.attributes[r].trim()+'"':n+=" "+r+"='"+e.attributes[r].trim()+"'";"?"!==e.tagName[0]?(n+=">",t(e.children),n+="</"+e.tagName+">"):n+="?>"}var n="";return t(e),n},e.toContentString=function e(t){if(Array.isArray(t)){var r="";return t.forEach((function(t){r=(r+=" "+e(t)).trim()})),r}return"object"==i(t)?e(t.children):" "+t},Object.defineProperty(e,"__esModule",{value:!0})}))},81917:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="object"===("undefined"===typeof self?"undefined":n(self))?self.URL:window.URL,o=!1;try{var a=new i("b","http://a");a.pathname="c%20d",o="http://a/c%20d"===a.href}catch(c){}if(o)e.exports=i;else{var u=r(12756).J;u.createObjectURL=function(e){return i.createObjectURL(e)},u.revokeObjectURL=function(e){return i.revokeObjectURL(e)},e.exports=u}},83361:function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){for(;c.length;)c[0](),c.shift()}function n(e){this.a=s,this.b=void 0,this.f=[];var r=this;try{e((function(e){!function e(r,n){if(r.a==s){if(n==r)throw new TypeError;var i=!1;try{var u=n&&n.then;if(null!=n&&"object"===t(n)&&"function"===typeof u)return void u.call(n,(function(t){i||e(r,t),i=!0}),(function(e){i||o(r,e),i=!0}))}catch(c){return void(i||o(r,c))}r.a=0,r.b=n,a(r)}}(r,e)}),(function(e){o(r,e)}))}catch(n){o(r,n)}}function i(e){return new n((function(t){t(e)}))}function o(e,t){if(e.a==s){if(t==e)throw new TypeError;e.a=1,e.b=t,a(e)}}function a(e){!function(e){c.push(e),1==c.length&&u()}((function(){if(e.a!=s)for(;e.f.length;){var t=(i=e.f.shift())[0],r=i[1],n=i[2],i=i[3];try{0==e.a?n("function"===typeof t?t.call(void 0,e.b):e.b):1==e.a&&("function"===typeof r?n(r.call(void 0,e.b)):i(e.b))}catch(o){i(o)}}}))}var u,c=[];u=function(){setTimeout(r)};var s=2;n.prototype.g=function(e){return this.c(void 0,e)},n.prototype.c=function(e,t){var r=this;return new n((function(n,i){r.f.push([e,t,n,i]),a(r)}))},n.resolve=i,n.reject=function(e){return new n((function(t,r){r(e)}))},n.race=function(e){return new n((function(t,r){for(var n=0;n<e.length;n+=1)i(e[n]).c(t,r)}))},n.all=function(e){return new n((function(t,r){function n(r){return function(n){a[r]=n,(o+=1)==e.length&&t(a)}}var o=0,a=[];0==e.length&&t(a);for(var u=0;u<e.length;u+=1)i(e[u]).c(n(u),r)}))},n.prototype.then=n.prototype.c,n.prototype.catch=n.prototype.g,e.exports=("object"===("undefined"===typeof self?"undefined":t(self))?self.Promise:window.Promise)||n},40313:function(e,t){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s={};try{new(function(e){function t(){return i(this,t),r.apply(this,arguments)}!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(t,e);var r=a(t);return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}((new EventTarget).constructor)),s.EventTarget=(new EventTarget).constructor}catch(EventTarget){!function(e,t){function r(){t.set(this,o(null))}function n(e,t,r){a(e,t,{configurable:!0,writable:!0,value:r})}function i(e){var t=e.options;return t&&t.once&&e.target.removeEventListener(this.type,e.listener),"function"===typeof e.listener?e.listener.call(e.target,this):e.listener.handleEvent(this),this._stopImmediatePropagationFlag}var o=e.create,a=e.defineProperty,u=r.prototype;n(u,"addEventListener",(function(e,r,n){for(var i=t.get(this),o=i[e]||(i[e]=[]),a=0,u=o.length;a<u;a++)if(o[a].listener===r)return;o.push({target:this,listener:r,options:n})})),n(u,"dispatchEvent",(function(e){var r=t.get(this)[e.type];return r&&(n(e,"target",this),n(e,"currentTarget",this),r.slice(0).some(i,e),delete e.currentTarget,delete e.target),!0})),n(u,"removeEventListener",(function(e,r){for(var n=t.get(this),i=n[e]||(n[e]=[]),o=0,a=i.length;o<a;o++)if(i[o].listener===r)return void i.splice(o,1)})),s.EventTarget=r}(Object,new WeakMap)}t.Z=s.EventTarget},12756:function(e,t,r){"use strict";function n(e,t,r){throw(r=new TypeError(e)).code=t,r}function i(e){n("Invalid URL: "+e,"ERR_INVALID_URL")}function o(e,t,r,i){r='The "name" ',i="argument",e&&(r+='and "value" ',i+="s"),t<++e&&n(r+i+" must be specified","ERR_MISSING_ARGS")}function a(e,t){var r=0,n={next:function(){return{value:e[r++],done:r>e.length}}};return t&&(n[Symbol.iterator]=function(){return n}),n}function u(e,t){function r(e,t){for(o(1,arguments.length),t=String(t),f=!1,l=y.length;l--;)(d=y[l])[0]==e&&(f?y.splice(l,1):(d[1]=t,f=!0));f||y.push([e,t]),c()}function i(e,t){o(1,arguments.length),y.push([e,String(t)]),c()}function u(){for(d="",l=0;l<y.length;l++)d&&(d+="&"),d+=encodeURIComponent(y[l][0])+"="+encodeURIComponent(y[l][1]);return d.replace(/%20/g,"+")}function c(){t&&(t.search=y.length?"?"+u().replace(/=$/,""):"")}var s,l,f,h,d,p=this,y=[];try{h=!!Symbol.iterator}catch(v){h=!1}if(e)if(e.keys&&e.getAll)e.forEach((function(e,t){i(t,e)}));else if(e.pop)for(l=0;l<e.length;l++)i.apply(0,e[l]);else if("object"==typeof e)for(s in e)r(s,e[s]);else if("string"==typeof e)for("?"==e[0]&&(e=e.substring(1)),f=decodeURIComponent(e).split("&");s=f.shift();)~(l=s.indexOf("="))||(l=s.length),i(s.substring(0,l),s.substring(++l));return p.append=i,p.delete=function(e){for(o(0,arguments.length),l=y.length;l--;)y[l][0]==e&&y.splice(l,1);c()},p.entries=function(){return a(y,h)},p.forEach=function(e){for("function"!=typeof e&&n("Callback must be a function","ERR_INVALID_CALLBACK"),l=0;l<y.length;l++)e(y[l][1],y[l][0])},p.get=function(e){for(o(0,arguments.length),l=0;l<y.length;l++)if(y[l][0]==e)return y[l][1];return null},p.getAll=function(e){for(o(0,arguments.length),d=[],l=0;l<y.length;l++)y[l][0]==e&&d.push(y[l][1]);return d},p.has=function(e){for(o(0,arguments.length),l=0;l<y.length;l++)if(y[l][0]==e)return!0;return!1},p.keys=function(){for(d=[],l=0;l<y.length;l++)d.push(y[l][0]);return a(d,h)},p.set=r,p.sort=function(){for(f=[],d=[],l=0;l<y.length;f.push(y[l++][0]));for(f.sort();s=f.shift();)for(l=0;l<y.length;l++)if(y[l][0]==s){d.push(y.splice(l,1).shift());break}y=d,c()},p.toString=u,p.values=function(){for(d=[],l=0;l<y.length;l++)d.push(y[l][1]);return a(d,h)},h&&(p[Symbol.iterator]=p.entries),p}function c(e,t){function r(e,t,r,n){return n={enumerable:!0},t||(n.set=function(t){null!=t&&(c[e]=String(t),"href"!=e&&"search"!=e||(o=new u(c.search,c)))}),n.get=r||function(){return function(e){return a.href=c.href,a.protocol="http:","protocol"==e||"href"==e||f.test(c.protocol)?c[e]:"origin"==e?f.test(c.protocol)?c[e]:"null":a[e]}(e)},n}var n,o,a=document.createElement("a"),c=document.createElement("a"),s=document.createElement("input"),l=this,f=/(blob|ftp|wss?|https?):/;if(s.type="url",t=String(t||"").trim(),(s.value=t)&&!s.checkValidity())return i(t);if(e=String(e).trim(),s.value=e||0,s.checkValidity())c.href=e;else{if(!t)return i(e);c.href=t,e&&((o=e.match(/^\/+/))&&2==o[0].length?c.href=c.protocol+e:/[?#]/.test(e[0])?c.href+=e:"/"==e[0]||"/"==c.pathname?c.href=c.origin+"/"+e.replace(/^\/+/,""):(n=c.pathname.split("/"),t=e.replace(/^(\.\/)?/,"").split("../"),c.href=c.origin+n.slice(0,Math.max(1,n.length-t.length)).concat(t.pop()).join("/")))}return o=new u(c.search,c),l.toString=l.toJSON=c.toString.bind(c),Object.defineProperties(l,{href:r("href"),protocol:r("protocol"),username:r("username"),password:r("password"),hostname:r("hostname"),host:r("host"),port:r("port"),search:r("search"),hash:r("hash"),pathname:r("pathname"),origin:r("origin",1),searchParams:r("searchParams",1,(function(){return o}))})}r.d(t,{J:function(){return c}})}},n={};e.m=r,e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(r,n){return e.f[n](t,r),r}),[]))},e.u=function(e){return"js/AesCbc.js"},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},e.l=function(r,n,i,o){if(t[r])t[r].push(n);else{var a,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),s=0;s<c.length;s++){var l=c[s];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")=="webpackStreamPlayerJsonp:"+i){a=l;break}}a||(u=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,e.nc&&a.setAttribute("nonce",e.nc),a.setAttribute("data-webpack","webpackStreamPlayerJsonp:"+i),a.src=r),t[r]=[n];var f=function(e,n){a.onerror=a.onload=null,clearTimeout(h);var i=t[r];if(delete t[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(e){return e(n)})),e)return e(n)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=f.bind(null,a.onerror),a.onload=f.bind(null,a.onload),u&&document.head.appendChild(a)}},e.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.p="https://yastatic.net/yandex-video-player-iframe-api-bundles/1.0-12390/",function(){var t={35:0};e.f.j=function(r,n){var i=e.o(t,r)?t[r]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise((function(e,n){i=t[r]=[e,n]}));n.push(i[2]=o);var a=e.p+e.u(r),u=new Error;e.l(a,(function(n){if(e.o(t,r)&&(0!==(i=t[r])&&(t[r]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;u.message="Loading chunk "+r+" failed.\n("+o+": "+a+")",u.name="ChunkLoadError",u.type=o,u.request=a,i[1](u)}}),"chunk-"+r,r)}};var r=function(r,n){var i,o,a=n[0],u=n[1],c=n[2],s=0;if(a.some((function(e){return 0!==t[e]}))){for(i in u)e.o(u,i)&&(e.m[i]=u[i]);if(c)c(e)}for(r&&r(n);s<a.length;s++)o=a[s],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunkwebpackStreamPlayerJsonp=self.webpackChunkwebpackStreamPlayerJsonp||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();e(42521)}();